# Listings Service Configuration
# Copy this file to .env and configure for your environment

# ========================================
# Application Settings
# ========================================
VONDILISTINGS_ENV=development
VONDILISTINGS_LOG_LEVEL=debug
VONDILISTINGS_LOG_FORMAT=json

# ========================================
# Server Ports
# ========================================
# gRPC Internal API
VONDILISTINGS_GRPC_PORT=50051
VONDILISTINGS_GRPC_HOST=0.0.0.0

# HTTP REST API
VONDILISTINGS_HTTP_PORT=8086
VONDILISTINGS_HTTP_HOST=0.0.0.0

# Prometheus Metrics
VONDILISTINGS_METRICS_PORT=9093
VONDILISTINGS_METRICS_HOST=0.0.0.0

# ========================================
# Database Configuration (PostgreSQL)
# ========================================
# Phase 7.4+: ОТДЕЛЬНАЯ БД микросервиса (listings_dev_db в Docker)
# Полная независимость от монолита
VONDILISTINGS_DB_HOST=localhost
VONDILISTINGS_DB_PORT=35434
VONDILISTINGS_DB_USER=listings_user
VONDILISTINGS_DB_PASSWORD=listings_secret
VONDILISTINGS_DB_NAME=listings_dev_db
VONDILISTINGS_DB_SSLMODE=disable

# Connection Pool Settings
VONDILISTINGS_DB_MAX_OPEN_CONNS=25
VONDILISTINGS_DB_MAX_IDLE_CONNS=10
VONDILISTINGS_DB_CONN_MAX_LIFETIME=5m
VONDILISTINGS_DB_CONN_MAX_IDLE_TIME=10m

# ========================================
# Redis Configuration
# ========================================
VONDILISTINGS_REDIS_HOST=localhost
VONDILISTINGS_REDIS_PORT=36380
VONDILISTINGS_REDIS_PASSWORD=redis_password
VONDILISTINGS_REDIS_DB=0

# Redis Connection Pool
VONDILISTINGS_REDIS_POOL_SIZE=10
VONDILISTINGS_REDIS_MIN_IDLE_CONNS=5

# Cache TTL Settings
VONDILISTINGS_CACHE_LISTING_TTL=5m
VONDILISTINGS_CACHE_SEARCH_TTL=2m

# ========================================
# OpenSearch Configuration
# ========================================
VONDILISTINGS_OPENSEARCH_ADDRESSES=http://localhost:9200
VONDILISTINGS_OPENSEARCH_USERNAME=admin
VONDILISTINGS_OPENSEARCH_PASSWORD=admin
VONDILISTINGS_OPENSEARCH_INDEX=marketplace_listings

# ========================================
# MinIO Configuration (S3-compatible storage)
# ========================================
VONDILISTINGS_MINIO_ENDPOINT=localhost:9000
VONDILISTINGS_MINIO_ACCESS_KEY=minioadmin
VONDILISTINGS_MINIO_SECRET_KEY=minioadmin
VONDILISTINGS_MINIO_USE_SSL=false
VONDILISTINGS_MINIO_BUCKET=listings-images

# ========================================
# Auth Service Integration
# ========================================
VONDILISTINGS_AUTH_SERVICE_URL=http://localhost:8081
VONDILISTINGS_AUTH_PUBLIC_KEY_PATH=/path/to/auth/public.pem

# ========================================
# Worker Configuration
# ========================================
VONDILISTINGS_WORKER_ENABLED=true
VONDILISTINGS_WORKER_CONCURRENCY=5
VONDILISTINGS_WORKER_QUEUE_NAME=listings_indexing

# ========================================
# Rate Limiting
# ========================================
VONDILISTINGS_RATE_LIMIT_ENABLED=true
VONDILISTINGS_RATE_LIMIT_RPS=100
VONDILISTINGS_RATE_LIMIT_BURST=200

# ========================================
# Tracing & Monitoring
# ========================================
VONDILISTINGS_TRACING_ENABLED=false
VONDILISTINGS_JAEGER_ENDPOINT=http://localhost:14268/api/traces

# ========================================
# CORS Configuration
# ========================================
VONDILISTINGS_CORS_ALLOWED_ORIGINS=http://localhost:3001,http://localhost:3000
VONDILISTINGS_CORS_ALLOWED_METHODS=GET,POST,PUT,DELETE,OPTIONS
VONDILISTINGS_CORS_ALLOWED_HEADERS=Content-Type,Authorization

# ========================================
# Feature Flags
# ========================================
VONDILISTINGS_FEATURE_ASYNC_INDEXING=true
VONDILISTINGS_FEATURE_IMAGE_OPTIMIZATION=true
VONDILISTINGS_FEATURE_CACHE_ENABLED=true
