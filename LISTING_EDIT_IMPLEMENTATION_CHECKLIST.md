# ‚úÖ –ß–µ–∫–ª–∏—Å—Ç —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –æ–±—ä—è–≤–ª–µ–Ω–∏–π

## üìã –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ

### –ù–µ–æ–±—Ö–æ–¥–∏–º—ã–µ —Ñ–∞–π–ª—ã –¥–ª—è –∏–∑—É—á–µ–Ω–∏—è:
- [ ] `/frontend/svetu/src/app/[locale]/profile/listings/[id]/edit/page.tsx` - —Ç–µ–∫—É—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è
- [ ] `/frontend/svetu/src/app/[locale]/examples/listing-edit-ux/page.tsx` - –ø—Ä–∏–º–µ—Ä—ã UI
- [ ] `/backend/internal/proj/marketplace/handler/listings.go` - API endpoints
- [ ] `/backend/internal/proj/marketplace/handler/images.go` - —Ä–∞–±–æ—Ç–∞ —Å —Ñ–æ—Ç–æ
- [ ] `LISTING_EDIT_ARCHITECTURE.md` - –ø–æ–ª–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### –ó–∞–ø—É—Å–∫ –æ–∫—Ä—É–∂–µ–Ω–∏—è:
```bash
# Frontend
cd /data/hostel-booking-system/frontend/svetu
yarn dev -p 3001

# Backend
cd /data/hostel-booking-system/backend
go run ./cmd/api/main.go

# Swagger –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
cd /data/hostel-booking-system/backend/docs
python3 -m http.server 8888
```

## üéØ –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –¥–ª—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### 1. BasicInfoSection.tsx
- [ ] –ü–æ–ª—è: title, description, price, condition
- [ ] –í–∞–ª–∏–¥–∞—Ü–∏—è –Ω–∞ –ª–µ—Ç—É
- [ ] –°—á–µ—Ç—á–∏–∫–∏ —Å–∏–º–≤–æ–ª–æ–≤
- [ ] –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä SEO –∫–∞—á–µ—Å—Ç–≤–∞ –∑–∞–≥–æ–ª–æ–≤–∫–∞

### 2. ImagesSection.tsx
- [ ] –ó–∞–≥—Ä—É–∑–∫–∞ –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤
- [ ] Drag & drop –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏
- [ ] –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏–µ–º
- [ ] –í—ã–±–æ—Ä –≥–ª–∞–≤–Ω–æ–≥–æ —Ñ–æ—Ç–æ
- [ ] –£–¥–∞–ª–µ–Ω–∏–µ —Ñ–æ—Ç–æ —Å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ–º
- [ ] –ü—Ä–µ–≤—å—é –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
- [ ] –ü—Ä–æ–≥—Ä–µ—Å—Å –∑–∞–≥—Ä—É–∑–∫–∏

### 3. AttributesSection.tsx
- [ ] –ó–∞–≥—Ä—É–∑–∫–∞ –∞—Ç—Ä–∏–±—É—Ç–æ–≤ –ø–æ category_id
- [ ] –†–µ–Ω–¥–µ—Ä–∏–Ω–≥ –ø–æ–ª–µ–π –ø–æ —Ç–∏–ø—É (text, numeric, select, multiselect, boolean)
- [ ] –í–∞–ª–∏–¥–∞—Ü–∏—è –ø–æ –ø—Ä–∞–≤–∏–ª–∞–º –∏–∑ –ë–î
- [ ] –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è
- [ ] –ï–¥–∏–Ω–∏—Ü—ã –∏–∑–º–µ—Ä–µ–Ω–∏—è

### 4. LocationSection.tsx
- [ ] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è LocationPicker
- [ ] –ü–æ–ª—è: city, country, location
- [ ] –ö–∞—Ä—Ç–∞ —Å –º–∞—Ä–∫–µ—Ä–æ–º
- [ ] –ß–µ–∫–±–æ–∫—Å "–ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –Ω–∞ –∫–∞—Ä—Ç–µ"
- [ ] –ì–µ–æ–∫–æ–¥–∏–Ω–≥ –∞–¥—Ä–µ—Å–∞

### 5. PreviewCard.tsx
- [ ] –†–µ–∞–ª—Ç–∞–π–º –ø—Ä–µ–≤—å—é –∫–∞—Ä—Ç–æ—á–∫–∏
- [ ] –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –≤–∏–¥–∞ (–∫–∞—Ä—Ç–æ—á–∫–∞/—Å–ø–∏—Å–æ–∫)
- [ ] –ú–æ–±–∏–ª—å–Ω—ã–π –≤–∏–¥
- [ ] –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –∏–∑–º–µ–Ω–µ–Ω–∏–π

## üîß API –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è

### –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö:
```typescript
// GET /api/v1/marketplace/listings/{id}
const { data } = await apiClient.get(`/api/v1/marketplace/listings/${id}`);
// –í–∫–ª—é—á–∞–µ—Ç: listing, attributes, images, category
```

### –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –æ—Å–Ω–æ–≤–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö:
```typescript
// PUT /api/v1/marketplace/listings/{id}
await apiClient.put(`/api/v1/marketplace/listings/${id}`, {
  title, description, price, condition,
  city, country, location,
  latitude, longitude, show_on_map,
  attributes: [
    { attribute_id: 1, value: "Volkswagen" },
    { attribute_id: 2, value: "Touran" }
  ]
});
```

### –†–∞–±–æ—Ç–∞ —Å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è–º–∏:
```typescript
// –ó–∞–≥—Ä—É–∑–∫–∞
const formData = new FormData();
files.forEach(file => formData.append('file', file));
formData.append('main_image_index', '0');
await apiClient.post(`/api/v1/marketplace/listings/${id}/images`, formData);

// –£–¥–∞–ª–µ–Ω–∏–µ
await apiClient.delete(`/api/v1/marketplace/listings/${id}/images/${imageId}`);

// –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞
await apiClient.put(`/api/v1/marketplace/listings/${id}/images/reorder`, {
  image_ids: [3, 1, 2],
  main_image_id: 3
});
```

## üìù –°–æ—Å—Ç–æ—è–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞

```typescript
interface EditListingState {
  // –î–∞–Ω–Ω—ã–µ
  listing: Listing | null;
  attributes: CategoryAttribute[];
  attributeValues: Record<number, any>;
  images: MarketplaceImage[];
  
  // UI —Å–æ—Å—Ç–æ—è–Ω–∏–µ
  loading: boolean;
  saving: boolean;
  errors: Record<string, string>;
  isDirty: boolean;
  activeTab: 'basic' | 'images' | 'attributes' | 'location';
  
  // –ü—Ä–µ–≤—å—é
  previewMode: 'card' | 'list' | 'mobile';
  showPreview: boolean;
}
```

## üé® UI/UX —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

### –û–±—â–∏–µ:
- [ ] –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π –¥–∏–∑–∞–π–Ω (–º–æ–±–∏–ª—å–Ω—ã–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞)
- [ ] Skeleton loaders –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
- [ ] Toast —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –¥–ª—è –¥–µ–π—Å—Ç–≤–∏–π
- [ ] –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –ø—Ä–∏ —É—Ö–æ–¥–µ —Å –Ω–µ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–º–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è–º–∏
- [ ] –ê–≤—Ç–æ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —á–µ—Ä–Ω–æ–≤–∏–∫–∞ –∫–∞–∂–¥—ã–µ 30 —Å–µ–∫

### –í–∞–ª–∏–¥–∞—Ü–∏—è:
- [ ] –†–µ–∞–ª—Ç–∞–π–º –≤–∞–ª–∏–¥–∞—Ü–∏—è –ø–æ–ª–µ–π
- [ ] –ü–æ–¥—Å–≤–µ—Ç–∫–∞ –æ—à–∏–±–æ–∫
- [ ] Helpful –ø–æ–¥—Å–∫–∞–∑–∫–∏
- [ ] –ü—Ä–æ–≥—Ä–µ—Å—Å –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è:
- [ ] Lazy loading –¥–ª—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
- [ ] Debounce –¥–ª—è –∞–≤—Ç–æ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è
- [ ] –û–ø—Ç–∏–º–∏—Å—Ç–∏—á–Ω—ã–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
- [ ] –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –∫–∞—Ç–µ–≥–æ—Ä–∏–∏

## üöÄ –ü–æ—Ä—è–¥–æ–∫ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### –î–µ–Ω—å 1: –ë–∞–∑–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞
1. –°–æ–∑–¥–∞—Ç—å –ø–∞–ø–∫—É components
2. –†–∞–∑–¥–µ–ª–∏—Ç—å —Ç–µ–∫—É—â–∏–π page.tsx –Ω–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
3. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å —Ç–∞–±—ã –¥–ª—è —Å–µ–∫—Ü–∏–π
4. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å BasicInfoSection

### –î–µ–Ω—å 2: –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
1. –°–æ–∑–¥–∞—Ç—å ImagesSection
2. –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –∑–∞–≥—Ä—É–∑–∫—É —Ñ–∞–π–ª–æ–≤
3. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å drag & drop
4. –î–æ–±–∞–≤–∏—Ç—å —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫—É

### –î–µ–Ω—å 3: –ê—Ç—Ä–∏–±—É—Ç—ã –∏ –ª–æ–∫–∞—Ü–∏—è
1. –°–æ–∑–¥–∞—Ç—å AttributesSection
2. –ó–∞–≥—Ä—É–∑–∫–∞ –∏ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥ –∞—Ç—Ä–∏–±—É—Ç–æ–≤
3. –°–æ–∑–¥–∞—Ç—å LocationSection
4. –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –∫–∞—Ä—Ç—É

### –î–µ–Ω—å 4: –ü—Ä–µ–≤—å—é –∏ —Ñ–∏–Ω–∞–ª–∏–∑–∞—Ü–∏—è
1. –°–æ–∑–¥–∞—Ç—å PreviewCard
2. –î–æ–±–∞–≤–∏—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é
3. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∞–≤—Ç–æ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ
4. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –º–æ–º–µ–Ω—Ç—ã

1. **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**: –í—Å–µ–≥–¥–∞ –ø—Ä–æ–≤–µ—Ä—è—Ç—å –≤–ª–∞–¥–µ–ª—å—Ü–∞ –æ–±—ä—è–≤–ª–µ–Ω–∏—è
2. **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å React.memo –¥–ª—è —Ç—è–∂–µ–ª—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
3. **–î–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å**: ARIA labels –¥–ª—è –≤—Å–µ—Ö –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤
4. **SEO**: –ú–µ—Ç–∞—Ç–µ–≥–∏ –¥–ª—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
5. **–ê–Ω–∞–ª–∏—Ç–∏–∫–∞**: –û—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å –¥–µ–π—Å—Ç–≤–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

## üìä –ú–µ—Ç—Ä–∏–∫–∏ —É—Å–ø–µ—Ö–∞

- [ ] –í—Ä–µ–º—è –∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã < 2 —Å–µ–∫
- [ ] –í—Å–µ –ø–æ–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä—É–µ–º—ã
- [ ] –†–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö
- [ ] –ù–µ—Ç –ø–æ—Ç–µ—Ä–∏ –¥–∞–Ω–Ω—ã—Ö –ø—Ä–∏ —Å–±–æ—è—Ö
- [ ] –ò–Ω—Ç—É–∏—Ç–∏–≤–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å (–±–µ–∑ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏)

## üîó –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏

- –ü—Ä–∏–º–µ—Ä—ã UI: http://localhost:3001/ru/examples/listing-edit-ux
- Swagger: http://localhost:8888/swagger.json
- –¢–µ–∫—É—â–∏–π —Ä–µ–¥–∞–∫—Ç–æ—Ä: http://localhost:3001/ru/profile/listings/35/edit