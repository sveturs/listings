# –û—Ç—á–µ—Ç –æ –ø—Ä–æ–±–ª–µ–º–∞—Ö —Å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º –∞–¥—Ä–µ—Å–æ–≤ —Ç–æ–≤–∞—Ä–æ–≤

## –î–∞—Ç–∞: 2025-07-23

## –†–µ–∑—é–º–µ

–ü–æ—Å–ª–µ –∞–Ω–∞–ª–∏–∑–∞ –≤—Å–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤, –æ—Ç–æ–±—Ä–∞–∂–∞—é—â–∏—Ö –∞–¥—Ä–µ—Å–∞ —Ç–æ–≤–∞—Ä–æ–≤, –±—ã–ª–∏ –æ–±–Ω–∞—Ä—É–∂–µ–Ω—ã —Å–ª–µ–¥—É—é—â–∏–µ –ø—Ä–æ–±–ª–µ–º—ã:

### üî¥ –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã:

1. **–î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞ —Ñ—É–Ω–∫—Ü–∏–∏ `formatAddressWithPrivacy`**
   - –§—É–Ω–∫—Ü–∏—è –¥—É–±–ª–∏—Ä—É–µ—Ç—Å—è –≤ 5 —Ñ–∞–π–ª–∞—Ö –≤–º–µ—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–π —É—Ç–∏–ª–∏—Ç—ã:
     - `/storefronts/[slug]/products/[id]/page.tsx`
     - `/components/GIS/Map/MarkerHoverPopup.tsx`
     - `/components/GIS/Map/MarkerClickPopup.tsx`  
     - `/components/GIS/Map/ClusterHoverPopup.tsx`
     - `/components/products/steps/PreviewStep.tsx`

2. **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏–∏ –∞–¥—Ä–µ—Å–æ–≤**
   - –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –Ω–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç –º–Ω–æ–≥–æ—è–∑—ã—á–Ω—É—é –ø–æ–¥–¥–µ—Ä–∂–∫—É:
     - `SimilarListings.tsx` - –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç `listing.location` –Ω–∞–ø—Ä—è–º—É—é
     - `StorefrontInfo.tsx` - –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç `storefront.location.full_address` –±–µ–∑ –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏–∏
     - `StorefrontLocationMap.tsx` - –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç `location.full_address` –±–µ–∑ –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏–∏

3. **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —É—á–µ—Ç–∞ –ø—Ä–∏–≤–∞—Ç–Ω–æ—Å—Ç–∏**
   - –í–∏—Ç—Ä–∏–Ω—ã –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç –ø–æ–ª–Ω—ã–π –∞–¥—Ä–µ—Å –±–µ–∑ —É—á–µ—Ç–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –ø—Ä–∏–≤–∞—Ç–Ω–æ—Å—Ç–∏

### üü° –°—Ä–µ–¥–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã:

1. **–ù–µ—Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç—å –≤ –∏–º–µ–Ω–æ–≤–∞–Ω–∏–∏ –ø–æ–ª–µ–π**
   - –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —Ä–∞–∑–Ω—ã–µ –ø–æ–ª—è –¥–ª—è –∞–¥—Ä–µ—Å–æ–≤:
     - `location` - –æ—Å–Ω–æ–≤–Ω–æ–µ –ø–æ–ª–µ –¥–ª—è marketplace
     - `individual_address` - –¥–ª—è —Ç–æ–≤–∞—Ä–æ–≤ –≤–∏—Ç—Ä–∏–Ω
     - `full_address` - –¥–ª—è —Å–∞–º–∏—Ö –≤–∏—Ç—Ä–∏–Ω
     - `address` - –≤ –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö –∫–∞—Ä—Ç—ã

2. **–ù–µ–ø–æ–ª–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –ø–µ—Ä–µ–≤–æ–¥–æ–≤**
   - –°—Ç—Ä–∞–Ω–∏—Ü–∞ —Ç–æ–≤–∞—Ä–∞ –≤–∏—Ç—Ä–∏–Ω—ã (`storefronts/[slug]/products/[id]/page.tsx`) –∏–º–µ–µ—Ç –ª–æ–∫–∞–ª—å–Ω—É—é –∫–æ–ø–∏—é `formatAddressWithPrivacy`, –Ω–æ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `getLocalizedAddress`

### ‚úÖ –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã, –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ—Ç–æ–±—Ä–∞–∂–∞—é—â–∏–µ –∞–¥—Ä–µ—Å–∞:

1. **MarketplaceCard.tsx**
   - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `formatAddressWithPrivacy` –∏ `getFullLocalizedAddress`
   - –£—á–∏—Ç—ã–≤–∞–µ—Ç –ø—Ä–∏–≤–∞—Ç–Ω–æ—Å—Ç—å –∏ –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏—é

2. **marketplace/[id]/page.tsx**
   - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ —É—Ç–∏–ª–∏—Ç—ã
   - –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç fallback –Ω–∞ –≥–µ–æ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ

3. **–ü–æ–ø–∞–ø—ã –∫–∞—Ä—Ç—ã** (—á–∞—Å—Ç–∏—á–Ω–æ)
   - `MarkerHoverPopup` –∏ `MarkerClickPopup` –∏—Å–ø–æ–ª—å–∑—É—é—Ç `getLocalizedAddress`
   - –ù–æ –¥—É–±–ª–∏—Ä—É—é—Ç `formatAddressWithPrivacy`

## –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—é:

### 1. –£—Å—Ç—Ä–∞–Ω–∏—Ç—å –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞
```typescript
// –ó–∞–º–µ–Ω–∏—Ç—å –ª–æ–∫–∞–ª—å–Ω—ã–µ –∫–æ–ø–∏–∏ –Ω–∞ –∏–º–ø–æ—Ä—Ç –∏–∑ —É—Ç–∏–ª–∏—Ç
import { formatAddressWithPrivacy, getLocalizedAddress } from '@/utils/addressUtils';
```

### 2. –î–æ–±–∞–≤–∏—Ç—å –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏—é –≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –≤–∏—Ç—Ä–∏–Ω
```typescript
// StorefrontInfo.tsx
import { getLocalizedAddress } from '@/utils/addressUtils';

// –í–º–µ—Å—Ç–æ:
{storefront.location.full_address}

// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:
{getLocalizedAddress(
  storefront.location.full_address,
  storefront.location.translations,
  locale
)}
```

### 3. –î–æ–±–∞–≤–∏—Ç—å –ø–æ–¥–¥–µ—Ä–∂–∫—É –ø—Ä–∏–≤–∞—Ç–Ω–æ—Å—Ç–∏ –¥–ª—è –≤–∏—Ç—Ä–∏–Ω
- –î–æ–±–∞–≤–∏—Ç—å –ø–æ–ª–µ `location_privacy` –¥–ª—è –≤–∏—Ç—Ä–∏–Ω
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `formatAddressWithPrivacy` –ø—Ä–∏ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–∏

### 4. –£–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É –¥–∞–Ω–Ω—ã—Ö
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –µ–¥–∏–Ω—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É –¥–ª—è –≤—Å–µ—Ö —Ç–∏–ø–æ–≤ –∞–¥—Ä–µ—Å–æ–≤
- –î–æ–±–∞–≤–∏—Ç—å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –ª–æ–∫–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö –∞–¥—Ä–µ—Å–æ–≤

### 5. –û–±–Ω–æ–≤–∏—Ç—å SimilarListings.tsx
```typescript
// –î–æ–±–∞–≤–∏—Ç—å –ø–æ–¥–¥–µ—Ä–∂–∫—É –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏–∏ –∏ –ø—Ä–∏–≤–∞—Ç–Ω–æ—Å—Ç–∏
{formatAddressWithPrivacy(
  getFullLocalizedAddress(listing, locale),
  listing.location_privacy
)}
```

## –ó–∞—Ç—Ä–æ–Ω—É—Ç—ã–µ —Ñ–∞–π–ª—ã –¥–ª—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:

1. `/frontend/svetu/src/app/[locale]/storefronts/[slug]/products/[id]/page.tsx`
2. `/frontend/svetu/src/components/GIS/Map/MarkerHoverPopup.tsx`
3. `/frontend/svetu/src/components/GIS/Map/MarkerClickPopup.tsx`
4. `/frontend/svetu/src/components/GIS/Map/ClusterHoverPopup.tsx`
5. `/frontend/svetu/src/components/products/steps/PreviewStep.tsx`
6. `/frontend/svetu/src/components/marketplace/listing/SimilarListings.tsx`
7. `/frontend/svetu/src/components/storefronts/public/StorefrontInfo.tsx`
8. `/frontend/svetu/src/components/storefronts/public/StorefrontLocationMap.tsx`

## –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π:

1. **–í—ã—Å–æ–∫–∏–π**: –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è –∫–æ–¥–∞ (—É–ª—É—á—à–∏—Ç –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º–æ—Å—Ç—å)
2. **–í—ã—Å–æ–∫–∏–π**: –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏–∏ –≤ SimilarListings (–≤–∏–¥–∏–º—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º –∫–æ–º–ø–æ–Ω–µ–Ω—Ç)
3. **–°—Ä–µ–¥–Ω–∏–π**: –õ–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è –≤–∏—Ç—Ä–∏–Ω (–º–µ–Ω—å—à–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏—Å–ø–æ–ª—å–∑—É—é—Ç –≤–∏—Ç—Ä–∏–Ω—ã)
4. **–ù–∏–∑–∫–∏–π**: –£–Ω–∏—Ñ–∏–∫–∞—Ü–∏—è —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö (—Ç—Ä–µ–±—É–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ backend)