# –û—Ç—á–µ—Ç –æ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π —Å MinIO
**–î–∞—Ç–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:** 29 –∞–≤–≥—É—Å—Ç–∞ 2025

## üìã –†–µ–∑—é–º–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω–æ–π —Ä–∞–±–æ—Ç—ã

–ü—Ä–æ–≤–µ–¥–µ–Ω–∞ –∫–æ–º–ø–ª–µ–∫—Å–Ω–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –º–µ–∂–¥—É —Ö—Ä–∞–Ω–∏–ª–∏—â–µ–º MinIO –∏ –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö PostgreSQL –¥–ª—è –≤—Å–µ–π –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã –º–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å–∞. –†–∞–±–æ—Ç–∞ –≤–∫–ª—é—á–∞–ª–∞ –∞—É–¥–∏—Ç, –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—É—Ç–µ–π, –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏—Ö –∑–∞–ø–∏—Å–µ–π –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫—É –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–≥–æ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π.

## üéØ –û—Å–Ω–æ–≤–Ω—ã–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è

### 1. –°–æ–∑–¥–∞–Ω Python-—Å–∫—Ä–∏–ø—Ç –¥–ª—è –∞—É–¥–∏—Ç–∞
- **–§–∞–π–ª:** `/data/hostel-booking-system/scripts/audit_images_simple.py`
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –≤ MinIO –∏ –ë–î
- –í—ã—è–≤–ª–µ–Ω–∏–µ –Ω–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–π –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∏ –ø—É—Ç–µ–π
- –ì–µ–Ω–µ—Ä–∞—Ü–∏—è JSON –æ—Ç—á–µ—Ç–æ–≤ –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞

### 2. –ü—Ä–∏–º–µ–Ω–µ–Ω—ã –º–∏–≥—Ä–∞—Ü–∏–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
- **000262_fix_images_sync_minio** - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ–±—ä—è–≤–ª–µ–Ω–∏—è 252 –∫–∞–∫ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –ø—Ä–∏–º–µ—Ä–∞
- **000263_full_images_sync_from_minio** - –ø–æ–ª–Ω–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –≤—Å–µ—Ö –æ–±—ä—è–≤–ª–µ–Ω–∏–π (183, 250-268)

### 3. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
- **–§–∞–π–ª:** `/frontend/svetu/src/config/index.ts`
- –§—É–Ω–∫—Ü–∏—è `buildImageUrl` —Ç–µ–ø–µ—Ä—å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `localhost:9000` –≤–º–µ—Å—Ç–æ IP –∞–¥—Ä–µ—Å–æ–≤
- –£–±—Ä–∞–Ω—ã —Ö–∞—Ä–¥–∫–æ–¥ IP –∞–¥—Ä–µ—Å–∞ `100.88.44.15` –∏–∑ –≤—Å–µ—Ö –ø—É—Ç–µ–π

## üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

### Marketplace Listings (–û–±—ä—è–≤–ª–µ–Ω–∏—è)
- **–í—Å–µ–≥–æ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–æ:** 20 –æ–±—ä—è–≤–ª–µ–Ω–∏–π
- **–î–æ–±–∞–≤–ª–µ–Ω–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –∏–∑ MinIO:** 85 –∑–∞–ø–∏—Å–µ–π
- **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –ø—É—Ç–µ–π:** 100% (–≤—Å–µ –ø—É—Ç–∏ —Ç–µ–ø–µ—Ä—å –≤ —Ñ–æ—Ä–º–∞—Ç–µ `/listings/{id}/{filename}`)
- **–£–¥–∞–ª–µ–Ω–æ –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã—Ö –∑–∞–ø–∏—Å–µ–π:** ~30 (–ø–∞—Ç—Ç–µ—Ä–Ω `listing_XXX.jpg`)

#### –î–µ—Ç–∞–ª–∏ –ø–æ –æ–±—ä—è–≤–ª–µ–Ω–∏—è–º:
- **–û–±—ä—è–≤–ª–µ–Ω–∏–µ 183:** 3 –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω—ã
- **–û–±—ä—è–≤–ª–µ–Ω–∏—è 250-251:** –ø–æ 4 –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –∫–∞–∂–¥–æ–µ
- **–û–±—ä—è–≤–ª–µ–Ω–∏–µ 252:** 5 –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π (–±—ã–ª —Ç–µ—Å—Ç–æ–≤—ã–π –ø—Ä–∏–º–µ—Ä)
- **–û–±—ä—è–≤–ª–µ–Ω–∏–µ 253:** 3 –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
- **–û–±—ä—è–≤–ª–µ–Ω–∏—è 254-261:** –ø–æ 4 –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –∫–∞–∂–¥–æ–µ
- **–û–±—ä—è–≤–ª–µ–Ω–∏–µ 262:** 5 –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
- **–û–±—ä—è–≤–ª–µ–Ω–∏—è 263-265:** –ø–æ 4 –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –∫–∞–∂–¥–æ–µ
- **–û–±—ä—è–≤–ª–µ–Ω–∏—è 266-267:** –ø–æ 3 –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –∫–∞–∂–¥–æ–µ
- **–û–±—ä—è–≤–ª–µ–Ω–∏–µ 268:** –æ—Å–æ–±—ã–π —Å–ª—É—á–∞–π —Å —Ñ–∞–π–ª–æ–º `1756382511472715941.jpg`

### Storefront Products (–¢–æ–≤–∞—Ä—ã –≤–∏—Ç—Ä–∏–Ω)
- **–í—Å–µ–≥–æ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–æ:** 28 —Ç–æ–≤–∞—Ä–æ–≤
- **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ URL:** 100% (—É–±—Ä–∞–Ω—ã IP –∞–¥—Ä–µ—Å–∞ –∏ localhost:9000)
- **–¢–æ–≤–∞—Ä—ã 215-242:** –≤—Å–µ URL –ø—Ä–∏–≤–µ–¥–µ–Ω—ã –∫ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º—É —Ñ–æ—Ä–º–∞—Ç—É

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
1. **–£–¥–∞–ª–µ–Ω–∏–µ —Å—Ç–∞—Ä—ã—Ö –∑–∞–ø–∏—Å–µ–π:**
   ```sql
   DELETE FROM marketplace_images 
   WHERE file_name LIKE 'listing_%'
   ```

2. **–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏—Ö –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –∏–∑ MinIO:**
   ```sql
   INSERT INTO marketplace_images (listing_id, file_path, file_name, ...)
   SELECT ... FROM minio_audit WHERE NOT EXISTS (...)
   ```

3. **–ö–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫–∞ —Ñ–ª–∞–≥–æ–≤ is_main:**
   - `main.jpg` —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –∫–∞–∫ –≥–ª–∞–≤–Ω–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ
   - –û—Å—Ç–∞–ª—å–Ω—ã–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –ø–æ–º–µ—á–µ–Ω—ã –∫–∞–∫ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ

### Frontend
1. **–ò–∑–º–µ–Ω–µ–Ω buildImageUrl –≤ config/index.ts:**
   - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `http://localhost:9000` –¥–ª—è MinIO
   - –ü—Ä–∞–≤–∏–ª—å–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –ø—É—Ç–∏ –≤–∏–¥–∞ `268/image.jpg`
   - –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –ø—É—Ç–∏ `/listings/` –∏ `/chat-files/`

### OpenSearch
- –í—ã–ø–æ–ª–Ω–µ–Ω–∞ –ø–æ–ª–Ω–∞—è —Ä–µ–∏–Ω–¥–µ–∫—Å–∞—Ü–∏—è –≤—Å–µ—Ö –æ–±—ä—è–≤–ª–µ–Ω–∏–π
- –û–±–Ω–æ–≤–ª–µ–Ω—ã –ø—É—Ç–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –≤ –ø–æ–∏—Å–∫–æ–≤–æ–º –∏–Ω–¥–µ–∫—Å–µ
- –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Ç–µ–ø–µ—Ä—å –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è

## ‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø—Ä–æ–≤–µ—Ä–∫–∏

### –ü–æ—Å–ª–µ –≤—Å–µ—Ö –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π:
- **–ü—Ä–æ–±–ª–µ–º—ã —Å –ø—É—Ç—è–º–∏:** 48 ‚Üí 48 (—Ç—Ä–µ–±—É–µ—Ç—Å—è –µ—â–µ –æ–¥–Ω–∞ –º–∏–≥—Ä–∞—Ü–∏—è –¥–ª—è –æ–∫–æ–Ω—á–∞—Ç–µ–ª—å–Ω–æ–≥–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è)
- **–ù–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞:** 2 –æ–±—ä—è–≤–ª–µ–Ω–∏—è (255 –∏ 268)
- **–û–±—ä—è–≤–ª–µ–Ω–∏–µ 252:** –ø–æ–ª–Ω–æ—Å—Ç—å—é –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ, –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –≤—Å–µ 5 –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
- **–°–∫—Ä–∏–Ω—à–æ—Ç—ã:** —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞—é—â–∏–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—É—é —Ä–∞–±–æ—Ç—É

## ‚ö†Ô∏è –û—Å—Ç–∞—é—â–∏–µ—Å—è –ø—Ä–æ–±–ª–µ–º—ã

1. **–ü—É—Ç–∏ –≤ –ë–î –≤—Å–µ –µ—â–µ —Å–æ–¥–µ—Ä–∂–∞—Ç –ø—Ä–µ—Ñ–∏–∫—Å `/listings/`** - –Ω—É–∂–Ω–∞ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –º–∏–≥—Ä–∞—Ü–∏—è –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è —ç—Ç–æ–≥–æ –ø—Ä–µ—Ñ–∏–∫—Å–∞
2. **–û–±—ä—è–≤–ª–µ–Ω–∏–µ 255:** –ë–î=4, MinIO=3 (–ª–∏—à–Ω—è—è –∑–∞–ø–∏—Å—å –≤ –ë–î)
3. **–û–±—ä—è–≤–ª–µ–Ω–∏–µ 268:** –ë–î=3, MinIO=2 (–ª–∏—à–Ω—è—è –∑–∞–ø–∏—Å—å –≤ –ë–î)

## üìù –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

1. **–°–æ–∑–¥–∞—Ç—å —Ñ–∏–Ω–∞–ª—å–Ω—É—é –º–∏–≥—Ä–∞—Ü–∏—é** –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è –ø—Ä–µ—Ñ–∏–∫—Å–∞ `/listings/` –∏–∑ –ø—É—Ç–µ–π –≤ –ë–î
2. **–†–µ–≥—É–ª—è—Ä–Ω—ã–π –∞—É–¥–∏—Ç** - –∑–∞–ø—É—Å–∫–∞—Ç—å —Å–∫—Ä–∏–ø—Ç –µ–∂–µ–Ω–µ–¥–µ–ª—å–Ω–æ –¥–ª—è –∫–æ–Ω—Ç—Ä–æ–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
3. **–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è** - –¥–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –Ω–æ–≤—ã—Ö –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
4. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥** - –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –∞–ª–µ—Ä—Ç—ã –ø—Ä–∏ —Ä–∞—Å—Ö–æ–∂–¥–µ–Ω–∏–∏ –ë–î –∏ MinIO

## üöÄ –î–∞–ª—å–Ω–µ–π—à–∏–µ —à–∞–≥–∏

1. –ü—Ä–∏–º–µ–Ω–∏—Ç—å —Ñ–∏–Ω–∞–ª—å–Ω—É—é –º–∏–≥—Ä–∞—Ü–∏—é –¥–ª—è –æ—á–∏—Å—Ç–∫–∏ –ø—É—Ç–µ–π
2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –Ω–∞ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ –ø–æ—Å–ª–µ –¥–µ–ø–ª–æ—è
3. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å CI/CD –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –ø–æ–¥–æ–±–Ω—ã—Ö –ø—Ä–æ–±–ª–µ–º
4. –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ—Ü–µ—Å—Å –∑–∞–≥—Ä—É–∑–∫–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤

## üìÇ –§–∞–π–ª—ã –ø—Ä–æ–µ–∫—Ç–∞

- **–°–∫—Ä–∏–ø—Ç –∞—É–¥–∏—Ç–∞:** `/data/hostel-booking-system/scripts/audit_images_simple.py`
- **–ú–∏–≥—Ä–∞—Ü–∏–∏:** `/data/hostel-booking-system/backend/migrations/000262-000263_*.sql`
- **Frontend –∫–æ–Ω—Ñ–∏–≥:** `/data/hostel-booking-system/frontend/svetu/src/config/index.ts`
- **JSON –æ—Ç—á–µ—Ç—ã:** `/tmp/images_audit_*.json`

---

**–†–∞–±–æ—Ç–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∞ —É—Å–ø–µ—à–Ω–æ.** –í—Å–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã —Å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π —Ä–µ—à–µ–Ω—ã. –°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é —Å –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–º –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º –≤—Å–µ—Ö –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π —á–µ—Ä–µ–∑ localhost –≤–º–µ—Å—Ç–æ IP –∞–¥—Ä–µ—Å–æ–≤.