# –ê–Ω–∞–ª–∏–∑ –∫–∞—Ä—Ç–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏—Ö —Å–µ—Ä–≤–∏—Å–æ–≤ –¥–ª—è SVE TU

## –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è: Leaflet + OpenStreetMap ‚Üí Mapbox

### üèÜ –û–ø—Ç–∏–º–∞–ª—å–Ω–∞—è —Å—Ç—Ä–∞—Ç–µ–≥–∏—è:

**–§–∞–∑–∞ 1 (MVP - –±–µ—Å–ø–ª–∞—Ç–Ω–æ)**: Leaflet + OpenStreetMap + Nominatim
**–§–∞–∑–∞ 2 (—Ä–æ—Å—Ç)**: –ú–∏–≥—Ä–∞—Ü–∏—è –Ω–∞ Mapbox —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º Leaflet

## –°—Ä–∞–≤–Ω–∏—Ç–µ–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑

### 1. Leaflet + OpenStreetMap
**–°—Ç–æ–∏–º–æ—Å—Ç—å**: $0
**–ü–ª—é—Å—ã**:
- –ü–æ–ª–Ω–æ—Å—Ç—å—é –±–µ—Å–ø–ª–∞—Ç–Ω–æ
- Open source, –ø–æ–ª–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å
- –û—Ç–ª–∏—á–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- –õ–µ–≥–∫–æ–≤–µ—Å–Ω–∞—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ (42KB)
- –û–≥—Ä–æ–º–Ω–æ–µ —Å–æ–æ–±—â–µ—Å—Ç–≤–æ –ø–ª–∞–≥–∏–Ω–æ–≤

**–ú–∏–Ω—É—Å—ã**:
- –ù—É–∂–Ω–∞ —Å–≤–æ—è –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–ª—è —Ç–∞–π–ª–æ–≤ –ø—Ä–∏ –±–æ–ª—å—à–æ–π –Ω–∞–≥—Ä—É–∑–∫–µ
- –ë–∞–∑–æ–≤—ã–µ —Å—Ç–∏–ª–∏ –∫–∞—Ä—Ç
- –ì–µ–æ–∫–æ–¥–∏–Ω–≥ —á–µ—Ä–µ–∑ Nominatim –∏–º–µ–µ—Ç –ª–∏–º–∏—Ç—ã

### 2. Mapbox
**–°—Ç–æ–∏–º–æ—Å—Ç—å**: 
- –ë–µ—Å–ø–ª–∞—Ç–Ω–æ: 50,000 –∑–∞–≥—Ä—É–∑–æ–∫ –∫–∞—Ä—Ç/–º–µ—Å—è—Ü
- $0.50 –∑–∞ 1000 –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –∑–∞–≥—Ä—É–∑–æ–∫

**–ü–ª—é—Å—ã**:
- –ö—Ä–∞—Å–∏–≤—ã–µ —Å—Ç–∏–ª–∏ –∫–∞—Ä—Ç
- –ú–æ—â–Ω—ã–π –≥–µ–æ–∫–æ–¥–∏–Ω–≥
- 3D –∑–¥–∞–Ω–∏—è –∏–∑ –∫–æ—Ä–æ–±–∫–∏
- –û—Ç–ª–∏—á–Ω–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

**–ú–∏–Ω—É—Å—ã**:
- Vendor lock-in
- –î–æ—Ä–æ–∂–µ –ø—Ä–∏ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–∏

### 3. Google Maps
**–°—Ç–æ–∏–º–æ—Å—Ç—å**:
- $200 –±–µ—Å–ø–ª–∞—Ç–Ω—ã—Ö –∫—Ä–µ–¥–∏—Ç–æ–≤/–º–µ—Å—è—Ü
- $2 –∑–∞ 1000 –∑–∞–≥—Ä—É–∑–æ–∫ –ø–æ—Å–ª–µ

**–ü–ª—é—Å—ã**:
- –õ—É—á—à–∏–µ –¥–∞–Ω–Ω—ã–µ –ø–æ –°–µ—Ä–±–∏–∏
- Street View
- –ü—Ä–∏–≤—ã—á–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å

**–ú–∏–Ω—É—Å—ã**:
- –°–∞–º—ã–π –¥–æ—Ä–æ–≥–æ–π
- –°–ª–æ–∂–Ω–∞—è –º–æ–¥–µ–ª—å —Ü–µ–Ω–æ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è
- –¢—Ä–µ–±—É–µ—Ç –∫—Ä–µ–¥–∏—Ç–Ω—É—é –∫–∞—Ä—Ç—É —Å—Ä–∞–∑—É

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Ä–µ—à–µ–Ω–∏—è –¥–ª—è SVE TU

### –§–∞–∑–∞ 1: MVP —Å Leaflet (–±–µ—Å–ø–ª–∞—Ç–Ω–æ)

```javascript
// –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–∞—Ä—Ç–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞
/frontend/svetu/src/services/maps/
‚îú‚îÄ‚îÄ MapService.ts          // –ê–±—Å—Ç—Ä–∞–∫—Ü–∏—è –Ω–∞–¥ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–º
‚îú‚îÄ‚îÄ providers/
‚îÇ   ‚îú‚îÄ‚îÄ LeafletProvider.ts // –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –¥–ª—è Leaflet
‚îÇ   ‚îî‚îÄ‚îÄ MapboxProvider.ts  // –ë—É–¥—É—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è
‚îú‚îÄ‚îÄ geocoding/
‚îÇ   ‚îú‚îÄ‚îÄ NominatimService.ts // –ì–µ–æ–∫–æ–¥–∏–Ω–≥ OSM
‚îÇ   ‚îî‚îÄ‚îÄ BuildingService.ts  // –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∑–¥–∞–Ω–∏—è—Ö
‚îú‚îÄ‚îÄ clustering/
‚îÇ   ‚îî‚îÄ‚îÄ MarkerCluster.ts   // –ö–ª–∞—Å—Ç–µ—Ä–∏–∑–∞—Ü–∏—è –º–∞—Ä–∫–µ—Ä–æ–≤
‚îî‚îÄ‚îÄ components/
    ‚îú‚îÄ‚îÄ StorefrontMap.tsx  // –ö–∞—Ä—Ç–∞ –≤–∏—Ç—Ä–∏–Ω
    ‚îú‚îÄ‚îÄ DeliveryZones.tsx  // –ó–æ–Ω—ã –¥–æ—Å—Ç–∞–≤–∫–∏
    ‚îî‚îÄ‚îÄ PropertyMap.tsx    // –ö–∞—Ä—Ç–∞ –Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç–∏
```

### –ö–ª—é—á–µ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏

#### 1. –£–º–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∫–ª–∏–∫–æ–≤ –ø–æ –∫–∞—Ä—Ç–µ
```typescript
interface LocationData {
  // –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –∫–ª–∏–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
  clickLat: number;
  clickLng: number;
  
  // –ë–ª–∏–∂–∞–π—à–µ–µ –∑–¥–∞–Ω–∏–µ
  buildingLat: number;
  buildingLng: number;
  buildingAddress: string;
  
  // –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
  postalCode: string;
  street: string;
  houseNumber: string;
  city: string;
  
  // –ü—Ä–µ–¥–ø—Ä–∏—è—Ç–∏—è –≤ –∑–¥–∞–Ω–∏–∏
  businessesInBuilding?: Business[];
}
```

#### 2. –ú–Ω–æ–≥–æ—É—Ä–æ–≤–Ω–µ–≤–∞—è –∫–ª–∞—Å—Ç–µ—Ä–∏–∑–∞—Ü–∏—è
- **–£—Ä–æ–≤–µ–Ω—å 1**: –ì–æ—Ä–æ–¥ (zoom 5-10)
- **–£—Ä–æ–≤–µ–Ω—å 2**: –†–∞–π–æ–Ω (zoom 11-14)  
- **–£—Ä–æ–≤–µ–Ω—å 3**: –ö–≤–∞—Ä—Ç–∞–ª (zoom 15-16)
- **–£—Ä–æ–≤–µ–Ω—å 4**: –ó–¥–∞–Ω–∏–µ (zoom 17+)

#### 3. –°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ –º–∞—Ä–∫–µ—Ä—ã
```typescript
enum MarkerType {
  STOREFRONT = 'storefront',      // –í–∏—Ç—Ä–∏–Ω–∞
  PRODUCT = 'product',            // –¢–æ–≤–∞—Ä —Å —É–Ω–∏–∫–∞–ª—å–Ω—ã–º –∞–¥—Ä–µ—Å–æ–º
  REAL_ESTATE = 'real_estate',    // –ù–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç—å
  SERVICE_POINT = 'service',      // –¢–æ—á–∫–∞ –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏—è
  DELIVERY_ZONE = 'delivery'      // –ó–æ–Ω–∞ –¥–æ—Å—Ç–∞–≤–∫–∏
}
```

### –ò–Ω–Ω–æ–≤–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏

#### 1. Building Intelligence (–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∑–¥–∞–Ω–∏—è—Ö)
- –ü—Ä–∏ –∫–ª–∏–∫–µ –Ω–∞ –∑–¥–∞–Ω–∏–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –≤—Å–µ –≤–∏—Ç—Ä–∏–Ω—ã/—É—Å–ª—É–≥–∏
- –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –ø–æ —ç—Ç–∞–∂–∞–º (–µ—Å–ª–∏ –µ—Å—Ç—å –¥–∞–Ω–Ω—ã–µ)
- –ò—Å—Ç–æ—Ä–∏—è –ø—Ä–µ–¥–ø—Ä–∏—è—Ç–∏–π –≤ –∑–¥–∞–Ω–∏–∏

#### 2. Smart Geocoding
```typescript
async function smartGeocode(clickCoords: Coords): Promise<LocationData> {
  // 1. Reverse geocode –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –±–ª–∏–∂–∞–π—à–µ–≥–æ –∞–¥—Ä–µ—Å–∞
  const nearestAddress = await reverseGeocode(clickCoords);
  
  // 2. Forward geocode –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Ç–æ—á–Ω—ã—Ö –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç –∑–¥–∞–Ω–∏—è
  const buildingCoords = await forwardGeocode(nearestAddress);
  
  // 3. –ü–æ–∏—Å–∫ –¥—Ä—É–≥–∏—Ö –±–∏–∑–Ω–µ—Å–æ–≤ –≤ —Ä–∞–¥–∏—É—Å–µ 50–º
  const nearbyBusinesses = await findNearby(buildingCoords, 50);
  
  return {
    click: clickCoords,
    building: buildingCoords,
    address: nearestAddress,
    businesses: nearbyBusinesses
  };
}
```

#### 3. –í–µ–∫—Ç–æ—Ä–Ω—ã–µ –∑–æ–Ω—ã –¥–æ—Å—Ç–∞–≤–∫–∏
- –†–∏—Å–æ–≤–∞–Ω–∏–µ –ø–æ–ª–∏–≥–æ–Ω–æ–≤ –¥–ª—è –∑–æ–Ω –¥–æ—Å—Ç–∞–≤–∫–∏
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–∞—Å—á–µ—Ç —Å—Ç–æ–∏–º–æ—Å—Ç–∏ –ø–æ –∑–æ–Ω–∞–º
- –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –ø–æ–∫—Ä—ã—Ç–∏—è –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ —Å–ª—É–∂–±–∞–º–∏

#### 4. Heatmap –∞–Ω–∞–ª–∏—Ç–∏–∫–∞
- –ü–æ–ø—É–ª—è—Ä–Ω–æ—Å—Ç—å —Ä–∞–π–æ–Ω–æ–≤
- –ü–ª–æ—Ç–Ω–æ—Å—Ç—å –≤–∏—Ç—Ä–∏–Ω –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º
- –¶–µ–Ω–æ–≤—ã–µ —Ç–µ–ø–ª–æ–≤—ã–µ –∫–∞—Ä—Ç—ã

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

1. **Lazy loading –º–∞—Ä–∫–µ—Ä–æ–≤**
   - –ó–∞–≥—Ä—É–∂–∞–µ–º —Ç–æ–ª—å–∫–æ –≤–∏–¥–∏–º—ã–µ –º–∞—Ä–∫–µ—Ä—ã
   - –ü—Ä–µ–¥–∑–∞–≥—Ä—É–∑–∫–∞ —Å–æ—Å–µ–¥–Ω–∏—Ö –æ–±–ª–∞—Å—Ç–µ–π

2. **–ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ**
   - IndexedDB –¥–ª—è —Ç–∞–π–ª–æ–≤ –∫–∞—Ä—Ç
   - LocalStorage –¥–ª—è –≥–µ–æ–∫–æ–¥–∏–Ω–≥–∞
   - Service Worker –¥–ª—è –æ—Ñ–ª–∞–π–Ω

3. **WebGL —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥**
   - –ò—Å–ø–æ–ª—å–∑—É–µ–º Leaflet.glify –¥–ª—è 100k+ –º–∞—Ä–∫–µ—Ä–æ–≤
   - GPU —É—Å–∫–æ—Ä–µ–Ω–∏–µ –¥–ª—è –ø–ª–∞–≤–Ω–æ—Å—Ç–∏

### –ü–ª–∞–Ω –º–∏–≥—Ä–∞—Ü–∏–∏ –Ω–∞ Mapbox

–ö–æ–≥–¥–∞ –¥–æ—Å—Ç–∏–≥–Ω–µ–º 40k –∑–∞–≥—Ä—É–∑–æ–∫/–º–µ—Å—è—Ü:

1. –ú–µ–Ω—è–µ–º —Ç–æ–ª—å–∫–æ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞ –≤ MapService
2. –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤–µ—Å—å API –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π
3. –ü–æ–ª—É—á–∞–µ–º:
   - 3D –∑–¥–∞–Ω–∏—è
   - –°–ø—É—Ç–Ω–∏–∫–æ–≤—ã–µ —Å–Ω–∏–º–∫–∏
   - –ù–∞–≤–∏–≥–∞—Ü–∏—é
   - –õ—É—á—à–∏–π –≥–µ–æ–∫–æ–¥–∏–Ω–≥

### –ë—é–¥–∂–µ—Ç

**–°—Ç–∞—Ä—Ç (0-6 –º–µ—Å—è—Ü–µ–≤)**: $0
- Leaflet + OSM
- –î–æ 10k –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

**–†–æ—Å—Ç (6-12 –º–µ—Å—è—Ü–µ–≤)**: $0-50/–º–µ—Å—è—Ü
- –ü–µ—Ä–µ—Ö–æ–¥ –Ω–∞ Mapbox
- 10k-50k –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

**–ú–∞—Å—à—Ç–∞–± (12+ –º–µ—Å—è—Ü–µ–≤)**: $200-500/–º–µ—Å—è—Ü
- –ü–æ–ª–Ω—ã–π Mapbox
- 50k+ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

## –£–Ω–∏–∫–∞–ª—å–Ω—ã–µ —Ñ–∏—á–∏ –¥–ª—è –ë–∞–ª–∫–∞–Ω

1. **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∫–∏—Ä–∏–ª–ª–∏—Ü—ã/–ª–∞—Ç–∏–Ω–∏—Ü—ã**
   - –ê–≤—Ç–æ–ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Å—Ç—Ä–∞–Ω—ã
   - –ü–æ–∏—Å–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –æ–±–æ–∏—Ö –∞–ª—Ñ–∞–≤–∏—Ç–∞—Ö

2. **–õ–æ–∫–∞–ª—å–Ω—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏**
   - –ü–æ–∏—Å–∫ –ø–æ —Å—Ç–∞—Ä—ã–º –Ω–∞–∑–≤–∞–Ω–∏—è–º —É–ª–∏—Ü
   - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –º–µ—Å—Ç–Ω—ã–º–∏ –ì–ò–° —Å–ª—É–∂–±–∞–º–∏

3. **–û—Ñ–ª–∞–π–Ω —Ä–µ–∂–∏–º**
   - –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–∞–π–æ–Ω–æ–≤ –¥–ª—è —Ä–∞–±–æ—Ç—ã –±–µ–∑ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞
   - –í–∞–∂–Ω–æ –¥–ª—è —Å–µ–ª—å—Å–∫–æ–π –º–µ—Å—Ç–Ω–æ—Å—Ç–∏

## –í—ã–≤–æ–¥

Leaflet + OpenStreetMap - –∏–¥–µ–∞–ª—å–Ω—ã–π —Å—Ç–∞—Ä—Ç. –ü–æ–∑–≤–æ–ª–∏—Ç —Å–æ–∑–¥–∞—Ç—å –ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–π –∫–∞—Ä—Ç–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–π —Å–µ—Ä–≤–∏—Å –±–µ—Å–ø–ª–∞—Ç–Ω–æ, –∞ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø–æ–∑–≤–æ–ª–∏—Ç –ª–µ–≥–∫–æ –º–∏–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ –ø–ª–∞—Ç–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è –ø—Ä–∏ —Ä–æ—Å—Ç–µ.