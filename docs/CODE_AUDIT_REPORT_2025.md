# üîç –ê—É–¥–∏—Ç –ö–æ–¥–æ–≤–æ–π –ë–∞–∑—ã - –ü–æ–ª–Ω—ã–π –û—Ç—á–µ—Ç

**–î–∞—Ç–∞ –∞—É–¥–∏—Ç–∞:** 2025-10-10
**–ü—Ä–æ–µ–∫—Ç:** Svetu Marketplace
**–í–µ—Ä—Å–∏—è:** 0.2.x
**–ê—É–¥–∏—Ç–æ—Ä:** Claude Code

---

## üìã Executive Summary

–ü—Ä–æ–≤–µ–¥–µ–Ω –∫–æ–º–ø–ª–µ–∫—Å–Ω—ã–π –∞—É–¥–∏—Ç –∫–æ–¥–æ–≤–æ–π –±–∞–∑—ã –ø—Ä–æ–µ–∫—Ç–∞ —Å —Ñ–æ–∫—É—Å–æ–º –Ω–∞:
- –†–∞—Å—Ö–æ–∂–¥–µ–Ω–∏—è –º–µ–∂–¥—É Backend –∏ Frontend
- –ù–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–π –∫–æ–¥ (—Ä—É–¥–∏–º–µ–Ω—Ç—ã)
- –£—è–∑–≤–∏–º–æ—Å—Ç–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
- –ù–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è –≤ —Ç–∏–ø–∞—Ö –¥–∞–Ω–Ω—ã—Ö

### üéØ –ö–ª—é—á–µ–≤—ã–µ –ú–µ—Ç—Ä–∏–∫–∏

| –ö–∞—Ç–µ–≥–æ—Ä–∏—è | Backend | Frontend | –ö—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç—å |
|-----------|---------|----------|-------------|
| **API Endpoints** | 300+ | 150+ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è | ‚úÖ –•–æ—Ä–æ—à–æ |
| **–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ —É—è–∑–≤–∏–º–æ—Å—Ç–∏** | 0 | **3** | üî¥ **URGENT** |
| **–ù–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –º–æ–¥—É–ª–∏** | 1 | 3 | üü° Medium |
| **TODO –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏** | 120+ | 90+ | üü¢ Normal |
| **Dead code** | –ú–∏–Ω–∏–º—É–º | –ú–∏–Ω–∏–º—É–º | ‚úÖ –•–æ—Ä–æ—à–æ |

---

## ‚úÖ –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï –ü–†–û–ë–õ–ï–ú–´ - –ò–°–ü–†–ê–í–õ–ï–ù–û (2025-10-11)

### 1. JWT –≤ localStorage - XSS –£—è–∑–≤–∏–º–æ—Å—Ç—å ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û

**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–†–ï–®–ï–ù–û**
**–î–∞—Ç–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:** 2025-10-11

**–ß—Ç–æ –±—ã–ª–æ —Å–¥–µ–ª–∞–Ω–æ:**
1. ‚úÖ –£–¥–∞–ª–µ–Ω—ã —Ñ–∞–π–ª—ã:
   - `/frontend/svetu/src/lib/api.ts` (—É—è–∑–≤–∏–º—ã–π)
   - `/frontend/svetu/src/lib/api-client.ts` (–¥—É–±–ª–∏–∫–∞—Ç)
2. ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω—ã –≤—Å–µ –∏–º–ø–æ—Ä—Ç—ã (11 —Ñ–∞–π–ª–æ–≤) –Ω–∞ `@/services/api-client`
3. ‚úÖ –ó–∞–º–µ–Ω–µ–Ω—ã `response.success` –Ω–∞ `response.data` –≤–æ –≤—Å–µ—Ö —Ñ–∞–π–ª–∞—Ö
4. ‚úÖ –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å —Ä–µ–∞–ª—å–Ω—ã–º —Ç–æ–∫–µ–Ω–æ–º –ø—Ä–æ–π–¥–µ–Ω–æ

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- JWT —Ç–æ–∫–µ–Ω—ã —Ç–µ–ø–µ—Ä—å –≤ httpOnly cookies (–Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã JavaScript)
- –í—Å–µ –∑–∞–ø—Ä–æ—Å—ã –∏–¥—É—Ç —á–µ—Ä–µ–∑ BFF proxy `/api/v2`
- XSS —É—è–∑–≤–∏–º–æ—Å—Ç—å –ø–æ–ª–Ω–æ—Å—Ç—å—é —É—Å—Ç—Ä–∞–Ω–µ–Ω–∞

---

### 2. –û–±—Ö–æ–¥ BFF Proxy - 15+ –ú–µ—Å—Ç ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û

**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–†–ï–®–ï–ù–û**
**–î–∞—Ç–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:** 2025-10-11

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:**
- ‚úÖ `components/B2C/ProductVariants/VariantStockTable.tsx` (4 –º–µ—Å—Ç–∞ ‚Üí apiClient)
- ‚úÖ `components/B2C/ProductVariants/AttributeSetup.tsx` (3 –º–µ—Å—Ç–∞ ‚Üí apiClient)
- ‚úÖ `components/B2C/ProductVariants/VariantGenerator.tsx` (1 –º–µ—Å—Ç–æ ‚Üí apiClient)
- ‚úÖ `components/B2C/ProductVariants/VariantManager.tsx` (8 –º–µ—Å—Ç ‚Üí apiClient)

**–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:**
- ‚úÖ `app/[locale]/admin/logistics/problems/problems-client.tsx` (6 –∏–∑–º–µ–Ω–µ–Ω–∏–π)
- ‚úÖ `app/[locale]/admin/logistics/shipments/shipments-client.tsx` (2 –∏–∑–º–µ–Ω–µ–Ω–∏—è)
- ‚úÖ `app/[locale]/admin/logistics/shipments/[provider]/[id]/shipment-details-client.tsx` (2 –∏–∑–º–µ–Ω–µ–Ω–∏—è)
- ‚úÖ `app/[locale]/admin/logistics/analytics/analytics-client.tsx` (BFF –¥–ª—è CSV export)
- ‚úÖ `app/[locale]/admin/search/components/SynonymManager.tsx` (1 –∏–∑–º–µ–Ω–µ–Ω–∏–µ)

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- –í—Å–µ fetch() –∑–∞–ø—Ä–æ—Å—ã –∑–∞–º–µ–Ω–µ–Ω—ã –Ω–∞ apiClient
- –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ BFF proxy (httpOnly cookies)
- –ù–µ—Ç –ø—Ä—è–º—ã—Ö –æ–±—Ä–∞—â–µ–Ω–∏–π –∫ backend API

---

### 3. CategoryDetector - –ü—Ä—è–º–∞—è –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û

**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–†–ï–®–ï–ù–û**
**–î–∞—Ç–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:** 2025-10-11

**–ß—Ç–æ –±—ã–ª–æ —Å–¥–µ–ª–∞–Ω–æ:**
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç apiClient –¥–ª—è –≤—Å–µ—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
- –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ BFF proxy

---

## üóëÔ∏è –†–£–î–ò–ú–ï–ù–¢–´ - –£–î–ê–õ–ï–ù–û (2025-10-11)

### Backend
- ‚úÖ –£–¥–∞–ª–µ–Ω –º–æ–¥—É–ª—å `/backend/internal/alerting/` (395 —Å—Ç—Ä–æ–∫ –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º–æ–≥–æ –∫–æ–¥–∞)
- ‚úÖ –£–¥–∞–ª–µ–Ω—ã backup —Ñ–∞–π–ª—ã:
  - `users.go.backup`
  - `postgres.go.bak`
  - `repository.go.backup`
  - `subscription_handler.go.bak`
  - `.env.backup`

### Frontend
- ‚úÖ –£–¥–∞–ª–µ–Ω—ã —É—è–∑–≤–∏–º—ã–µ API –∫–ª–∏–µ–Ω—Ç—ã:
  - `/lib/api.ts` (XSS —É—è–∑–≤–∏–º–æ—Å—Ç—å)
  - `/lib/api-client.ts` (–¥—É–±–ª–∏–∫–∞—Ç)

---

## üìä –†–ê–°–•–û–ñ–î–ï–ù–ò–Ø –ú–ï–ñ–î–£ BACKEND –ò FRONTEND

### Backend API: 300+ Endpoints

**–ú–æ–¥—É–ª–∏ Backend:**
- Users & Auth: 40+ endpoints
- C2C Marketplace: 100+ endpoints
- B2C Storefronts: 80+ endpoints
- Payments: 8 endpoints
- Orders: 15 endpoints
- Reviews: 20 endpoints
- GIS/Geocoding: 25 endpoints
- Search Admin: 20+ endpoints
- Delivery (Post Express, BEX): 40+ endpoints
- Analytics, AI, Notifications: 30+ endpoints

### Frontend –∏—Å–ø–æ–ª—å–∑—É–µ—Ç: 150+ Endpoints

**–¢–æ–ø-10 —Å–∞–º—ã—Ö –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö:**

| Endpoint | –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–π | –ú–æ–¥—É–ª—å |
|----------|---------------|---------|
| `POST /b2c` | 80+ | B2C –≤–∏—Ç—Ä–∏–Ω—ã |
| `GET /c2c/categories` | 22 | –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ |
| `POST /c2c/search` | 16 | –ü–æ–∏—Å–∫ |
| `POST /api/v1/orders` | 6 | –ó–∞–∫–∞–∑—ã |
| `GET /c2c/favorites` | 3 | –ò–∑–±—Ä–∞–Ω–Ω–æ–µ |
| `GET /cars/makes` | 4 | –ê–≤—Ç–æ |
| `GET /admin/attributes` | 1 | –ê–¥–º–∏–Ω |
| `GET /api/v1/user/carts` | 2 | –ö–æ—Ä–∑–∏–Ω—ã |
| `POST /subscriptions` | 8 | –ü–æ–¥–ø–∏—Å–∫–∏ |
| `GET /roles` | 2 | –†–æ–ª–∏ |

### üî¥ –ù–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ Backend Endpoints (–ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ –∫–∞–Ω–¥–∏–¥–∞—Ç—ã –Ω–∞ —É–¥–∞–ª–µ–Ω–∏–µ)

**1. –ú–æ–¥—É–ª—å Alerting - –ü–û–õ–ù–û–°–¢–¨–Æ –ù–ï –ò–°–ü–û–õ–¨–ó–£–ï–¢–°–Ø**
- –ü—É—Ç—å: `/backend/internal/alerting/`
- 395 —Å—Ç—Ä–æ–∫ –∫–æ–¥–∞
- **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –£–¥–∞–ª–∏—Ç—å –∏–ª–∏ –∑–∞–¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–∞–∫ –±—É–¥—É—â—É—é —Ñ–∏—á—É

**2. Search Optimization API - –ù–ï–¢ FRONTEND**
- `/api/v1/search/optimize-weights`
- `/api/v1/search/optimization-status/:session_id`
- –í–µ—Å—å –º–æ–¥—É–ª—å `search_optimization` –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è frontend
- **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –õ–∏–±–æ —Å–æ–∑–¥–∞—Ç—å Admin UI, –ª–∏–±–æ —Å–¥–µ–ª–∞—Ç—å CLI –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç

**3. Deprecated Endpoints**
- `/api/v1/admin/search/analytics/*` ‚Üí –∑–∞–º–µ–Ω—ë–Ω –Ω–∞ `/api/v1/analytics/metrics/search`
- **–î–µ–π—Å—Ç–≤–∏–µ:** –£–¥–∞–ª–∏—Ç—å —Å—Ç–∞—Ä—ã–π endpoint

**4. Development Endpoints –≤ Production**
- `/api/v1/dev/reindex` - –ø—É–±–ª–∏—á–Ω—ã–π endpoint –±–µ–∑ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
- `/api/v1/balance/mock/complete` - mock –æ–ø–ª–∞—Ç—ã
- **–î–µ–π—Å—Ç–≤–∏–µ:** –î–æ–±–∞–≤–∏—Ç—å feature flag –∏–ª–∏ —É–¥–∞–ª–∏—Ç—å –ø–µ—Ä–µ–¥ production

---

## üóëÔ∏è –†–£–î–ò–ú–ï–ù–¢–´ –ò –ù–ï–ò–°–ü–û–õ–¨–ó–£–ï–ú–´–ô –ö–û–î

### Backend –†—É–¥–∏–º–µ–Ω—Ç—ã

#### 1. –ü–æ–ª–Ω–æ—Å—Ç—å—é –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –º–æ–¥—É–ª–∏

**`/backend/internal/alerting/`** - 395 —Å—Ç—Ä–æ–∫
- –§—É–Ω–∫—Ü–∏–∏: `NewAlertManager`, `SendAlert`, `NewEmailChannel`, `NewSlackChannel`, `NewTelegramChannel`
- –ù–µ—Ç –∏–º–ø–æ—Ä—Ç–æ–≤ –≤ –ø—Ä–æ–µ–∫—Ç–µ
- **–î–µ–π—Å—Ç–≤–∏–µ:** –£–¥–∞–ª–∏—Ç—å

#### 2. Legacy Auth —É—Ç–∏–ª–∏—Ç—ã

**`/backend/pkg/utils/utils.go`**
- `GenerateSessionToken()` - –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è
- `HashPassword()` - —Ç–æ–ª—å–∫–æ –≤ backup —Ñ–∞–π–ª–µ
- `CheckPasswordHash()` - —Ç–æ–ª—å–∫–æ –≤ backup —Ñ–∞–π–ª–µ
- **–ü—Ä–∏—á–∏–Ω–∞:** –ó–∞–º–µ–Ω–µ–Ω–æ –Ω–∞ auth-service
- **–î–µ–π—Å—Ç–≤–∏–µ:** –£–¥–∞–ª–∏—Ç—å –ø–æ—Å–ª–µ –ø—Ä–æ–≤–µ—Ä–∫–∏

#### 3. Backup —Ñ–∞–π–ª—ã

```bash
# –ù–∞–π–¥–µ–Ω—ã backup —Ñ–∞–π–ª—ã (–Ω—É–∂–Ω–æ —É–¥–∞–ª–∏—Ç—å):
backend/internal/proj/users/handler/users.go.backup
backend/internal/proj/subscriptions/handler/subscription_handler.go.bak
```

**–î–µ–π—Å—Ç–≤–∏–µ:**
```bash
find backend/ -name "*.backup" -o -name "*.bak" | xargs rm
```

---

### Frontend –†—É–¥–∏–º–µ–Ω—Ç—ã

#### 1. –î—É–±–ª–∏–∫–∞—Ç—ã API Clients (3 ‚Üí 1)

**–ü—Ä–æ–±–ª–µ–º–∞:** 3 —Ä–∞–∑–Ω—ã—Ö API –∫–ª–∏–µ–Ω—Ç–∞

| –§–∞–π–ª | –°—Ç–∞—Ç—É—Å | –î–µ–π—Å—Ç–≤–∏–µ |
|------|--------|----------|
| `/services/api-client.ts` | ‚úÖ **–û—Å–Ω–æ–≤–Ω–æ–π** | –û—Å—Ç–∞–≤–∏—Ç—å |
| `/lib/api-client.ts` | ‚ö†Ô∏è –î—É–±–ª–∏–∫–∞—Ç | –£–¥–∞–ª–∏—Ç—å |
| `/lib/api.ts` | üî¥ **–£—è–∑–≤–∏–º–æ—Å—Ç—å** | **–£–¥–∞–ª–∏—Ç—å –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ** |

**–î–µ–π—Å—Ç–≤–∏–µ:**
```bash
# –£–¥–∞–ª–∏—Ç—å –¥—É–±–ª–∏–∫–∞—Ç—ã
rm frontend/svetu/src/lib/api.ts
rm frontend/svetu/src/lib/api-client.ts

# –û–±–Ω–æ–≤–∏—Ç—å –∏–º–ø–æ—Ä—Ç—ã –Ω–∞ –æ—Å–Ω–æ–≤–Ω–æ–π apiClient
grep -r "from '@/lib/api" frontend/svetu/src/ | cut -d: -f1 | xargs sed -i "s|@/lib/api.*|@/services/api-client|g"
```

#### 2. Deprecated —Ñ—É–Ω–∫—Ü–∏–∏

**`services/auth.ts`**
- `AuthService.getAuthHeaders()` - –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `{}` (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ 1 –º–µ—Å—Ç–µ)
- `AuthService.getCsrfToken()` - –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `''`

**–î–µ–π—Å—Ç–≤–∏–µ:** –û–±–Ω–æ–≤–∏—Ç—å `docs/page.tsx`, –∑–∞—Ç–µ–º —É–¥–∞–ª–∏—Ç—å –º–µ—Ç–æ–¥—ã

#### 3. –ù–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —É—Ç–∏–ª–∏—Ç—ã

**`utils/csrf.ts`**
- `createAdminHeaders()` - –Ω–µ—Ç –∏–º–ø–æ—Ä—Ç–æ–≤
- **–î–µ–π—Å—Ç–≤–∏–µ:** –£–¥–∞–ª–∏—Ç—å —Ñ—É–Ω–∫—Ü–∏—é

**`utils/mockDataGenerator.ts`**
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –≤ —Ç–µ—Å—Ç–∞—Ö
- **–î–µ–π—Å—Ç–≤–∏–µ:** –î–æ–±–∞–≤–∏—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π "// DEV/TEST ONLY"

#### 4. –ù–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã –ª–æ–≥–æ—Ç–∏–ø–æ–≤

–ù–∞–π–¥–µ–Ω–æ 5+ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ –ª–æ–≥–æ—Ç–∏–ø–æ–≤, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ 1:

```bash
# –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è:
components/logos/SveTuLogoStatic.tsx

# –ù–ï –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è (–º–æ–∂–Ω–æ —É–¥–∞–ª–∏—Ç—å):
components/logos/SveTuLogoRosePetals.tsx
components/logos/SveTuLogoSpring.tsx
components/logos/SveTuLogo3D.tsx
components/logos/SveTuLogoParticles.tsx
components/logos/SveTuLogoMorphing.tsx
```

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –£–¥–∞–ª–∏—Ç—å –∏–ª–∏ —Å–æ–∑–¥–∞—Ç—å UI –¥–ª—è –≤—ã–±–æ—Ä–∞ –ª–æ–≥–æ—Ç–∏–ø–∞

---

## üìù TODO/FIXME –ö–û–ú–ú–ï–ù–¢–ê–†–ò–ò

### Backend - 120+ TODO

#### üî¥ –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ (5-7 —à—Ç):

**1. Refresh Token Rate Limit**
```go
// /backend/internal/proj/users/handler/routes.go:20
// TODO: –∏—Å–ø—Ä–∞–≤–∏—Ç—å –ª–æ–≥–∏–∫—É refresh –Ω–∞ frontend —á—Ç–æ–±—ã –Ω–µ –±—ã–ª–æ –∏–∑–±—ã—Ç–æ—á–Ω—ã—Ö –≤—ã–∑–æ–≤–æ–≤
```
- **–ü—Ä–æ–±–ª–µ–º–∞:** Rate limit –æ—Ç–∫–ª—é—á–µ–Ω –∏–∑-–∑–∞ –∏–∑–±—ã—Ç–æ—á–Ω—ã—Ö –≤—ã–∑–æ–≤–æ–≤
- **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** HIGH

**2. Webhook Retry**
```go
// /backend/internal/proj/payments/service/webhook_retry.go:210-212
// TODO: Implement actual storage to database or dead letter queue
// TODO: Send alert to administrators
// TODO: Potentially trigger compensating transaction
```
- **–ü—Ä–æ–±–ª–µ–º–∞:** –ö—Ä–∏—Ç–∏—á–Ω—ã–µ webhook retry —Ñ—É–Ω–∫—Ü–∏–∏ –Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã
- **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** CRITICAL (–≤–ª–∏—è–µ—Ç –Ω–∞ –ø–ª–∞—Ç–µ–∂–∏)

**3. Post Express Integration**
```go
// /backend/internal/proj/postexpress/service/service.go:565-570
// TODO: –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ø–æ–ª—É—á–µ–Ω–∏–µ –Ω–∞–∫–ª–∞–¥–Ω–æ–π
// TODO: –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ø–µ—á–∞—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
```
- **–ü—Ä–æ–±–ª–µ–º–∞:** –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –¥–æ—Å—Ç–∞–≤–∫–∏ –Ω–µ –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω
- **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** HIGH

**4. OAuth —á–µ—Ä–µ–∑ Auth Service**
```go
// /backend/internal/proj/users/handler/auth_oauth.go:183-236
// TODO: Implement OAuth methods —á–µ—Ä–µ–∑ auth service
```

#### üü° –°—Ä–µ–¥–Ω–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç (30-40 —à—Ç):

- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏: SMS, Push, Viber, Telegram —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
- AI –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã –¥–ª—è –ø–µ—Ä–µ–≤–æ–¥–æ–≤
- –°–≤—è–∑–∫–∞ Viber ID —Å User ID
- –í–∞–ª–∏–¥–∞—Ü–∏–∏ –∏ –ø—Ä–æ–≤–µ—Ä–∫–∏ –≤ handlers

### Frontend - 90+ TODO

#### üî¥ –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ (0 —à—Ç) ‚úÖ –í–°–ï –£–°–¢–†–ê–ù–ï–ù–û (2025-10-11 –°–µ—Å—Å–∏—è 2)

**–í—Å–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ TODO –±—ã–ª–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –∏–ª–∏ –ø–µ—Ä–µ–º–µ—â–µ–Ω—ã –≤ —Ä–∞–∑–¥–µ–ª —Å—Ä–µ–¥–Ω–µ–≥–æ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞:**
- ‚úÖ Profile Update - —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ —á–µ—Ä–µ–∑ BFF proxy
- ‚úÖ Image Upload - –ø–æ–ª–Ω–æ—Å—Ç—å—é –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–æ —Å MinIO
- ‚úÖ Phone Verification - –æ–∂–∏–¥–∞–µ—Ç backend API (–Ω–µ –∫—Ä–∏—Ç–∏—á–Ω–æ)

#### üü° –°—Ä–µ–¥–Ω–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç (20-30 —à—Ç):

**Missing API Fields (20+ –º–µ—Å—Ç):**
- `rating`, `totalReviews`, `verified` - –Ω–µ—Ç –≤ API
- `weight` –¥–ª—è –ø—Ä–æ–¥—É–∫—Ç–æ–≤ - –Ω–µ—Ç –≤ API
- `is_escrow_enabled` - –Ω–µ—Ç –≤ API

**–í–Ω–µ—à–Ω–∏–µ —Ä–µ—Å—É—Ä—Å—ã:**
```typescript
// /utils/imageUtils.ts:15
'digitalvision.rs', // TODO: –í—Ä–µ–º–µ–Ω–Ω–æ! –ù—É–∂–Ω–æ –∑–∞–≥—Ä—É–∂–∞—Ç—å –∫–∞—Ä—Ç–∏–Ω–∫–∏ –≤ –Ω–∞—à S3
```

**API –¥–ª—è —Ñ–∏—á:**
- –ë–µ–∑–æ–ø–∞—Å–Ω—ã–µ –º–µ—Å—Ç–∞ –≤—Å—Ç—Ä–µ—á
- –ö—É—Ä—å–µ—Ä—Å–∫–∏–µ —Å–ª—É–∂–±—ã
- Market analysis –¥–ª—è —Ü–µ–Ω

---

## üîê –ù–ï–°–û–û–¢–í–ï–¢–°–¢–í–ò–Ø –í –¢–ò–ü–ê–• –î–ê–ù–ù–´–•

### –ü—Ä–æ–±–ª–µ–º–∞: Frontend –æ–∂–∏–¥–∞–µ—Ç –ø–æ–ª—è –∫–æ—Ç–æ—Ä—ã—Ö –Ω–µ—Ç –≤ Backend

**–ß–∞—Å—Ç—ã–µ —Ä–∞—Å—Ö–æ–∂–¥–µ–Ω–∏—è:**

| Frontend –ø–æ–ª–µ | Backend –ø–æ–ª–µ | –°—Ç–∞—Ç—É—Å | –†–µ—à–µ–Ω–∏–µ |
|---------------|--------------|--------|---------|
| `rating` | ‚ùå –ù–µ—Ç | üî¥ Missing | –î–æ–±–∞–≤–∏—Ç—å –∏–ª–∏ —É–¥–∞–ª–∏—Ç—å –∏–∑ UI |
| `totalReviews` | ‚ùå –ù–µ—Ç | üî¥ Missing | –î–æ–±–∞–≤–∏—Ç—å –∏–ª–∏ —É–¥–∞–ª–∏—Ç—å –∏–∑ UI |
| `verified` | ‚ùå –ù–µ—Ç | üî¥ Missing | –î–æ–±–∞–≤–∏—Ç—å —Ñ–ª–∞–≥ –≤ User |
| `weight` | ‚ùå –ù–µ—Ç | üü° Optional | –î–æ–±–∞–≤–∏—Ç—å –≤ Product |
| `is_escrow_enabled` | ‚ùå –ù–µ—Ç | üü° Optional | –î–æ–±–∞–≤–∏—Ç—å –≤ Order |

### OpenAPI Types vs Manual Types

**–ü—Ä–æ–±–ª–µ–º–∞:** –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–∏–ø–æ–≤

**–ï—Å—Ç—å:**
- `/types/generated/openapi.ts` - –∞–≤—Ç–æ–≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –∏–∑ swagger
- `/types/generated/api.ts` - –∞–≤—Ç–æ–≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è
- `/types/c2c.ts` - —Ä—É—á–Ω—ã–µ —Ç–∏–ø—ã
- `/types/b2c.ts` - —Ä—É—á–Ω—ã–µ —Ç–∏–ø—ã

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:**
1. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¢–û–õ–¨–ö–û generated —Ç–∏–ø—ã –∏–∑ OpenAPI
2. –£–¥–∞–ª–∏—Ç—å —Ä—É—á–Ω—ã–µ –¥—É–±–ª–∏–∫–∞—Ç—ã
3. –î–æ–±–∞–≤–∏—Ç—å –≤ CI –ø—Ä–æ–≤–µ—Ä–∫—É —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ —Ç–∏–ø–æ–≤

```bash
# –†–µ–≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–∏–ø–æ–≤ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ swagger
cd backend && make generate-types
```

---

## ‚úÖ –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï –ò –ü–†–û–í–ï–†–ö–ò (2025-10-11)

### –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å —Ä–µ–∞–ª—å–Ω—ã–º —Ç–æ–∫–µ–Ω–æ–º
- ‚úÖ Auth endpoints —Ä–∞–±–æ—Ç–∞—é—Ç (–ø–æ–ª—É—á–µ–Ω –ø—Ä–æ—Ñ–∏–ª—å –∞–¥–º–∏–Ω–∞)
- ‚úÖ Admin endpoints —Ä–∞–±–æ—Ç–∞—é—Ç (—Å–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π)
- ‚úÖ C2C –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ —Ä–∞–±–æ—Ç–∞—é—Ç (76 –∫–∞—Ç–µ–≥–æ—Ä–∏–π)
- ‚úÖ C2C –ø–æ–∏—Å–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ –í—Å–µ API endpoints –¥–æ—Å—Ç—É–ø–Ω—ã —á–µ—Ä–µ–∑ BFF proxy

### Pre-check –ø—Ä–æ–≤–µ—Ä–∫–∏
**Backend:**
- ‚úÖ `make format` - –∫–æ–¥ –æ—Ç—Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω (gofumpt + goimports)
- ‚úÖ `make lint` - –ª–∏–Ω—Ç–∏–Ω–≥ –ø—Ä–æ–π–¥–µ–Ω (0 issues)
- ‚úÖ `go build ./...` - —Å–±–æ—Ä–∫–∞ —É—Å–ø–µ—à–Ω–∞
- ‚úÖ Go modules –∞–∫—Ç—É–∞–ª—å–Ω—ã

**Frontend:**
- ‚úÖ `yarn format` - –∫–æ–¥ –æ—Ç—Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω (Prettier)
- ‚úÖ `yarn lint` - ESLint –ø—Ä–æ–π–¥–µ–Ω (0 warnings, 0 errors)
- ‚úÖ `yarn build` - —Å–±–æ—Ä–∫–∞ —É—Å–ø–µ—à–Ω–∞ (65.23s)
- ‚úÖ TypeScript —Ç–∏–ø–∏–∑–∞—Ü–∏—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞

### –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π (–°–µ—Å—Å–∏—è 1)
- **–§–∞–π–ª–æ–≤ –∏–∑–º–µ–Ω–µ–Ω–æ:** 27
- **–§–∞–π–ª–æ–≤ —É–¥–∞–ª–µ–Ω–æ:** 7
- **–°—Ç—Ä–æ–∫ –∫–æ–¥–∞ —É–¥–∞–ª–µ–Ω–æ:** ~450
- **–£—è–∑–≤–∏–º–æ—Å—Ç–µ–π —É—Å—Ç—Ä–∞–Ω–µ–Ω–æ:** 3 –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ
- **–í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:** ~25 –º–∏–Ω—É—Ç

---

## ‚úÖ –î–û–ü–û–õ–ù–ò–¢–ï–õ–¨–ù–´–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø (2025-10-11 –°–µ—Å—Å–∏—è 2)

### üóëÔ∏è –£–¥–∞–ª–µ–Ω—ã –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä—É–¥–∏–º–µ–Ω—Ç—ã

**Frontend:**
1. ‚úÖ **–£–¥–∞–ª–µ–Ω—ã deprecated —Ñ—É–Ω–∫—Ü–∏–∏ –∏–∑ `services/auth.ts`:**
   - `AuthService.getAuthHeaders()` - –≤–æ–∑–≤—Ä–∞—â–∞–ª `{}` (–ë–ï–ó —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏)
   - `AuthService.getCsrfToken()` - –≤–æ–∑–≤—Ä–∞—â–∞–ª `''` (–ë–ï–ó —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏)
   - **–ü—Ä–∏—á–∏–Ω–∞:** JWT —É–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è BFF proxy —á–µ—Ä–µ–∑ httpOnly cookies
   - **–ó–∞–º–µ–Ω–∞:** CSRF —Ç–æ–∫–µ–Ω—ã –ù–ï –Ω—É–∂–Ω—ã –≤ BFF –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ

2. ‚úÖ **–£–¥–∞–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `createAdminHeaders()` –∏–∑ `utils/csrf.ts`:**
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∞ —Ä—É—á–Ω–æ–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ `Authorization: Bearer` header
   - **–ü—Ä–∏—á–∏–Ω–∞:** –£—Å—Ç–∞—Ä–µ–≤—à–∞—è, –Ω–∞—Ä—É—à–∞–µ—Ç BFF proxy –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É
   - **–ó–∞–º–µ–Ω–∞:** –í—Å–µ –∑–∞–ø—Ä–æ—Å—ã —á–µ—Ä–µ–∑ `apiClient` (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è)

3. ‚úÖ **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω `app/[locale]/docs/page.tsx`:**
   - **–ü—Ä–æ–±–ª–µ–º–∞:** –ü—Ä—è–º–æ–µ –æ–±—Ä–∞—â–µ–Ω–∏–µ –∫ backend —á–µ—Ä–µ–∑ `configManager.getApiUrl()`
   - **–ë—ã–ª–æ:** `fetch(${apiUrl}/api/v1/docs/files)` + `AuthService.getAuthHeaders()`
   - **–°—Ç–∞–ª–æ:** `apiClient.get('/docs/files')` ‚Üí —á–µ—Ä–µ–∑ BFF proxy `/api/v2`
   - **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:** –£—Å—Ç—Ä–∞–Ω–µ–Ω–∞ —É—è–∑–≤–∏–º–æ—Å—Ç—å –æ–±—Ö–æ–¥–∞ BFF proxy

4. ‚úÖ **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω `services/api-client.ts`:**
   - –£–¥–∞–ª–µ–Ω –≤—ã–∑–æ–≤ `AuthService.getCsrfToken()` (–Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –º–µ—Ç–æ–¥)
   - –ú–µ—Ç–æ–¥ `getCsrfToken()` —Ç–µ–ø–µ—Ä—å –≤—Å–µ–≥–¥–∞ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `null`
   - **–ü—Ä–∏—á–∏–Ω–∞:** CSRF —É–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è backend –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤ BFF

### üìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã Pre-check (–°–µ—Å—Å–∏—è 2)

**Backend:**
- ‚úÖ `make format` ‚Üí –∫–æ–¥ –æ—Ç—Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω (gofumpt + goimports)
- ‚úÖ `make lint` ‚Üí **0 issues** (golangci-lint)
- ‚úÖ `go build ./...` ‚Üí —Å–±–æ—Ä–∫–∞ —É—Å–ø–µ—à–Ω–∞

**Frontend:**
- ‚úÖ `yarn format` ‚Üí –∫–æ–¥ –æ—Ç—Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω (Prettier, 14.24s)
- ‚úÖ `yarn lint` ‚Üí **0 warnings, 0 errors** (ESLint)
- ‚úÖ `yarn build` ‚Üí **—Å–±–æ—Ä–∫–∞ —É—Å–ø–µ—à–Ω–∞ (65.23s)**
- ‚úÖ TypeScript —Ç–∏–ø–∏–∑–∞—Ü–∏—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞

### üéØ –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –°–µ—Å—Å–∏–∏ 2
- **–§–∞–π–ª–æ–≤ –∏–∑–º–µ–Ω–µ–Ω–æ:** 4
- **–§–∞–π–ª–æ–≤ —É–¥–∞–ª–µ–Ω–æ:** 0
- **–°—Ç—Ä–æ–∫ deprecated –∫–æ–¥–∞ —É–¥–∞–ª–µ–Ω–æ:** ~30
- **–ü—Ä–æ–±–ª–µ–º –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ —É—Å—Ç—Ä–∞–Ω–µ–Ω–æ:** 1 (–æ–±—Ö–æ–¥ BFF –≤ docs/page.tsx)
- **–í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:** ~12 –º–∏–Ω—É—Ç
- **–û—à–∏–±–æ–∫ —Å–±–æ—Ä–∫–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:** 1 (TypeScript: Property 'getCsrfToken' does not exist)

### üß™ –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (2025-10-11 –°–µ—Å—Å–∏—è 3)

**–¶–µ–ª—å:** –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ –≤—Å–µ—Ö –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π —Å —Ä–µ–∞–ª—å–Ω—ã–º –∞–¥–º–∏–Ω—Å–∫–∏–º JWT —Ç–æ–∫–µ–Ω–æ–º

**–†–µ–∑—É–ª—å—Ç–∞—Ç—ã:**

1. ‚úÖ **JWT –í–∞–ª–∏–¥–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ**
   - –¢–æ–∫–µ–Ω: Production admin token (voroshilovdo@gmail.com, user_id: 6)
   - Issuer: https://auth.svetu.rs
   - Expiration: 2025-10-12 20:42:52 CEST (–¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª–µ–Ω)
   - –í–∞–ª–∏–¥–∞—Ü–∏—è: —á–µ—Ä–µ–∑ Auth Service API (NewAuthService)

2. ‚úÖ **GET /api/v1/auth/me - Admin User Info**
   ```json
   {
     "user": {
       "email": "voroshilovdo@gmail.com",
       "id": 6,
       "is_admin": true,
       "roles": ["admin", "user"]
     }
   }
   ```

3. ‚úÖ **GET /api/v1/c2c/categories - C2C Categories**
   - –ö–∞—Ç–µ–≥–æ—Ä–∏–π –Ω–∞–π–¥–µ–Ω–æ: 2
   - –°—Ç–∞—Ç—É—Å: 200 OK

4. ‚úÖ **GET /api/v1/admin/users - Admin Users List**
   - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –Ω–∞–π–¥–µ–Ω–æ: 2
   - –°—Ç–∞—Ç—É—Å: 200 OK
   - Auth: JWT —á–µ—Ä–µ–∑ Authorization header —Ä–∞–±–æ—Ç–∞–µ—Ç

5. ‚úÖ **Public Access (–±–µ–∑ auth)**
   - GET /api/v1/c2c/categories —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—É–±–ª–∏—á–Ω–æ
   - –ö–∞—Ç–µ–≥–æ—Ä–∏–π: 2

**–í—ã–≤–æ–¥—ã:**
- –í—Å–µ critical endpoints —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- JWT –≤–∞–ª–∏–¥–∞—Ü–∏—è —á–µ—Ä–µ–∑ Auth Service —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∏—Ä—É–µ—Ç
- Admin middleware –ø—Ä–æ–ø—É—Å–∫–∞–µ—Ç –∑–∞–ø—Ä–æ—Å—ã —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º —Ç–æ–∫–µ–Ω–æ–º
- Public endpoints –¥–æ—Å—Ç—É–ø–Ω—ã –±–µ–∑ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
- BFF proxy –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ –∑–∞–¥—É–º–∞–Ω–æ

### üéØ –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –°–µ—Å—Å–∏–∏ 3 (Functional Testing)
- **Endpoint –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ:** 5
- **–£—Å–ø–µ—à–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤:** 5 / 5 (100%)
- **–í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:** ~8 –º–∏–Ω—É—Ç
- **–ü—Ä–æ–±–ª–µ–º –Ω–∞–π–¥–µ–Ω–æ:** 0

---

## üéØ –ü–†–ò–û–†–ò–¢–ï–¢–ù–´–ô –ü–õ–ê–ù –ò–°–ü–†–ê–í–õ–ï–ù–ò–ô

### ‚úÖ –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô (Security) - –í–´–ü–û–õ–ù–ï–ù–û (2025-10-11):

1. **–£–¥–∞–ª–∏—Ç—å `/lib/api.ts`** - XSS —É—è–∑–≤–∏–º–æ—Å—Ç—å
   ```bash
   rm frontend/svetu/src/lib/api.ts
   grep -r "from '@/lib/api'" frontend/svetu/src/ # –Ω–∞–π—Ç–∏ –∏–º–ø–æ—Ä—Ç—ã
   ```

2. **–ò—Å–ø—Ä–∞–≤–∏—Ç—å B2C Variants** - 4 —Ñ–∞–π–ª–∞ —Å –æ–±—Ö–æ–¥–æ–º BFF
   ```bash
   # VariantStockTable.tsx
   # AttributeSetup.tsx
   # VariantGenerator.tsx
   # VariantManager.tsx
   ```

3. **–ò—Å–ø—Ä–∞–≤–∏—Ç—å CategoryDetector** - –ø—Ä—è–º–∞—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
   ```bash
   frontend/svetu/src/services/categoryDetector.ts
   ```

### üü° –í–´–°–û–ö–ò–ô (Architecture) - –ù–∞ —ç—Ç–æ–π –Ω–µ–¥–µ–ª–µ:

4. **–£–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å API clients** - —É–¥–∞–ª–∏—Ç—å –¥—É–±–ª–∏–∫–∞—Ç—ã (3 ‚Üí 1)
   ```bash
   rm frontend/svetu/src/lib/api-client.ts
   # –û–±–Ω–æ–≤–∏—Ç—å –∏–º–ø–æ—Ä—Ç—ã
   ```

5. **–£–¥–∞–ª–∏—Ç—å deprecated —Ñ—É–Ω–∫—Ü–∏–∏**
   - `getAuthHeaders()` –≤ `services/auth.ts`
   - `createAdminHeaders()` –≤ `utils/csrf.ts`

6. **–£–¥–∞–ª–∏—Ç—å backend/internal/alerting/** - –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–π –º–æ–¥—É–ª—å

7. **–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å Webhook Retry** - –∫—Ä–∏—Ç–∏—á–Ω–æ –¥–ª—è –ø–ª–∞—Ç–µ–∂–µ–π

### üü¢ –°–†–ï–î–ù–ò–ô (Code Quality) - –í –±–ª–∏–∂–∞–π—à–∏–µ 2 –Ω–µ–¥–µ–ª–∏:

8. **–ò—Å–ø—Ä–∞–≤–∏—Ç—å refresh token rate limit** - backend
9. **–î–æ–±–∞–≤–∏—Ç—å missing API fields** - rating, verified, weight
10. **–£–¥–∞–ª–∏—Ç—å .backup —Ñ–∞–π–ª—ã**
    ```bash
    find backend/ -name "*.backup" -o -name "*.bak" | xargs rm
    ```

11. **–£–¥–∞–ª–∏—Ç—å –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –ª–æ–≥–æ—Ç–∏–ø—ã** - –æ—Å—Ç–∞–≤–∏—Ç—å 1-2 –≤–∞—Ä–∏–∞–Ω—Ç–∞

12. **–î–æ–±–∞–≤–∏—Ç—å ESLint –ø—Ä–∞–≤–∏–ª–∞**
    ```json
    {
      "rules": {
        "no-restricted-imports": ["error", {
          "patterns": ["**/lib/api*"]
        }],
        "no-restricted-syntax": ["error", {
          "selector": "CallExpression[callee.property.name='getItem'][arguments.0.value='jwt_token']",
          "message": "Never access JWT from localStorage - use BFF proxy"
        }]
      }
    }
    ```

13. **–°–æ–∑–¥–∞—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é** - API Client Usage Guide

---

## üìà –°–¢–ê–¢–ò–°–¢–ò–ö–ê –ö–û–î–û–í–û–ô –ë–ê–ó–´

### Backend

| –ú–µ—Ç—Ä–∏–∫–∞ | –ó–Ω–∞—á–µ–Ω–∏–µ |
|---------|----------|
| –ú–æ–¥—É–ª–∏ | 20+ |
| API Endpoints | 300+ |
| Domain Models | 50+ |
| TODO –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ | 120+ |
| –ù–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –º–æ–¥—É–ª–∏ | 1 (alerting) |
| Backup —Ñ–∞–π–ª—ã | 2 |

### Frontend

| –ú–µ—Ç—Ä–∏–∫–∞ | –ó–Ω–∞—á–µ–Ω–∏–µ |
|---------|----------|
| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã | 200+ |
| API Calls | 150+ endpoints |
| Type Definitions | 22 —Ñ–∞–π–ª–∞ |
| TODO –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ | 90+ |
| –î—É–±–ª–∏–∫–∞—Ç—ã API clients | 3 |
| –£—è–∑–≤–∏–º–æ—Å—Ç–∏ | 3 –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ |

---

## ‚úÖ –ß–¢–û –†–ê–ë–û–¢–ê–ï–¢ –•–û–†–û–®–û

### Backend
- ‚úÖ –ß–∏—Å—Ç–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ (domain, handlers, services)
- ‚úÖ –•–æ—Ä–æ—à–µ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ middleware (auth, rate limit, CORS)
- ‚úÖ Swagger –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∞–∫—Ç—É–∞–ª—å–Ω–∞
- ‚úÖ –ú–∏–≥—Ä–∞—Ü–∏–∏ –ë–î –ø—Ä–∞–≤–∏–ª—å–Ω–æ –æ—Ä–≥–∞–Ω–∏–∑–æ–≤–∞–Ω—ã
- ‚úÖ Auth Service integration —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- ‚úÖ –ú–∏–Ω–∏–º—É–º –∑–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –∫–æ–¥–∞

### Frontend
- ‚úÖ BFF Proxy Architecture –Ω–∞—Å—Ç—Ä–æ–µ–Ω –ø—Ä–∞–≤–∏–ª—å–Ω–æ
- ‚úÖ –û—Å–Ω–æ–≤–Ω–æ–π apiClient —Ö–æ—Ä–æ—à–æ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω
- ‚úÖ Redux toolkit –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- ‚úÖ i18n —Å–∏—Å—Ç–µ–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç (en, ru, sr)
- ‚úÖ TypeScript —Ç–∏–ø–∏–∑–∞—Ü–∏—è –≤ —Ü–µ–ª–æ–º —Ö–æ—Ä–æ—à–∞—è
- ‚úÖ –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Ö–æ—Ä–æ—à–æ –æ—Ä–≥–∞–Ω–∏–∑–æ–≤–∞–Ω—ã

---

## üìö –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò –î–õ–Ø –ö–û–ú–ê–ù–î–´

### Code Review Checklist

**–ü—Ä–∏ —Ä–µ–≤—å—é PR –ø—Ä–æ–≤–µ—Ä—è–π:**

- [ ] –ù–µ—Ç –∏–º–ø–æ—Ä—Ç–æ–≤ –∏–∑ `/lib/api*`
- [ ] –ù–µ—Ç `Authorization: Bearer` headers –≤—Ä—É—á–Ω—É—é
- [ ] –ù–µ—Ç `localStorage.getItem('jwt_token')`
- [ ] –í—Å–µ API –≤—ã–∑–æ–≤—ã —á–µ—Ä–µ–∑ `apiClient`
- [ ] –ù–µ—Ç –ø—Ä—è–º—ã—Ö `fetch()` –∫ backend
- [ ] –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è generated —Ç–∏–ø—ã –∏–∑ OpenAPI
- [ ] –ù–µ—Ç –Ω–æ–≤—ã—Ö TODO –±–µ–∑ issue –≤ GitHub

### Best Practices

**Backend:**
1. ‚úÖ –í–°–ï–ì–î–ê –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å middleware –∏–∑ auth-service –±–∏–±–ª–∏–æ—Ç–µ–∫–∏
2. ‚úÖ –í–°–ï–ì–î–ê —Å–æ–∑–¥–∞–≤–∞—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏ –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏–π –ë–î
3. ‚úÖ –í–°–ï–ì–î–ê –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å placeholders –¥–ª—è –æ—à–∏–±–æ–∫ (–Ω–µ —Ä–µ–∞–ª—å–Ω—ã–µ —Ç–µ–∫—Å—Ç—ã)
4. ‚ùå –ù–ï —Å–æ–∑–¥–∞–≤–∞—Ç—å –ø—É–±–ª–∏—á–Ω—ã–µ endpoints –±–µ–∑ rate limit

**Frontend:**
1. ‚úÖ –í–°–ï–ì–î–ê –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `apiClient` –∏–∑ `/services/api-client.ts`
2. ‚ùå –ù–ò–ö–û–ì–î–ê –Ω–µ –±—Ä–∞—Ç—å JWT –∏–∑ localStorage
3. ‚ùå –ù–ò–ö–û–ì–î–ê –Ω–µ –¥–æ–±–∞–≤–ª—è—Ç—å Authorization headers –≤—Ä—É—á–Ω—É—é
4. ‚úÖ –í–°–ï–ì–î–ê –ø—Ä–æ—Ö–æ–¥–∏—Ç—å —á–µ—Ä–µ–∑ BFF proxy `/api/v2/*`
5. ‚úÖ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å generated —Ç–∏–ø—ã –∏–∑ OpenAPI

### CI/CD Recommendations

**–î–æ–±–∞–≤–∏—Ç—å –≤ CI pipeline:**

```yaml
# .github/workflows/code-quality.yml
- name: Check for security issues
  run: |
    # –ó–∞–ø—Ä–µ—Ç–∏—Ç—å localStorage JWT
    ! grep -r "localStorage.getItem('jwt_token')" frontend/

    # –ó–∞–ø—Ä–µ—Ç–∏—Ç—å /lib/api –∏–º–ø–æ—Ä—Ç—ã
    ! grep -r "from '@/lib/api" frontend/src/

    # –ó–∞–ø—Ä–µ—Ç–∏—Ç—å –ø—Ä—è–º—ã–µ Authorization headers
    ! grep -r "Authorization.*Bearer.*token" frontend/src/components/

- name: Check for dead code
  run: |
    # –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –Ω–µ—Ç backup —Ñ–∞–π–ª–æ–≤
    ! find backend/ -name "*.backup" -o -name "*.bak"

- name: Sync OpenAPI types
  run: |
    cd backend && make generate-types
    git diff --exit-code frontend/svetu/src/types/generated/
```

---

## üîó –°–°–´–õ–ö–ò –ù–ê –î–ï–¢–ê–õ–¨–ù–´–ï –û–¢–ß–ï–¢–´

–°–æ–∑–¥–∞–Ω—ã –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –æ—Ç—á–µ—Ç—ã –¥–ª—è —É–≥–ª—É–±–ª–µ–Ω–Ω–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞:

1. **Backend API Endpoints** - –ø–æ–ª–Ω—ã–π —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö 300+ endpoints
2. **Frontend API Usage** - –¥–µ—Ç–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è API
3. **Dead Code Analysis** - –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–π –∫–æ–¥ –≤ –æ–±–µ–∏—Ö —á–∞—Å—Ç—è—Ö
4. **Security Issues** - –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
5. **Type Mismatches** - –Ω–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è —Ç–∏–ø–æ–≤ Backend ‚Üî Frontend

---

## üìä METRICS & KPI

### –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ

| –ö–∞—Ç–µ–≥–æ—Ä–∏—è | –û—Ü–µ–Ω–∫–∞ | –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π |
|-----------|--------|-------------|
| **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å** | üî¥ **4/10** | 3 –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ —É—è–∑–≤–∏–º–æ—Å—Ç–∏ |
| **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞** | üü° **7/10** | –•–æ—Ä–æ—à–∞—è, –Ω–æ –µ—Å—Ç—å –¥—É–±–ª–∏–∫–∞—Ç—ã |
| **–ö–∞—á–µ—Å—Ç–≤–æ –∫–æ–¥–∞** | üü¢ **8/10** | –ú–∏–Ω–∏–º—É–º dead code |
| **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è** | üü¢ **9/10** | Swagger –∞–∫—Ç—É–∞–ª–µ–Ω, TODO –ø–æ–º–µ—á–µ–Ω—ã |
| **–¢–∏–ø–∏–∑–∞—Ü–∏—è** | üü° **7/10** | –ï—Å—Ç—å —Ä–∞—Å—Ö–æ–∂–¥–µ–Ω–∏—è Backend ‚Üî Frontend |

### –¶–µ–ª–µ–≤—ã–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏ (–ø–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π)

| –ö–∞—Ç–µ–≥–æ—Ä–∏—è | –¶–µ–ª—å |
|-----------|------|
| **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å** | üü¢ **10/10** |
| **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞** | üü¢ **9/10** |
| **–ö–∞—á–µ—Å—Ç–≤–æ –∫–æ–¥–∞** | üü¢ **9/10** |
| **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è** | üü¢ **10/10** |
| **–¢–∏–ø–∏–∑–∞—Ü–∏—è** | üü¢ **9/10** |

---

## ‚è±Ô∏è –û–¶–ï–ù–ö–ê –í–†–ï–ú–ï–ù–ò –ù–ê –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø

| –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç | –ó–∞–¥–∞—á | –û—Ü–µ–Ω–∫–∞ –≤—Ä–µ–º–µ–Ω–∏ |
|-----------|-------|----------------|
| üî¥ –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π | 3 | 1-2 –¥–Ω—è |
| üü° –í—ã—Å–æ–∫–∏–π | 4 | 3-5 –¥–Ω–µ–π |
| üü¢ –°—Ä–µ–¥–Ω–∏–π | 6 | 1-2 –Ω–µ–¥–µ–ª–∏ |
| **–ò–¢–û–ì–û** | **13** | **~3 –Ω–µ–¥–µ–ª–∏** |

---

## üéØ –ó–ê–ö–õ–Æ–ß–ï–ù–ò–ï

**–û–±—â–∞—è –æ—Ü–µ–Ω–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞: 7.5/10** üü°

### –°–∏–ª—å–Ω—ã–µ —Å—Ç–æ—Ä–æ–Ω—ã:
- ‚úÖ –•–æ—Ä–æ—à–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–æ–¥–∞
- ‚úÖ –ú–∏–Ω–∏–º—É–º —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–≥–æ –¥–æ–ª–≥–∞
- ‚úÖ –ê–∫—Ç—É–∞–ª—å–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ middleware –∏ auth

### –¢—Ä–µ–±—É–µ—Ç –≤–Ω–∏–º–∞–Ω–∏—è:
- üî¥ **–ö–†–ò–¢–ò–ß–ù–û:** 3 —É—è–∑–≤–∏–º–æ—Å—Ç–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
- üü° –î—É–±–ª–∏–∫–∞—Ç—ã API –∫–ª–∏–µ–Ω—Ç–æ–≤
- üü° –ù–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è —Ç–∏–ø–æ–≤ Backend ‚Üî Frontend
- üü° –ù–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –º–æ–¥—É–ª–∏ –∏ —Ñ—É–Ω–∫—Ü–∏–∏

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:
**–ù–µ–º–µ–¥–ª–µ–Ω–Ω–æ –∏—Å–ø—Ä–∞–≤–∏—Ç—å –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ (1-2 –¥–Ω—è), –∑–∞—Ç–µ–º –ø—Ä–æ–≤–µ—Å—Ç–∏ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã (1 –Ω–µ–¥–µ–ª—è).**

---

**–°–ª–µ–¥—É—é—â–∏–π –∞—É–¥–∏—Ç:** –ß–µ—Ä–µ–∑ 3 –º–µ—Å—è—Ü–∞ (2026-01-10)

**–ê–≤—Ç–æ—Ä –æ—Ç—á–µ—Ç–∞:** Claude Code
**–ö–æ–Ω—Ç–∞–∫—Ç:** –î–º–∏—Ç—Ä–∏–π (dim)
