# üìä –ö–æ–º–ø–ª–µ–∫—Å–Ω–∞—è –æ—Ü–µ–Ω–∫–∞ –º–∏–≥—Ä–∞—Ü–∏–∏ marketplace ‚Üí c2c, storefronts ‚Üí b2c

**–î–∞—Ç–∞ –∞–Ω–∞–ª–∏–∑–∞**: 2025-10-08
**–ê–≤—Ç–æ—Ä**: Claude Code Analysis
**–°—Ç–∞—Ç—É—Å**: –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–∞—è –æ—Ü–µ–Ω–∫–∞

‚ö° **–í–ê–ñ–ù–û**: –ü—Ä–æ–µ–∫—Ç –ù–ï –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ - –æ–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å –ù–ï —Ç—Ä–µ–±—É–µ—Ç—Å—è!

---

## üîç –ê–Ω–∞–ª–∏–∑ –º–∞—Å—à—Ç–∞–±–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–π

### –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –∫–æ–¥—É:

**Backend:**
- üìÅ **13,021 —É–ø–æ–º–∏–Ω–∞–Ω–∏–π** –≤ **297 —Ñ–∞–π–ª–∞—Ö**
- üóÇÔ∏è **3 –º–æ–¥—É–ª—è –ø—Ä–æ–µ–∫—Ç–∞**: `internal/proj/marketplace`, `internal/proj/storefront`, `internal/proj/storefronts`
- üìÑ **~47 –º–∏–≥—Ä–∞—Ü–∏–π** —Å–æ–¥–µ—Ä–∂–∞—Ç —É–ø–æ–º–∏–Ω–∞–Ω–∏—è

**Frontend:**
- üìÅ **5,053 —É–ø–æ–º–∏–Ω–∞–Ω–∏–π** –≤ **381 —Ñ–∞–π–ª–∞—Ö**
- üóÇÔ∏è **7 –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π**: app/marketplace, app/storefronts, components/marketplace, components/storefronts, –∏ –¥—Ä.
- üìù **–ü–µ—Ä–µ–≤–æ–¥—ã**: 3 —è–∑—ã–∫–∞ √ó –º–Ω–æ–∂–µ—Å—Ç–≤–æ —Ñ–∞–π–ª–æ–≤ (marketplace.json, storefronts.json –∏ —Ç.–¥.)

**–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:**
- üóÑÔ∏è **23 —Ç–∞–±–ª–∏—Ü—ã** (–æ–±—â–∏–π —Ä–∞–∑–º–µ—Ä ~4.5 MB):
  - `marketplace_*`: 8 —Ç–∞–±–ª–∏—Ü (2.6 MB)
  - `storefront_*`: 15 —Ç–∞–±–ª–∏—Ü (1.9 MB)

**OpenSearch:**
- üîç **3 –∏–Ω–¥–µ–∫—Å–∞**:
  - `marketplace_listings` (12 –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤, 1.3 MB)
  - `storefront_products` (0 –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤, 3.3 KB)
  - `storefronts` (1 –¥–æ–∫—É–º–µ–Ω—Ç, 12.5 KB)

**S3/MinIO:**
- üì¶ –°—Ç—Ä—É–∫—Ç—É—Ä–∞: `marketplace-images/`, `storefront-images/`

---

## üí° –ú–æ—è –æ—Ü–µ–Ω–∫–∞ —Å–ª–æ–∂–Ω–æ—Å—Ç–∏

### ‚úÖ **–†–ï–ê–õ–ò–ó–£–ï–ú–û –ò –£–ü–†–û–©–ï–ù–û**

**–û–±—â–∞—è –æ—Ü–µ–Ω–∫–∞**: üü° **7/10** –ø–æ —Å–ª–æ–∂–Ω–æ—Å—Ç–∏

**–í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è**: üìÖ **2-4 –Ω–µ–¥–µ–ª–∏** (–ø—Ä–∏ –ø–æ–ª–Ω–æ–π –∑–∞–Ω—è—Ç–æ—Å—Ç–∏)

**–†–∏—Å–∫–∏**: ‚ö†Ô∏è **–°–†–ï–î–ù–ò–ï** - –ø—Ä–æ–µ–∫—Ç –Ω–µ –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ, –º–æ–∂–Ω–æ –º–∏–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –±–µ–∑ –æ–≥–ª—è–¥–∫–∏ –Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞**: üöÄ –ù–µ –Ω—É–∂–Ω–∞ –æ–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å - –º–∏–≥—Ä–∞—Ü–∏—è –≤ 1.5-2 —Ä–∞–∑–∞ –±—ã—Å—Ç—Ä–µ–µ!

---

## üéØ –ü–æ—á–µ–º—É —ç—Ç–æ –∏–º–µ–µ—Ç —Å–º—ã—Å–ª?

### **–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**

1. ‚úÖ **–°–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∞—è —è—Å–Ω–æ—Å—Ç—å**
   - `c2c` (customer-to-customer) ‚Äî –æ–±—ä—è–≤–ª–µ–Ω–∏—è –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
   - `b2c` (business-to-customer) ‚Äî —Ç–æ–≤–∞—Ä—ã –æ—Ç –≤–∏—Ç—Ä–∏–Ω/–º–∞–≥–∞–∑–∏–Ω–æ–≤

2. ‚úÖ **–ú–µ–Ω—å—à–µ –ø—É—Ç–∞–Ω–∏—Ü—ã –≤ –∫–æ–¥–µ**
   - –ù–µ—Ç –¥–≤—É—Å–º—ã—Å–ª–µ–Ω–Ω–æ—Å—Ç–∏: "marketplace" = —Ä—ã–Ω–æ–∫ –∏–ª–∏ –æ–±—ä—è–≤–ª–µ–Ω–∏–µ?
   - "storefront" = –≤–∏—Ç—Ä–∏–Ω–∞ –∏–ª–∏ –ø—Ä–æ–¥—É–∫—Ç –≤–∏—Ç—Ä–∏–Ω—ã?

3. ‚úÖ **–õ—É—á—à–∞—è –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å**
   - –õ–µ–≥—á–µ –¥–æ–±–∞–≤–∏—Ç—å –≤ –±—É–¥—É—â–µ–º b2b (business-to-business)
   - –õ–æ–≥–∏—á–µ—Å–∫–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –±–∏–∑–Ω–µ—Å-–º–æ–¥–µ–ª–µ–π

4. ‚úÖ **–°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –∏–Ω–¥—É—Å—Ç—Ä–∏–∏**
   - C2C/B2C/B2B ‚Äî —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è —Ç–µ—Ä–º–∏–Ω–æ–ª–æ–≥–∏—è e-commerce

### **–¢–µ–∫—É—â–∏–µ –ø—Ä–æ–±–ª–µ–º—ã:**
- `marketplace_listings` ‚Äî –Ω–µ–ø–æ–Ω—è—Ç–Ω–æ, —á—Ç–æ —ç—Ç–æ C2C
- `storefront_products` ‚Äî –¥–ª–∏–Ω–Ω–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ
- –°–º–µ—à–µ–Ω–∏–µ –ø–æ–Ω—è—Ç–∏–π –≤ API endpoints

---

## üìã –î–µ—Ç–∞–ª—å–Ω—ã–π –ø–ª–∞–Ω –º–∏–≥—Ä–∞—Ü–∏–∏

### **–§–∞–∑–∞ 1: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ (3-5 –¥–Ω–µ–π)**

#### 1.1 –°–æ–∑–¥–∞–Ω–∏–µ –º–∞–ø–ø–∏–Ω–≥–∞ –∏–º–µ–Ω
```bash
# –°–æ–∑–¥–∞—Ç—å —Ñ–∞–π–ª migration_map.json
marketplace_listings ‚Üí c2c_listings
marketplace_categories ‚Üí c2c_categories
marketplace_images ‚Üí c2c_images
marketplace_chats ‚Üí c2c_chats
marketplace_messages ‚Üí c2c_messages
marketplace_favorites ‚Üí c2c_favorites
marketplace_orders ‚Üí c2c_orders
marketplace_listing_variants ‚Üí c2c_listing_variants

storefronts ‚Üí b2c_stores
storefront_products ‚Üí b2c_products
storefront_product_images ‚Üí b2c_product_images
storefront_product_variants ‚Üí b2c_product_variants
storefront_product_attributes ‚Üí b2c_product_attributes
storefront_orders ‚Üí b2c_orders
storefront_order_items ‚Üí b2c_order_items
storefront_favorites ‚Üí b2c_favorites
storefront_hours ‚Üí b2c_store_hours
storefront_staff ‚Üí b2c_store_staff
storefront_payment_methods ‚Üí b2c_payment_methods
storefront_delivery_options ‚Üí b2c_delivery_options
storefront_inventory_movements ‚Üí b2c_inventory_movements
user_storefronts ‚Üí user_b2c_stores
storefront_product_variant_images ‚Üí b2c_product_variant_images
```

#### 1.2 –†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ
```bash
# –ü–æ–ª–Ω—ã–π –¥–∞–º–ø –ë–î
pg_dump -Fc svetubd > backup_pre_migration.dump

# –†–µ–∑–µ—Ä–≤–Ω–∞—è –∫–æ–ø–∏—è OpenSearch
curl -X PUT "localhost:9200/_snapshot/my_backup/snapshot_1?wait_for_completion=true"

# –ë—ç–∫–∞–ø MinIO
mc mirror local/marketplace-images local/marketplace-images-backup
mc mirror local/storefront-images local/storefront-images-backup
```

#### 1.3 –°–æ–∑–¥–∞–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤–æ–π —Å—Ä–µ–¥—ã
```bash
# –ö–æ–ø–∏—è –ë–î –¥–ª—è —Ç–µ—Å—Ç–æ–≤
createdb svetubd_migration_test
pg_restore -d svetubd_migration_test backup_pre_migration.dump
```

---

### **–§–∞–∑–∞ 2: –ú–∏–≥—Ä–∞—Ü–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö (5-7 –¥–Ω–µ–π)**

#### 2.1 –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤—ã—Ö —Ç–∞–±–ª–∏—Ü —Å –Ω–æ–≤—ã–º–∏ –∏–º–µ–Ω–∞–º–∏
```sql
-- migration 000172_create_c2c_b2c_tables.up.sql

-- C2C —Ç–∞–±–ª–∏—Ü—ã
CREATE TABLE c2c_listings (LIKE marketplace_listings INCLUDING ALL);
CREATE TABLE c2c_categories (LIKE marketplace_categories INCLUDING ALL);
CREATE TABLE c2c_images (LIKE marketplace_images INCLUDING ALL);
-- ... –∏ —Ç–∞–∫ –¥–∞–ª–µ–µ –¥–ª—è –≤—Å–µ—Ö 8 —Ç–∞–±–ª–∏—Ü

-- B2C —Ç–∞–±–ª–∏—Ü—ã
CREATE TABLE b2c_stores (LIKE storefronts INCLUDING ALL);
CREATE TABLE b2c_products (LIKE storefront_products INCLUDING ALL);
CREATE TABLE b2c_product_images (LIKE storefront_product_images INCLUDING ALL);
-- ... –∏ —Ç–∞–∫ –¥–∞–ª–µ–µ –¥–ª—è –≤—Å–µ—Ö 15 —Ç–∞–±–ª–∏—Ü
```

#### 2.2 –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
```sql
-- –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö (—Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º ID)
INSERT INTO c2c_listings SELECT * FROM marketplace_listings;
INSERT INTO c2c_categories SELECT * FROM marketplace_categories;
-- ... –∏ —Ç.–¥.

INSERT INTO b2c_stores SELECT * FROM storefronts;
INSERT INTO b2c_products SELECT * FROM storefront_products;
-- ... –∏ —Ç.–¥.
```

#### 2.3 –ü–µ—Ä–µ—Å–æ–∑–¥–∞–Ω–∏–µ –∏–Ω–¥–µ–∫—Å–æ–≤ –∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π
```sql
-- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ LIKE INCLUDING ALL
-- –ù–æ –Ω—É–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –∏ –æ–±–Ω–æ–≤–∏—Ç—å –≤–Ω–µ—à–Ω–∏–µ –∫–ª—é—á–∏ —Å –Ω–æ–≤—ã–º–∏ –∏–º–µ–Ω–∞–º–∏
ALTER TABLE c2c_listings
  DROP CONSTRAINT IF EXISTS marketplace_listings_category_id_fkey,
  ADD CONSTRAINT c2c_listings_category_id_fkey
    FOREIGN KEY (category_id) REFERENCES c2c_categories(id);
```

#### 2.4 –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç—Ä–∏–≥–≥–µ—Ä–æ–≤ –∏ —Ñ—É–Ω–∫—Ü–∏–π
```sql
-- –ù–∞–π—Ç–∏ –≤—Å–µ —Ç—Ä–∏–≥–≥–µ—Ä—ã –Ω–∞ marketplace/storefront —Ç–∞–±–ª–∏—Ü—ã
SELECT * FROM pg_trigger
WHERE tgrelid::regclass::text LIKE '%marketplace%'
   OR tgrelid::regclass::text LIKE '%storefront%';

-- –ü–µ—Ä–µ—Å–æ–∑–¥–∞—Ç—å –∏—Ö –¥–ª—è –Ω–æ–≤—ã—Ö —Ç–∞–±–ª–∏—Ü
-- –ù–∞–ø—Ä–∏–º–µ—Ä: trigger_update_marketplace_listings_updated_at ‚Üí trigger_update_c2c_listings_updated_at
```

---

### **–§–∞–∑–∞ 3: Backend –º–∏–≥—Ä–∞—Ü–∏—è (7-10 –¥–Ω–µ–π)**

#### 3.1 –ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ –º–æ–¥—É–ª–µ–π –ø—Ä–æ–µ–∫—Ç–∞
```bash
# –ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞—Ç—å –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏
mv internal/proj/marketplace internal/proj/c2c
mv internal/proj/storefronts internal/proj/b2c

# –û–±–Ω–æ–≤–∏—Ç—å –∏–º–ø–æ—Ä—Ç—ã –≤–æ –í–°–ï–• —Ñ–∞–π–ª–∞—Ö
find . -name "*.go" -exec sed -i 's|internal/proj/marketplace|internal/proj/c2c|g' {} +
find . -name "*.go" -exec sed -i 's|internal/proj/storefronts|internal/proj/b2c|g' {} +
```

#### 3.2 –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –º–æ–¥–µ–ª–µ–π (domain/models)
```bash
# –ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞—Ç—å —Ñ–∞–π–ª—ã
mv internal/domain/models/marketplace_listing.go ‚Üí c2c_listing.go
mv internal/domain/models/storefront_product.go ‚Üí b2c_product.go

# –û–±–Ω–æ–≤–∏—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—ã
type MarketplaceListing ‚Üí type C2CListing
type StorefrontProduct ‚Üí type B2CProduct
```

#### 3.3 –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ SQL –∑–∞–ø—Ä–æ—Å–æ–≤
```bash
# –ù–∞–π—Ç–∏ –≤—Å–µ —É–ø–æ–º–∏–Ω–∞–Ω–∏—è —Ç–∞–±–ª–∏—Ü –≤ Go –∫–æ–¥–µ
grep -r "marketplace_listings" internal/
grep -r "storefront_products" internal/

# –ó–∞–º–µ–Ω–∏—Ç—å —á–µ—Ä–µ–∑ sed –∏–ª–∏ –≤—Ä—É—á–Ω—É—é
sed -i 's/marketplace_listings/c2c_listings/g' internal/proj/c2c/**/*.go
sed -i 's/storefront_products/b2c_products/g' internal/proj/b2c/**/*.go
```

#### 3.4 –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ API endpoints
```go
// –ë—ã–ª–æ:
app.Get("/api/v1/marketplace/listings", handler.GetListings)
app.Get("/api/v1/storefronts/:id", handler.GetStorefront)

// –°—Ç–∞–ª–æ:
app.Get("/api/v1/c2c/listings", handler.GetListings)
app.Get("/api/v1/b2c/stores/:id", handler.GetStore)
```

**‚úÖ –ü—Ä–æ–µ–∫—Ç –Ω–µ –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ** - —Å—Ç–∞—Ä—ã–µ endpoints —É–¥–∞–ª—è—é—Ç—Å—è –ø–æ–ª–Ω–æ—Å—Ç—å—é!

---

### **–§–∞–∑–∞ 4: Frontend –º–∏–≥—Ä–∞—Ü–∏—è (5-7 –¥–Ω–µ–π)**

#### 4.1 –ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π
```bash
mv src/app/[locale]/marketplace ‚Üí src/app/[locale]/c2c
mv src/app/[locale]/storefronts ‚Üí src/app/[locale]/b2c
mv src/components/marketplace ‚Üí src/components/c2c
mv src/components/storefronts ‚Üí src/components/b2c
```

#### 4.2 –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–∏–ø–æ–≤
```typescript
// src/types/marketplace.ts ‚Üí src/types/c2c.ts
export interface MarketplaceListing ‚Üí export interface C2CListing

// src/types/storefront.ts ‚Üí src/types/b2c.ts
export interface StorefrontProduct ‚Üí export interface B2CProduct
```

#### 4.3 –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ API –∫–ª–∏–µ–Ω—Ç–æ–≤
```typescript
// src/services/marketplaceApi.ts ‚Üí src/services/c2cApi.ts
const response = await apiClient.get('/marketplace/listings')
// ‚Üí
const response = await apiClient.get('/c2c/listings')
```

#### 4.4 –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–µ—Ä–µ–≤–æ–¥–æ–≤
```bash
# –ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞—Ç—å —Ñ–∞–π–ª—ã
mv src/messages/en/marketplace.json ‚Üí c2c.json
mv src/messages/en/storefronts.json ‚Üí b2c.json

# –û–±–Ω–æ–≤–∏—Ç—å –∫–ª—é—á–∏ –ø–µ—Ä–µ–≤–æ–¥–æ–≤
"marketplace.title" ‚Üí "c2c.title"
"storefronts.product" ‚Üí "b2c.product"
```

#### 4.5 –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ä–æ—É—Ç–∏–Ω–≥–∞
```typescript
// next.config.ts –∏–ª–∏ app router
// /marketplace/[id] ‚Üí /c2c/[id]
// /storefronts/[slug] ‚Üí /b2c/[slug]

// ‚úÖ –ü—Ä–æ–µ–∫—Ç –Ω–µ –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ - —Ä–µ–¥–∏—Ä–µ–∫—Ç—ã –Ω–µ –Ω—É–∂–Ω—ã!
// –ü—Ä–æ—Å—Ç–æ —É–¥–∞–ª—è–µ–º —Å—Ç–∞—Ä—ã–µ —Ä–æ—É—Ç—ã –∏ –∏—Å–ø–æ–ª—å–∑—É–µ–º –Ω–æ–≤—ã–µ
```

---

### **–§–∞–∑–∞ 5: OpenSearch –º–∏–≥—Ä–∞—Ü–∏—è (2-3 –¥–Ω—è)**

#### 5.1 –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤—ã—Ö –∏–Ω–¥–µ–∫—Å–æ–≤
```bash
# –°–æ–∑–¥–∞—Ç—å c2c_listings –∏–Ω–¥–µ–∫—Å
curl -X PUT "localhost:9200/c2c_listings" \
  -H 'Content-Type: application/json' \
  -d @opensearch/c2c_mapping.json

# –°–æ–∑–¥–∞—Ç—å b2c_products –∏–Ω–¥–µ–∫—Å
curl -X PUT "localhost:9200/b2c_products" \
  -H 'Content-Type: application/json' \
  -d @opensearch/b2c_products_mapping.json

# –°–æ–∑–¥–∞—Ç—å b2c_stores –∏–Ω–¥–µ–∫—Å
curl -X PUT "localhost:9200/b2c_stores" \
  -H 'Content-Type: application/json' \
  -d @opensearch/b2c_stores_mapping.json
```

#### 5.2 –ü–µ—Ä–µ–∏–Ω–¥–µ–∫—Å–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
```bash
# Reindex –∏–∑ —Å—Ç–∞—Ä—ã—Ö –∏–Ω–¥–µ–∫—Å–æ–≤ –≤ –Ω–æ–≤—ã–µ
curl -X POST "localhost:9200/_reindex" -H 'Content-Type: application/json' -d'
{
  "source": { "index": "marketplace_listings" },
  "dest": { "index": "c2c_listings" }
}'

curl -X POST "localhost:9200/_reindex" -H 'Content-Type: application/json' -d'
{
  "source": { "index": "storefront_products" },
  "dest": { "index": "b2c_products" }
}'
```

#### 5.3 –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–¥–∞ –ø–æ–∏—Å–∫–∞
```go
// internal/proj/c2c/storage/opensearch/repository.go
const indexName = "c2c_listings" // –±—ã–ª–æ "marketplace_listings"

// internal/proj/b2c/storage/opensearch/product_repository.go
const indexName = "b2c_products" // –±—ã–ª–æ "storefront_products"
```

---

### **–§–∞–∑–∞ 6: MinIO/S3 –º–∏–≥—Ä–∞—Ü–∏—è (1-2 –¥–Ω—è)**

#### 6.1 –ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ bucket'–æ–≤
```bash
# –í–∞—Ä–∏–∞–Ω—Ç 1: –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–µ bucket'—ã –∏ —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å
mc mb local/c2c-images
mc mb local/b2c-images

mc mirror local/marketplace-images local/c2c-images
mc mirror local/storefront-images local/b2c-images

# –í–∞—Ä–∏–∞–Ω—Ç 2: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∞–ª–∏–∞—Å—ã (—á–µ—Ä–µ–∑ –∫–æ–¥)
```

#### 6.2 –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–¥–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–∞–π–ª–æ–≤
```go
// internal/storage/minio/client.go
const c2cBucket = "c2c-images" // –±—ã–ª–æ "marketplace-images"
const b2cBucket = "b2c-images" // –±—ã–ª–æ "storefront-images"
```

---

### **–§–∞–∑–∞ 7: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (5-7 –¥–Ω–µ–π)**

#### 7.1 Unit —Ç–µ—Å—Ç—ã
```bash
# Backend
cd backend && go test ./... -v

# Frontend
cd frontend/svetu && yarn test
```

#### 7.2 –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤—Å–µ API endpoints
curl http://localhost:3000/api/v1/c2c/listings
curl http://localhost:3000/api/v1/b2c/stores

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–∏—Å–∫
curl "http://localhost:9200/c2c_listings/_search?q=*"
```

#### 7.3 E2E —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
```bash
# Playwright/Cypress —Ç–µ—Å—Ç—ã
- –°–æ–∑–¥–∞–Ω–∏–µ C2C –æ–±—ä—è–≤–ª–µ–Ω–∏—è
- –°–æ–∑–¥–∞–Ω–∏–µ B2C –ø—Ä–æ–¥—É–∫—Ç–∞
- –ü–æ–∏—Å–∫ –∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è
- –ö–æ—Ä–∑–∏–Ω–∞ –∏ –∑–∞–∫–∞–∑
```

---

### **–§–∞–∑–∞ 8: –î–µ–ø–ª–æ–π –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ (3-5 –¥–Ω–µ–π)**

#### 8.1 Staging –¥–µ–ø–ª–æ–π
```bash
# –†–∞–∑–≤–µ—Ä–Ω—É—Ç—å –Ω–∞ dev.svetu.rs
./deploy-to-dev.sh

# Smoke testing
curl https://devapi.svetu.rs/api/v1/c2c/listings
```

#### 8.2 Production –¥–µ–ø–ª–æ–π
```bash
# ‚úÖ –ü—Ä–æ–µ–∫—Ç –Ω–µ –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ - –º–æ–∂–Ω–æ –º–∏–≥—Ä–∏—Ä–æ–≤–∞—Ç—å —Å—Ä–∞–∑—É!
# 1. –û–±–Ω–æ–≤–∏—Ç—å –ë–î (—Å–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–µ —Ç–∞–±–ª–∏—Ü—ã, —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ)
# 2. –û–±–Ω–æ–≤–∏—Ç—å OpenSearch –∏–Ω–¥–µ–∫—Å—ã
# 3. –†–∞–∑–≤–µ—Ä–Ω—É—Ç—å backend —Å –Ω–æ–≤—ã–º–∏ endpoint'–∞–º–∏
# 4. –†–∞–∑–≤–µ—Ä–Ω—É—Ç—å frontend —Å –Ω–æ–≤—ã–º–∏ –ø—É—Ç—è–º–∏
# 5. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ª–æ–≥–æ–≤ –∏ –º–µ—Ç—Ä–∏–∫
```

#### 8.3 –£–¥–∞–ª–µ–Ω–∏–µ —Å—Ç–∞—Ä—ã—Ö —Å—É—â–Ω–æ—Å—Ç–µ–π
```sql
-- ‚úÖ –ü—Ä–æ–µ–∫—Ç –Ω–µ –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ - –º–æ–∂–Ω–æ —É–¥–∞–ª—è—Ç—å —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ –º–∏–≥—Ä–∞—Ü–∏–∏!
-- –ü–æ—Å–ª–µ –±–∞–∑–æ–≤–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ (1-2 –¥–Ω—è)
DROP TABLE marketplace_listings CASCADE;
DROP TABLE storefront_products CASCADE;
-- ... –∏ —Ç.–¥.

-- OpenSearch
DELETE /marketplace_listings
DELETE /storefront_products
```

---

## ‚ö†Ô∏è –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ —Ä–∏—Å–∫–∏

### 1. **–ü—Ä–æ–ø—É—â–µ–Ω–Ω—ã–µ —É–ø–æ–º–∏–Ω–∞–Ω–∏—è**
- –° 18,000+ —É–ø–æ–º–∏–Ω–∞–Ω–∏–π –ª–µ–≥–∫–æ —á—Ç–æ-—Ç–æ –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å
- **–†–µ—à–µ–Ω–∏–µ**: –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ —Å–∫—Ä–∏–ø—Ç—ã + —Ç—â–∞—Ç–µ–ª—å–Ω—ã–π code review

### 2. **–°–ª–æ–º–∞–Ω–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏**
- –°—Ç–æ—Ä–æ–Ω–Ω–∏–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ –º–æ–≥—É—Ç —Å—Å—ã–ª–∞—Ç—å—Å—è –Ω–∞ —Å—Ç–∞—Ä—ã–µ –∏–º–µ–Ω–∞
- **–†–µ—à–µ–Ω–∏–µ**: –ü–æ–ª–Ω–∞—è –ø–µ—Ä–µ–ø–∏—Å—å –∫–æ–¥–∞, —Ç—â–∞—Ç–µ–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### 3. **–î–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π**
- –ò–∑–±—Ä–∞–Ω–Ω–æ–µ, –∫–æ—Ä–∑–∏–Ω–∞, –∏—Å—Ç–æ—Ä–∏—è –º–æ–≥—É—Ç —Å–ª–æ–º–∞—Ç—å—Å—è
- **–†–µ—à–µ–Ω–∏–µ**: –¢—â–∞—Ç–µ–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ + –º–∏–≥—Ä–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π FK

### 4. **Downtime**
- –ú–∏–≥—Ä–∞—Ü–∏—è –ë–î –º–æ–∂–µ—Ç –∑–∞–Ω—è—Ç—å –≤—Ä–µ–º—è (–Ω–æ –ø—Ä–æ–µ–∫—Ç –Ω–µ –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ!)
- **–†–µ—à–µ–Ω–∏–µ**: –ú–æ–∂–Ω–æ –º–∏–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –≤ –ª—é–±–æ–µ –≤—Ä–µ–º—è, –±–µ–∑ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π

---

## üí∞ –û—Ü–µ–Ω–∫–∞ —Ç—Ä—É–¥–æ–∑–∞—Ç—Ä–∞—Ç

**‚úÖ –£–ü–†–û–©–ï–ù–û**: –ü—Ä–æ–µ–∫—Ç –Ω–µ –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ - –Ω–µ—Ç –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏!

| –§–∞–∑–∞ | –î–Ω–∏ | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|-----|----------|
| –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ | 2-3 | –ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ, –±—ç–∫–∞–ø—ã, –º–∞–ø–ø–∏–Ω–≥ |
| –ë–î –º–∏–≥—Ä–∞—Ü–∏—è | 4-5 | –°–æ–∑–¥–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü, –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö, FK |
| Backend | 5-7 | –ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ –º–æ–¥—É–ª–µ–π, –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–¥–∞ |
| Frontend | 4-5 | –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã, —Ç–∏–ø—ã, —Ä–æ—É—Ç–∏–Ω–≥, –ø–µ—Ä–µ–≤–æ–¥—ã |
| OpenSearch | 2-3 | –ù–æ–≤—ã–µ –∏–Ω–¥–µ–∫—Å—ã, reindex |
| MinIO/S3 | 1-2 | –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ bucket'–æ–≤ |
| –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ | 3-5 | Unit, integration, E2E —Ç–µ—Å—Ç—ã |
| –î–µ–ø–ª–æ–π | 2-3 | Staging, production, –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ |
| **–ò–¢–û–ì–û** | **23-33 –¥–Ω—è** | **~4-7 –Ω–µ–¥–µ–ª—å** |

**–≠–∫–æ–Ω–æ–º–∏—è**: ~8-13 –¥–Ω–µ–π –∑–∞ —Å—á—ë—Ç –æ—Ç—Å—É—Ç—Å—Ç–≤–∏—è –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏!

---

## üéØ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### ‚úÖ **–î–ê, —Å—Ç–æ–∏—Ç –¥–µ–ª–∞—Ç—å!**

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–æ**: –ü—Ä–æ–µ–∫—Ç –Ω–µ –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ - –º–æ–∂–µ–º –º–∏–≥—Ä–∏—Ä–æ–≤–∞—Ç—å —Å–º–µ–ª–æ –∏ –±—ã—Å—Ç—Ä–æ!

1. **–†–∞–∑–±–∏—Ç—å –Ω–∞ —ç—Ç–∞–ø—ã**
   - –ù–µ –¥–µ–ª–∞—Ç—å –≤—Å—ë —Å—Ä–∞–∑—É
   - –ù–∞—á–∞—Ç—å —Å backend + –ë–î
   - –ü–æ—Ç–æ–º frontend
   - –ü–æ—Å—Ç–µ–ø–µ–Ω–Ω—ã–π rollout –ø–æ –º–æ–¥—É–ª—è–º

2. **–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞—Ç—å**
   - –ù–∞–ø–∏—Å–∞—Ç—å —Å–∫—Ä–∏–ø—Ç—ã –¥–ª—è –º–∞—Å—Å–æ–≤–æ–≥–æ rename
   - CI/CD –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–∞ –ø—Ä–æ–ø—É—â–µ–Ω–Ω—ã–µ —É–ø–æ–º–∏–Ω–∞–Ω–∏—è
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ç–µ—Å—Ç—ã –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –º–∏–≥—Ä–∞—Ü–∏–∏

3. **–ö–æ–≥–¥–∞ –ª—É—á—à–µ –¥–µ–ª–∞—Ç—å**
   - ‚úÖ –°–µ–π—á–∞—Å —Å–∞–º–æ–µ –≤—Ä–µ–º—è - –Ω–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π!
   - –ü–æ–∫–∞ –Ω–µ—Ç —Å—Ä–æ—á–Ω—ã—Ö —Ñ–∏—á
   - –ú–æ–∂–Ω–æ —Å–ø–æ–∫–æ–π–Ω–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∏ –∏—Å–ø—Ä–∞–≤–ª—è—Ç—å –æ—à–∏–±–∫–∏

---

## üìù –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ –ø–æ–¥—Ö–æ–¥—ã

### **–í–∞—Ä–∏–∞–Ω—Ç 1: –¢–æ–ª—å–∫–æ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ –∏–º–µ–Ω–∞ (—É–º–µ—Ä–µ–Ω–Ω–∞—è —Å–ª–æ–∂–Ω–æ—Å—Ç—å)**
- –ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ –≤ –∫–æ–¥–µ (–º–æ–¥–µ–ª–∏, –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ)
- –û—Å—Ç–∞–≤–∏—Ç—å –ë–î —Ç–∞–±–ª–∏—Ü—ã –∏ API –∫–∞–∫ –µ—Å—Ç—å
- **–ü–ª—é—Å**: –ú–µ–Ω—å—à–µ —Ä–∞–±–æ—Ç—ã, –Ω–µ—Ç breaking changes
- **–ú–∏–Ω—É—Å**: –ù–µ —Ä–µ—à–∞–µ—Ç –ø—Ä–æ–±–ª–µ–º—É –ø–æ–ª–Ω–æ—Å—Ç—å—é

### **–í–∞—Ä–∏–∞–Ω—Ç 2: –ù–æ–≤—ã–π –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å (–º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —Å–ª–æ–∂–Ω–æ—Å—Ç—å)**
- –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–µ C2C/B2C —Å–µ—Ä–≤–∏—Å—ã —Å –Ω—É–ª—è
- –ü–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ –º–∏–≥—Ä–∏—Ä–æ–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª
- **–ü–ª—é—Å**: –ß–∏—Å—Ç–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
- **–ú–∏–Ω—É—Å**: –û—á–µ–Ω—å –¥–æ–ª–≥–æ –∏ –¥–æ—Ä–æ–≥–æ

### **–í–∞—Ä–∏–∞–Ω—Ç 3: –ü–æ–ª–Ω–∞—è –º–∏–≥—Ä–∞—Ü–∏—è (—Ç–µ–∫—É—â–∏–π –ø–ª–∞–Ω)**
- –ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞—Ç—å –≤–µ–∑–¥–µ: –ë–î, –∫–æ–¥, API, UI
- **–ü–ª—é—Å**: –ü–æ–ª–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã
- **–ú–∏–Ω—É—Å**: –í—ã—Å–æ–∫–∞—è —Å–ª–æ–∂–Ω–æ—Å—Ç—å

---

## üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∞–Ω–∞–ª–∏–∑–∞

**–§–∞–π–ª—ã –ø—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω—ã:**
- Backend: 297 —Ñ–∞–π–ª–æ–≤ Go
- Frontend: 381 —Ñ–∞–π–ª TypeScript/React
- –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö: 23 —Ç–∞–±–ª–∏—Ü—ã
- OpenSearch: 3 –∏–Ω–¥–µ–∫—Å–∞
- –ú–∏–≥—Ä–∞—Ü–∏–∏: 47 SQL —Ñ–∞–π–ª–æ–≤

**–û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —É–ø–æ–º–∏–Ω–∞–Ω–∏–π:**
- Backend: 13,021
- Frontend: 5,053
- **TOTAL: 18,074 —É–ø–æ–º–∏–Ω–∞–Ω–∏–π**

---

## üöÄ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

–ï—Å–ª–∏ –ø—Ä–∏–Ω—è—Ç–æ —Ä–µ—à–µ–Ω–∏–µ –æ –º–∏–≥—Ä–∞—Ü–∏–∏:

1. ‚úÖ –°–æ–∑–¥–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω—É—é feature –≤–µ—Ç–∫—É `feature/c2c-b2c-migration`
2. ‚úÖ –ù–∞–ø–∏—Å–∞—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Å–∫—Ä–∏–ø—Ç—ã –¥–ª—è rename
3. ‚úÖ –°–æ–∑–¥–∞—Ç—å –ø–µ—Ä–≤—É—é –º–∏–≥—Ä–∞—Ü–∏—é –ë–î (—Å–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤—ã—Ö —Ç–∞–±–ª–∏—Ü)
4. ‚úÖ –û–±–Ω–æ–≤–∏—Ç—å backend –º–æ–¥–µ–ª–∏ –∏ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏
5. ‚úÖ –û–±–Ω–æ–≤–∏—Ç—å API endpoints (–±–µ–∑ –∞–ª–∏–∞—Å–æ–≤ - –ø—Ä–æ–µ–∫—Ç –Ω–µ –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ!)
6. ‚úÖ –û–±–Ω–æ–≤–∏—Ç—å frontend (–ø–æ –º–æ–¥—É–ª—è–º)
7. ‚úÖ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ –∫–∞–∂–¥–æ–º —ç—Ç–∞–ø–µ
8. ‚úÖ –î–µ–ø–ª–æ–π —á–µ—Ä–µ–∑ staging ‚Üí production

**–°—Ç–∞—Ç—É—Å**: ‚è∏Ô∏è –û–∂–∏–¥–∞–µ—Ç —Ä–µ—à–µ–Ω–∏—è

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–æ**: üöÄ –ü—Ä–æ–µ–∫—Ç –Ω–µ –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ - –º–æ–∂–Ω–æ –º–∏–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –±—ã—Å—Ç—Ä–æ –∏ —Å–º–µ–ª–æ!

---

**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ**: 2025-10-08 (—É–±—Ä–∞–Ω—ã —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏)
