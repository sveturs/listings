# –ê—É–¥–∏—Ç —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ Post Express –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

## ‚úÖ –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ WSP API

### 1. –û—Å–Ω–æ–≤–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∑–∞–ø—Ä–æ—Å–∞

#### –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è —Ç—Ä–µ–±—É–µ—Ç:
```csharp
public class TransakcijaIn {
    public string StrKlijent;        // –°–µ—Ä–∏–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π Klijent
    public int Servis;                // –í—Å–µ–≥–¥–∞ 3
    public int IdVrstaTranskacije;   // –¢–∏–ø —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
    public int TipSerijalizacije;    // 1 = JSON
    public Guid IdTransakcija;        // –£–Ω–∏–∫–∞–ª—å–Ω—ã–π ID
    public string StrIn;              // –í—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
}
```

#### ‚úÖ –ù–∞—à–∞ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è (`models/transaction.go`):
```go
type TransakcijaIn struct {
    StrKlijent         string `json:"StrKlijent"`
    Servis             int    `json:"Servis"`             // ‚úÖ –í—Å–µ–≥–¥–∞ 3
    IdVrstaTranskacije int    `json:"IdVrstaTranskacije"` 
    TipSerijalizacije  int    `json:"TipSerijalizacije"`  // ‚úÖ –í—Å–µ–≥–¥–∞ 1 (JSON)
    IdTransakcija      string `json:"IdTransakcija"`      // ‚úÖ GUID
    StrIn              string `json:"StrIn"`
}
```

### 2. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–ª–∏–µ–Ω—Ç–∞

#### –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è —Ç—Ä–µ–±—É–µ—Ç:
```csharp
public class Klijent {
    public string Username;
    public string Password;
    public string Jezik;
    public int IdTipUredjaja;     // 2 –¥–ª—è API
    // ... –¥—Ä—É–≥–∏–µ –ø–æ–ª—è
}
```

#### ‚úÖ –ù–∞—à–∞ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è (`models/client.go`):
```go
type ClientData struct {
    Username          string  `json:"Username"`
    Password          string  `json:"Password"`
    Jezik             string  `json:"Jezik"`
    IdTipUredjaja     int     `json:"IdTipUredjaja"`     // ‚úÖ –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ –≤ 1
    VerzijaOS         string  `json:"VerzijaOS"`
    NazivUredjaja     string  `json:"NazivUredjaja"`
    ModelUredjaja     string  `json:"ModelUredjaja"`
    VerzijaAplikacije string  `json:"VerzijaAplikacije"`
    IPAdresa          string  `json:"IPAdresa"`
    Geolokacija       *string `json:"Geolokacija"`
}
```

### 3. –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ —Ç–∏–ø—ã —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π

| ID | –ù–∞–∑–≤–∞–Ω–∏–µ | –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è | –ù–∞—à–∞ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è | –°—Ç–∞—Ç—É—Å |
|----|----------|--------------|-----------------|--------|
| **3** | GetNaselje | –ü–æ–∏—Å–∫ –Ω–∞—Å–µ–ª–µ–Ω–Ω—ã—Ö –ø—É–Ω–∫—Ç–æ–≤ | ‚úÖ `GetLocations()` | ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ |
| **10** | GetPostanskeJedinice | –°–ø–∏—Å–æ–∫ –ø–æ—á—Ç–æ–≤—ã—Ö –æ—Ç–¥–µ–ª–µ–Ω–∏–π | ‚úÖ `GetOffices()` | ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ |
| **15** | PracenjePosiljke | –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –ø–æ—Å—ã–ª–∫–∏ | ‚úÖ `GetShipmentStatus()` | ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ |
| **20** | StampaNalepnice | –ü–µ—á–∞—Ç—å —ç—Ç–∏–∫–µ—Ç–∫–∏ | ‚úÖ `PrintLabel()` | ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ |
| **25** | StorniranjePosiljke | –û—Ç–º–µ–Ω–∞ –ø–æ—Å—ã–ª–∫–∏ | ‚úÖ `CancelShipment()` | ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ |
| **63** | TTKretanjaUsluge | –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –æ—Ç–¥–µ–ª—å–Ω–æ–π –ø–æ—Å—ã–ª–∫–∏ | ‚ö†Ô∏è `CreateShipment()` | ‚ö†Ô∏è –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è |
| **73** | Manifest | –°–ø–∏—Å–æ–∫ –ø–æ—Å—ã–ª–æ–∫ | ‚ùå –ù–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ | ‚ùå –¢—Ä–µ–±—É–µ—Ç—Å—è |

### 4. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ —Å–æ–≥–ª–∞—Å–Ω–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏

#### ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è:
- `Servis = 3` - ‚úÖ –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ –≤ `client.go:92`
- `TipSerijalizacije = 1` (JSON) - ‚úÖ –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ –≤ `client.go:94`
- `IdTipUredjaja` - ‚ö†Ô∏è –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ –≤ 1, –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç 2
- `Jezik` - ‚úÖ –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ "sr" (–º–æ–∂–Ω–æ LAT/CYR/ENG)

## ‚ö†Ô∏è –û–±–Ω–∞—Ä—É–∂–µ–Ω–Ω—ã–µ –Ω–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è

### 1. **IdTipUredjaja**
- **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:** –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å 2 –¥–ª—è API –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
- **–ù–∞—à–∞ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è:** —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ 1
- **–§–∞–π–ª:** `/backend/internal/server/server.go:141`
- **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:** –∏–∑–º–µ–Ω–∏—Ç—å –Ω–∞ `DeviceType: 2`

### 2. **–¢—Ä–∞–Ω–∑–∞–∫—Ü–∏—è 63 (TTKretanjaUsluge)**
- **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:** –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –æ—Ç–¥–µ–ª—å–Ω–æ–π –ø–æ—Å—ã–ª–∫–∏
- **–ù–∞—à–∞ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è:** –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –ø–æ—Å—ã–ª–∫–∏
- **–ü—Ä–æ–±–ª–µ–º–∞:** –≤–æ–∑–º–æ–∂–Ω–æ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ç–∏–ø —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è

### 3. **–û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –ø–æ—Å—ã–ª–∫–∏**
- –ù—É–∂–Ω–æ —É—Ç–æ—á–Ω–∏—Ç—å —É Post Express –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π ID —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –ø–æ—Å—ã–ª–∫–∏
- –í–æ–∑–º–æ–∂–Ω–æ —ç—Ç–æ –¥—Ä—É–≥–æ–π –Ω–æ–º–µ—Ä, –Ω–µ —É–∫–∞–∑–∞–Ω–Ω—ã–π –≤ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏

### 4. **–¢—Ä–∞–Ω–∑–∞–∫—Ü–∏—è 73 (Manifest)**
- **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:** –ø–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –ø–æ—Å—ã–ª–æ–∫
- **–ù–∞—à–∞ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è:** –Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ
- **–ù–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç—å:** –º–æ–∂–µ—Ç –ø–æ—Ç—Ä–µ–±–æ–≤–∞—Ç—å—Å—è –¥–ª—è –º–∞—Å—Å–æ–≤–æ–π –æ—Ç–ø—Ä–∞–≤–∫–∏

## üìã –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—é

### –ù–µ–º–µ–¥–ª–µ–Ω–Ω—ã–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:

1. **–ò–∑–º–µ–Ω–∏—Ç—å IdTipUredjaja –Ω–∞ 2:**
```go
// –í —Ñ–∞–π–ª–µ server.go:141
DeviceType: 2,  // –ò–∑–º–µ–Ω–∏—Ç—å —Å 1 –Ω–∞ 2
```

2. **–î–æ–±–∞–≤–∏—Ç—å –ø–æ–¥–¥–µ—Ä–∂–∫—É —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ 73 (Manifest):**
```go
func (c *WSPClientImpl) GetManifest(ctx context.Context, date string) (*WSPManifestResponse, error) {
    // –†–µ–∞–ª–∏–∑–∞—Ü–∏—è
}
```

### –¢—Ä–µ–±—É–µ—Ç —É—Ç–æ—á–Ω–µ–Ω–∏—è —É Post Express:

1. **ID —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –ø–æ—Å—ã–ª–∫–∏**
   - –¢–µ–∫—É—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –∏—Å–ø–æ–ª—å–∑—É–µ—Ç 63, –Ω–æ —ç—Ç–æ –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ
   - –ù—É–∂–µ–Ω —Ç–æ—á–Ω—ã–π ID –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö

2. **Webhook endpoints**
   - –ï—Å—Ç—å –ª–∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø–æ–ª—É—á–∞—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ —Å–º–µ–Ω–µ —Å—Ç–∞—Ç—É—Å–∞?

3. **–ü—Ä–æ—Ü–µ—Å—Å –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —à—Ç—Ä–∏—Ö-–∫–æ–¥–æ–≤**
   - –ì–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏–ª–∏ –Ω—É–∂–Ω–æ –∑–∞–ø—Ä–∞—à–∏–≤–∞—Ç—å?

## ‚úÖ –ß—Ç–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ

1. **–ë–∞–∑–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∑–∞–ø—Ä–æ—Å–æ–≤** - –ø–æ–ª–Ω–æ—Å—Ç—å—é —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç
2. **–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è** - —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ Klijent –ø—Ä–∞–≤–∏–ª—å–Ω–∞—è
3. **–°–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—è** - JSON (TipSerijalizacije = 1)
4. **GUID –¥–ª—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π** - –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ
5. **–û—Å–Ω–æ–≤–Ω—ã–µ –º–µ—Ç–æ–¥—ã** - –ø–æ–∏—Å–∫, –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ, –ø–µ—á–∞—Ç—å, –æ—Ç–º–µ–Ω–∞
6. **Retry –ª–æ–≥–∏–∫–∞** - —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –¥–ª—è –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç–∏
7. **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** - –≤—Å–µ –∑–∞–ø—Ä–æ—Å—ã –ª–æ–≥–∏—Ä—É—é—Ç—Å—è

## üìä –ò—Ç–æ–≥–æ–≤–∞—è –æ—Ü–µ–Ω–∫–∞ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏

**–ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ production: 85%**

‚úÖ **–ì–æ—Ç–æ–≤–æ:**
- –û—Å–Ω–æ–≤–Ω–∞—è –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞
- –ë–∞–∑–æ–≤—ã–µ –º–µ—Ç–æ–¥—ã API
- –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
- Frontend –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

‚ö†Ô∏è **–¢—Ä–µ–±—É–µ—Ç –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**
- IdTipUredjaja (–ø—Ä–æ—Å—Ç–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ)
- –£—Ç–æ—á–Ω–µ–Ω–∏–µ ID —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –ø–æ—Å—ã–ª–∫–∏

‚ùå **–¢—Ä–µ–±—É–µ—Ç —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏:**
- –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏—è 73 (Manifest)
- Webhook –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è (–µ—Å–ª–∏ –¥–æ—Å—Ç—É–ø–Ω–∞)