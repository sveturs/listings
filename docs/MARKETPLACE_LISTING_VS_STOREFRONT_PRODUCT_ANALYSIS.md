# –ê–Ω–∞–ª–∏–∑: MarketplaceListing vs StorefrontProduct

**–î–∞—Ç–∞:** 2025-10-09
**–°—Ç–∞—Ç—É—Å:** –ò—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏—è —Å—É—â–Ω–æ—Å—Ç–µ–π
**–ê–≤—Ç–æ—Ä:** –ê–Ω–∞–ª–∏–∑ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã –ø—Ä–æ–µ–∫—Ç–∞

---

## üìã –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

1. [Executive Summary](#executive-summary)
2. [–¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ](#—Ç–µ–∫—É—â–µ–µ-—Å–æ—Å—Ç–æ—è–Ω–∏–µ)
3. [–ö–æ–ª–∏—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –ø–æ–ª–µ–π](#–∫–æ–ª–∏—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–π-–∞–Ω–∞–ª–∏–∑-–ø–æ–ª–µ–π)
4. [–ö–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–π –∞–Ω–∞–ª–∏–∑](#–∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–π-–∞–Ω–∞–ª–∏–∑)
5. [–î–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤–∞ –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–æ–≥–æ —Ä–∞—Å—Ö–æ–∂–¥–µ–Ω–∏—è](#–¥–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤–∞-–∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–æ–≥–æ-—Ä–∞—Å—Ö–æ–∂–¥–µ–Ω–∏—è)
6. [–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏—è](#–ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞-–æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏—è)
7. [–ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏ –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏—è](#–Ω–µ–¥–æ—Å—Ç–∞—Ç–∫–∏-–æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏—è)
8. [–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏](#—Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏)
9. [–ü–ª–∞–Ω –º–∏–≥—Ä–∞—Ü–∏–∏ (–µ—Å–ª–∏ –ø—Ä–∏–Ω—è—Ç–æ —Ä–µ—à–µ–Ω–∏–µ –æ–±—ä–µ–¥–∏–Ω—è—Ç—å)](#–ø–ª–∞–Ω-–º–∏–≥—Ä–∞—Ü–∏–∏)

---

## Executive Summary

### –ö–ª—é—á–µ–≤—ã–µ –≤—ã–≤–æ–¥—ã:

- ‚úÖ **–û–±—â–∏—Ö –ø–æ–ª–µ–π –±–æ–ª—å—à–µ, —á–µ–º —Ä–∞–∑–ª–∏—á–∏–π**: 22 –æ–±—â–∏—Ö –ø–æ–ª—è (41%) vs 31 —É–Ω–∏–∫–∞–ª—å–Ω–æ–µ (59%)
- ‚úÖ **–†–∞–∑–Ω—ã–µ –Ω–∞–∑–≤–∞–Ω–∏—è –ø–æ–ª–µ–π** - —Ä–µ–∑—É–ª—å—Ç–∞—Ç —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–≥–æ –¥–æ–ª–≥–∞, –∞ –Ω–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–æ–≥–æ —Ä–µ—à–µ–Ω–∏—è
- ‚úÖ **–§—É–Ω–∫—Ü–∏—è –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏ —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç**: `getStorefrontProductAsListing()` –¥–æ–∫–∞–∑—ã–≤–∞–µ—Ç, —á—Ç–æ —Å–∏—Å—Ç–µ–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –Ω–∏–º–∏ –∫–∞–∫ —Å –æ–¥–Ω–∏–º —Ç–∏–ø–æ–º
- ‚ö†Ô∏è **–ö—Ä–∏—Ç–∏—á–Ω—ã–µ —Ä–∞–∑–ª–∏—á–∏—è**: –≤–ª–∞–¥–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–æ–º (UserID vs StorefrontID), —Å—Ç–∞—Ç—É—Å, –∞—Ç—Ä–∏–±—É—Ç—ã
- üìä **58% NULL –ø–æ–ª–µ–π** –ø—Ä–∏ –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏–∏ –≤ –æ–¥–Ω—É —Ç–∞–±–ª–∏—Ü—É

### –ì–∏–ø–æ—Ç–µ–∑–∞ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∞:

> **"–†–∞–∑–Ω—ã–µ —Ç–∏–ø—ã —É –æ–¥–Ω–∏—Ö –Ω–∞–∑–≤–∞–Ω–∏–π - —ç—Ç–æ —Å–ª–µ–¥—Å—Ç–≤–∏–µ —Ç–æ–≥–æ, —á—Ç–æ –º—ã –ø–æ–º–µ–Ω—è–ª–∏ –≤ –æ–¥–Ω–æ–π —Å—É—â–Ω–æ—Å—Ç–∏ –∏ –∑–∞–±—ã–ª–∏ –≤ –¥—Ä—É–≥–æ–π"**

–ê–Ω–∞–ª–∏–∑ –∫–æ–¥–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç, —á—Ç–æ —ç—Ç–æ –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ **–∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏–π —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π –¥–æ–ª–≥**.

---

## –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ

### MarketplaceListing
**–§–∞–π–ª:** `backend/internal/domain/models/models.go:40-94`
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** P2P –º–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å - –æ–±—ä—è–≤–ª–µ–Ω–∏—è –æ—Ç —á–∞—Å—Ç–Ω—ã—Ö –ª–∏—Ü –∏ –∫–æ–º–ø–∞–Ω–∏–π
**–ú–æ–¥–µ–ª—å:** "–î–æ—Å–∫–∞ –æ–±—ä—è–≤–ª–µ–Ω–∏–π" (Avito, OLX, Facebook Marketplace)

**–•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏:**
- –í–ª–∞–¥–µ–ª–µ—Ü: `UserID int` (—Ñ–∏–∑–ª–∏—Ü–æ/—é—Ä–ª–∏—Ü–æ)
- –°—Ç–∞—Ç—É—Å: `Status string` (draft/active/sold/archived/moderation)
- –°–æ—Ü–∏–∞–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏: –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏—è, –æ—Ç–∑—ã–≤—ã
- –ì–∏–±–∫–∞—è –∫–∞—Ç–µ–≥–æ—Ä–∏–∑–∞—Ü–∏—è

### StorefrontProduct
**–§–∞–π–ª:** `backend/internal/domain/models/storefront_product.go:8-48`
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –¢–æ–≤–∞—Ä –≤–∏—Ç—Ä–∏–Ω—ã - –ø—Ä–æ–¥—É–∫—Ç –≤ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç-–º–∞–≥–∞–∑–∏–Ω–µ
**–ú–æ–¥–µ–ª—å:** "–ú–∞–≥–∞–∑–∏–Ω" (Wildberries, OZON)

**–•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏:**
- –í–ª–∞–¥–µ–ª–µ—Ü: `StorefrontID int` (–º–∞–≥–∞–∑–∏–Ω)
- –°—Ç–∞—Ç—É—Å: `IsActive bool` (–∞–∫—Ç–∏–≤–µ–Ω/–Ω–µ–∞–∫—Ç–∏–≤–µ–Ω)
- –ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–∞—è —Ç–æ—Ä–≥–æ–≤–ª—è: —Å–∫–ª–∞–¥—Å–∫–æ–π —É—á–µ—Ç, –≤–∞—Ä–∏–∞–Ω—Ç—ã —Ç–æ–≤–∞—Ä–∞
- B2C –º–æ–¥–µ–ª—å

### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è

```go
// backend/internal/proj/marketplace/storage/postgres/marketplace.go:3355
func (s *Storage) getStorefrontProductAsListing(ctx context.Context, id int) (*models.MarketplaceListing, error)
```

–¢–æ–≤–∞—Ä—ã –≤–∏—Ç—Ä–∏–Ω **–º–æ–≥—É—Ç –ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å—Å—è** –≤ –º–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å —á–µ—Ä–µ–∑ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—é:
```
StorefrontProduct ‚Üí (–∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è) ‚Üí MarketplaceListing
```

---

## –ö–æ–ª–∏—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –ø–æ–ª–µ–π

### –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

```
MarketplaceListing:
‚îú‚îÄ –û–±—â–∏–µ –ø–æ–ª—è:      22 (49%)
‚îú‚îÄ –£–Ω–∏–∫–∞–ª—å–Ω—ã–µ –ø–æ–ª—è: 23 (51%)
‚îî‚îÄ –í–°–ï–ì–û:           45 –ø–æ–ª–µ–π

StorefrontProduct:
‚îú‚îÄ –û–±—â–∏–µ –ø–æ–ª—è:      22 (73%)
‚îú‚îÄ –£–Ω–∏–∫–∞–ª—å–Ω—ã–µ –ø–æ–ª—è:  8 (27%)
‚îî‚îÄ –í–°–ï–ì–û:           30 –ø–æ–ª–µ–π

–û–±—ä–µ–¥–∏–Ω–µ–Ω–Ω–∞—è —Å—É—â–Ω–æ—Å—Ç—å Product:
‚îú‚îÄ –û–±—â–∏–µ –ø–æ–ª—è:      22 (41%)
‚îú‚îÄ –£–Ω–∏–∫–∞–ª—å–Ω—ã–µ ML:   23 (43%)
‚îú‚îÄ –£–Ω–∏–∫–∞–ª—å–Ω—ã–µ SP:    8 (15%)
‚îî‚îÄ –í–°–ï–ì–û:           53 –ø–æ–ª—è
```

### –û–±—â–∏–µ –ø–æ–ª—è (22 –ø–æ–ª—è)

| ‚Ññ | –ü–æ–ª–µ | MarketplaceListing | StorefrontProduct | –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å |
|---|------|-------------------|-------------------|---------------|
| 1 | **ID** | `ID int` | `ID int` | ‚úÖ 100% |
| 2 | **–ù–∞–∑–≤–∞–Ω–∏–µ** | `Title string` | `Name string` | ‚ö†Ô∏è 95% (—Ä–∞–∑–Ω—ã–µ –∏–º–µ–Ω–∞) |
| 3 | **–û–ø–∏—Å–∞–Ω–∏–µ** | `Description string` | `Description string` | ‚úÖ 100% |
| 4 | **–¶–µ–Ω–∞** | `Price float64` | `Price float64` | ‚úÖ 100% |
| 5 | **–ö–∞—Ç–µ–≥–æ—Ä–∏—è** | `CategoryID int` | `CategoryID int` | ‚úÖ 100% |
| 6 | **–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è** | `Images []MarketplaceImage` | `Images []StorefrontProductImage` | ‚úÖ 90% (–æ–±–∞ ImageInterface) |
| 7 | **–ö–∞—Ç–µ–≥–æ—Ä–∏—è (–æ–±—ä–µ–∫—Ç)** | `Category *MarketplaceCategory` | `Category *MarketplaceCategory` | ‚úÖ 100% |
| 8 | **–°–æ–∑–¥–∞–Ω–æ** | `CreatedAt time.Time` | `CreatedAt time.Time` | ‚úÖ 100% |
| 9 | **–û–±–Ω–æ–≤–ª–µ–Ω–æ** | `UpdatedAt time.Time` | `UpdatedAt time.Time` | ‚úÖ 100% |
| 10 | **–ü–µ—Ä–µ–≤–æ–¥—ã** | `Translations TranslationMap` | `Translations map[string]map[string]string` | ‚ö†Ô∏è 70% (—Ä–∞–∑–Ω—ã–µ —Ç–∏–ø—ã) |
| 11 | **–ê–¥—Ä–µ—Å –ø–µ—Ä–µ–≤–æ–¥—ã** | `AddressMultilingual map[string]string` | `AddressTranslations map[string]string` | ‚ö†Ô∏è 95% (—Ä–∞–∑–Ω—ã–µ –∏–º–µ–Ω–∞) |
| 12 | **–®–∏—Ä–æ—Ç–∞** | `Latitude *float64` | `IndividualLatitude *float64` | ‚ö†Ô∏è 100% (—Ä–∞–∑–Ω—ã–µ –∏–º–µ–Ω–∞) |
| 13 | **–î–æ–ª–≥–æ—Ç–∞** | `Longitude *float64` | `IndividualLongitude *float64` | ‚ö†Ô∏è 100% (—Ä–∞–∑–Ω—ã–µ –∏–º–µ–Ω–∞) |
| 14 | **–ü–æ–∫–∞–∑–∞—Ç—å –Ω–∞ –∫–∞—Ä—Ç–µ** | `ShowOnMap bool` | `ShowOnMap bool` | ‚úÖ 100% |
| 15 | **–ü—Ä–∏–≤–∞—Ç–Ω–æ—Å—Ç—å –ª–æ–∫–∞—Ü–∏–∏** | `LocationPrivacy string` | `LocationPrivacy *string` | ‚ö†Ô∏è 95% |
| 16 | **–ê–¥—Ä–µ—Å** | `Location string` + `City` + `Country` | `IndividualAddress *string` | ‚ö†Ô∏è 90% |
| 17 | **–ê—Ç—Ä–∏–±—É—Ç—ã** | `Attributes []ListingAttributeValue` | `Attributes JSONB` | ‚ùå 60% (—Ä–∞–∑–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞) |
| 18 | **–ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å** | `Status string` (5 —Å–æ—Å—Ç–æ—è–Ω–∏–π) | `IsActive bool` (2 —Å–æ—Å—Ç–æ—è–Ω–∏—è) | ‚ùå 70% (—Ä–∞–∑–Ω–∞—è —Å–µ–º–∞–Ω—Ç–∏–∫–∞) |
| 19 | **–ü—Ä–æ—Å–º–æ—Ç—Ä—ã** | `ViewsCount int` | `ViewCount int` | ‚ö†Ô∏è 100% (—Ä–∞–∑–Ω—ã–µ –∏–º–µ–Ω–∞) |
| 20 | **–í–∞—Ä–∏–∞–Ω—Ç—ã** | `Variants []MarketplaceListingVariant` | `Variants []StorefrontProductVariant` | ‚ùå 60% (—Ä–∞–∑–Ω—ã–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã) |
| 21 | **–û—Å—Ç–∞—Ç–æ–∫** | `StockQuantity *int` | `StockQuantity *int` | ‚úÖ 100% |
| 22 | **–°—Ç–∞—Ç—É—Å –æ—Å—Ç–∞—Ç–∫–∞** | `StockStatus *string` | `StockStatus string` | ‚ö†Ô∏è 95% |

**–õ–µ–≥–µ–Ω–¥–∞:**
- ‚úÖ –ü–æ–ª–Ω–æ—Å—Ç—å—é —Å–æ–≤–º–µ—Å—Ç–∏–º—ã
- ‚ö†Ô∏è –°–æ–≤–º–µ—Å—Ç–∏–º—ã —Å –Ω–µ–±–æ–ª—å—à–∏–º–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è–º–∏ (–ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ, nullable)
- ‚ùå –¢—Ä–µ–±—É—é—Ç –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ–π –ø–µ—Ä–µ—Ä–∞–±–æ—Ç–∫–∏

### –£–Ω–∏–∫–∞–ª—å–Ω—ã–µ –ø–æ–ª—è MarketplaceListing (23 –ø–æ–ª—è)

| ‚Ññ | –ü–æ–ª–µ | –¢–∏–ø | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ | NULL? |
|---|------|-----|-----------|-------|
| 1 | `UserID` | `int` | –í–ª–∞–¥–µ–ª–µ—Ü –æ–±—ä—è–≤–ª–µ–Ω–∏—è (P2P) | ‚ùå NOT NULL |
| 2 | `Condition` | `string` | –°–æ—Å—Ç–æ—è–Ω–∏–µ (–Ω–æ–≤—ã–π/–±/—É) | ‚ùå NOT NULL |
| 3 | `Status` | `string` | draft/active/sold/archived | ‚ùå NOT NULL |
| 4 | `HelpfulVotes` | `int` | –ì–æ–ª–æ—Å–∞ "–ø–æ–ª–µ–∑–Ω–æ" | ‚úÖ DEFAULT 0 |
| 5 | `NotHelpfulVotes` | `int` | –ì–æ–ª–æ—Å–∞ "–Ω–µ –ø–æ–ª–µ–∑–Ω–æ" | ‚úÖ DEFAULT 0 |
| 6 | `IsFavorite` | `bool` | –í –∏–∑–±—Ä–∞–Ω–Ω–æ–º —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è | ‚úÖ DEFAULT false |
| 7 | `OldPrice` | `*float64` | –°—Ç–∞—Ä–∞—è —Ü–µ–Ω–∞ (—Å–∫–∏–¥–∫–∏) | ‚úÖ NULL |
| 8 | `HasDiscount` | `bool` | –ï—Å—Ç—å —Å–∫–∏–¥–∫–∞ | ‚úÖ DEFAULT false |
| 9 | `DiscountPercentage` | `*int` | –ü—Ä–æ—Ü–µ–Ω—Ç —Å–∫–∏–¥–∫–∏ | ‚úÖ NULL |
| 10 | `Metadata` | `map[string]interface{}` | –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ | ‚úÖ NULL |
| 11 | `AverageRating` | `float64` | –°—Ä–µ–¥–Ω—è—è –æ—Ü–µ–Ω–∫–∞ | ‚úÖ DEFAULT 0 |
| 12 | `ReviewCount` | `int` | –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ—Ç–∑—ã–≤–æ–≤ | ‚úÖ DEFAULT 0 |
| 13 | `StorefrontID` | `*int` | –°–≤—è–∑—å —Å –≤–∏—Ç—Ä–∏–Ω–æ–π | ‚úÖ NULL |
| 14 | `Storefront` | `*Storefront` | –î–∞–Ω–Ω—ã–µ –≤–∏—Ç—Ä–∏–Ω—ã | ‚úÖ NULL |
| 15 | `ExternalID` | `string` | ID –∏–∑ –≤–Ω–µ—à–Ω–µ–π —Å–∏—Å—Ç–µ–º—ã | ‚úÖ NULL |
| 16 | `IsStorefrontProduct` | `bool` | –§–ª–∞–≥ —Ç–æ–≤–∞—Ä–∞ –≤–∏—Ç—Ä–∏–Ω—ã | ‚úÖ DEFAULT false |
| 17 | `OriginalLanguage` | `string` | –û—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π —è–∑—ã–∫ | ‚úÖ NULL |
| 18 | `RawTranslations` | `interface{}` | –°—ã—Ä—ã–µ –¥–∞–Ω–Ω—ã–µ –ø–µ—Ä–µ–≤–æ–¥–æ–≤ | ‚úÖ NULL |
| 19 | `CategoryPathNames` | `[]string` | –ü—É—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏–π (–Ω–∞–∑–≤–∞–Ω–∏—è) | ‚úÖ NULL |
| 20 | `CategoryPathIds` | `[]int` | –ü—É—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏–π (ID) | ‚úÖ NULL |
| 21 | `CategoryPathSlugs` | `[]string` | –ü—É—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏–π (slugs) | ‚úÖ NULL |
| 22 | `CategoryPath` | `[]string` | –ü—É—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏–π | ‚úÖ NULL |
| 23 | `User` | `*User` | –î–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è | ‚úÖ NULL (join) |

### –£–Ω–∏–∫–∞–ª—å–Ω—ã–µ –ø–æ–ª—è StorefrontProduct (8 –ø–æ–ª–µ–π)

| ‚Ññ | –ü–æ–ª–µ | –¢–∏–ø | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ | NULL? |
|---|------|-----|-----------|-------|
| 1 | `StorefrontID` | `int` | –í–∏—Ç—Ä–∏–Ω–∞-–≤–ª–∞–¥–µ–ª–µ—Ü | ‚ùå NOT NULL |
| 2 | `Currency` | `string` | –í–∞–ª—é—Ç–∞ —Ç–æ–≤–∞—Ä–∞ | ‚ùå NOT NULL |
| 3 | `SKU` | `*string` | –ê—Ä—Ç–∏–∫—É–ª –ø—Ä–æ–¥–∞–≤—Ü–∞ | ‚úÖ NULL |
| 4 | `Barcode` | `*string` | –®—Ç—Ä–∏—Ö–∫–æ–¥ (EAN/UPC) | ‚úÖ NULL |
| 5 | `IsActive` | `bool` | –ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å —Ç–æ–≤–∞—Ä–∞ | ‚ùå NOT NULL |
| 6 | `SoldCount` | `int` | –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–æ–¥–∞–∂ | ‚úÖ DEFAULT 0 |
| 7 | `HasIndividualLocation` | `bool` | –ï—Å—Ç—å —Å–≤–æ—è –ª–æ–∫–∞—Ü–∏—è | ‚úÖ DEFAULT false |
| 8 | `HasVariants` | `bool` | –ï—Å—Ç—å –≤–∞—Ä–∏–∞–Ω—Ç—ã | ‚úÖ DEFAULT false |

---

## –ö–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–π –∞–Ω–∞–ª–∏–∑

### –ö—Ä–∏—Ç–∏—á–Ω—ã–µ —Ä–∞–∑–ª–∏—á–∏—è (–±–ª–æ–∫–∏—Ä—É—é—Ç –ø—Ä—è–º–æ–µ –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ)

#### 1. –í–ª–∞–¥–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–æ–º - –ü–†–ò–ù–¶–ò–ü–ò–ê–õ–¨–ù–û —Ä–∞–∑–Ω–æ–µ

```go
// MarketplaceListing - P2P –º–æ–¥–µ–ª—å
UserID int  // –í–ª–∞–¥–µ–ª–µ—Ü = —Ñ–∏–∑–ª–∏—Ü–æ/—é—Ä–ª–∏—Ü–æ

// StorefrontProduct - B2C –º–æ–¥–µ–ª—å
StorefrontID int  // –í–ª–∞–¥–µ–ª–µ—Ü = –º–∞–≥–∞–∑–∏–Ω (—É –∫–æ—Ç–æ—Ä–æ–≥–æ —Å–≤–æ–π UserID)
```

**–ü—Ä–æ–±–ª–µ–º–∞ –ø—Ä–∏ –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏–∏:**
```go
type Product struct {
    UserID       *int  // NULL –¥–ª—è storefront products
    StorefrontID *int  // NULL –¥–ª—è marketplace listings

    // –ù—É–∂–Ω–∞ –≤–∞–ª–∏–¥–∞—Ü–∏—è: –û–î–ò–ù –∏–∑ –¥–≤—É—Ö –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∑–∞–ø–æ–ª–Ω–µ–Ω!
    // –ù–µ–≤–æ–∑–º–æ–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å NOT NULL constraint –≤ –ë–î
}
```

#### 2. –°–æ—Å—Ç–æ—è–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞ - —Ä–∞–∑–Ω–∞—è —Å–µ–º–∞–Ω—Ç–∏–∫–∞

```go
// MarketplaceListing
Status string  // "draft" | "active" | "sold" | "archived" | "moderation"

// StorefrontProduct
IsActive bool  // true | false
```

**–ñ–∏–∑–Ω–µ–Ω–Ω—ã–π —Ü–∏–∫–ª:**
- **MarketplaceListing**: draft ‚Üí active ‚Üí sold ‚Üí archived
- **StorefrontProduct**: draft ‚Üí active ‚Üî inactive (+ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—Å—Ç–∞—Ç–∫–∞–º–∏)

#### 3. –ê—Ç—Ä–∏–±—É—Ç—ã - –Ω–µ—Å–æ–≤–º–µ—Å—Ç–∏–º—ã–µ –ø–æ–¥—Ö–æ–¥—ã

```go
// MarketplaceListing - —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–π–Ω—ã–µ –∞—Ç—Ä–∏–±—É—Ç—ã
Attributes []ListingAttributeValue
// [{id: 1, name: "–¶–≤–µ—Ç", value: "–ö—Ä–∞—Å–Ω—ã–π", category_id: 10}, ...]

// StorefrontProduct - –ø—Ä–æ–∏–∑–≤–æ–ª—å–Ω—ã–µ JSON –∞—Ç—Ä–∏–±—É—Ç—ã –ø—Ä–æ–¥–∞–≤—Ü–∞
Attributes JSONB
// {"material": "cotton", "size": "XL", "brand": "Nike"}
```

**–í—ã–≤–æ–¥:** –≠—Ç–æ **—Ä–∞–∑–Ω—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã —Ä–∞–±–æ—Ç—ã —Å –¥–∞–Ω–Ω—ã–º–∏**.

---

## –î–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤–∞ –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–æ–≥–æ —Ä–∞—Å—Ö–æ–∂–¥–µ–Ω–∏—è

### 1. –§—É–Ω–∫—Ü–∏—è –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏ (smoking gun)

**–§–∞–π–ª:** `backend/internal/proj/marketplace/storage/postgres/marketplace.go:3355`

```go
func (s *Storage) getStorefrontProductAsListing(ctx context.Context, id int) (*models.MarketplaceListing, error) {
    // ...
    err := s.pool.QueryRow(ctx, `
        SELECT
            sp.id, sp.storefront_id, sf.user_id, sp.category_id,
            sp.name,              -- ‚Üê StorefrontProduct.Name
            sp.description,
            sp.price,
            'new' as condition,   -- ‚Üê –•–ê–†–î–ö–û–î!
            'active' as status,   -- ‚Üê –•–ê–†–î–ö–û–î!
            '' as location,       -- ‚Üê –•–ê–†–î–ö–û–î –ø—É—Å—Ç–æ–π —Å—Ç—Ä–æ–∫–∏
            0 as latitude,        -- ‚Üê –•–ê–†–î–ö–û–î 0
            0 as longitude,       -- ‚Üê –•–ê–†–î–ö–û–î 0
            '' as city,           -- ‚Üê –•–ê–†–î–ö–û–î
            '' as country,        -- ‚Üê –•–ê–†–î–ö–û–î
            sp.view_count,        -- ‚Üê StorefrontProduct.ViewCount
            sp.created_at, sp.updated_at,
            false as show_on_map, -- ‚Üê –•–ê–†–î–ö–û–î
            'sr' as original_language,
            c.name as category_name, c.slug as category_slug,
            '{}'::jsonb as metadata
        FROM storefront_products sp
        LEFT JOIN storefronts sf ON sp.storefront_id = sf.id
        LEFT JOIN marketplace_categories c ON sp.category_id = c.id
        WHERE sp.id = $1 AND sp.is_active = true
    `, id).Scan(
        &listing.ID, &listing.StorefrontID, &listing.UserID, &listing.CategoryID,
        &listing.Title,        // ‚Üê sp.name ‚Üí listing.Title
        &listing.Description, &listing.Price, &listing.Condition, &listing.Status,
        &listing.Location, &listing.Latitude, &listing.Longitude, &listing.City,
        &listing.Country,
        &listing.ViewsCount,   // ‚Üê sp.view_count ‚Üí listing.ViewsCount
        &listing.CreatedAt, &listing.UpdatedAt,
        &listing.ShowOnMap, &listing.OriginalLanguage,
        &categoryName, &categorySlug, &listing.Metadata,
    )

    // –î–ª—è storefront –ø—Ä–æ–¥—É–∫—Ç–æ–≤ –Ω–µ—Ç –∞—Ç—Ä–∏–±—É—Ç–æ–≤ –ø–æ–∫–∞ —á—Ç–æ
    listing.Attributes = []models.ListingAttributeValue{}
    listing.Translations = make(map[string]map[string]string)
}
```

### –ú–∞–ø–ø–∏–Ω–≥ –ø–æ–ª–µ–π –¥–æ–∫–∞–∑—ã–≤–∞–µ—Ç –≥–∏–ø–æ—Ç–µ–∑—É:

| StorefrontProduct | ‚Üí | MarketplaceListing | –í—ã–≤–æ–¥ |
|-------------------|---|-------------------|-------|
| `sp.name` | ‚Üí | `listing.Title` | **–û–¥–Ω–æ –∏ —Ç–æ –∂–µ!** –ü—Ä–æ—Å—Ç–æ —Ä–∞–∑–Ω—ã–µ –Ω–∞–∑–≤–∞–Ω–∏—è |
| `sp.view_count` | ‚Üí | `listing.ViewsCount` | **–û–¥–Ω–æ –∏ —Ç–æ –∂–µ!** `Count` vs `s` |
| `sp.price` | ‚Üí | `listing.Price` | ‚úÖ –ò–¥–µ–Ω—Ç–∏—á–Ω—ã |
| `sp.category_id` | ‚Üí | `listing.CategoryID` | ‚úÖ –ò–¥–µ–Ω—Ç–∏—á–Ω—ã |

### 2. –•–∞—Ä–¥–∫–æ–¥ –∑–Ω–∞—á–µ–Ω–∏–π - –ø—Ä–∏–∑–Ω–∞–∫ –∫–æ—Å—Ç—ã–ª—è

```sql
'new' as condition,        -- –î–ª—è storefront –≤—Å–µ–≥–¥–∞ "–Ω–æ–≤—ã–π"
'active' as status,        -- –í—Å–µ–≥–¥–∞ –∞–∫—Ç–∏–≤–Ω—ã–π
'' as location,            -- –õ–æ–∫–∞—Ü–∏—è –∏–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç—Å—è
0 as latitude,             -- –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –∏–≥–Ω–æ—Ä–∏—Ä—É—é—Ç—Å—è (—Ö–æ—Ç—è —É StorefrontProduct –æ–Ω–∏ –µ—Å—Ç—å!)
false as show_on_map       -- –ù–µ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –Ω–∞ –∫–∞—Ä—Ç–µ
```

**–í—ã–≤–æ–¥:** StorefrontProduct –∏–∑–Ω–∞—á–∞–ª—å–Ω–æ **–∑–∞–¥—É–º—ã–≤–∞–ª—Å—è –∫–∞–∫ –ø–æ–¥—Ç–∏–ø** MarketplaceListing, –Ω–æ —Å–æ –≤—Ä–µ–º–µ–Ω–µ–º —Å—Ç—Ä—É–∫—Ç—É—Ä—ã —Ä–∞–∑–æ—à–ª–∏—Å—å.

### 3. –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π "–ø–æ–∫–∞ —á—Ç–æ"

```go
// –î–ª—è storefront –ø—Ä–æ–¥—É–∫—Ç–æ–≤ –Ω–µ—Ç –∞—Ç—Ä–∏–±—É—Ç–æ–≤ –ø–æ–∫–∞ —á—Ç–æ
listing.Attributes = []models.ListingAttributeValue{}
```

–°–ª–æ–≤–æ **"–ø–æ–∫–∞ —á—Ç–æ"** –≥–æ–≤–æ—Ä–∏—Ç –æ –Ω–∞–º–µ—Ä–µ–Ω–∏–∏ —É–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å –≤ –±—É–¥—É—â–µ–º!

### 4. –ü—Ä–æ—Ü–µ–Ω—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –æ–±—â–∏—Ö –ø–æ–ª–µ–π

```
StorefrontProduct: 73% –æ–±—â–∏—Ö –ø–æ–ª–µ–π ‚Üí –ø–æ—á—Ç–∏ –≤—Å—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –æ–±—â–∞—è
MarketplaceListing: 49% –æ–±—â–∏—Ö –ø–æ–ª–µ–π ‚Üí –ø–æ–ª–æ–≤–∏–Ω–∞ —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã—Ö
```

**–í—ã–≤–æ–¥:** StorefrontProduct –ø—Ä–æ—â–µ –∏ –±–ª–∏–∂–µ –∫ "–±–∞–∑–æ–≤–æ–º—É" —Ç–æ–≤–∞—Ä—É, MarketplaceListing - —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è.

---

## –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏—è

### ‚úÖ –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ

1. **–£–Ω–∏—Ñ–∏–∫–∞—Ü–∏—è –∫–æ–¥–∞**
   - –û–¥–∏–Ω —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –≤–º–µ—Å—Ç–æ –¥–≤—É—Ö
   - –û–¥–∏–Ω –Ω–∞–±–æ—Ä handlers —Å –æ–±—â–µ–π –ª–æ–≥–∏–∫–æ–π
   - –ú–µ–Ω—å—à–µ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è CRUD –æ–ø–µ—Ä–∞—Ü–∏–π

2. **–£–ø—Ä–æ—â–µ–Ω–∏–µ –ø–æ–∏—Å–∫–∞**
   - –ï–¥–∏–Ω—ã–π –ø–æ–∏—Å–∫–æ–≤—ã–π –∏–Ω–¥–µ–∫—Å –≤ OpenSearch
   - –û–¥–∏–Ω API endpoint: `GET /api/v1/products?type=listing`
   - –ü—Ä–æ—â–µ –¥–µ–ª–∞—Ç—å –æ–±—â—É—é –≤–∏—Ç—Ä–∏–Ω—É "–≤—Å–µ —Ç–æ–≤–∞—Ä—ã"

3. **–ì–∏–±–∫–æ—Å—Ç—å –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏**
   - –õ–µ–≥—á–µ "–ø—Ä–µ–≤—Ä–∞—â–∞—Ç—å" listing –≤ storefront product
   - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç "–∞–ø–≥—Ä–µ–π–¥–∏—Ç—å" –æ–±—ä—è–≤–ª–µ–Ω–∏–µ –¥–æ –º–∞–≥–∞–∑–∏–Ω–∞
   - –ü—Ä–æ—â–µ –º–∏–≥—Ä–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –º–µ–∂–¥—É —Ç–∏–ø–∞–º–∏

4. **–£–ø—Ä–æ—â–µ–Ω–∏–µ –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ –∏ –∫–æ—Ä–∑–∏–Ω—ã**
   - –û–¥–Ω–∞ —Ç–∞–±–ª–∏—Ü–∞ `favorites` –¥–ª—è –≤—Å–µ—Ö —Ç–∏–ø–æ–≤
   - –û–¥–Ω–∞ –∫–æ—Ä–∑–∏–Ω–∞ –¥–ª—è marketplace + storefront
   - –ù–µ –Ω—É–∂–Ω–æ –¥–∂–æ–π–Ω–∏—Ç—å –¥–≤–µ —Ç–∞–±–ª–∏—Ü—ã

5. **–ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞**
   - –ü—Ä–æ—â–µ —Å—á–∏—Ç–∞—Ç—å –æ–±—â—É—é —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ø–æ –ø–ª–∞—Ç—Ñ–æ—Ä–º–µ
   - –û–¥–∏–Ω –∑–∞–ø—Ä–æ—Å –¥–ª—è "—Ç–æ–ø —Ç–æ–≤–∞—Ä–æ–≤"
   - –õ–µ–≥—á–µ —Å—Ç—Ä–æ–∏—Ç—å —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

6. **–£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–≥–æ –¥–æ–ª–≥–∞**
   - –£–Ω–∏—Ñ–∏–∫–∞—Ü–∏—è –Ω–∞–∑–≤–∞–Ω–∏–π –ø–æ–ª–µ–π (`Title` vs `Name` ‚Üí `Title`)
   - –ï–¥–∏–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –ø–µ—Ä–µ–≤–æ–¥–æ–≤
   - –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### ‚úÖ –ë–∏–∑–Ω–µ—Å–æ–≤—ã–µ

1. **–£–ø—Ä–æ—â–µ–Ω–∏–µ UX**
   - –ï–¥–∏–Ω—ã–π –ø–æ–∏—Å–∫ –ø–æ –≤—Å–µ–º —Ç–æ–≤–∞—Ä–∞–º
   - –ï–¥–∏–Ω–æ–µ –∏–∑–±—Ä–∞–Ω–Ω–æ–µ
   - –ï–¥–∏–Ω–∞—è –∫–æ—Ä–∑–∏–Ω–∞

2. **–ì–∏–±–∫–æ—Å—Ç—å –º–æ–Ω–µ—Ç–∏–∑–∞—Ü–∏–∏**
   - –õ–µ–≥–∫–æ –≤–≤–æ–¥–∏—Ç—å —Ä–∞–∑–ª–∏—á–Ω—ã–µ —Ç–∞—Ä–∏—Ñ—ã –¥–ª—è —Ç–∏–ø–æ–≤
   - –ü—Ä–æ—Å—Ç–∞—è –º–∏–≥—Ä–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –º–µ–∂–¥—É –º–æ–¥–µ–ª—è–º–∏

3. **–†–∞–∑–≤–∏—Ç–∏–µ –ø—Ä–æ–¥—É–∫—Ç–∞**
   - –ù–æ–≤—ã–µ —Ñ–∏—á–∏ –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –∫–æ –≤—Å–µ–º —Ç–æ–≤–∞—Ä–∞–º
   - –ù–µ –Ω—É–∂–Ω–æ –¥—É–±–ª–∏—Ä–æ–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª

---

## –ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏ –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏—è

### ‚ùå –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ

#### 1. "–†–∞–∑–¥—É—Ç–∞—è" –º–æ–¥–µ–ª—å (God Object)

```go
type Product struct {
    // 22 –æ–±—â–∏—Ö –ø–æ–ª—è
    ID, Title, Description, Price...

    // 23 –ø–æ–ª—è –¢–û–õ–¨–ö–û –¥–ª—è listing (NULL –¥–ª—è storefront)
    Condition string
    HelpfulVotes int
    UserID int
    // ...

    // 8 –ø–æ–ª–µ–π –¢–û–õ–¨–ö–û –¥–ª—è storefront (NULL –¥–ª—è listing)
    StorefrontID int
    SKU string
    Currency string
    // ...
}
```

**53 –ø–æ–ª—è** –≤ –æ–¥–Ω–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–µ - —Å–ª–æ–∂–Ω–æ –ø–æ–Ω—è—Ç—å –∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å.

#### 2. –£—Å–ª–æ–∂–Ω–µ–Ω–∏–µ –≤–∞–ª–∏–¥–∞—Ü–∏–∏

```go
func (p *Product) Validate() error {
    if p.Type == "listing" {
        if p.Condition == "" {
            return errors.New("condition required")
        }
        if p.UserID == nil {
            return errors.New("user_id required")
        }
    } else if p.Type == "storefront_product" {
        if p.StorefrontID == nil {
            return errors.New("storefront_id required")
        }
        if p.SKU == nil {
            return errors.New("sku required")
        }
    }
    // ... –µ—â–µ 50 —Å—Ç—Ä–æ–∫ —É—Å–ª–æ–≤–∏–π
}
```

#### 3. –ü—Ä–æ–±–ª–µ–º—ã —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö

**–í–∞—Ä–∏–∞–Ω—Ç A: –û–¥–Ω–∞ —Ç–∞–±–ª–∏—Ü–∞**
```sql
CREATE TABLE products (
    id INT PRIMARY KEY,
    type VARCHAR(50),

    -- 22 –æ–±—â–∏—Ö –ø–æ–ª—è
    title VARCHAR(255) NOT NULL,

    -- 23 –ø–æ–ª—è listing (NULL –≤ 50% —Å–ª—É—á–∞–µ–≤)
    user_id INT,           -- NULL –¥–ª—è storefront
    condition VARCHAR(50), -- NULL –¥–ª—è storefront
    helpful_votes INT,     -- NULL –¥–ª—è storefront

    -- 8 –ø–æ–ª–µ–π storefront (NULL –≤ 50% —Å–ª—É—á–∞–µ–≤)
    storefront_id INT,     -- NULL –¥–ª—è listing
    sku VARCHAR(100),      -- NULL –¥–ª—è listing
    currency VARCHAR(3)    -- NULL –¥–ª—è listing
);
```

**–ü—Ä–æ–±–ª–µ–º—ã:**
- üî¥ **58% NULL –∑–Ω–∞—á–µ–Ω–∏–π** (31 –ø–æ–ª–µ –∏–∑ 53 –ø—É—Å—Ç—ã–µ)
- üî¥ –ù–µ–≤–æ–∑–º–æ–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å `NOT NULL` constraint –¥–ª—è —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã—Ö –ø–æ–ª–µ–π
- üî¥ –ò–Ω–¥–µ–∫—Å—ã —Ä–∞–∑–¥—É–≤–∞—é—Ç—Å—è
- üî¥ –°–ª–æ–∂–Ω—ã–µ CHECK constraints

**–í–∞—Ä–∏–∞–Ω—Ç B: –ù–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ (Class Table Inheritance)**
```sql
CREATE TABLE products (id, type, title, price, ...);  -- –æ–±—â–∏–µ
CREATE TABLE listing_specific (product_id, condition, user_id, ...);
CREATE TABLE storefront_specific (product_id, storefront_id, sku, ...);
```

**–ü—Ä–æ–±–ª–µ–º—ã:**
- üî¥ JOIN –ø—Ä–∏ –∫–∞–∂–¥–æ–º –∑–∞–ø—Ä–æ—Å–µ (–º–µ–¥–ª–µ–Ω–Ω–µ–µ)
- üî¥ –°–ª–æ–∂–Ω–µ–µ –∫–æ–¥ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
- üü° –ü–æ —Å—É—Ç–∏ —ç—Ç–æ "—Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ —Å –æ–±—â–µ–π –±–∞–∑–æ–π"

#### 4. –£—Å–ª–æ–∂–Ω–µ–Ω–∏–µ –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏

```go
func (s *OrderService) CreateOrder(product *Product) error {
    if product.Type == "listing" {
        // P2P –ª–æ–≥–∏–∫–∞: —ç—Å–∫—Ä–æ—É, —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø—Ä–æ–¥–∞–≤—Ü—É
    } else if product.Type == "storefront_product" {
        // B2C –ª–æ–≥–∏–∫–∞: —Å–∫–ª–∞–¥—Å–∫–æ–π —É—á–µ—Ç, Post Express
    }
    // –ì–∏–≥–∞–Ω—Ç—Å–∫–∏–π if-else –≤–æ –í–°–ï–• –º–µ—Ç–æ–¥–∞—Ö
}
```

–ö–∞–∂–¥—ã–π –º–µ—Ç–æ–¥ –ø—Ä–µ–≤—Ä–∞—â–∞–µ—Ç—Å—è –≤ `switch` –ø–æ —Ç–∏–ø—É.

#### 5. –ü–æ—Ç–µ—Ä—è type safety

**–°–µ–π—á–∞—Å:**
```go
func CreateListing(listing MarketplaceListing) error {
    // –ö–æ–º–ø–∏–ª—è—Ç–æ—Ä –∑–Ω–∞–µ—Ç –≤—Å–µ –ø–æ–ª—è
}
```

**–ü–æ—Å–ª–µ –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏—è:**
```go
func CreateProduct(product Product) error {
    // –ù—É–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä—è—Ç—å Type –≤—Ä—É—á–Ω—É—é
    if product.Type == "listing" {
        if product.Condition == "" {
            // runtime error –≤–º–µ—Å—Ç–æ compile error
        }
    }
}
```

#### 6. –°–ª–æ–∂–Ω–æ—Å—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏

```bash
# –ó–∞—Ç—Ä–æ–Ω–µ—Ç ~50 —Ñ–∞–π–ª–æ–≤
grep -r "MarketplaceListing" backend/ | wc -l  # ~500 —É–ø–æ–º–∏–Ω–∞–Ω–∏–π
grep -r "StorefrontProduct" backend/ | wc -l   # ~300 —É–ø–æ–º–∏–Ω–∞–Ω–∏–π
```

**–†–∏—Å–∫–∏:**
- üî¥ –û–≥—Ä–æ–º–Ω–∞—è –º–∏–≥—Ä–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
- üî¥ –í—ã—Å–æ–∫–∏–π —Ä–∏—Å–∫ –±–∞–≥–æ–≤
- üî¥ –ù–µ–≤–æ–∑–º–æ–∂–Ω–æ –æ—Ç–∫–∞—Ç–∏—Ç—å —á–∞—Å—Ç–∏—á–Ω–æ

### ‚ùå –ë–∏–∑–Ω–µ—Å–æ–≤—ã–µ

1. **–†–∞–∑–Ω—ã–µ –∂–∏–∑–Ω–µ–Ω–Ω—ã–µ —Ü–∏–∫–ª—ã**
   - Listing: draft ‚Üí active ‚Üí **sold** ‚Üí archived
   - Storefront: draft ‚Üí active ‚Üî inactive (–ø—Ä–æ–¥–∞–µ—Ç—Å—è –ø–æ—Å—Ç–æ—è–Ω–Ω–æ)

2. **–†–∞–∑–Ω—ã–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞**
   - Listing: –≤–ª–∞–¥–µ–ª–µ—Ü (UserID)
   - Storefront: –≤–ª–∞–¥–µ–ª–µ—Ü –≤–∏—Ç—Ä–∏–Ω—ã + –ø–µ—Ä—Å–æ–Ω–∞–ª —Å permissions

3. **–†–∞–∑–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ –¥–∞–Ω–Ω—ã–º**
   - Listing: condition –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ
   - Storefront: SKU/Barcode –∫—Ä–∏—Ç–∏—á–Ω–æ

---

## –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### üéØ –í–∞—Ä–∏–∞–Ω—Ç 1: Hybrid Architecture (–†–ï–ö–û–ú–ï–ù–î–£–ï–¢–°–Ø)

**–°—É—Ç—å:** –û–±—ä–µ–¥–∏–Ω–∏—Ç—å —Ç–æ–ª—å–∫–æ –¥–ª—è –ø–æ–∏—Å–∫–∞/–æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è, —Ä–∞–∑–¥–µ–ª–∏—Ç—å –¥–ª—è –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏.

```go
// 1. –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –æ–±—â–∏—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
type ProductInterface interface {
    GetID() int
    GetTitle() string
    GetDescription() string
    GetPrice() float64
    GetCategoryID() int
    GetImages() []ImageInterface
    GetLocation() (lat, lng float64)
    GetCreatedAt() time.Time
    // ... 14 –æ–±—â–∏—Ö –º–µ—Ç–æ–¥–æ–≤
}

// 2. –û–±–µ —Å—É—â–Ω–æ—Å—Ç–∏ —Ä–µ–∞–ª–∏–∑—É—é—Ç –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
func (m *MarketplaceListing) GetTitle() string { return m.Title }
func (s *StorefrontProduct) GetTitle() string  { return s.Name }

// 3. Search View –¥–ª—è OpenSearch (22 –æ–±—â–∏—Ö –ø–æ–ª—è)
type ProductSearchView struct {
    ID          int       `json:"id"`
    Type        string    `json:"type"`
    Title       string    `json:"title"`
    Price       float64   `json:"price"`
    CategoryID  int       `json:"category_id"`
    Images      []string  `json:"images"`
    CreatedAt   time.Time `json:"created_at"`
    // ... –æ—Å—Ç–∞–ª—å–Ω—ã–µ –æ–±—â–∏–µ –ø–æ–ª—è
}

// 4. –ë–î - —Ä–∞–∑–¥–µ–ª—å–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã
// marketplace_listings (45 –ø–æ–ª–µ–π, –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ constraints)
// storefront_products (30 –ø–æ–ª–µ–π, –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ constraints)

// 5. OpenSearch - –µ–¥–∏–Ω—ã–π –∏–Ω–¥–µ–∫—Å
// products (22 –æ–±—â–∏—Ö –ø–æ–ª—è + type)
```

#### –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:
- ‚úÖ –ï–¥–∏–Ω—ã–π –ø–æ–∏—Å–∫
- ‚úÖ Type safety
- ‚úÖ NO NULL –ø–æ–ª—è –≤ –ë–î
- ‚úÖ –ü—Ä–æ—Å—Ç–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è
- ‚úÖ –ì–∏–±–∫–æ—Å—Ç—å
- ‚úÖ Performance

#### –ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏:
- ‚ö†Ô∏è –î–≤–∞ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è (–Ω–æ —ç—Ç–æ –Ω–æ—Ä–º –¥–ª—è bounded contexts)
- ‚ö†Ô∏è –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –≤ SearchView (–Ω–æ –æ–Ω–∞ —É–∂–µ –µ—Å—Ç—å)

---

### üéØ –í–∞—Ä–∏–∞–Ω—Ç 2: –ü–æ–ª–Ω–æ–µ –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ —Å Type

**–°—É—Ç—å:** –û–¥–Ω–∞ —Ç–∞–±–ª–∏—Ü–∞ `products` —Å –ø–æ–ª–µ–º `type`.

```go
type Product struct {
    ID   int    `json:"id" db:"id"`
    Type string `json:"type" db:"type"` // "listing" | "storefront_product"

    // –í–ª–∞–¥–µ–Ω–∏–µ (–æ–¥–∏–Ω –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω)
    UserID       *int `json:"user_id,omitempty" db:"user_id"`
    StorefrontID *int `json:"storefront_id,omitempty" db:"storefront_id"`

    // –û–±—â–∏–µ –ø–æ–ª—è (—É–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ)
    Title       string    `json:"title" db:"title"`
    Description string    `json:"description" db:"description"`
    Price       float64   `json:"price" db:"price"`
    Currency    string    `json:"currency" db:"currency"`
    ViewCount   int       `json:"view_count" db:"view_count"`
    // ... –æ—Å—Ç–∞–ª—å–Ω—ã–µ 17 –æ–±—â–∏—Ö

    // –°–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ listing
    Condition       *string  `json:"condition,omitempty" db:"condition"`
    HelpfulVotes    *int     `json:"helpful_votes,omitempty" db:"helpful_votes"`
    OldPrice        *float64 `json:"old_price,omitempty" db:"old_price"`
    // ... –æ—Å—Ç–∞–ª—å–Ω—ã–µ 20

    // –°–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ storefront
    SKU       *string `json:"sku,omitempty" db:"sku"`
    Barcode   *string `json:"barcode,omitempty" db:"barcode"`
    SoldCount *int    `json:"sold_count,omitempty" db:"sold_count"`
    // ... –æ—Å—Ç–∞–ª—å–Ω—ã–µ 5

    // –°—Ç–∞—Ç—É—Å (—É–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–π)
    Status   string `json:"status" db:"status"` // "active" | "inactive" | "sold" | "draft"
    IsActive bool   `json:"is_active" db:"is_active"` // computed from Status
}
```

#### –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:
- ‚úÖ –ï–¥–∏–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞
- ‚úÖ –û–¥–∏–Ω —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
- ‚úÖ –û–¥–∏–Ω –Ω–∞–±–æ—Ä handlers
- ‚úÖ –ü—Ä–æ—â–µ –¥–æ–±–∞–≤–ª—è—Ç—å –æ–±—â–∏–µ –ø–æ–ª—è

#### –ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏:
- ‚ùå 53 –ø–æ–ª—è –≤ —Å—Ç—Ä—É–∫—Ç—É—Ä–µ
- ‚ùå 58% NULL –≤ –ë–î
- ‚ùå –°–ª–æ–∂–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è
- ‚ùå –ü–æ—Ç–µ—Ä—è type safety
- ‚ùå –ì–∏–≥–∞–Ω—Ç—Å–∫–∞—è –º–∏–≥—Ä–∞—Ü–∏—è

---

### üéØ –í–∞—Ä–∏–∞–Ω—Ç 3: –ù–µ –æ–±—ä–µ–¥–∏–Ω—è—Ç—å (status quo)

**–°—É—Ç—å:** –û—Å—Ç–∞–≤–∏—Ç—å –∫–∞–∫ –µ—Å—Ç—å, –Ω–æ –∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞—Ç—å –º–∞–ø–ø–∏–Ω–≥.

#### –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:
- ‚úÖ –ú–∏–Ω–∏–º—É–º –∏–∑–º–µ–Ω–µ–Ω–∏–π
- ‚úÖ –ù–µ—Ç —Ä–∏—Å–∫–æ–≤
- ‚úÖ Type safety
- ‚úÖ –ü—Ä–æ—Å—Ç–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è

#### –ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏:
- ‚ùå –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π –¥–æ–ª–≥ –æ—Å—Ç–∞–µ—Ç—Å—è
- ‚ùå –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –ª–æ–≥–∏–∫–∏
- ‚ùå –î–≤–∞ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è

---

## –ü–ª–∞–Ω –º–∏–≥—Ä–∞—Ü–∏–∏

### –ï—Å–ª–∏ –≤—ã–±—Ä–∞–Ω –í–∞—Ä–∏–∞–Ω—Ç 1 (Hybrid Architecture)

#### –§–∞–∑–∞ 1: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ (1-2 –¥–Ω—è)

1. ‚úÖ –°–æ–∑–¥–∞—Ç—å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å `ProductInterface`
2. ‚úÖ –°–æ–∑–¥–∞—Ç—å `ProductSearchView` —Å—Ç—Ä—É–∫—Ç—É—Ä—É
3. ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –≤ –æ–±–µ–∏—Ö —Å—É—â–Ω–æ—Å—Ç—è—Ö
4. ‚úÖ –ù–∞–ø–∏—Å–∞—Ç—å —Ç–µ—Å—Ç—ã –¥–ª—è –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞

#### –§–∞–∑–∞ 2: OpenSearch (2-3 –¥–Ω—è)

1. ‚úÖ –°–æ–∑–¥–∞—Ç—å –µ–¥–∏–Ω—ã–π –∏–Ω–¥–µ–∫—Å `products`
2. ‚úÖ –ù–∞–ø–∏—Å–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏–∏ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏ –≤ SearchView
3. ‚úÖ –ú–∏–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –≤ –Ω–æ–≤—ã–π –∏–Ω–¥–µ–∫—Å
4. ‚úÖ –û–±–Ω–æ–≤–∏—Ç—å –ø–æ–∏—Å–∫–æ–≤—ã–µ –∑–∞–ø—Ä–æ—Å—ã

#### –§–∞–∑–∞ 3: –û–±—â–∏–µ —Å–µ—Ä–≤–∏—Å—ã (3-4 –¥–Ω—è)

1. ‚úÖ –ü–µ—Ä–µ–ø–∏—Å–∞—Ç—å favorites –Ω–∞ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
2. ‚úÖ –ü–µ—Ä–µ–ø–∏—Å–∞—Ç—å cart –Ω–∞ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
3. ‚úÖ –û–±–Ω–æ–≤–∏—Ç—å API endpoints
4. ‚úÖ –¢–µ—Å—Ç—ã

#### –§–∞–∑–∞ 4: Cleanup (1 –¥–µ–Ω—å)

1. ‚úÖ –£–¥–∞–ª–∏—Ç—å –¥—É–±–ª–∏—Ä—É—é—â–∏–π—Å—è –∫–æ–¥
2. ‚úÖ –û–±–Ω–æ–≤–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é
3. ‚úÖ Code review

**–û–±—â–µ–µ –≤—Ä–µ–º—è:** 7-10 –¥–Ω–µ–π

---

### –ï—Å–ª–∏ –≤—ã–±—Ä–∞–Ω –í–∞—Ä–∏–∞–Ω—Ç 2 (–ü–æ–ª–Ω–æ–µ –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ)

#### –§–∞–∑–∞ 1: –ü—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (2-3 –¥–Ω—è)

1. ‚úÖ –§–∏–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Å—Ö–µ–º—É Product
2. ‚úÖ –ù–∞–ø–∏—Å–∞—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é
3. ‚úÖ –°–ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏
4. ‚úÖ –ü–ª–∞–Ω –æ—Ç–∫–∞—Ç–∞

#### –§–∞–∑–∞ 2: Database Migration (3-5 –¥–Ω–µ–π)

1. ‚úÖ –°–æ–∑–¥–∞—Ç—å —Ç–∞–±–ª–∏—Ü—É `products`
2. ‚úÖ –ú–∏–≥—Ä–∏—Ä–æ–≤–∞—Ç—å `marketplace_listings` (type='listing')
3. ‚úÖ –ú–∏–≥—Ä–∏—Ä–æ–≤–∞—Ç—å `storefront_products` (type='storefront_product')
4. ‚úÖ –û–±–Ω–æ–≤–∏—Ç—å foreign keys
5. ‚úÖ –¢–µ—Å—Ç—ã –º–∏–≥—Ä–∞—Ü–∏–∏

#### –§–∞–∑–∞ 3: Code Migration (7-10 –¥–Ω–µ–π)

1. ‚úÖ –û–±–Ω–æ–≤–∏—Ç—å models
2. ‚úÖ –û–±–Ω–æ–≤–∏—Ç—å repositories (~10 —Ñ–∞–π–ª–æ–≤)
3. ‚úÖ –û–±–Ω–æ–≤–∏—Ç—å services (~15 —Ñ–∞–π–ª–æ–≤)
4. ‚úÖ –û–±–Ω–æ–≤–∏—Ç—å handlers (~20 —Ñ–∞–π–ª–æ–≤)
5. ‚úÖ –û–±–Ω–æ–≤–∏—Ç—å —Ç–µ—Å—Ç—ã (~30 —Ñ–∞–π–ª–æ–≤)

#### –§–∞–∑–∞ 4: OpenSearch (2-3 –¥–Ω—è)

1. ‚úÖ –û–±–Ω–æ–≤–∏—Ç—å –∏–Ω–¥–µ–∫—Å–∞—Ü–∏—é
2. ‚úÖ –ü–µ—Ä–µ–∏–Ω–¥–µ–∫—Å–∏—Ä–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ
3. ‚úÖ –û–±–Ω–æ–≤–∏—Ç—å –ø–æ–∏—Å–∫–æ–≤—ã–µ –∑–∞–ø—Ä–æ—Å—ã

#### –§–∞–∑–∞ 5: Testing & Rollout (5-7 –¥–Ω–µ–π)

1. ‚úÖ E2E —Ç–µ—Å—Ç—ã
2. ‚úÖ Performance —Ç–µ—Å—Ç—ã
3. ‚úÖ Staging deployment
4. ‚úÖ Monitoring
5. ‚úÖ Production rollout

**–û–±—â–µ–µ –≤—Ä–µ–º—è:** 19-28 –¥–Ω–µ–π (3-4 –Ω–µ–¥–µ–ª–∏)

**–†–∏—Å–∫–∏:**
- üî¥ –í—ã—Å–æ–∫–∏–π —Ä–∏—Å–∫ —Ä–µ–≥—Ä–µ—Å—Å–∏–∏
- üî¥ –°–ª–æ–∂–Ω–æ –æ—Ç–∫–∞—Ç–∏—Ç—å
- üü° –ü—Ä–æ—Å—Ç–æ–π –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞ –ø—Ä–∏ –º–∏–≥—Ä–∞—Ü–∏–∏ –ë–î

---

## –ò—Ç–æ–≥–æ–≤–∞—è —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è

### üèÜ –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è: –í–∞—Ä–∏–∞–Ω—Ç 1 (Hybrid Architecture)

**–ü–æ—á–µ–º—É:**
1. ‚úÖ –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è (7-10 –¥–Ω–µ–π vs 3-4 –Ω–µ–¥–µ–ª–∏)
2. ‚úÖ –ù–∏–∑–∫–∏–π —Ä–∏—Å–∫ —Ä–µ–≥—Ä–µ—Å—Å–∏–∏
3. ‚úÖ –ü–æ–ª—É—á–∞–µ–º –≥–ª–∞–≤–Ω—É—é –≤—ã–≥–æ–¥—É (–µ–¥–∏–Ω—ã–π –ø–æ–∏—Å–∫)
4. ‚úÖ –°–æ—Ö—Ä–∞–Ω—è–µ–º type safety
5. ‚úÖ NO NULL –ø–æ–ª—è –≤ –ë–î
6. ‚úÖ –ú–æ–∂–Ω–æ –æ—Ç–∫–∞—Ç–∏—Ç—å –Ω–∞ –ª—é–±–æ–º —ç—Ç–∞–ø–µ

**–ß—Ç–æ –¥–µ–ª–∞—Ç—å –¥–∞–ª—å—à–µ:**
1. –û–±—Å—É–¥–∏—Ç—å —Ä–µ—à–µ–Ω–∏–µ —Å –∫–æ–º–∞–Ω–¥–æ–π
2. –ù–∞—á–∞—Ç—å —Å –§–∞–∑—ã 1 (–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å)
3. –ü–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ –º–∏–≥—Ä–∏—Ä–æ–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª
4. –ò–∑–º–µ—Ä–∏—Ç—å —ç—Ñ—Ñ–µ–∫—Ç

---

## –ü—Ä–∏–ª–æ–∂–µ–Ω–∏—è

### A. –ú–∞–ø–ø–∏–Ω–≥ –ø–æ–ª–µ–π –¥–ª—è –º–∏–≥—Ä–∞—Ü–∏–∏

| –û–±—â–µ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ | MarketplaceListing | StorefrontProduct |
|---------------|-------------------|-------------------|
| `title` | `Title` | `Name` |
| `view_count` | `ViewsCount` | `ViewCount` |
| `latitude` | `Latitude` | `IndividualLatitude` |
| `longitude` | `Longitude` | `IndividualLongitude` |
| `address` | `Location` | `IndividualAddress` |
| `address_translations` | `AddressMultilingual` | `AddressTranslations` |

### B. –ü—Ä–∏–º–µ—Ä—ã –∫–æ–¥–∞

#### –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å ProductInterface

```go
// backend/internal/domain/interfaces/product.go
package interfaces

import "time"

type ProductInterface interface {
    // Core fields
    GetID() int
    GetTitle() string
    GetDescription() string
    GetPrice() float64
    GetCategoryID() int

    // Images
    GetImages() []ImageInterface

    // Location
    GetLatitude() *float64
    GetLongitude() *float64
    GetShowOnMap() bool

    // Timestamps
    GetCreatedAt() time.Time
    GetUpdatedAt() time.Time

    // Type
    GetType() string // "listing" | "storefront_product"
}
```

#### –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –≤ MarketplaceListing

```go
func (m *MarketplaceListing) GetTitle() string {
    return m.Title
}

func (m *MarketplaceListing) GetType() string {
    return "listing"
}
```

#### –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –≤ StorefrontProduct

```go
func (s *StorefrontProduct) GetTitle() string {
    return s.Name
}

func (s *StorefrontProduct) GetType() string {
    return "storefront_product"
}
```

#### ProductSearchView

```go
// backend/internal/domain/models/product_search_view.go
package models

import "time"

type ProductSearchView struct {
    ID          int       `json:"id"`
    Type        string    `json:"type"`
    Title       string    `json:"title"`
    Description string    `json:"description"`
    Price       float64   `json:"price"`
    CategoryID  int       `json:"category_id"`
    Images      []string  `json:"images"`
    Latitude    *float64  `json:"latitude,omitempty"`
    Longitude   *float64  `json:"longitude,omitempty"`
    ShowOnMap   bool      `json:"show_on_map"`
    CreatedAt   time.Time `json:"created_at"`
    UpdatedAt   time.Time `json:"updated_at"`
}

// Converter functions
func ToSearchView(p ProductInterface) *ProductSearchView {
    images := make([]string, 0)
    for _, img := range p.GetImages() {
        images = append(images, img.GetImageURL())
    }

    return &ProductSearchView{
        ID:          p.GetID(),
        Type:        p.GetType(),
        Title:       p.GetTitle(),
        Description: p.GetDescription(),
        Price:       p.GetPrice(),
        CategoryID:  p.GetCategoryID(),
        Images:      images,
        Latitude:    p.GetLatitude(),
        Longitude:   p.GetLongitude(),
        ShowOnMap:   p.GetShowOnMap(),
        CreatedAt:   p.GetCreatedAt(),
        UpdatedAt:   p.GetUpdatedAt(),
    }
}
```

---

**–î–æ–∫—É–º–µ–Ω—Ç —Å–æ–∑–¥–∞–Ω:** 2025-10-09
**–°–ª–µ–¥—É—é—â–∏–π —à–∞–≥:** –û–±—Å—É–∂–¥–µ–Ω–∏–µ —Å –∫–æ–º–∞–Ω–¥–æ–π –∏ –≤—ã–±–æ—Ä –≤–∞—Ä–∏–∞–Ω—Ç–∞
