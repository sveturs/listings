# Backend Test Coverage Status

**–î–∞—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:** 2025-10-20
**–û–±—â–µ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ:** 6.3%

## üìä –°—Ç–∞—Ç—É—Å –ø–æ–∫—Ä—ã—Ç–∏—è –ø–æ –º–æ–¥—É–ª—è–º

### ‚úÖ –û—Ç–ª–∏—á–Ω–æ –ø–æ–∫—Ä—ã—Ç—ã (>70%)

| –ú–æ–¥—É–ª—å | –ü–æ–∫—Ä—ã—Ç–∏–µ | –°—Ç–∞—Ç—É—Å |
|--------|----------|--------|
| `internal/cache` | 73.7% | ‚úÖ –û—Ç–ª–∏—á–Ω–æ |
| `pkg/transliteration` | 100.0% | üéØ –ò–¥–µ–∞–ª—å–Ω–æ |
| `internal/pkg/allsecure` | 76.2% | ‚úÖ –û—Ç–ª–∏—á–Ω–æ |

### ‚ö†Ô∏è –ß–∞—Å—Ç–∏—á–Ω–æ –ø–æ–∫—Ä—ã—Ç—ã (20-70%)

| –ú–æ–¥—É–ª—å | –ü–æ–∫—Ä—ã—Ç–∏–µ | –°—Ç–∞—Ç—É—Å |
|--------|----------|--------|
| `internal/middleware` | 22.8% | ‚ö†Ô∏è –¢—Ä–µ–±—É–µ—Ç—Å—è —É–ª—É—á—à–µ–Ω–∏–µ |
| `internal/proj/payments/service` | 23.0% | ‚ö†Ô∏è –¢—Ä–µ–±—É–µ—Ç—Å—è —É–ª—É—á—à–µ–Ω–∏–µ |
| `internal/services/attributes` | 16.8% | ‚ö†Ô∏è –¢—Ä–µ–±—É–µ—Ç—Å—è —É–ª—É—á—à–µ–Ω–∏–µ |

### ‚ùå –ù–µ –ø–æ–∫—Ä—ã—Ç—ã –∏–ª–∏ –ø–æ—á—Ç–∏ –Ω–µ –ø–æ–∫—Ä—ã—Ç—ã (<20%)

| –ú–æ–¥—É–ª—å | –ü–æ–∫—Ä—ã—Ç–∏–µ | –°—Ç–∞—Ç—É—Å |
|--------|----------|--------|
| `internal/proj/b2c/service` | 11.6% | ‚ùå –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –Ω–∏–∑–∫–æ |
| `internal/proj/c2c/service` | 5.5% | ‚ùå –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –Ω–∏–∑–∫–æ |
| `internal/proj/c2c/services` | 3.3% | ‚ùå –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –Ω–∏–∑–∫–æ |
| `internal/proj/c2c/handler` | 1.7% | ‚ùå –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –Ω–∏–∑–∫–æ |
| `internal/proj/c2c/storage/postgres` | 0.0% | ‚ùå –ù–µ—Ç —Ç–µ—Å—Ç–æ–≤ |
| `internal/proj/orders/service` | 0.0% | ‚ùå –ù–µ—Ç —Ç–µ—Å—Ç–æ–≤ |

## üéØ –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è

### –í—ã—Å–æ–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç (critical business logic)

1. **Orders Service** (0.0%)
   - –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
   - –û–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–∫–∞–∑–æ–≤ –∏ –ø–ª–∞—Ç–µ–∂–µ–π
   - –ù–µ–æ–±—Ö–æ–¥–∏–º–æ: unit —Ç–µ—Å—Ç—ã + integration —Ç–µ—Å—Ç—ã

2. **C2C Service** (5.5%)
   - Marketplace —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å
   - –ü–æ–∏—Å–∫ –∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è
   - –ù–µ–æ–±—Ö–æ–¥–∏–º–æ: unit —Ç–µ—Å—Ç—ã –¥–ª—è similarity weights

3. **Payments Service** (23.0%)
   - –§–∏–Ω–∞–Ω—Å–æ–≤—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏
   - AllSecure –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
   - –ù–µ–æ–±—Ö–æ–¥–∏–º–æ: integration —Ç–µ—Å—Ç—ã —Å mock API

### –°—Ä–µ–¥–Ω–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç

4. **Middleware** (22.8%)
   - Auth, CORS, LocaleMiddleware
   - Feature flags
   - –ù–µ–æ–±—Ö–æ–¥–∏–º–æ: unit —Ç–µ—Å—Ç—ã –¥–ª—è –∫–∞–∂–¥–æ–≥–æ middleware

5. **B2C Service** (11.6%)
   - –ü–∞—Ä—Å–µ—Ä—ã –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
   - Jobs –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –¥–∞–Ω–Ω—ã—Ö
   - –ù–µ–æ–±—Ö–æ–¥–∏–º–æ: unit —Ç–µ—Å—Ç—ã –¥–ª—è parsers

### –ù–∏–∑–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç

6. **Attributes Service** (16.8%)
   - –ß–∞—Å—Ç–∏—á–Ω–æ –ø–æ–∫—Ä—ã—Ç
   - –¢—Ä–µ–±—É–µ—Ç —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è —Ç–µ—Å—Ç–æ–≤ –¥–ª—è edge cases

## üõ†Ô∏è –ö–∞–∫ –∑–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç—ã

### –ë–∞–∑–æ–≤—ã–π –æ—Ç—á–µ—Ç –æ –ø–æ–∫—Ä—ã—Ç–∏–∏
```bash
cd /data/hostel-booking-system/backend
make test-coverage
```

### –î–µ—Ç–∞–ª—å–Ω—ã–π –æ—Ç—á–µ—Ç —Å Top/Bottom —Ñ–∞–π–ª–∞–º–∏
```bash
make test-coverage-detailed
```

### JSON —Ñ–æ—Ä–º–∞—Ç –¥–ª—è API
```bash
make test-coverage-json
```

### –ü—Ä–æ—Å–º–æ—Ç—Ä HTML –æ—Ç—á–µ—Ç–∞
```bash
# –ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ make test-coverage
firefox coverage.html
# –∏–ª–∏
chromium coverage.html
```

## üìà –ü–ª–∞–Ω —É–ª—É—á—à–µ–Ω–∏—è

### –¶–µ–ª–∏ –Ω–∞ Q1 2025
- [ ] –î–æ–≤–µ—Å—Ç–∏ –æ–±—â–µ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ –¥–æ 30%
- [ ] –ü–æ–∫—Ä—ã—Ç—å Orders Service –Ω–∞ 70%+
- [ ] –ü–æ–∫—Ä—ã—Ç—å C2C Service –Ω–∞ 50%+
- [ ] –ü–æ–∫—Ä—ã—Ç—å Payments Service –Ω–∞ 60%+

### –¶–µ–ª–∏ –Ω–∞ Q2 2025
- [ ] –î–æ–≤–µ—Å—Ç–∏ –æ–±—â–µ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ –¥–æ 50%
- [ ] –í—Å–µ critical services >70%
- [ ] Middleware >50%

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –ò—Å–∫–ª—é—á–µ–Ω–∏—è –∏–∑ coverage

- **`/cmd/` –ø–∞–∫–µ—Ç—ã** - –∏—Å–∫–ª—é—á–µ–Ω—ã –∏–∑ –æ—Ç—á–µ—Ç–∞ (entry points, –Ω–µ —Ç—Ä–µ–±—É—é—Ç unit —Ç–µ—Å—Ç–æ–≤)
- **`go: no such tool "covdata"`** - warning –∏–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç—Å—è (–Ω–µ –≤–ª–∏—è–µ—Ç –Ω–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç)

### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Admin UI

Endpoint: `POST /api/admin/tests`
Payload: `{"test": "backend-tests-coverage"}`

–§–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–∞:
```json
{
  "result": {
    "name": "Backend Test Coverage",
    "status": "success",
    "duration": 45230,
    "output": "Running Go tests with coverage...\n‚úÖ Coverage report generated: coverage.html\nüìä Coverage summary:\ntotal: (statements) 6.3%"
  }
}
```

## üìù –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

- –í—Å–µ —Ç–µ—Å—Ç—ã –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –∑–∞–ø—Ä–æ—Å–µ –∫ `/api/admin/tests`
- Coverage report –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –≤ `backend/coverage.html`
- Raw –¥–∞–Ω–Ω—ã–µ –¥–æ—Å—Ç—É–ø–Ω—ã –≤ `backend/coverage.out`
- –¢–µ—Å—Ç—ã —Å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è–º–∏ (Redis, PostgreSQL, OpenSearch) —Ç—Ä–µ–±—É—é—Ç –∑–∞–ø—É—â–µ–Ω–Ω—ã—Ö —Å–µ—Ä–≤–∏—Å–æ–≤

---

**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** 2025-10-20 23:30
**–í–µ—Ä—Å–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞:** 1.0
**–ê–≤—Ç–æ—Ä:** Backend Testing Team
