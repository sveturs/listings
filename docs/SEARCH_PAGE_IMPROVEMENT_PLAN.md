# План улучшения страницы поиска SveTu

## Анализ текущего состояния

### Главная страница
**Положительные моменты:**
- Хорошая структура с популярными категориями
- Быстрый доступ к поиску в шапке
- Блоки с акциями и рекомендациями
- Карта с товарами рядом
- Поисковые подсказки ("Что сейчас ищут")

**Проблемы:**
- Поиск в шапке не синхронизирован со страницей поиска
- Нет визуальной обратной связи при поиске

### Страница поиска
**Положительные моменты:**
- Автодополнение с историей поиска
- Нечёткий поиск (fuzzy search)
- Статистика поиска (время, количество результатов)
- Переключение вида (сетка/список)
- Фильтры в боковой панели

**Критические проблемы:**
1. **Отсутствие результатов** - поиск "iPhone" не находит ничего, хотя это популярный запрос
2. **Ограниченные фильтры** - только базовые (тип, цена, сортировка)
3. **Нет категорийных фильтров** - невозможно сузить поиск по категориям
4. **Отсутствие фасетов** - нет динамических фильтров на основе результатов
5. **Слабая визуализация** - страница "Нет результатов" не информативна

## План улучшений

### Фаза 1: Критические исправления (1-2 недели)

#### 1.1 Исправление индексации в OpenSearch
- [ ] Проверить индексацию популярных товаров
- [ ] Добавить синонимы для брендов (iPhone → Apple iPhone, айфон)
- [ ] Настроить анализаторы для разных языков
- [ ] Улучшить токенизацию для составных названий

#### 1.2 Расширение фильтров
- [ ] Добавить выбор категорий с подкатегориями
- [ ] Фильтр по состоянию товара (новый/б/у)
- [ ] Фильтр по местоположению с радиусом
- [ ] Фильтр по дате публикации
- [ ] Фильтр по наличию фото/видео
- [ ] Фильтр по типу продавца (частное лицо/магазин/проверенный)

#### 1.3 Улучшение страницы "Нет результатов"
- [ ] Показывать похожие товары
- [ ] Предлагать альтернативные запросы
- [ ] Показывать популярные товары из категории
- [ ] Добавить кнопку "Создать оповещение о появлении"

### Фаза 2: UX улучшения (2-3 недели)

#### 2.1 Фасетный поиск
- [ ] Динамические фильтры на основе результатов
- [ ] Показ количества товаров для каждого фильтра
- [ ] Мультивыбор в фильтрах
- [ ] Визуальные индикаторы активных фильтров
- [ ] Кнопка "Сбросить все фильтры"

#### 2.2 Улучшение автодополнения
- [ ] Показ категорий в подсказках
- [ ] Превью товаров в выпадающем списке
- [ ] Показ цен в подсказках
- [ ] Группировка по типам (товары, магазины, категории)
- [ ] Поддержка навигации с клавиатуры

#### 2.3 Визуальные улучшения
- [ ] Скелетоны при загрузке
- [ ] Плавные анимации при фильтрации
- [ ] Компактный вид для мобильных
- [ ] Быстрый просмотр товара без перехода
- [ ] Сравнение товаров

#### 2.4 Дополнительные виды отображения
- [ ] Табличный вид для сравнения характеристик
- [ ] Вид карты для локальных товаров
- [ ] Галерея для визуальных товаров

### Фаза 3: Продвинутые функции (3-4 недели)

#### 3.1 Персонализация
- [ ] Сохранённые поиски
- [ ] История просмотров с возможностью вернуться
- [ ] Рекомендации на основе поисков
- [ ] Персональные фильтры по умолчанию
- [ ] Уведомления о новых товарах по запросу

#### 3.2 AI-функции
- [ ] Поиск по изображению
- [ ] Голосовой поиск
- [ ] Умные рекомендации альтернатив
- [ ] Автоматическое расширение запроса
- [ ] Определение намерения пользователя

#### 3.3 Социальные функции
- [ ] Показ что ищут друзья
- [ ] Поделиться поиском
- [ ] Коллективные покупки по запросу
- [ ] Отзывы на результаты поиска

#### 3.4 Аналитика поиска
- [ ] Тепловая карта кликов
- [ ] A/B тестирование алгоритмов
- [ ] Метрики релевантности
- [ ] Отслеживание конверсии поиска

### Фаза 4: Оптимизация производительности (ongoing)

#### 4.1 Технические улучшения
- [ ] Кэширование популярных запросов
- [ ] Предзагрузка следующей страницы
- [ ] Оптимизация изображений (WebP, lazy loading)
- [ ] CDN для статики
- [ ] Service Worker для офлайн-поиска

#### 4.2 SEO оптимизация
- [ ] Структурированные данные для товаров
- [ ] Канонические URL для фильтров
- [ ] Sitemap для поисковых страниц
- [ ] Meta-теги для популярных запросов
- [ ] Schema.org разметка

## Приоритеты реализации

### Немедленно (эта неделя):
1. Исправить индексацию - товары должны находиться
2. Добавить базовые категорийные фильтры
3. Улучшить страницу "нет результатов"

### Краткосрочно (2 недели):
1. Фасетный поиск с счётчиками
2. Улучшенное автодополнение
3. Фильтры по местоположению

### Среднесрочно (1 месяц):
1. Персонализация поиска
2. Визуальные улучшения
3. Дополнительные виды

### Долгосрочно (2-3 месяца):
1. AI-функции
2. Социальные функции
3. Полная аналитика

## Метрики успеха

- **Bounce rate на странице поиска**: снизить с текущих 60% до 30%
- **Конверсия поиск → просмотр товара**: увеличить с 20% до 40%
- **Конверсия поиск → покупка**: увеличить с 2% до 5%
- **Время до первого клика**: уменьшить с 15 сек до 5 сек
- **Использование фильтров**: увеличить с 10% до 30% сессий
- **Повторные поиски**: увеличить с 30% до 50% пользователей

## Технический стек

### Backend:
- OpenSearch для полнотекстового поиска
- Redis для кэширования
- PostgreSQL для метаданных
- Go для API

### Frontend:
- React Query для кэширования запросов
- Zustand для состояния фильтров
- Framer Motion для анимаций
- React Virtual для больших списков

### Инфраструктура:
- CDN (Cloudflare) для изображений
- ElasticAPM для мониторинга
- Grafana для метрик
- A/B testing framework

## Риски и митигация

1. **Риск**: Увеличение нагрузки на OpenSearch
   **Митигация**: Агрессивное кэширование, оптимизация запросов

2. **Риск**: Сложность UI с множеством фильтров
   **Митигация**: Прогрессивное раскрытие, умные defaults

3. **Риск**: Медленная загрузка с фасетами
   **Митигация**: Асинхронная загрузка, приоритизация

4. **Риск**: Несовместимость с мобильными
   **Митигация**: Mobile-first подход, адаптивный дизайн

## Заключение

Текущая страница поиска имеет базовый функционал, но требует существенных улучшений для конкурентоспособности. Главный приоритет - исправить индексацию и добавить необходимые фильтры. Далее следует focus на UX и персонализации для увеличения конверсии.