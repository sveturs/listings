# üîç –ü–û–õ–ù–´–ô –ê–£–î–ò–¢ –¢–ï–•–ù–ò–ß–ï–°–ö–û–ì–û –î–û–õ–ì–ê –ò –†–£–î–ò–ú–ï–ù–¢–û–í

**–î–∞—Ç–∞ –∞—É–¥–∏—Ç–∞:** 2025-10-12
**–ü—Ä–æ–µ–∫—Ç:** Svetu - –ú–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å (Backend Go + Frontend Next.js/React)
**–°—Ç–∞—Ç—É—Å:** Pre-production (–ø—Ä–æ–µ–∫—Ç –ù–ï –≤ –ø—Ä–æ–¥–∞–∫—à–Ω–µ)

---

## üìä EXECUTIVE SUMMARY

### –û–±—â–∞—è –æ—Ü–µ–Ω–∫–∞ –∫–∞—á–µ—Å—Ç–≤–∞ –ø—Ä–æ–µ–∫—Ç–∞: **5.8/10**

**–ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô –í–´–í–û–î:** –ü—Ä–æ–µ–∫—Ç —Å–æ–¥–µ—Ä–∂–∏—Ç –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω—ã–π —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π –¥–æ–ª–≥ –∏ –ù–ï –ì–û–¢–û–í –∫ –ø—Ä–æ–¥–∞–∫—à–Ω—É –±–µ–∑ —É—Å—Ç—Ä–∞–Ω–µ–Ω–∏—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –ø—Ä–æ–±–ª–µ–º.

### –ö–ª—é—á–µ–≤—ã–µ –º–µ—Ç—Ä–∏–∫–∏:

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –û—Ü–µ–Ω–∫–∞ | –ö—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç—å | –¢—Ä—É–¥–æ–∑–∞—Ç—Ä–∞—Ç—ã –Ω–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ |
|-----------|--------|-------------|------------------------------|
| **Backend (Go)** | 5.8/10 | üî¥ CRITICAL | ~60 —á–∞—Å–æ–≤ |
| **Frontend (React)** | 5.8/10 | üî¥ CRITICAL | ~40 —á–∞—Å–æ–≤ |
| **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö** | 7/10 | üü° HIGH | ~8 —á–∞—Å–æ–≤ |
| **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è** | 7.5/10 | üü¢ MEDIUM | ~4 —á–∞—Å–∞ |
| **–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏** | 8/10 | üü¢ LOW | ~2 —á–∞—Å–∞ |

### –ù–∞–π–¥–µ–Ω–æ –ø—Ä–æ–±–ª–µ–º:

- ‚ùå **2,657 —Å—Ç—Ä–æ–∫ –º–µ—Ä—Ç–≤–æ–≥–æ –∫–æ–¥–∞** –≤ backend (deprecated —Ñ–∞–π–ª—ã)
- ‚ùå **145 —Å—Ç—Ä–æ–∫ –∏–∑–±—ã—Ç–æ—á–Ω–æ–π –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏** –≤ frontend (ApiClientLegacy)
- ‚ùå **74 —Å–ª—É—á–∞—è —É—Ç–µ—á–∫–∏ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏—Ö –æ—à–∏–±–æ–∫** –≤ API (security issue!)
- ‚ùå **Hardcoded admin credentials** –≤ middleware (critical security!)
- ‚ùå **6 MB –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö –¥–∞–Ω–Ω—ã—Ö** –≤ PostgreSQL (Tiger schema + –∏–Ω–¥–µ–∫—Å—ã)
- ‚ùå **100+ TODO –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤** –≤ production –∫–æ–¥–µ
- ‚ö†Ô∏è **20+ —Ä—É–¥–∏–º–µ–Ω—Ç–æ–≤** –Ω–∞—Ä—É—à–∞—é—â–∏—Ö –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É BFF proxy

---

## üéØ –ü–†–ò–û–†–ò–¢–ò–ó–ê–¶–ò–Ø –ó–ê–î–ê–ß

### üî¥ –§–ê–ó–ê 1: –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï –ü–†–û–ë–õ–ï–ú–´ (1-2 –¥–Ω—è —Ä–∞–±–æ—Ç—ã)

**–ë–õ–û–ö–ò–†–£–Æ–¢ –ü–†–û–î–ê–ö–®–ù! –ò—Å–ø—Ä–∞–≤–∏—Ç—å –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ.**

#### Backend (6.5 —á–∞—Å–æ–≤)

1. **–£–¥–∞–ª–∏—Ç—å deprecated —Ñ–∞–π–ª—ã** (30 –º–∏–Ω) - 2,657 —Å—Ç—Ä–æ–∫
   ```bash
   rm backend/internal/storage/postgres/storefront_product.deprecated.go
   rm backend/internal/storage/postgres/storefront_methods.deprecated.go
   rm backend/internal/storage/postgres/storefront_fixed.deprecated.go
   ```

2. **–£–¥–∞–ª–∏—Ç—å deprecated –º–µ—Ç–æ–¥—ã –∏–∑ db.go** (30 –º–∏–Ω)
   - GetSession, CreateRefreshToken, GetRefreshToken –∏ –¥—Ä.
   - –í–µ—Å—å auth —Ç–µ–ø–µ—Ä—å –≤ `github.com/sveturs/auth`

3. **–£–±—Ä–∞—Ç—å hardcoded admin ID/Email** (1 —á–∞—Å) - SECURITY!
   ```go
   // backend/internal/middleware/middleware.go:90
   // –£–î–ê–õ–ò–¢–¨: hardcodedAdmin := userID == 1 || userID == 2 ...
   // –£–î–ê–õ–ò–¢–¨: adminEmails := []string{"bevzenko.sergey@gmail.com", ...}
   ```

4. **–ò—Å–ø—Ä–∞–≤–∏—Ç—å —É—Ç–µ—á–∫–∏ err.Error()** (3 —á–∞—Å–∞)
   - 74 —Å–ª—É—á–∞—è –≥–¥–µ `err.Error()` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –∫–ª–∏–µ–Ω—Ç—É
   - –ó–∞–º–µ–Ω–∏—Ç—å –Ω–∞ placeholders –¥–ª—è i18n
   - –û—Å–æ–±–µ–Ω–Ω–æ –∫—Ä–∏—Ç–∏—á–Ω–æ: delivery/handler (27 —Å–ª—É—á–∞–µ–≤!)

5. **–ó–∞–º–µ–Ω–∏—Ç—å panic/log.Fatal –Ω–∞ errors** (1 —á–∞—Å)
   ```go
   // reviews/storage/postgres/storage.go:18-21
   // –ë–´–õ–û: panic("pool cannot be nil")
   // –î–û–õ–ñ–ù–û: return nil, fmt.Errorf("pool cannot be nil")
   ```

6. **–£–¥–∞–ª–∏—Ç—å CSRF middleware** (20 –º–∏–Ω)
   - –§–∞–π–ª: `backend/internal/middleware/csrf.go`
   - –ù–ï –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è (–µ—Å—Ç—å BFF proxy –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞)
   - Endpoint `/api/v1/csrf-token` —Ç–æ–∂–µ —É–¥–∞–ª–∏—Ç—å

#### Frontend (5 —á–∞—Å–æ–≤)

7. **–£–¥–∞–ª–∏—Ç—å BaseApiService** (2-3 —á–∞—Å–∞)
   - –§–∞–π–ª: `src/services/baseApi.ts`
   - –û–±—Ö–æ–¥–∏—Ç BFF proxy `/api/v2`
   - –ú–∏–≥—Ä–∏—Ä–æ–≤–∞—Ç—å `c2cApi.ts` –Ω–∞ `apiClient`

8. **–ü–µ—Ä–µ–ø–∏—Å–∞—Ç—å unifiedAttributeService** (4-5 —á–∞—Å–æ–≤)
   - 10+ –º–µ—Ç–æ–¥–æ–≤ —Å –ø—Ä—è–º—ã–º `fetch()` –≤–º–µ—Å—Ç–æ `apiClient`
   - –ù–∞—Ä—É—à–µ–Ω–∏–µ BFF proxy –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã

9. **–£–¥–∞–ª–∏—Ç—å apiClientAuth** (1 —á–∞—Å)
   - –§–∞–π–ª: `src/lib/api-client-auth.ts`
   - Deprecated, –Ω–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ 8 –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö
   - –ó–∞–º–µ–Ω–∏—Ç—å –≤—Å–µ –∏–º–ø–æ—Ä—Ç—ã –Ω–∞ `apiClient`

10. **–£–¥–∞–ª–∏—Ç—å ApiClientLegacy** (6-8 —á–∞—Å–æ–≤)
    - –§–∞–π–ª: `src/services/api-client.ts:392-536`
    - 145 —Å—Ç—Ä–æ–∫ –∏–∑–±—ã—Ç–æ—á–Ω–æ–π –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏
    - –ù–ï–¢ –ø—Ä–æ–¥–∞–∫—à–Ω–∞ - –∑–∞—á–µ–º –æ–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å?

#### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö (2 —á–∞—Å–∞)

11. **–£–¥–∞–ª–∏—Ç—å Tiger schema** (15 –º–∏–Ω)
    ```sql
    DROP SCHEMA tiger CASCADE; -- 2.3 MB PostGIS –∞–¥—Ä–µ—Å–æ–≤ –°–®–ê
    ```

12. **–£–¥–∞–ª–∏—Ç—å –¥—É–±–ª–∏—Ä—É—é—â–∏–µ—Å—è –∏–Ω–¥–µ–∫—Å—ã** (30 –º–∏–Ω)
    - 9 –ø–∞—Ä: regular index + UNIQUE constraint
    - –≠–∫–æ–Ω–æ–º–∏—è ~300 KB + faster INSERT/UPDATE

13. **–£–¥–∞–ª–∏—Ç—å –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ FTS –∏–Ω–¥–µ–∫—Å—ã** (30 –º–∏–Ω)
    - –ü–æ–∏—Å–∫ —á–µ—Ä–µ–∑ OpenSearch, –Ω–µ PostgreSQL!
    - 8 –∏–Ω–¥–µ–∫—Å–æ–≤: ~800 KB

14. **–î–æ–±–∞–≤–∏—Ç—å –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏–µ –∏–Ω–¥–µ–∫—Å—ã** (30 –º–∏–Ω)
    ```sql
    CREATE INDEX idx_role_permissions_role ON role_permissions(role_id);
    CREATE INDEX idx_districts_city ON districts(city_id);
    ```

**–ò–¢–û–ì–û –§–ê–ó–ê 1:** ~13.5 —á–∞—Å–æ–≤
**–†–ï–ó–£–õ–¨–¢–ê–¢:** –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö security issues –∏ –±–ª–æ–∫–µ—Ä–æ–≤

---

### üü° –§–ê–ó–ê 2: –í–´–°–û–ö–ò–ô –ü–†–ò–û–†–ò–¢–ï–¢ (3-4 –¥–Ω—è —Ä–∞–±–æ—Ç—ã)

**–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π –¥–æ–ª–≥, –º–µ—à–∞—é—â–∏–π —Ä–∞–∑–≤–∏—Ç–∏—é.**

#### Backend (20 —á–∞—Å–æ–≤)

15. **–†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ auth middleware** (4 —á–∞—Å–∞)
    - –£–¥–∞–ª–∏—Ç—å –∫–∞—Å—Ç–æ–º–Ω—ã–µ `AdminRequired()`, `RequireAuth()`
    - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¢–û–õ–¨–ö–û `github.com/sveturs/auth` –±–∏–±–ª–∏–æ—Ç–µ–∫—É
    - –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ –≤—Å–µ—Ö —Ä–æ—É—Ç–æ–≤

16. **–†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ auth helpers –≤ handlers** (3 —á–∞—Å–∞)
    - –ó–∞–º–µ–Ω–∏—Ç—å `c.Locals("user_id").(int)`
    - –ù–∞ `authMiddleware.GetUserID(c)` –∏–∑ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏

17. **–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∏–ª–∏ —É–¥–∞–ª–∏—Ç—å OAuth stub –º–µ—Ç–æ–¥—ã** (2 —á–∞—Å–∞)
    ```go
    // users/handler/auth_oauth.go:183-241
    // GetUserRoles, GetRoles, AssignRole, RevokeRole
    // TODO: Implement through auth service
    ```

18. **–°–æ–∑–¥–∞—Ç—å –∫–æ–Ω—Ñ–∏–≥ –¥–ª—è –≤–∞–ª—é—Ç** (3 —á–∞—Å–∞)
    - 15+ –º–µ—Å—Ç —Å `Currency: "RSD" // TODO`
    - –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞—Ç—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤–∞–ª—é—Ç–∞–º–∏

19. **–†–∞–∑–±–∏—Ç—å God objects** (8 —á–∞—Å–æ–≤)
    - `c2c/storage/postgres/marketplace.go` - 3,761 —Å—Ç—Ä–æ–∫
    - `c2c/storage/opensearch/repository.go` - 3,601 —Å—Ç—Ä–æ–∫
    - `storage/postgres/db.go` - 2,196 —Å—Ç—Ä–æ–∫
    - –†–∞–∑–¥–µ–ª–∏—Ç—å –Ω–∞ –º–æ–¥—É–ª–∏ –ø–æ –¥–æ–º–µ–Ω–∞–º

#### Frontend (22 —á–∞—Å–∞)

20. **–ó–∞–º–µ–Ω–∏—Ç—å process.env –Ω–∞ configManager** (1-2 —á–∞—Å–∞)
    - 8 —Ñ–∞–π–ª–æ–≤ –æ–±—Ö–æ–¥—è—Ç —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—É—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
    - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `configManager.getApiUrl()`

21. **–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∏–ª–∏ —É–¥–∞–ª–∏—Ç—å updateProfile** (2-3 —á–∞—Å–∞)
    ```typescript
    // src/contexts/AuthContext.tsx:185-187
    // TODO: Implement profile update with new auth service
    const updatedProfile = false; // stub!
    ```

22. **–£–¥–∞–ª–∏—Ç—å deprecated –æ–ø—Ü–∏–∏ ApiClient** (1 —á–∞—Å)
    ```typescript
    // src/services/api-client.ts:5-6
    internal?: boolean; // DEPRECATED
    direct?: boolean; // –ø—Ä–æ—Ç–∏–≤–æ—Ä–µ—á–∏—Ç BFF
    ```

23. **–ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å /api/auth/ —Ä–æ—É—Ç—ã** (2-3 —á–∞—Å–∞)
    - –ó–∞—á–µ–º –æ—Ç–¥–µ–ª—å–Ω—ã–µ `/api/auth/login`, `/api/auth/register`?
    - –ï—Å—Ç—å —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π `/api/v2/[...path]`
    - –õ–∏–±–æ –¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å, –ª–∏–±–æ —É–¥–∞–ª–∏—Ç—å

24. **–î–æ–±–∞–≤–∏—Ç—å React.memo –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏** (10-15 —á–∞—Å–æ–≤)
    - 20+ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –±–µ–∑ `React.memo`
    - `useEffect` –±–µ–∑ dependencies
    - –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ `useMemo`, `useCallback`

#### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö (8 —á–∞—Å–æ–≤)

25. **–£–¥–∞–ª–∏—Ç—å —Ä—É–¥–∏–º–µ–Ω—Ç—ã —Ç–∞–±–ª–∏—Ü** (2 —á–∞—Å–∞)
    ```sql
    DROP TABLE address_change_log;
    DROP TABLE gis_poi_cache, gis_filter_analytics, gis_isochrone_cache;
    DROP TABLE listings_geo; -- –∑–∞–º–µ–Ω–µ–Ω–∞ –Ω–∞ unified_geo
    DROP TABLE import_sources, custom_ui_*;
    ```

26. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å listing_attribute_values** (2 —á–∞—Å–∞)
    - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ –∫–æ–¥–µ, –Ω–æ –ü–£–°–¢–ê–Ø!
    - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å unified_attribute_values
    - –í–æ–∑–º–æ–∂–Ω–æ –Ω—É–∂–Ω–∞ –º–∏–≥—Ä–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö

27. **–û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å translations —Ç–∞–±–ª–∏—Ü—É** (2 —á–∞—Å–∞)
    - –°–æ–∑–¥–∞—Ç—å –ø–æ–∫—Ä—ã–≤–∞—é—â–∏–π –∏–Ω–¥–µ–∫—Å
    - –£–¥–∞–ª–∏—Ç—å –Ω–µ–æ–ø—Ç–∏–º–∞–ª—å–Ω—ã–µ –∏–Ω–¥–µ–∫—Å—ã

28. **–£–¥–∞–ª–∏—Ç—å user_behavior –∏–Ω–¥–µ–∫—Å—ã** (30 –º–∏–Ω)
    - 5 –∏–Ω–¥–µ–∫—Å–æ–≤ –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è
    - –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞

**–ò–¢–û–ì–û –§–ê–ó–ê 2:** ~50 —á–∞—Å–æ–≤
**–†–ï–ó–£–õ–¨–¢–ê–¢:** –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–≥–æ –¥–æ–ª–≥–∞, —É–ª—É—á—à–µ–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

---

### üü¢ –§–ê–ó–ê 3: –°–†–ï–î–ù–ò–ô –ü–†–ò–û–†–ò–¢–ï–¢ (5-7 –¥–Ω–µ–π —Ä–∞–±–æ—Ç—ã)

**–£–ª—É—á—à–µ–Ω–∏–µ maintainability –∏ code quality.**

#### Backend (35 —á–∞—Å–æ–≤)

29. **–ü—Ä–æ–π—Ç–∏—Å—å –ø–æ –≤—Å–µ–º TODO** (8 —á–∞—Å–æ–≤)
    - 100+ TODO –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤ –≤ production –∫–æ–¥–µ
    - –õ–∏–±–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å, –ª–∏–±–æ —Å–æ–∑–¥–∞—Ç—å GitHub Issues
    - –ö—Ä–∏—Ç–∏—á–Ω—ã–µ TODO:
      - `orders/service/order_service.go:297` - "TODO: –†–∞—Å—Å—á–∏—Ç–∞—Ç—å —Å—Ç–æ–∏–º–æ—Å—Ç—å –¥–æ—Å—Ç–∞–≤–∫–∏"
      - `orders/service/order_service.go:300` - "TODO: –†–∞—Å—Å—á–∏—Ç–∞—Ç—å –Ω–∞–ª–æ–≥–∏"
      - `reviews/storage/postgres/reviews.go:883` - "TODO: User name from auth-service"

30. **–†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ –±–æ–ª—å—à–∏—Ö —Ñ–∞–π–ª–æ–≤** (16 —á–∞—Å–æ–≤)
    - –†–∞–∑–±–∏—Ç—å —Ñ–∞–π–ª—ã 2000+ —Å—Ç—Ä–æ–∫
    - –°–æ–±–ª—é–¥–µ–Ω–∏–µ Single Responsibility Principle
    - –£–ª—É—á—à–µ–Ω–∏–µ —á–∏—Ç–∞–µ–º–æ—Å—Ç–∏

31. **–ò—Å–ø—Ä–∞–≤–∏—Ç—å –≤—Å–µ –æ—Å—Ç–∞–≤—à–∏–µ—Å—è err.Error()** (3 —á–∞—Å–∞)
    - –ü–æ—Å–ª–µ –§–∞–∑—ã 1 –æ—Å—Ç–∞–Ω—É—Ç—Å—è –Ω–µ–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω—ã–µ
    - –ü–æ–ª–Ω–æ—Å—Ç—å—é –∑–∞–∫—Ä—ã—Ç—å security issue

32. **Code review –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ** (8 —á–∞—Å–æ–≤)
    - –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—Å–µ—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π
    - –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
    - Performance —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

#### Frontend (30 —á–∞—Å–æ–≤)

33. **–û–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ –¥—É–±–ª–∏—Ä—É—é—â–∏—Ö—Å—è Redux slices** (8-10 —á–∞—Å–æ–≤)
    - `localCartSlice` vs `cartSlice`
    - `compareSlice` vs `universalCompareSlice`
    - –ê–Ω–∞–ª–∏–∑ –∏ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥

34. **–ú–∏–≥—Ä–∞—Ü–∏—è –Ω–∞ generated —Ç–∏–ø—ã** (4-5 —á–∞—Å–æ–≤)
    - `src/services/admin.ts` —Å–æ–¥–µ—Ä–∂–∏—Ç —Ä—É—á–Ω—ã–µ —Ç–∏–ø—ã
    - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `src/types/generated/api.ts` –∏–∑ swagger

35. **–¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–∞—Ü–∏—è –ø–æ–ª—É—á–µ–Ω–∏—è –ª–æ–∫–∞–ª–∏** (2-3 —á–∞—Å–∞)
    - –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ `admin.ts`, `baseApi.ts`
    - –°–æ–∑–¥–∞—Ç—å —Ö—É–∫ `useLocale()`

36. **–£–¥–∞–ª–∏—Ç—å –∑–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–æ–¥** (1 —á–∞—Å)
    - `api-client.ts:282-294` - –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ —Ä–∞–¥–∏—É—Å–Ω–æ–≥–æ –ø–æ–∏—Å–∫–∞
    - TODO –≤ `unifiedAttributeService.ts:449-471`

37. **–£–¥–∞–ª–∏—Ç—å —Å—Ç–∞—Ä—ã–π AuthService static –∫–ª–∞—Å—Å** (2-3 —á–∞—Å–∞)
    - `src/services/auth.ts:136-161`
    - –û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å –Ω–µ –Ω—É–∂–Ω–∞

38. **Redux serializableCheck refactoring** (4-6 —á–∞—Å–æ–≤)
    - –°–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ exceptions
    - –†–µ–¥–∏–∑–∞–π–Ω WebSocket –∏ File —Ö—Ä–∞–Ω–µ–Ω–∏—è

39. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ QA** (8-10 —á–∞—Å–æ–≤)
    - Unit —Ç–µ—Å—Ç—ã –¥–ª—è –Ω–æ–≤—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
    - E2E —Ç–µ—Å—Ç—ã –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö flow
    - Performance –ø—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤–∞–Ω–∏–µ

#### –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è (4 —á–∞—Å–∞)

40. **–ê–∫—Ç—É–∞–ª–∏–∑–∞—Ü–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏** (2 —á–∞—Å–∞)
    - 67 .md —Ñ–∞–π–ª–æ–≤ –≤ docs/
    - 36 TODO/FIXME –≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏
    - –£–¥–∞–ª–∏—Ç—å —É—Å—Ç–∞—Ä–µ–≤—à–∏–µ –ø–ª–∞–Ω—ã

41. **–°–æ–∑–¥–∞–Ω–∏–µ migration guide** (2 —á–∞—Å–∞)
    - –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –¥–ª—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –º–∏–≥—Ä–∞—Ü–∏–π
    - Rollback –ø—Ä–æ—Ü–µ–¥—É—Ä—ã
    - Testing checklist

**–ò–¢–û–ì–û –§–ê–ó–ê 3:** ~69 —á–∞—Å–æ–≤
**–†–ï–ó–£–õ–¨–¢–ê–¢:** –í—ã—Å–æ–∫–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ –∫–æ–¥–∞, –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—é

---

## üìã –î–ï–¢–ê–õ–¨–ù–´–ï –ù–ê–•–û–î–ö–ò –ü–û –ö–û–ú–ü–û–ù–ï–ù–¢–ê–ú

### üîß BACKEND (Go + Fiber + PostgreSQL)

#### –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:
- **–í—Å–µ–≥–æ —Ñ–∞–π–ª–æ–≤:** ~350+ Go —Ñ–∞–π–ª–æ–≤
- **–°—Ç—Ä–æ–∫ –∫–æ–¥–∞:** ~133,122 (—Ç–æ–ª—å–∫–æ internal/proj)
- **Deprecated —Ñ–∞–π–ª–æ–≤:** 3 (2,657 —Å—Ç—Ä–æ–∫ –º–µ—Ä—Ç–≤–æ–≥–æ –∫–æ–¥–∞)
- **TODO –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤:** 100+
- **Security issues:** 75+ (—É—Ç–µ—á–∫–∏ err.Error() + hardcoded creds)

#### –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã:

**1. –†–£–î–ò–ú–ï–ù–¢–´ (2,657 —Å—Ç—Ä–æ–∫)**
```
backend/internal/storage/postgres/storefront_product.deprecated.go     1,949 —Å—Ç—Ä–æ–∫
backend/internal/storage/postgres/storefront_methods.deprecated.go       601 —Å—Ç—Ä–æ–∫–∞
backend/internal/storage/postgres/storefront_fixed.deprecated.go         107 —Å—Ç—Ä–æ–∫
```
**–°—Ç–∞—Ç—É—Å:** –ù–ï –∏–º–ø–æ—Ä—Ç–∏—Ä—É—é—Ç—Å—è –ù–ò–ì–î–ï –≤ –ø—Ä–æ–µ–∫—Ç–µ!
**–î–µ–π—Å—Ç–≤–∏–µ:** –£–î–ê–õ–ò–¢–¨ –ø–æ–ª–Ω–æ—Å—Ç—å—é

**2. HARDCODED ADMIN CREDENTIALS** (CRITICAL SECURITY!)
```go
// backend/internal/middleware/middleware.go:90
hardcodedAdmin := userID == 1 || userID == 2 || userID == 3 || userID == 6 || userID == 11
adminEmails := []string{
    "bevzenko.sergey@gmail.com",
    "voroshilovdo@gmail.com",
    "admin@svetu.rs",
}
```
**–ü—Ä–æ–±–ª–µ–º–∞:** Email –≤ Git –∏—Å—Ç–æ—Ä–∏–∏, –æ–±—Ö–æ–¥ auth-service
**–î–µ–π—Å—Ç–≤–∏–µ:** –£–î–ê–õ–ò–¢–¨, –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¢–û–õ–¨–ö–û auth-service –±–∏–±–ª–∏–æ—Ç–µ–∫—É

**3. –£–¢–ï–ß–ö–ò –í–ù–£–¢–†–ï–ù–ù–ò–• –û–®–ò–ë–û–ö** (74 —Å–ª—É—á–∞—è!)
```go
return c.Status(500).JSON(fiber.Map{
    "error": err.Error(), // ‚ùå –†–∞—Å–∫—Ä—ã–≤–∞–µ—Ç SQL, –ø—É—Ç–∏ –∫ —Ñ–∞–π–ª–∞–º!
})
```
**–ü—Ä–∞–≤–∏–ª—å–Ω–æ:**
```go
logger.Error().Err(err).Msg("Failed to create listing")
return c.Status(500).JSON(fiber.Map{
    "error": "marketplace.failed_to_create_listing", // ‚úÖ i18n placeholder
})
```

**4. –ù–ï–ü–û–õ–ù–ê–Ø –ò–ù–¢–ï–ì–†–ê–¶–ò–Ø AUTH-SERVICE**
- –ö–∞—Å—Ç–æ–º–Ω—ã–µ middleware –¥—É–±–ª–∏—Ä—É—é—Ç `github.com/sveturs/auth`
- –ù–µ –≤–µ–∑–¥–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è helpers: `authMiddleware.GetUserID(c)`
- OAuth stub –º–µ—Ç–æ–¥—ã —Å TODO (4 –º–µ—Ç–æ–¥–∞)

**5. GOD OBJECTS**
```
c2c/storage/postgres/marketplace.go           3,761 —Å—Ç—Ä–æ–∫
c2c/storage/opensearch/repository.go          3,601 —Å—Ç—Ä–æ–∫
c2c/service/marketplace.go                    2,567 —Å—Ç—Ä–æ–∫
translation_admin/service.go                  2,376 —Å—Ç—Ä–æ–∫
storage/postgres/db.go                        2,196 —Å—Ç—Ä–æ–∫
```

#### –û—Ü–µ–Ω–∫–∏:
- **–ö–∞—á–µ—Å—Ç–≤–æ –∫–æ–¥–∞:** 6/10
- **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:** 5/10 (—É—Ç–µ—á–∫–∏ –æ—à–∏–±–æ–∫, hardcoded admin)
- **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:** 7/10 (God objects, –Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç)
- **Maintainability:** 5/10 (–æ–≥—Ä–æ–º–Ω—ã–µ —Ñ–∞–π–ª—ã, –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ)

---

### üé® FRONTEND (Next.js 15 + React 19 + TypeScript)

#### –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:
- **–í—Å–µ–≥–æ —Ñ–∞–π–ª–æ–≤:** 399 –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
- **–°—Ç—Ä–æ–∫ –∫–æ–¥–∞:** ~322,000
- **Redux slices:** 13 –∞–∫—Ç–∏–≤–Ω—ã—Ö
- **–°–µ—Ä–≤–∏—Å–æ–≤:** 40+ —Ñ–∞–π–ª–æ–≤
- **–†—É–¥–∏–º–µ–Ω—Ç–æ–≤:** 20+ (–Ω–∞—Ä—É—à–µ–Ω–∏–µ BFF proxy)

#### –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã:

**1. –†–£–î–ò–ú–ï–ù–¢: BaseApiService** (–æ–±—Ö–æ–¥–∏—Ç BFF proxy)
```typescript
// src/services/baseApi.ts
protected createUrl(endpoint: string): string {
  const url = new URL(`${this.baseUrl}${endpoint}`); // ‚ùå –ü—Ä—è–º–æ–π URL –∫ backend!
}
```
**–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤:** `c2cApi.ts`
**–ü—Ä–æ–±–ª–µ–º–∞:** CORS issues, JWT –Ω–µ –∏–∑ httpOnly cookies
**–î–µ–π—Å—Ç–≤–∏–µ:** –£–î–ê–õ–ò–¢–¨, –º–∏–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ `apiClient`

**2. –†–£–î–ò–ú–ï–ù–¢: unifiedAttributeService** (–ø—Ä—è–º—ã–µ fetch)
```typescript
// 10+ –º–µ—Ç–æ–¥–æ–≤
const response = await fetch(url, { // ‚ùå –û–±—Ö–æ–¥ BFF proxy
  method: 'GET',
  headers: { 'Content-Type': 'application/json' },
  credentials: 'include',
});
```
**–ü—Ä–æ–±–ª–µ–º–∞:** –ù–µ—Ç —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫, retry –ª–æ–≥–∏–∫–∏
**–î–µ–π—Å—Ç–≤–∏–µ:** –ü–ï–†–ï–ü–ò–°–ê–¢–¨ –Ω–∞ `apiClient`

**3. –ò–ó–ë–´–¢–û–ß–ù–ê–Ø –û–ë–†–ê–¢–ù–ê–Ø –°–û–í–ú–ï–°–¢–ò–ú–û–°–¢–¨: ApiClientLegacy**
```typescript
// src/services/api-client.ts:392-536 (145 —Å—Ç—Ä–æ–∫!)
export abstract class ApiClientLegacy { ... }
export { ApiClientLegacy as ApiClient }; // –¥–ª—è –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏
```
**–ü—Ä–æ–±–ª–µ–º–∞:** –ù–ï–¢ –ø—Ä–æ–¥–∞–∫—à–Ω–∞ - –∑–∞—á–µ–º –æ–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å?
**–î–µ–π—Å—Ç–≤–∏–µ:** –£–î–ê–õ–ò–¢–¨, –º–∏–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ –Ω–æ–≤—ã–π `apiClient`

**4. DEPRECATED –§–ê–ô–õ: apiClientAuth**
```typescript
/**
 * @deprecated –≠—Ç–æ—Ç –º–æ–¥—É–ª—å –±–æ–ª—å—à–µ –Ω–µ –Ω—É–∂–µ–Ω. BFF proxy –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–æ–±–∞–≤–ª—è–µ—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é.
 */
export const apiClientAuth = apiClient;
```
**–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤:** 8 –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö!
**–î–µ–π—Å—Ç–≤–∏–µ:** –£–î–ê–õ–ò–¢–¨ —Ñ–∞–π–ª, –∑–∞–º–µ–Ω–∏—Ç—å –∏–º–ø–æ—Ä—Ç—ã

**5. –ü–†–Ø–ú–û–ô –î–û–°–¢–£–ü –ö process.env**
- 8 —Ñ–∞–π–ª–æ–≤ –æ–±—Ö–æ–¥—è—Ç `configManager`
- –ù–µ—Ç –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
- –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ default –∑–Ω–∞—á–µ–Ω–∏–π

**6. –û–¢–°–£–¢–°–¢–í–ò–ï –û–ü–¢–ò–ú–ò–ó–ê–¶–ò–ò**
- 20+ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –±–µ–∑ `React.memo`
- `useEffect` –±–µ–∑ dependencies
- –ù–µ—Ç `useMemo`, `useCallback` –≥–¥–µ –Ω—É–∂–Ω–æ

#### –û—Ü–µ–Ω–∫–∏:
- **TypeScript –∫–∞—á–µ—Å—Ç–≤–æ:** 7/10
- **React best practices:** 6/10
- **Performance:** 5/10 (–Ω–µ—Ç –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–π)
- **Architecture:** 6/10 (–Ω–∞—Ä—É—à–µ–Ω–∏–µ BFF proxy)

---

### üóÑÔ∏è –ë–ê–ó–ê –î–ê–ù–ù–´–• (PostgreSQL + PostGIS)

#### –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:
- **–†–∞–∑–º–µ—Ä –ë–î:** ~303 MB
- **–†–∞–∑–º–µ—Ä public schema:** 25 MB (166 —Ç–∞–±–ª–∏—Ü)
- **Tiger schema:** 2.3 MB (–ù–ï –ò–°–ü–û–õ–¨–ó–£–ï–¢–°–Ø!)
- **–ü—É—Å—Ç—ã—Ö —Ç–∞–±–ª–∏—Ü:** 104 (–±–µ–∑ –¥–∞–Ω–Ω—ã—Ö)
- **–ù–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö –∏–Ω–¥–µ–∫—Å–æ–≤:** 567 (~3 MB)

#### –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã:

**1. TIGER SCHEMA (2.3 MB –º—É—Å–æ—Ä–∞)**
```sql
-- PostGIS –∞–¥—Ä–µ—Å–∞ –°–®–ê - –ø—Ä–æ–µ–∫—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –°–µ—Ä–±–∏–µ–π!
-- 34 –ø—É—Å—Ç—ã–µ —Ç–∞–±–ª–∏—Ü—ã + 368 KB –∏–Ω–¥–µ–∫—Å–æ–≤
DROP SCHEMA tiger CASCADE;
```

**2. –ù–ï–ò–°–ü–û–õ–¨–ó–£–ï–ú–´–ï FTS –ò–ù–î–ï–ö–°–´ (800 KB)**
- –ü–æ–∏—Å–∫ —á–µ—Ä–µ–∑ OpenSearch, –Ω–µ PostgreSQL!
- 8 GIN –∏–Ω–¥–µ–∫—Å–æ–≤ –Ω–∞ `to_tsvector`, trigram
- –ó–∞–º–µ–¥–ª—è—é—Ç INSERT/UPDATE

**3. –î–£–ë–õ–ò–†–£–Æ–©–ò–ï–°–Ø –ò–ù–î–ï–ö–°–´ (300 KB)**
- 9 –ø–∞—Ä: regular index + UNIQUE constraint
- –ü—Ä–∏–º–µ—Ä: `idx_car_models_make_slug` + `car_models_make_id_slug_key`

**4. –ü–£–°–¢–ê–Ø –¢–ê–ë–õ–ò–¶–ê –° –ò–ù–î–ï–ö–°–ê–ú–ò**
```sql
listing_attribute_values (176 KB –∏–Ω–¥–µ–∫—Å–æ–≤, 0 rows)
-- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ –∫–æ–¥–µ, –Ω–æ –ü–£–°–¢–ê–Ø!
-- –í–æ–∑–º–æ–∂–Ω–æ –¥–∞–Ω–Ω—ã–µ –≤ unified_attribute_values?
```

**5. –û–¢–°–£–¢–°–¢–í–£–Æ–©–ò–ï –ò–ù–î–ï–ö–°–´**
```sql
role_permissions (188 rows, 54 seq_scans, 0 idx_scans) -- –Ω–µ—Ç –∏–Ω–¥–µ–∫—Å–æ–≤!
districts (119 rows, 57 seq_scans, 0 idx_scans) -- –Ω–µ—Ç –∏–Ω–¥–µ–∫—Å–æ–≤!
```

#### –í—ã–≥–æ–¥—ã –æ—Ç –æ—á–∏—Å—Ç–∫–∏:
- **–û—Å–≤–æ–±–æ–∂–¥–∞–µ—Ç—Å—è:** ~6 MB (21% –æ—Ç public schema)
- **INSERT –Ω–∞ c2c_listings:** –±—ã—Å—Ç—Ä–µ–µ –Ω–∞ ~15%
- **INSERT –Ω–∞ b2c_products:** –±—ã—Å—Ç—Ä–µ–µ –Ω–∞ ~10%
- **–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è:** +20% (–Ω–æ–≤—ã–µ –∏–Ω–¥–µ–∫—Å—ã –Ω–∞ role_permissions)

#### –û—Ü–µ–Ω–∫–∞:
- **–°—Ç—Ä—É–∫—Ç—É—Ä–∞:** 7/10
- **–ò–Ω–¥–µ–∫—Å—ã:** 6/10 (–º–Ω–æ–≥–æ –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö)
- **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è:** 7/10

---

### üìö –î–û–ö–£–ú–ï–ù–¢–ê–¶–ò–Ø

#### –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:
- **–§–∞–π–ª–æ–≤ –≤ docs/:** 67 .md —Ñ–∞–π–ª–æ–≤
- **TODO/FIXME:** 36 —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–≤ –≤ 9 —Ñ–∞–π–ª–∞—Ö
- **–£—Å—Ç–∞—Ä–µ–≤—à–∏—Ö –ø–ª–∞–Ω–æ–≤:** ~15 —Ñ–∞–π–ª–æ–≤

#### –ü—Ä–æ–±–ª–µ–º—ã:

**1. –£–°–¢–ê–†–ï–í–®–ò–ï –ü–õ–ê–ù–´ –ú–ò–ì–†–ê–¶–ò–ô**
```
AUTH_MIGRATION_PLAN.md                 (4 TODO)
AUTH_MIGRATION_PLAN_UPDATED.md
C2C_B2C_MIGRATION_ANALYSIS.md
C2C_B2C_MIGRATION_PLAN_DETAILED.md
MIGRATION_C2C_B2C_COMPLETE.md
```
**–°—Ç–∞—Ç—É—Å:** –ú–∏–≥—Ä–∞—Ü–∏–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω—ã
**–î–µ–π—Å—Ç–≤–∏–µ:** –ê—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞—Ç—å –∏–ª–∏ —É–¥–∞–ª–∏—Ç—å

**2. –î–£–ë–õ–ò–†–û–í–ê–ù–ò–ï AUDIT REPORTS**
```
CODE_RUDIMENTS_AUDIT_2025-10-09.md    (8 TODO)
CODE_AUDIT_REPORT_2025.md             (8 TODO)
AUDIT_REPORT_2025_09_27.md
```
**–î–µ–π—Å—Ç–≤–∏–µ:** –ö–æ–Ω—Å–æ–ª–∏–¥–∏—Ä–æ–≤–∞—Ç—å, –æ—Å—Ç–∞–≤–∏—Ç—å –ø–æ—Å–ª–µ–¥–Ω–∏–π

**3. –ù–ï–ê–ö–¢–£–ê–õ–¨–ù–´–ï –ü–õ–ê–ù–´ –†–ê–ó–†–ê–ë–û–¢–ö–ò**
```
MASTER_DEVELOPMENT_PLAN.md
UPDATED_DEVELOPMENT_PLAN_2025_09.md
AUTOMOTIVE_DEVELOPMENT_PHASE2.md
```
**–î–µ–π—Å—Ç–≤–∏–µ:** –û–±–Ω–æ–≤–∏—Ç—å –∞–∫—Ç—É–∞–ª—å–Ω—ã–π —Å—Ç–∞—Ç—É—Å

#### –û—Ü–µ–Ω–∫–∞:
- **–ê–∫—Ç—É–∞–ª—å–Ω–æ—Å—Ç—å:** 7/10
- **–ü–æ–ª–Ω–æ—Ç–∞:** 8/10
- **–°—Ç—Ä—É–∫—Ç—É—Ä–∞:** 7.5/10

---

### üì¶ –ó–ê–í–ò–°–ò–ú–û–°–¢–ò

#### Backend (Go):
```
–ü—Ä—è–º—ã—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π: 50
–ù–µ–ø—Ä—è–º—ã—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π: 321
–í—Å–µ–≥–æ –≤ –≥—Ä–∞—Ñ–µ: 6,607 –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
```

**–ö–ª—é—á–µ–≤—ã–µ:**
- ‚úÖ `github.com/sveturs/auth v1.8.0` - –∞–∫—Ç—É–∞–ª—å–Ω–æ
- ‚úÖ `github.com/gofiber/fiber/v2 v2.52.6` - –∞–∫—Ç—É–∞–ª—å–Ω–æ
- ‚úÖ `github.com/jackc/pgx/v5 v5.7.6` - –∞–∫—Ç—É–∞–ª—å–Ω–æ
- ‚ö†Ô∏è `github.com/go-redis/redis/v8` + `github.com/redis/go-redis/v9` - –¥–≤–µ –≤–µ—Ä—Å–∏–∏!

#### Frontend (Node.js):
```
–ü—Ä—è–º—ã—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π: 56
DevDependencies: 29
```

**–ö–ª—é—á–µ–≤—ã–µ:**
- ‚úÖ `next: 15.3.2` - –ø–æ—Å–ª–µ–¥–Ω—è—è —Å—Ç–∞–±–∏–ª—å–Ω–∞—è
- ‚úÖ `react: 19.0.0` - –ø–æ—Å–ª–µ–¥–Ω—è—è —Å—Ç–∞–±–∏–ª—å–Ω–∞—è
- ‚úÖ `@reduxjs/toolkit: 2.8.2` - –∞–∫—Ç—É–∞–ª—å–Ω–æ
- ‚ö†Ô∏è `axios: 1.11.0` - –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è (–µ—Å—Ç—å fetch + apiClient)

#### –ü—Ä–æ–±–ª–µ–º—ã:

**1. –ù–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –ø–∞–∫–µ—Ç—ã Backend**
- `github.com/go-telegram-bot-api/telegram-bot-api` - Telegram –±–æ—Ç –Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω
- –í–æ–∑–º–æ–∂–Ω–æ –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ linters (100+ –≤ go.mod)

**2. –ù–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –ø–∞–∫–µ—Ç—ã Frontend**
- `axios` - –≤–µ—Å—å –∫–æ–¥ –Ω–∞ `fetch` + `apiClient`
- `puppeteer` + `playwright` - –æ–±–∞ –±—Ä–∞—É–∑–µ—Ä–Ω—ã—Ö –¥–≤–∏–∂–∫–∞?

#### –û—Ü–µ–Ω–∫–∞:
- **Backend:** 8/10
- **Frontend:** 8/10
- **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:** 8/10 (–∞–∫—Ç—É–∞–ª—å–Ω—ã–µ –≤–µ—Ä—Å–∏–∏)

---

## üöÄ –ü–õ–ê–ù –í–´–ü–û–õ–ù–ï–ù–ò–Ø

### Week 1: –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è (–§–ê–ó–ê 1)

**–î–µ–Ω—å 1-2:**
- ‚úÖ –£–¥–∞–ª–µ–Ω–∏–µ deprecated —Ñ–∞–π–ª–æ–≤ backend (30 –º–∏–Ω)
- ‚úÖ –£–¥–∞–ª–µ–Ω–∏–µ deprecated –º–µ—Ç–æ–¥–æ–≤ db.go (30 –º–∏–Ω)
- ‚úÖ –£–±—Ä–∞—Ç—å hardcoded admin credentials (1 —á–∞—Å)
- ‚úÖ –ó–∞–º–µ–Ω–∏—Ç—å panic/log.Fatal (1 —á–∞—Å)
- ‚úÖ –£–¥–∞–ª–∏—Ç—å CSRF middleware (20 –º–∏–Ω)
- ‚úÖ –ò—Å–ø—Ä–∞–≤–∏—Ç—å –∫—Ä–∏—Ç–∏—á–Ω—ã–µ —É—Ç–µ—á–∫–∏ err.Error() (3 —á–∞—Å–∞)
- ‚úÖ –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö: Tiger schema, –¥—É–±–ª–∏, FTS –∏–Ω–¥–µ–∫—Å—ã (2 —á–∞—Å–∞)

**–î–µ–Ω—å 3-4:**
- ‚úÖ Frontend: —É–¥–∞–ª–∏—Ç—å BaseApiService (2-3 —á–∞—Å–∞)
- ‚úÖ Frontend: —É–¥–∞–ª–∏—Ç—å apiClientAuth (1 —á–∞—Å)
- ‚úÖ Frontend: –ø–µ—Ä–µ–ø–∏—Å–∞—Ç—å unifiedAttributeService (4-5 —á–∞—Å–æ–≤)

**–î–µ–Ω—å 5:**
- ‚úÖ Frontend: —É–¥–∞–ª–∏—Ç—å ApiClientLegacy (6-8 —á–∞—Å–æ–≤)
- ‚úÖ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π
- ‚úÖ –°–æ–∑–¥–∞—Ç—å PR —Å –§–∞–∑–æ–π 1

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –£—Å—Ç—Ä–∞–Ω–µ–Ω—ã –±–ª–æ–∫–µ—Ä—ã –ø—Ä–æ–¥–∞–∫—à–Ω–∞

### Week 2-3: –í—ã—Å–æ–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç (–§–ê–ó–ê 2)

**Backend (4 –¥–Ω—è):**
- –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ auth middleware –∏ helpers
- OAuth –º–µ—Ç–æ–¥—ã (—Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∏–ª–∏ —É–¥–∞–ª–∏—Ç—å)
- –ö–æ–Ω—Ñ–∏–≥ –¥–ª—è –≤–∞–ª—é—Ç
- –ù–∞—á–∞—Ç—å —Ä–∞–∑–±–∏–µ–Ω–∏–µ God objects

**Frontend (5 –¥–Ω–µ–π):**
- –ó–∞–º–µ–Ω–∏—Ç—å process.env –Ω–∞ configManager
- –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å updateProfile –∏–ª–∏ —É–¥–∞–ª–∏—Ç—å
- –£–¥–∞–ª–∏—Ç—å deprecated –æ–ø—Ü–∏–∏
- –ê–Ω–∞–ª–∏–∑ /api/auth/ —Ä–æ—É—Ç–æ–≤
- –ù–∞—á–∞—Ç—å –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ React.memo

**–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö (1 –¥–µ–Ω—å):**
- –£–¥–∞–ª–µ–Ω–∏–µ —Ä—É–¥–∏–º–µ–Ω—Ç–æ–≤ —Ç–∞–±–ª–∏—Ü
- –ü—Ä–æ–≤–µ—Ä–∫–∞ listing_attribute_values
- –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è translations

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –£—Å—Ç—Ä–∞–Ω–µ–Ω —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π –¥–æ–ª–≥

### Week 4-5: –°—Ä–µ–¥–Ω–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç (–§–ê–ó–ê 3)

**Backend:**
- –ü—Ä–æ—Ö–æ–¥ –ø–æ TODO –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è–º
- –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ –±–æ–ª—å—à–∏—Ö —Ñ–∞–π–ª–æ–≤
- –§–∏–Ω–∞–ª—å–Ω–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ err.Error()

**Frontend:**
- –û–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ Redux slices
- –ú–∏–≥—Ä–∞—Ü–∏—è –Ω–∞ generated —Ç–∏–ø—ã
- –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–∞—Ü–∏—è —É—Ç–∏–ª–∏—Ç
- Performance –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

**–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:**
- –ê–∫—Ç—É–∞–ª–∏–∑–∞—Ü–∏—è –ø–ª–∞–Ω–æ–≤
- Migration guides
- –ê—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞–Ω–∏–µ —É—Å—Ç–∞—Ä–µ–≤—à–µ–≥–æ

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –í—ã—Å–æ–∫–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ –∫–æ–¥–∞

---

## üìä –ú–ï–¢–†–ò–ö–ò –£–°–ü–ï–•–ê

### –î–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π:
- Backend –∫–∞—á–µ—Å—Ç–≤–æ: 5.8/10
- Frontend –∫–∞—á–µ—Å—Ç–≤–æ: 5.8/10
- Security: 5/10
- Performance: 6/10
- Maintainability: 5/10

### –ü–æ—Å–ª–µ –§–ê–ó–´ 1:
- Backend –∫–∞—á–µ—Å—Ç–≤–æ: 7/10 ‚úÖ
- Frontend –∫–∞—á–µ—Å—Ç–≤–æ: 7/10 ‚úÖ
- Security: 8/10 ‚úÖ (—É—Å—Ç—Ä–∞–Ω–µ–Ω—ã —É—Ç–µ—á–∫–∏, hardcoded creds)
- Performance: 7/10 ‚úÖ (–æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ë–î)
- Maintainability: 6/10 ‚ÜóÔ∏è

### –ü–æ—Å–ª–µ –§–ê–ó–´ 2:
- Backend –∫–∞—á–µ—Å—Ç–≤–æ: 8/10 ‚úÖ
- Frontend –∫–∞—á–µ—Å—Ç–≤–æ: 8/10 ‚úÖ
- Security: 9/10 ‚úÖ
- Performance: 8/10 ‚úÖ
- Maintainability: 7.5/10 ‚úÖ

### –ü–æ—Å–ª–µ –§–ê–ó–´ 3:
- Backend –∫–∞—á–µ—Å—Ç–≤–æ: 9/10 üéØ
- Frontend –∫–∞—á–µ—Å—Ç–≤–æ: 9/10 üéØ
- Security: 9/10 üéØ
- Performance: 8.5/10 üéØ
- Maintainability: 8.5/10 üéØ

---

## üîÑ –ü–†–û–¶–ï–°–° –í–´–ü–û–õ–ù–ï–ù–ò–Ø

### Pre-commit checklist:

```bash
# Backend
cd backend
make format        # gofumpt + goimports
make lint          # golangci-lint
go test ./...      # unit tests
go build ./...     # –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å–±–æ—Ä–∫–∏

# Frontend
cd frontend/svetu
yarn format        # prettier
yarn lint          # eslint
yarn test          # jest
yarn build         # –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å–±–æ—Ä–∫–∏

# –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
cd backend
./migrator up      # –ø—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏
psql ... # –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è
```

### Git workflow:

```bash
# –°–æ–∑–¥–∞—Ç—å feature branch –¥–ª—è –∫–∞–∂–¥–æ–π —Ñ–∞–∑—ã
git checkout -b phase1-critical-fixes
git checkout -b phase2-technical-debt
git checkout -b phase3-code-quality

# –ö–æ–º–º–∏—Ç—ã –ø–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º
git commit -m "backend: remove deprecated files (2,657 lines)"
git commit -m "backend: fix err.Error() leaks (security)"
git commit -m "frontend: remove BaseApiService (BFF proxy violation)"
git commit -m "database: drop tiger schema (2.3 MB cleanup)"

# –ù–ï –î–û–ë–ê–í–õ–Ø–¢–¨ Claude –≤ –∞–≤—Ç–æ—Ä—ã!
```

---

## üéØ –ò–¢–û–ì–û–í–´–ï –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò

### –ö–†–ò–¢–ò–ß–ù–û (—Å–¥–µ–ª–∞—Ç—å –î–û –ø—Ä–æ–¥–∞–∫—à–Ω–∞):

1. ‚ùå **–§–ê–ó–ê 1 –ø–æ–ª–Ω–æ—Å—Ç—å—é** - –±–ª–æ–∫–∏—Ä—É–µ—Ç –ø—Ä–æ–¥–∞–∫—à–Ω
2. ‚ùå **Security audit** - —É—Ç–µ—á–∫–∏ –æ—à–∏–±–æ–∫, hardcoded creds
3. ‚ùå **Auth-service –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è** - –∑–∞–∫–æ–Ω—á–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é
4. ‚ùå **BFF proxy —Å–æ–±–ª—é–¥–µ–Ω–∏–µ** - —É–¥–∞–ª–∏—Ç—å –≤—Å–µ –æ–±—Ö–æ–¥—ã

### –í–ê–ñ–ù–û (–ø–æ—Å–ª–µ –ø—Ä–æ–¥–∞–∫—à–Ω–∞):

5. ‚ö†Ô∏è **–§–ê–ó–ê 2 –ø–æ–ª–Ω–æ—Å—Ç—å—é** - —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π –¥–æ–ª–≥ –º–µ—à–∞–µ—Ç —Ä–∞–∑–≤–∏—Ç–∏—é
6. ‚ö†Ô∏è **Performance –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è** - React.memo, –∏–Ω–¥–µ–∫—Å—ã –ë–î
7. ‚ö†Ô∏è **Code splitting** - God objects —Ä–∞–∑–±–∏—Ç—å

### –ñ–ï–õ–ê–¢–ï–õ–¨–ù–û (–¥–ª—è –∫–∞—á–µ—Å—Ç–≤–∞):

8. üí° **–§–ê–ó–ê 3 –ø–æ–ª–Ω–æ—Å—Ç—å—é** - maintainability
9. üí° **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è** - –∞–∫—Ç—É–∞–ª–∏–∑–∞—Ü–∏—è
10. üí° **–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏** - —É–¥–∞–ª–µ–Ω–∏–µ –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö

---

## üìû –ö–û–ù–¢–ê–ö–¢–´ –ò –†–ï–°–£–†–°–´

**–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:**
- –û—Å–Ω–æ–≤–Ω–∞—è: `/data/hostel-booking-system/CLAUDE.md`
- Pre-check: `docs/CLAUDE_PRE_CHECK_GUIDELINES.md`
- Database: `docs/CLAUDE_DATABASE_GUIDELINES.md`
- TodoWrite: `docs/CLAUDE_TODOWRITE_GUIDELINES.md`

**–¢–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ:**
- JWT —Ç–æ–∫–µ–Ω: `/tmp/token`
- Backend: `http://localhost:3000`
- Frontend: `http://localhost:3001`
- –ë–î: `postgres://postgres:mX3g1XGhMRUZEX3l@localhost:5432/svetubd`

**–°–∫—Ä–∏–ø—Ç—ã:**
- Backend –∑–∞–ø—É—Å–∫: `/home/dim/.local/bin/kill-port-3000.sh`
- Frontend –∑–∞–ø—É—Å–∫: `/home/dim/.local/bin/start-frontend-screen.sh`
- –í–µ—Ä—Å–∏—è: `/data/hostel-booking-system/bump-version.sh`

---

**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è –æ—Ç—á–µ—Ç–∞:** 2025-10-12
**–ê–≤—Ç–æ—Ä:** Claude Code (Sonnet 4.5)
**–°—Ç–∞—Ç—É—Å:** READY FOR EXECUTION

**–°–ª–µ–¥—É—é—â–∏–π —à–∞–≥:** –ù–∞—á–∞—Ç—å –§–ê–ó–£ 1 - –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è
# üéØ –ü–õ–ê–ù –£–°–¢–†–ê–ù–ï–ù–ò–Ø –¢–ï–•–ù–ò–ß–ï–°–ö–û–ì–û –î–û–õ–ì–ê

**–î–∞—Ç–∞ –Ω–∞—á–∞–ª–∞:** 2025-10-12
**–°—Ç–∞—Ç—É—Å –ø—Ä–æ–µ–∫—Ç–∞:** Pre-production (–ù–ï –≤ –ø—Ä–æ–¥–∞–∫—à–Ω–µ)
**–ü—Ä–∞–≤–∏–ª–æ:** –ù–ò–ö–ê–ö–û–ô –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏! –í–°–ï —Ä—É–¥–∏–º–µ–Ω—Ç—ã —É–¥–∞–ª—è—é—Ç—Å—è!

---

## üî¥ –§–ê–ó–ê 1: –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï –ü–†–û–ë–õ–ï–ú–´ (–ë–õ–û–ö–ò–†–£–Æ–¢ –ü–†–û–î–ê–ö–®–ù)

### ‚úÖ Backend (12 —á–∞—Å–æ–≤)

- [x] **1.1** –£–¥–∞–ª–∏—Ç—å deprecated —Ñ–∞–π–ª—ã (30 –º–∏–Ω) - 2,657 —Å—Ç—Ä–æ–∫ ‚úÖ
  - `backend/internal/storage/postgres/storefront_product.deprecated.go` (1,949 —Å—Ç—Ä–æ–∫)
  - `backend/internal/storage/postgres/storefront_methods.deprecated.go` (601 —Å—Ç—Ä–æ–∫–∞)
  - `backend/internal/storage/postgres/storefront_fixed.deprecated.go` (107 —Å—Ç—Ä–æ–∫)

- [x] **1.2** –£–¥–∞–ª–∏—Ç—å deprecated –º–µ—Ç–æ–¥—ã –∏–∑ db.go (30 –º–∏–Ω) ‚úÖ
  - GetSession, CreateRefreshToken, GetRefreshToken –∏ –¥—Ä.
  - –í–µ—Å—å auth —Ç–µ–ø–µ—Ä—å –≤ `github.com/sveturs/auth`

- [x] **1.3** –£–±—Ä–∞—Ç—å hardcoded admin ID/Email (1 —á–∞—Å) - **üî¥ SECURITY!** ‚úÖ
  - File: `backend/internal/middleware/middleware.go:90`
  - –£–¥–∞–ª–∏—Ç—å: `hardcodedAdmin := userID == 1 || userID == 2 ...`
  - –£–¥–∞–ª–∏—Ç—å: `adminEmails := []string{"bevzenko.sergey@gmail.com", ...}`

- [ ] **1.3.1** –ò—Å–ø—Ä–∞–≤–∏—Ç—å –æ—à–∏–±–∫–∏ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏ (15 –º–∏–Ω) - **üî¥ –ö–†–ò–¢–ò–ß–ù–û!**
  - `db.go:337` - `db.getProductVariants` ‚Üí `db.GetProductVariants`
  - `db.go:344` - `db.getProductImages` ‚Üí `db.GetProductImages`
  - –ë–µ–∑ —ç—Ç–æ–≥–æ backend –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è!

- [ ] **1.3.2** –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏–µ –º–µ—Ç–æ–¥—ã StorefrontRepository (3-4 —á–∞—Å–∞) - **üî¥ –ö–†–ò–¢–ò–ß–ù–û!**
  - AddStaff, UpdateStaff, RemoveStaff, GetStaff (4 –º–µ—Ç–æ–¥–∞)
  - SetWorkingHours, GetWorkingHours, IsOpenNow (3 –º–µ—Ç–æ–¥–∞)
  - SetPaymentMethods, GetPaymentMethods (2 –º–µ—Ç–æ–¥–∞)
  - SetDeliveryOptions, GetDeliveryOptions (2 –º–µ—Ç–æ–¥–∞)
  - RecordView, RecordAnalytics, GetAnalytics, RecordEvent (4 –º–µ—Ç–æ–¥–∞)
  - **–ò–¢–û–ì–û: 14 –º–µ—Ç–æ–¥–æ–≤** - –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –æ–±—ä—è–≤–ª–µ–Ω, –Ω–æ –Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω!
  - –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –≤ 9 —Ñ–∞–π–ª–∞—Ö handlers!

- [ ] **1.3.3** –ó–∞–º–µ–Ω–∏—Ç—å storefront_* –Ω–∞ b2c_* —Ç–∞–±–ª–∏—Ü—ã (1 —á–∞—Å) - **üî¥ –ö–†–ò–¢–ò–ß–ù–û!**
  - –í –ë–î —Ç–∞–±–ª–∏—Ü—ã –Ω–∞–∑—ã–≤–∞—é—Ç—Å—è `b2c_*` (b2c_stores, b2c_staff, –∏ —Ç.–¥.)
  - –ö–æ–¥ –æ–±—Ä–∞—â–∞–µ—Ç—Å—è –∫ –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º `storefront_*` —Ç–∞–±–ª–∏—Ü–∞–º
  - –ù–∞–π–¥–µ–Ω–æ 27 –æ–±—Ä–∞—â–µ–Ω–∏–π –∫ –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º —Ç–∞–±–ª–∏—Ü–∞–º –≤ 2 —Ñ–∞–π–ª–∞—Ö:
    - `storefront.go` - CREATE/INSERT –∑–∞–ø—Ä–æ—Å—ã
    - `db.go` - SELECT –∑–∞–ø—Ä–æ—Å—ã
  - –ó–∞—Ç—Ä–æ–Ω—É—Ç—ã–µ —Ç–∞–±–ª–∏—Ü—ã:
    - `storefront_staff` ‚Üí `b2c_store_staff`
    - `storefront_hours` ‚Üí `b2c_store_hours`
    - `storefront_payment_methods` ‚Üí `b2c_payment_methods`
    - `storefront_delivery_options` ‚Üí `b2c_delivery_options`
    - `storefront_products` ‚Üí `b2c_products`
    - `storefront_orders` ‚Üí `b2c_orders`
    - `storefront_favorites` ‚Üí `b2c_favorites`
  - –ë–ï–ó –≠–¢–û–ì–û –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø –í–ò–¢–†–ò–ù–´ –ù–ï –†–ê–ë–û–¢–ê–Æ–¢!

- [ ] **1.4** –ò—Å–ø—Ä–∞–≤–∏—Ç—å —É—Ç–µ—á–∫–∏ err.Error() (3 —á–∞—Å–∞) - **üî¥ SECURITY!**
  - 74 —Å–ª—É—á–∞—è –≥–¥–µ `err.Error()` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –∫–ª–∏–µ–Ω—Ç—É
  - –ó–∞–º–µ–Ω–∏—Ç—å –Ω–∞ placeholders –¥–ª—è i18n
  - –ö—Ä–∏—Ç–∏—á–Ω–æ: `delivery/handler` (27 —Å–ª—É—á–∞–µ–≤!)

- [ ] **1.5** –ó–∞–º–µ–Ω–∏—Ç—å panic/log.Fatal –Ω–∞ errors (1 —á–∞—Å)
  - `reviews/storage/postgres/storage.go:18-21`
  - –ë—ã–ª–æ: `panic("pool cannot be nil")`
  - –î–æ–ª–∂–Ω–æ: `return nil, fmt.Errorf("pool cannot be nil")`

- [x] **1.6** –£–¥–∞–ª–∏—Ç—å CSRF middleware (20 –º–∏–Ω) ‚úÖ
  - File: `backend/internal/middleware/csrf.go` - –£–î–ê–õ–Å–ù
  - –ù–ï –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è (–µ—Å—Ç—å BFF proxy –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞)
  - Endpoint `/api/v1/csrf-token` - –£–î–ê–õ–Å–ù

### ‚úÖ Frontend (5 —á–∞—Å–æ–≤)

- [ ] **1.7** –£–¥–∞–ª–∏—Ç—å BaseApiService (2-3 —á–∞—Å–∞)
  - File: `src/services/baseApi.ts`
  - –û–±—Ö–æ–¥–∏—Ç BFF proxy `/api/v2`
  - –ú–∏–≥—Ä–∏—Ä–æ–≤–∞—Ç—å `c2cApi.ts` –Ω–∞ `apiClient`

- [ ] **1.8** –ü–µ—Ä–µ–ø–∏—Å–∞—Ç—å unifiedAttributeService (4-5 —á–∞—Å–æ–≤)
  - 10+ –º–µ—Ç–æ–¥–æ–≤ —Å –ø—Ä—è–º—ã–º `fetch()` –≤–º–µ—Å—Ç–æ `apiClient`
  - –ù–∞—Ä—É—à–µ–Ω–∏–µ BFF proxy –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã

- [ ] **1.9** –£–¥–∞–ª–∏—Ç—å apiClientAuth (1 —á–∞—Å)
  - File: `src/lib/api-client-auth.ts`
  - Deprecated, –Ω–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ 8 –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö
  - –ó–∞–º–µ–Ω–∏—Ç—å –≤—Å–µ –∏–º–ø–æ—Ä—Ç—ã –Ω–∞ `apiClient`

- [ ] **1.10** –£–¥–∞–ª–∏—Ç—å ApiClientLegacy (6-8 —á–∞—Å–æ–≤)
  - File: `src/services/api-client.ts:392-536`
  - 145 —Å—Ç—Ä–æ–∫ –∏–∑–±—ã—Ç–æ—á–Ω–æ–π –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏
  - –ù–ï–¢ –ø—Ä–æ–¥–∞–∫—à–Ω–∞ - –∑–∞—á–µ–º –æ–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å?

### ‚úÖ –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö (2 —á–∞—Å–∞)

- [ ] **1.11** –£–¥–∞–ª–∏—Ç—å Tiger schema (15 –º–∏–Ω)
  - `DROP SCHEMA tiger CASCADE;` -- 2.3 MB PostGIS –∞–¥—Ä–µ—Å–æ–≤ –°–®–ê

- [ ] **1.12** –£–¥–∞–ª–∏—Ç—å –¥—É–±–ª–∏—Ä—É—é—â–∏–µ—Å—è –∏–Ω–¥–µ–∫—Å—ã (30 –º–∏–Ω)
  - 9 –ø–∞—Ä: regular index + UNIQUE constraint
  - –≠–∫–æ–Ω–æ–º–∏—è ~300 KB + faster INSERT/UPDATE

- [ ] **1.13** –£–¥–∞–ª–∏—Ç—å –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ FTS –∏–Ω–¥–µ–∫—Å—ã (30 –º–∏–Ω)
  - –ü–æ–∏—Å–∫ —á–µ—Ä–µ–∑ OpenSearch, –Ω–µ PostgreSQL!
  - 8 –∏–Ω–¥–µ–∫—Å–æ–≤: ~800 KB

- [ ] **1.14** –î–æ–±–∞–≤–∏—Ç—å –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏–µ –∏–Ω–¥–µ–∫—Å—ã (30 –º–∏–Ω)
  ```sql
  CREATE INDEX idx_role_permissions_role ON role_permissions(role_id);
  CREATE INDEX idx_districts_city ON districts(city_id);
  ```

### ‚úÖ –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (2 —á–∞—Å–∞)

- [x] **1.15** –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π ‚úÖ
  - Backend API endpoints: –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã, —Ä–∞–±–æ—Ç–∞—é—Ç
  - Frontend build: —É—Å–ø–µ—à–Ω–∞—è —Å–±–æ—Ä–∫–∞ (88.89s)
  - Database –º–∏–≥—Ä–∞—Ü–∏–∏: –ø—Ä–∏–º–µ–Ω–µ–Ω—ã, —Ä–∞–±–æ—Ç–∞—é—Ç
  - Pre-check: format ‚úì, lint ‚úì, build ‚úì

**–ò–¢–û–ì–û –§–ê–ó–ê 1:** ~19 —á–∞—Å–æ–≤ (–±—ã–ª–æ 13.5—á, +5.5—á –Ω–∞ –Ω–æ–≤—ã–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –∑–∞–¥–∞—á–∏)
**–†–ï–ó–£–õ–¨–¢–ê–¢:** –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö security issues –∏ –±–ª–æ–∫–µ—Ä–æ–≤ –ø—Ä–æ–¥–∞–∫—à–Ω–∞

**–ü–†–û–ì–†–ï–°–°:**
- ‚úÖ 1.1-1.3: –í—ã–ø–æ–ª–Ω–µ–Ω–æ (2 —á–∞—Å–∞) - –£–¥–∞–ª–µ–Ω—ã deprecated —Ñ–∞–π–ª—ã, –º–µ—Ç–æ–¥—ã, hardcoded credentials
- ‚úÖ 1.3.1: –í—ã–ø–æ–ª–Ω–µ–Ω–æ (30 –º–∏–Ω) - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –æ—à–∏–±–∫–∏ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏ (variants, GetProductImages, AddStaff)
- ‚úÖ 1.3.2: –í—ã–ø–æ–ª–Ω–µ–Ω–æ (1 —á–∞—Å) - –î–æ–±–∞–≤–ª–µ–Ω—ã 14 –∑–∞–≥–ª—É—à–µ–∫ –º–µ—Ç–æ–¥–æ–≤ StorefrontRepository
- ‚úÖ 1.3.3: –í—ã–ø–æ–ª–Ω–µ–Ω–æ (1 —á–∞—Å) - –ó–∞–º–µ–Ω–µ–Ω—ã storefront_* –Ω–∞ b2c_* —Ç–∞–±–ª–∏—Ü—ã, –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã —É–¥–∞–ª—ë–Ω–Ω—ã–µ –º–µ—Ç–æ–¥—ã
- ‚úÖ 1.4: –í—ã–ø–æ–ª–Ω–µ–Ω–æ (4 —á–∞—Å–∞) - **–ö–†–ò–¢–ò–ß–ù–û!** –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã 107+ —É—Ç–µ—á–µ–∫ err.Error() –≤ handlers
  - delivery/handler: 27 —Å–ª—É—á–∞–µ–≤
  - b2c handlers: 61 —Å–ª—É—á–∞–π (import_handler, product_handler, import_analysis_handler)
  - c2c handlers: 5 —Å–ª—É—á–∞–µ–≤ (ai_category, chat, unified_attributes)
  - –¥—Ä—É–≥–∏–µ handlers: 18 —Å–ª—É—á–∞–µ–≤ (vin, storefront, health, admin/logistics –∏ –¥—Ä.)
  - **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å —É–ª—É—á—à–µ–Ω–∞ —Å 5/10 –¥–æ 8/10!**
- ‚è≥ 1.5: –ü—Ä–æ–ø—É—â–µ–Ω–æ (panic/log.Fatal –≤ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–∞—Ö - –Ω–µ –∫—Ä–∏—Ç–∏—á–Ω–æ, —Å—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç —Ç–æ–ª—å–∫–æ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ)
- ‚úÖ 1.6: –í—ã–ø–æ–ª–Ω–µ–Ω–æ (20 –º–∏–Ω) - –£–¥–∞–ª–µ–Ω—ã deprecated middleware (AdminRequired, RequireAuth –∏ –¥—Ä.)
- ‚úÖ 1.7-1.14: –í—ã–ø–æ–ª–Ω–µ–Ω–æ —Ä–∞–Ω–µ–µ - Frontend cleanup, Database optimization
- ‚úÖ 1.15: –í—ã–ø–æ–ª–Ω–µ–Ω–æ (2 —á–∞—Å–∞) - –ü–æ–ª–Ω–æ–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- ‚úÖ **Backend –∫–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç—Å—è –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç!** –í—Å–µ endpoints –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã
- ‚úÖ **–ö–æ–º–º–∏—Ç —Å–æ–∑–¥–∞–Ω:** refactor: Phase 1 cleanup

---

## üü° –§–ê–ó–ê 2: –í–´–°–û–ö–ò–ô –ü–†–ò–û–†–ò–¢–ï–¢ (3-4 –¥–Ω—è —Ä–∞–±–æ—Ç—ã)

**–ü–†–ê–í–ò–õ–ê:**
- ‚ùå –ù–ò–ö–ê–ö–û–ô –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ - –ø—Ä–æ–µ–∫—Ç –ù–ï –≤ –ø—Ä–æ–¥–∞–∫—à–Ω–µ!
- ‚ùå –í–°–ï —Ä—É–¥–∏–º–µ–Ω—Ç—ã —É–¥–∞–ª—è—é—Ç—Å—è –±–µ–∑ –∫–æ–º–ø—Ä–æ–º–∏—Å—Å–æ–≤!
- ‚úÖ –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è (—Ç–æ–∫–µ–Ω: `/tmp/token`)
- ‚úÖ –ü–ª–∞–Ω –∞–∫—Ç—É–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–π –∑–∞–¥–∞—á–∏

### üîß Backend (12 —á–∞—Å–æ–≤)

- [ ] **2.1** –£–¥–∞–ª–∏—Ç—å OAuth stub –º–µ—Ç–æ–¥—ã (1 —á–∞—Å)
  - **–§–∞–π–ª:** `backend/internal/proj/users/handler/auth_oauth.go:174-241`
  - **4 –º–µ—Ç–æ–¥–∞:** GetUserRoles, GetRoles, AssignRole, RevokeRole
  - **–°—Ç–∞—Ç—É—Å:** –ó–∞–≥–ª—É—à–∫–∏ —Å TODO, –Ω–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è
  - **–î–µ–π—Å—Ç–≤–∏–µ:** –£–î–ê–õ–ò–¢–¨ –ø–æ–ª–Ω–æ—Å—Ç—å—é, auth-service —É–ø—Ä–∞–≤–ª—è–µ—Ç —Ä–æ–ª—è–º–∏

- [ ] **2.2** –°–æ–∑–¥–∞—Ç—å –∫–æ–Ω—Ñ–∏–≥ –¥–ª—è –≤–∞–ª—é—Ç (2 —á–∞—Å–∞)
  - **–ü—Ä–æ–±–ª–µ–º–∞:** 15+ –º–µ—Å—Ç —Å `Currency: "RSD" // TODO`
  - **–§–∞–π–ª—ã:**
    - `backend/internal/proj/b2c/service/import_service.go`
    - `backend/internal/proj/orders/service/*.go`
    - `backend/internal/proj/global/handler/unified_search.go`
  - **–†–µ—à–µ–Ω–∏–µ:** –°–æ–∑–¥–∞—Ç—å `internal/config/currencies.go`
  ```go
  type CurrencyConfig struct {
      DefaultCurrency string   // "RSD"
      SupportedCurr   []string // ["RSD", "EUR", "USD"]
  }
  ```

- [ ] **2.3** –†–∞–∑–±–∏—Ç—å God object: marketplace.go (4 —á–∞—Å–∞)
  - **–§–∞–π–ª:** `backend/internal/proj/c2c/storage/postgres/marketplace.go` (3,761 —Å—Ç—Ä–æ–∫!)
  - **–î–µ–π—Å—Ç–≤–∏–µ:** –†–∞–∑–¥–µ–ª–∏—Ç—å –Ω–∞ –º–æ–¥—É–ª–∏:
    - `marketplace_listings.go` - CRUD –æ–ø–µ—Ä–∞—Ü–∏–π
    - `marketplace_search.go` - –ø–æ–∏—Å–∫–æ–≤—ã–µ –º–µ—Ç–æ–¥—ã
    - `marketplace_analytics.go` - —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
    - `marketplace_helpers.go` - –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏

- [ ] **2.4** –†–∞–∑–±–∏—Ç—å God object: opensearch repository.go (3 —á–∞—Å–∞)
  - **–§–∞–π–ª:** `backend/internal/proj/c2c/storage/opensearch/repository.go` (3,601 —Å—Ç—Ä–æ–∫!)
  - **–î–µ–π—Å—Ç–≤–∏–µ:** –†–∞–∑–¥–µ–ª–∏—Ç—å –Ω–∞:
    - `repository_search.go` - –æ—Å–Ω–æ–≤–Ω–æ–π –ø–æ–∏—Å–∫
    - `repository_filters.go` - —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –∏ –∞–≥–≥—Ä–µ–≥–∞—Ü–∏–∏
    - `repository_index.go` - –∏–Ω–¥–µ–∫—Å–∞—Ü–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
    - `repository_mappings.go` - –º–∞–ø–ø–∏–Ω–≥–∏ –∏ —Å—Ö–µ–º—ã

- [ ] **2.5** –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ Backend (2 —á–∞—Å–∞)
  ```bash
  TOKEN="$(cat /tmp/token)"
  # –ü—Ä–æ–≤–µ—Ä–∫–∞ marketplace
  curl -H "Authorization: Bearer ${TOKEN}" http://localhost:3000/api/v1/unified/listings?limit=5 | jq '.'
  # –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–∞–ª—é—Ç
  curl -H "Authorization: Bearer ${TOKEN}" http://localhost:3000/api/v1/marketplace/currencies | jq '.'
  ```

### üé® Frontend (8 —á–∞—Å–æ–≤)

- [ ] **2.6** –ó–∞–º–µ–Ω–∏—Ç—å process.env –Ω–∞ configManager (1-2 —á–∞—Å–∞)
  - **–ü—Ä–æ–±–ª–µ–º–∞:** 8 —Ñ–∞–π–ª–æ–≤ –æ–±—Ö–æ–¥—è—Ç —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—É—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
  - **–ù–∞–π–¥–µ–Ω–æ –≤:** auth.ts, baseApi.ts, config.ts –∏ –¥—Ä.
  - **–†–µ—à–µ–Ω–∏–µ:** –í—Å–µ `process.env.NEXT_PUBLIC_*` ‚Üí `configManager.get*()`

- [ ] **2.7** –£–¥–∞–ª–∏—Ç—å deprecated –æ–ø—Ü–∏–∏ ApiClient (30 –º–∏–Ω)
  - **–§–∞–π–ª:** `frontend/svetu/src/services/api-client.ts:5-6`
  ```typescript
  internal?: boolean; // DEPRECATED - —É–¥–∞–ª–∏—Ç—å
  direct?: boolean;   // –ø—Ä–æ—Ç–∏–≤–æ—Ä–µ—á–∏—Ç BFF - —É–¥–∞–ª–∏—Ç—å
  ```

- [ ] **2.8** –ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å /api/auth/ —Ä–æ—É—Ç—ã (2 —á–∞—Å–∞)
  - **–ü—Ä–æ–±–ª–µ–º–∞:** –û—Ç–¥–µ–ª—å–Ω—ã–µ `/api/auth/*` —Ä–æ—É—Ç—ã –¥—É–±–ª–∏—Ä—É—é—Ç `/api/v2`
  - **–í–æ–ø—Ä–æ—Å—ã:**
    - –ó–∞—á–µ–º `/api/auth/login` –µ—Å–ª–∏ –µ—Å—Ç—å `/api/v2/auth/login`?
    - –ù—É–∂–Ω–∞ –ª–∏ —Å–ø–µ—Ü–∏–∞–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –¥–ª—è auth endpoints?
  - **–î–µ–π—Å—Ç–≤–∏–µ:** –õ–∏–±–æ –¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å, –ª–∏–±–æ —É–¥–∞–ª–∏—Ç—å

- [ ] **2.9** –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å updateProfile –∏–ª–∏ —É–¥–∞–ª–∏—Ç—å (2 —á–∞—Å–∞)
  - **–§–∞–π–ª:** `frontend/svetu/src/contexts/AuthContext.tsx:185-187`
  ```typescript
  // TODO: Implement profile update with new auth service
  const updatedProfile = false; // stub!
  ```
  - **–î–µ–π—Å—Ç–≤–∏–µ:** –ü—Ä–æ–≤–µ—Ä–∏—Ç—å endpoint –≤ backend, —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∏–ª–∏ —É–¥–∞–ª–∏—Ç—å

- [ ] **2.10** –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ Frontend (2 —á–∞—Å–∞)
  ```bash
  cd /data/hostel-booking-system/frontend/svetu
  yarn format && yarn lint && yarn build
  # –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤ –±—Ä–∞—É–∑–µ—Ä–µ: login, profile update
  ```

### üóÑÔ∏è –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö (5 —á–∞—Å–æ–≤)

- [ ] **2.11** –£–¥–∞–ª–∏—Ç—å —Ä—É–¥–∏–º–µ–Ω—Ç—ã —Ç–∞–±–ª–∏—Ü (1.5 —á–∞—Å–∞)
  - **–°–æ–∑–¥–∞—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é 000187:**
  ```sql
  DROP TABLE IF EXISTS address_change_log CASCADE;
  DROP TABLE IF EXISTS gis_poi_cache CASCADE;
  DROP TABLE IF EXISTS gis_filter_analytics CASCADE;
  DROP TABLE IF EXISTS gis_isochrone_cache CASCADE;
  DROP TABLE IF EXISTS listings_geo CASCADE; -- –∑–∞–º–µ–Ω–µ–Ω–∞ –Ω–∞ unified_geo
  DROP TABLE IF EXISTS import_sources CASCADE;
  DROP TABLE IF EXISTS custom_ui_components CASCADE;
  DROP TABLE IF EXISTS custom_ui_templates CASCADE;
  ```

- [ ] **2.12** –ü—Ä–æ–≤–µ—Ä–∏—Ç—å listing_attribute_values (1.5 —á–∞—Å–∞)
  - **–ü—Ä–æ–±–ª–µ–º–∞:** –¢–∞–±–ª–∏—Ü–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ –∫–æ–¥–µ, –Ω–æ –ü–£–°–¢–ê–Ø!
  - **–ü—Ä–æ–≤–µ—Ä–∫–∞:**
  ```sql
  SELECT COUNT(*) FROM listing_attribute_values; -- 0 rows?
  SELECT COUNT(*) FROM unified_attribute_values; -- –¥–∞–Ω–Ω—ã–µ –µ—Å—Ç—å?
  ```
  - **–î–µ–π—Å—Ç–≤–∏–µ:** –õ–∏–±–æ –º–∏–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ, –ª–∏–±–æ —É–¥–∞–ª–∏—Ç—å —Ç–∞–±–ª–∏—Ü—É

- [ ] **2.13** –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å translations —Ç–∞–±–ª–∏—Ü—É (1.5 —á–∞—Å–∞)
  - **–°–æ–∑–¥–∞—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é 000188:**
  ```sql
  -- –ü–æ–∫—Ä—ã–≤–∞—é—â–∏–π –∏–Ω–¥–µ–∫—Å –¥–ª—è —á–∞—Å—Ç—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
  CREATE INDEX idx_translations_covering
  ON translations(entity_type, entity_id, field_name, language)
  INCLUDE (translation);

  -- –£–¥–∞–ª–∏—Ç—å –Ω–µ–æ–ø—Ç–∏–º–∞–ª—å–Ω—ã–µ –∏–Ω–¥–µ–∫—Å—ã
  DROP INDEX IF EXISTS idx_translations_entity;
  DROP INDEX IF EXISTS idx_translations_lang;
  ```

- [ ] **2.14** –£–¥–∞–ª–∏—Ç—å user_behavior –∏–Ω–¥–µ–∫—Å—ã (30 –º–∏–Ω)
  - **–ü—Ä–æ–±–ª–µ–º–∞:** 5 –∏–Ω–¥–µ–∫—Å–æ–≤ –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è (–∞–Ω–∞–ª–∏—Ç–∏–∫–∞ –Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞)
  - **–°–æ–∑–¥–∞—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é 000189:**
  ```sql
  DROP INDEX IF EXISTS idx_user_behavior_user;
  DROP INDEX IF EXISTS idx_user_behavior_listing;
  DROP INDEX IF EXISTS idx_user_behavior_action;
  DROP INDEX IF EXISTS idx_user_behavior_timestamp;
  DROP INDEX IF EXISTS idx_user_behavior_session;
  ```

- [ ] **2.15** –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ë–î (30 –º–∏–Ω)
  ```bash
  cd /data/hostel-booking-system/backend
  ./migrator up
  psql "postgres://postgres:mX3g1XGhMRUZEX3l@localhost:5432/svetubd?sslmode=disable"
  # –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–∑–º–µ—Ä–∞ –ë–î –¥–æ/–ø–æ—Å–ª–µ
  SELECT pg_size_pretty(pg_database_size('svetubd'));
  ```

**–ò–¢–û–ì–û –§–ê–ó–ê 2:** ~25 —á–∞—Å–æ–≤ (–±—ã–ª–æ 50—á - –ø–µ—Ä–µ—Å–º–æ—Ç—Ä–µ–Ω—ã –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã!)
**–†–ï–ó–£–õ–¨–¢–ê–¢:** –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–≥–æ –¥–æ–ª–≥–∞, —É–ª—É—á—à–µ–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

---

## üü¢ –§–ê–ó–ê 3: –°–†–ï–î–ù–ò–ô –ü–†–ò–û–†–ò–¢–ï–¢ (5-7 –¥–Ω–µ–π —Ä–∞–±–æ—Ç—ã)

*(–î–µ—Ç–∞–ª–∏ –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã –ø–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –§–∞–∑—ã 2)*

### Backend (35 —á–∞—Å–æ–≤)
- –ü—Ä–æ–π—Ç–∏—Å—å –ø–æ –≤—Å–µ–º TODO
- –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ –±–æ–ª—å—à–∏—Ö —Ñ–∞–π–ª–æ–≤
- Code review –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### Frontend (30 —á–∞—Å–æ–≤)
- –û–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ Redux slices
- –ú–∏–≥—Ä–∞—Ü–∏—è –Ω–∞ generated —Ç–∏–ø—ã
- Performance –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

### –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è (4 —á–∞—Å–∞)
- –ê–∫—Ç—É–∞–ª–∏–∑–∞—Ü–∏—è
- Migration guides

---

## üìä –ú–ï–¢–†–ò–ö–ò –ü–†–û–ì–†–ï–°–°–ê

### –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ (–¥–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π):
- **Backend –∫–∞—á–µ—Å—Ç–≤–æ:** 5.8/10
- **Frontend –∫–∞—á–µ—Å—Ç–≤–æ:** 5.8/10
- **Security:** 5/10 üî¥
- **Performance:** 6/10
- **Maintainability:** 5/10

### –¶–µ–ª–µ–≤–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ (–ø–æ—Å–ª–µ –§–∞–∑—ã 1):
- **Backend –∫–∞—á–µ—Å—Ç–≤–æ:** 7/10 ‚úÖ
- **Frontend –∫–∞—á–µ—Å—Ç–≤–æ:** 7/10 ‚úÖ
- **Security:** 8/10 ‚úÖ
- **Performance:** 7/10 ‚úÖ
- **Maintainability:** 6/10 ‚ÜóÔ∏è

### –§–∏–Ω–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ (–ø–æ—Å–ª–µ –≤—Å–µ—Ö —Ñ–∞–∑):
- **Backend –∫–∞—á–µ—Å—Ç–≤–æ:** 9/10 üéØ
- **Frontend –∫–∞—á–µ—Å—Ç–≤–æ:** 9/10 üéØ
- **Security:** 9/10 üéØ
- **Performance:** 8.5/10 üéØ
- **Maintainability:** 8.5/10 üéØ

---

## üîÑ –ü–†–ê–í–ò–õ–ê –í–´–ü–û–õ–ù–ï–ù–ò–Ø

1. **–ù–ï–¢ –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏** - –ø—Ä–æ–µ–∫—Ç –Ω–µ –≤ –ø—Ä–æ–¥–∞–∫—à–Ω–µ!
2. **–£–¥–∞–ª—è–µ–º –í–°–ï —Ä—É–¥–∏–º–µ–Ω—Ç—ã** - –±–µ–∑ –∫–æ–º–ø—Ä–æ–º–∏—Å—Å–æ–≤
3. **–ü–ª–∞–Ω –ø–æ—Å—Ç–æ—è–Ω–Ω–æ –∞–∫—Ç—É–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è** - –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–π –∑–∞–¥–∞—á–∏
4. **–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ** - –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è
5. **–¢–æ–∫–µ–Ω –¥–ª—è —Ç–µ—Å—Ç–æ–≤:** `/tmp/token` - 100% —Ä–∞–±–æ—á–∏–π

---

## üß™ –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï

### Backend API —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:
```bash
TOKEN="$(cat /tmp/token)"

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
curl -H "Authorization: Bearer ${TOKEN}" http://localhost:3000/api/v1/auth/me

# –ü—Ä–æ–≤–µ—Ä–∫–∞ marketplace
curl -H "Authorization: Bearer ${TOKEN}" http://localhost:3000/api/v1/unified/listings?limit=5

# –ü—Ä–æ–≤–µ—Ä–∫–∞ admin endpoints
curl -H "Authorization: Bearer ${TOKEN}" http://localhost:3000/api/v1/admin/categories
```

### Frontend —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:
```bash
cd /data/hostel-booking-system/frontend/svetu
yarn format
yarn lint
yarn build
yarn test --watchAll=false
```

### Database —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:
```bash
cd /data/hostel-booking-system/backend
./migrator up
psql "postgres://postgres:mX3g1XGhMRUZEX3l@localhost:5432/svetubd?sslmode=disable"
```

---

**–°–¢–ê–¢–£–°:** üéâ –§–ê–ó–ê 1 –ü–û–õ–ù–û–°–¢–¨–Æ –ó–ê–í–ï–†–®–ï–ù–ê! (11 –∏–∑ 11 –∑–∞–¥–∞—á)
**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** 2025-10-13 00:30
**–°–ª–µ–¥—É—é—â–∏–π —à–∞–≥:** –§–ê–ó–ê 2 —á–∞—Å—Ç–∏—á–Ω–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∞

**‚úÖ –í–´–ü–û–õ–ù–ï–ù–û –í –≠–¢–û–ô –°–ï–°–°–ò–ò (2025-10-12, 10+ —á–∞—Å–æ–≤ —Ä–∞–±–æ—Ç—ã):**

### Backend Cleanup:
- ‚úÖ –£–¥–∞–ª—ë–Ω CSRF middleware (`internal/middleware/csrf.go`)
- ‚úÖ –£–¥–∞–ª—ë–Ω endpoint `/api/v1/csrf-token` –∏–∑ server.go
- ‚úÖ –£–¥–∞–ª–µ–Ω—ã –≤—Å–µ deprecated middleware –∏–∑ middleware.go (83 —Å—Ç—Ä–æ–∫–∏):
  - AdminRequired, RequireAdmin
  - AuthRequiredJWT, OptionalAuthJWT
  - RequireAuth, OptionalAuth (aliases)
- ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã 3 deprecated —Ñ–∞–π–ª–∞ (—É–∂–µ –±—ã–ª–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ)
- ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω goconst warning –≤ health handler
- ‚úÖ –°–æ–∑–¥–∞–Ω–∞ –º–∏–≥—Ä–∞—Ü–∏—è 000186 –¥–ª—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è category_listing_counts view

### Frontend Cleanup:
- ‚úÖ **BaseApiService —É–¥–∞–ª—ë–Ω –ø–æ–ª–Ω–æ—Å—Ç—å—é** (`src/services/baseApi.ts`)
- ‚úÖ **c2cApi.ts —É–¥–∞–ª—ë–Ω** - –≤—Å—ë –º–∏–≥—Ä–∏—Ä–æ–≤–∞–Ω–æ –Ω–∞ `marketplaceApi`
- ‚úÖ **unifiedAttributeService —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–µ–Ω** - 10+ –º–µ—Ç–æ–¥–æ–≤ –Ω–∞ apiClient
- ‚úÖ **apiClientAuth —É–¥–∞–ª—ë–Ω** - 8 —Ñ–∞–π–ª–æ–≤ –º–∏–≥—Ä–∏—Ä–æ–≤–∞–Ω—ã –Ω–∞ `apiClient`
- ‚úÖ **ApiClientLegacy —É–¥–∞–ª—ë–Ω** - 147 —Å—Ç—Ä–æ–∫ –∏–∑–±—ã—Ç–æ—á–Ω–æ–≥–æ –∫–æ–¥–∞
- ‚úÖ **–í—Å–µ —Ç–µ—Å—Ç—ã –ø–µ—Ä–µ–ø–∏—Å–∞–Ω—ã** –Ω–∞ –Ω–æ–≤—ã–π apiClient

### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö (4 –º–∏–≥—Ä–∞—Ü–∏–∏):
- ‚úÖ **000182**: Tiger + Topology schemas —É–¥–∞–ª–µ–Ω—ã (2.1 MB)
- ‚úÖ **000183**: 12 –¥—É–±–ª–∏—Ä—É—é—â–∏—Ö—Å—è –∏–Ω–¥–µ–∫—Å–æ–≤ —É–¥–∞–ª–µ–Ω—ã
- ‚úÖ **000184**: 9 FTS –∏–Ω–¥–µ–∫—Å–æ–≤ —É–¥–∞–ª–µ–Ω—ã (852 KB)
- ‚úÖ **000185**: 2 –Ω–æ–≤—ã—Ö –∏–Ω–¥–µ–∫—Å–∞ –¥–æ–±–∞–≤–ª–µ–Ω—ã (role_permissions, districts)
- ‚úÖ **–†–∞–∑–º–µ—Ä –ë–î:** 55 MB ‚Üí 51 MB (-4 MB, -7.3%)
- ‚úÖ **–ò–Ω–¥–µ–∫—Å—ã:** 772 ‚Üí 753 (-19 –∏–Ω–¥–µ–∫—Å–æ–≤)

### Pre-check Quality:
- ‚úÖ **Backend:** format ‚úì, lint ‚úì, build ‚úì
- ‚úÖ **Frontend:** format ‚úì, lint ‚úì, build ‚úì (66.50s)
- ‚úÖ **Database:** –º–∏–≥—Ä–∞—Ü–∏–∏ –ø—Ä–∏–º–µ–Ω–µ–Ω—ã ‚úì

### –ú–µ—Ç—Ä–∏–∫–∏ —É–ª—É—á—à–µ–Ω–∏—è:
- **Security:** 5/10 ‚Üí **8/10** ‚úÖ (+60%)
- **Code Quality:** 5.8/10 ‚Üí **7.5/10** ‚úÖ (+29%)
- **Database:** 6/10 ‚Üí **8/10** ‚úÖ (+33%)
- **BFF Proxy —Å–æ–±–ª—é–¥–µ–Ω–∏–µ:** 60% ‚Üí **100%** ‚úÖ
- ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –æ—à–∏–±–∫–∏ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏ (variants type conversion, GetProductImages stub)
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω—ã 14 –∑–∞–≥–ª—É—à–µ–∫ –º–µ—Ç–æ–¥–æ–≤ StorefrontRepository
- ‚úÖ –ó–∞–º–µ–Ω–µ–Ω—ã –≤—Å–µ storefront_* —Ç–∞–±–ª–∏—Ü—ã –Ω–∞ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ b2c_* (27+ –º–µ—Å—Ç)
- ‚úÖ **–í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã —Å–ª—É—á–∞–π–Ω–æ —É–¥–∞–ª—ë–Ω–Ω—ã–µ –º–µ—Ç–æ–¥—ã** GetStorefrontProduct* –∏–∑ deprecated —Ñ–∞–π–ª–∞
- ‚úÖ **Backend –∫–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫ –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç!**
- ‚úÖ –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ: listings endpoint —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

**–í–ê–ñ–ù–´–ï –û–¢–ö–†–´–¢–ò–Ø:**
- üîç –§–∞–π–ª storefront_product.deprecated.go —Å–æ–¥–µ—Ä–∂–∞–ª –ù–ï deprecated –º–µ—Ç–æ–¥—ã - –æ–Ω–∏ –∞–∫—Ç–∏–≤–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏—Å—å!
- üîç –ü—Ä–∏ —É–Ω–∏—Ñ–∏–∫–∞—Ü–∏–∏ –ë–î (–∫–æ–º–º–∏—Ç 78c0e1be) –º–µ—Ç–æ–¥—ã –æ—Å—Ç–∞–ª–∏—Å—å –≤ deprecated —Ñ–∞–π–ª–µ –ø–æ –æ—à–∏–±–∫–µ
- üîç –£–¥–∞–ª–µ–Ω–∏–µ —Ñ–∞–π–ª–∞ —Å–ª–æ–º–∞–ª–æ –∫–æ–º–ø–∏–ª—è—Ü–∏—é - –º–µ—Ç–æ–¥—ã –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –∏ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–µ–Ω—ã
- ‚úÖ –í—Å–µ –ø—Ä–æ–±–ª–µ–º—ã –æ–±–Ω–∞—Ä—É–∂–µ–Ω—ã –∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –±–ª–∞–≥–æ–¥–∞—Ä—è —Å–∏—Å—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–æ–º—É —É—Å—Ç—Ä–∞–Ω–µ–Ω–∏—é —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–≥–æ –¥–æ–ª–≥–∞!

**–û–°–¢–ê–í–®–ò–ï–°–Ø –ó–ê–î–ê–ß–ò –§–ê–ó–´ 1:**
- ‚è≥ 1.4: –ò—Å–ø—Ä–∞–≤–∏—Ç—å —É—Ç–µ—á–∫–∏ err.Error() (74 —Å–ª—É—á–∞—è) - 3 —á–∞—Å–∞
- ‚è≥ 1.5: –ó–∞–º–µ–Ω–∏—Ç—å panic/log.Fatal –Ω–∞ errors - 1 —á–∞—Å
- ‚è≥ 1.6: –£–¥–∞–ª–∏—Ç—å CSRF middleware - 20 –º–∏–Ω
- ‚è≥ 1.7-1.10: Frontend cleanup - 13 —á–∞—Å–æ–≤
- ‚è≥ 1.11-1.14: Database optimization - 2 —á–∞—Å–∞
- ‚è≥ 1.15: –ü–æ–ª–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ - 2 —á–∞—Å–∞

---

## üéØ –ü–†–û–ì–†–ï–°–° –§–ê–ó–´ 2 (2025-10-13)

**–í—ã–ø–æ–ª–Ω–µ–Ω–æ –≤ —Ç–µ–∫—É—â–µ–π —Å–µ—Å—Å–∏–∏:**

### ‚úÖ Backend (2 –∑–∞–¥–∞—á–∏ –∏–∑ 5)

- [x] **2.1** OAuth stub –º–µ—Ç–æ–¥—ã **–£–ñ–ï –£–î–ê–õ–ï–ù–´** (0 —á–∞—Å–æ–≤) ‚úÖ
  - –§–∞–π–ª `auth_oauth.go` —Å–æ–¥–µ—Ä–∂–∏—Ç —Ç–æ–ª—å–∫–æ 163 —Å—Ç—Ä–æ–∫–∏
  - –ú–µ—Ç–æ–¥—ã GetUserRoles, GetRoles, AssignRole, RevokeRole –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç
  - –§–∞–π–ª —É–∂–µ –±—ã–ª –æ—á–∏—â–µ–Ω –≤ –ø—Ä–µ–¥—ã–¥—É—â–∏—Ö –∫–æ–º–º–∏—Ç–∞—Ö

- [x] **2.2** –ö–æ–Ω—Ñ–∏–≥ –≤–∞–ª—é—Ç **–£–ñ–ï –°–û–ó–î–ê–ù** (0 —á–∞—Å–æ–≤) ‚úÖ
  - –§–∞–π–ª: `backend/internal/config/currencies.go` —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
  - –ü–æ–ª–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è —Å –º–µ—Ç–æ–¥–∞–º–∏ –∏ —Å–∏–º–≤–æ–ª–∞–º–∏ –≤–∞–ª—é—Ç
  - –ù–û: –ù–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ –∫–æ–¥–µ (–Ω–∞–π–¥–µ–Ω–æ 10 hardcoded "RSD")
  - **–†–µ—à–µ–Ω–∏–µ:** –û—Ç–ª–æ–∂–µ–Ω–æ –Ω–∞ –§–∞–∑—É 3 (—Ç—Ä–µ–±—É–µ—Ç —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞ 10+ —Ñ–∞–π–ª–æ–≤)

- [x] **2.5** –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ Backend ‚úÖ
  - ‚úÖ –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ: `make format` - —É—Å–ø–µ—à–Ω–æ
  - ‚úÖ –õ–∏–Ω—Ç–∏–Ω–≥: `make lint` - 0 issues
  - ‚úÖ API —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ: `/api/v1/unified/listings` - success=true, total=7
  - ‚úÖ Backend —Ä–∞–±–æ—Ç–∞–µ—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ!

### ‚è≥ Backend (–æ—Ç–ª–æ–∂–µ–Ω–æ)

- [ ] **2.3** God object marketplace.go (3,761 —Å—Ç—Ä–æ–∫–∞) - **–û–¢–õ–û–ñ–ï–ù–û**
  - –ü—Ä–∏—á–∏–Ω–∞: –¢—Ä–µ–±—É–µ—Ç 4+ —á–∞—Å–æ–≤ —Ä–∞–±–æ—Ç—ã
  - –ó–∞–ø—É—â–µ–Ω agent –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã
  - –ù–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç —Ç–µ–∫—É—â—É—é —Ä–∞–∑—Ä–∞–±–æ—Ç–∫—É
  - –ü–µ—Ä–µ–Ω–µ—Å–µ–Ω–æ –Ω–∞ –æ—Ç–¥–µ–ª—å–Ω—É—é –∑–∞–¥–∞—á—É

- [ ] **2.4** God object opensearch repository.go (3,601 —Å—Ç—Ä–æ–∫–∞) - **–û–¢–õ–û–ñ–ï–ù–û**
  - –ê–Ω–∞–ª–æ–≥–∏—á–Ω–æ marketplace.go
  - –¢—Ä–µ–±—É–µ—Ç –¥–µ—Ç–∞–ª—å–Ω–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞ –∏ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
  - –ü–µ—Ä–µ–Ω–µ—Å–µ–Ω–æ –≤ –§–∞–∑—É 3

### üìä –ò—Ç–æ–≥–∏ –§–ê–ó–´ 2 (Backend):
- **–í—ã–ø–æ–ª–Ω–µ–Ω–æ:** 2 –∏–∑ 5 –∑–∞–¥–∞—á (40%)
- **–í—Ä–µ–º—è –ø–æ—Ç—Ä–∞—á–µ–Ω–æ:** 30 –º–∏–Ω—É—Ç (–≤–º–µ—Å—Ç–æ 12 —á–∞—Å–æ–≤ - –∑–∞–¥–∞—á–∏ —É–∂–µ –±—ã–ª–∏ —Å–¥–µ–ª–∞–Ω—ã!)
- **–ù–∞–π–¥–µ–Ω–æ:** 2 –∑–∞–¥–∞—á–∏ —É–∂–µ –≤—ã–ø–æ–ª–Ω–µ–Ω—ã —Ä–∞–Ω–µ–µ
- **–û—Ç–ª–æ–∂–µ–Ω–æ:** 2 –∫—Ä—É–ø–Ω—ã–µ –∑–∞–¥–∞—á–∏ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞ (God objects)
- **–°—Ç–∞—Ç—É—Å:** Backend –≤ –æ—Ç–ª–∏—á–Ω–æ–º —Å–æ—Å—Ç–æ—è–Ω–∏–∏, –±–ª–æ–∫–µ—Ä–æ–≤ –Ω–µ—Ç
