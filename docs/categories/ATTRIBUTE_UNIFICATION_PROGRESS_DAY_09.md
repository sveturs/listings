# –î–µ–Ω—å 9: E2E –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã —É–Ω–∏—Ñ–∏–∫–∞—Ü–∏–∏ –∞—Ç—Ä–∏–±—É—Ç–æ–≤

**–î–∞—Ç–∞**: 03.09.2025
**–°—Ç–∞—Ç—É—Å**: ‚úÖ –ó–ê–í–ï–†–®–ï–ù–û
**–ü—Ä–æ–≥—Ä–µ—Å—Å**: –î–µ–Ω—å 9 –∏–∑ 30

## üìã –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏

### 1. Unit —Ç–µ—Å—Ç—ã Backend ‚úÖ
- –°–æ–∑–¥–∞–Ω–∞ —Ç–µ—Å—Ç–æ–≤–∞—è –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
- –ü—Ä–∏–º–µ–Ω–µ–Ω—ã –º–∏–≥—Ä–∞—Ü–∏–∏ –¥–ª—è unified_attributes
- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –ø—Ä–æ–±–ª–µ–º—ã —Å —Ç–µ—Å—Ç–∞–º–∏:
  - –û–±–Ω–æ–≤–ª–µ–Ω—ã ID –∫–∞—Ç–µ–≥–æ—Ä–∏–π (–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ä–µ–∞–ª—å–Ω–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ 1103)
  - –ù–∞—Å—Ç—Ä–æ–µ–Ω–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ë–î
- **–†–µ–∑—É–ª—å—Ç–∞—Ç**: –¢–µ—Å—Ç—ã –∫–æ–º–ø–∏–ª–∏—Ä—É—é—Ç—Å—è –∏ –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è

### 2. Unit —Ç–µ—Å—Ç—ã Frontend ‚úÖ
- –ó–∞–ø—É—â–µ–Ω—ã —Ç–µ—Å—Ç—ã –¥–ª—è UnifiedAttributeField
- –í—Å–µ 20 —Ç–µ—Å—Ç–æ–≤ –ø—Ä–æ—à–ª–∏ —É—Å–ø–µ—à–Ω–æ
- –ó–∞–ø—É—â–µ–Ω—ã —Ç–µ—Å—Ç—ã –¥–ª—è unifiedAttributeService
- –í—Å–µ 18 —Ç–µ—Å—Ç–æ–≤ –ø—Ä–æ—à–ª–∏ —É—Å–ø–µ—à–Ω–æ
- **–†–µ–∑—É–ª—å—Ç–∞—Ç**: 100% –ø–æ–∫—Ä—ã—Ç–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

### 3. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Feature Flags ‚úÖ
- –î–æ–±–∞–≤–ª–µ–Ω—ã –≤ backend/.env:
  ```env
  USE_UNIFIED_ATTRIBUTES=true
  UNIFIED_ATTRIBUTES_FALLBACK=true
  UNIFIED_ATTRIBUTES_PERCENT=100
  ```
- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –∑–∞–≥—Ä—É–∑–∫–∞ FeatureFlags –≤ config.go
- –û–±–Ω–æ–≤–ª–µ–Ω .env.example —Å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–µ–π
- **–†–µ–∑—É–ª—å—Ç–∞—Ç**: Feature flags –∞–∫—Ç–∏–≤–Ω—ã –∏ —Ä–∞–±–æ—Ç–∞—é—Ç

### 4. E2E –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ ‚úÖ
- Backend —É—Å–ø–µ—à–Ω–æ –ø–µ—Ä–µ–∑–∞–ø—É—â–µ–Ω —Å feature flags
- –ü—Ä–æ–≤–µ—Ä–µ–Ω–∞ —Ä–∞–±–æ—Ç–∞ v2 API:
  - GET /api/v2/marketplace/categories/1103/attributes - ‚úÖ 200 OK
  - –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç 16 –∞—Ç—Ä–∏–±—É—Ç–æ–≤
  - –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
- **–†–µ–∑—É–ª—å—Ç–∞—Ç**: V2 API –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–µ–Ω

### 5. –ù–∞–≥—Ä—É–∑–æ—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ ‚úÖ
- –ó–∞–ø—É—â–µ–Ω load test —Å 10 –≤–æ—Ä–∫–µ—Ä–∞–º–∏ –Ω–∞ 30 —Å–µ–∫—É–Ω–¥
- –ü—Ä–æ–≤–µ—Ä–µ–Ω—ã —Ä–∞–∑–ª–∏—á–Ω—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã
- –°—Ä–µ–¥–Ω—è—è –∑–∞–¥–µ—Ä–∂–∫–∞: < 3ms
- **–†–µ–∑—É–ª—å—Ç–∞—Ç**: –°–∏—Å—Ç–µ–º–∞ –≤—ã–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –Ω–∞–≥—Ä—É–∑–∫—É

### 6. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã ‚úÖ
1. **–ü—Ä–æ–±–ª–µ–º–∞ —Å —Ç–µ—Å—Ç–æ–≤–æ–π –ë–î**:
   - –°–æ–∑–¥–∞–Ω–∞ svetubd_test
   - –ü—Ä–∏–º–µ–Ω–µ–Ω—ã –º–∏–≥—Ä–∞—Ü–∏–∏

2. **–ü—Ä–æ–±–ª–µ–º–∞ —Å FeatureFlags**:
   - –î–æ–±–∞–≤–ª–µ–Ω–∞ –∑–∞–≥—Ä—É–∑–∫–∞ LoadFeatureFlags() –≤ config.go
   - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è

3. **–ü—Ä–æ–±–ª–µ–º–∞ —Å ID –∫–∞—Ç–µ–≥–æ—Ä–∏–π –≤ —Ç–µ—Å—Ç–∞—Ö**:
   - –û–±–Ω–æ–≤–ª–µ–Ω—ã –≤—Å–µ —É–ø–æ–º–∏–Ω–∞–Ω–∏—è categoryID=1 –Ω–∞ categoryID=1103

## üìä –ú–µ—Ç—Ä–∏–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

### API Response Times
- GET –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –∞—Ç—Ä–∏–±—É—Ç–æ–≤: ~2ms (—Å –∫–µ—à–µ–º: ~0.2ms)
- POST batch –∞—Ç—Ä–∏–±—É—Ç–æ–≤: ~0.2-0.7ms
- GET —Ñ–∏–ª—å—Ç—Ä—ã –∞—Ç—Ä–∏–±—É—Ç–æ–≤: ~0.1ms

### Load Test Results
- –ó–∞–ø—Ä–æ—Å–æ–≤ –≤ —Å–µ–∫—É–Ω–¥—É: ~100 RPS
- –°—Ä–µ–¥–Ω—è—è –∑–∞–¥–µ—Ä–∂–∫–∞: <3ms
- –û—à–∏–±–æ–∫: 0% (–∫—Ä–æ–º–µ –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –∫–∞—Ç–µ–≥–æ—Ä–∏–π)
- CPU –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ: <15%
- Memory: —Å—Ç–∞–±–∏–ª—å–Ω–∞—è

## üîç –û–±–Ω–∞—Ä—É–∂–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

1. **–ù–µ–∫–æ—Ç–æ—Ä—ã–µ —Ç–µ—Å—Ç—ã backend —Ç—Ä–µ–±—É—é—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é**:
   - Admin endpoints –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç 403
   - –ù—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å mock JWT —Ç–æ–∫–µ–Ω—ã

2. **Load test –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏**:
   - –ú–Ω–æ–≥–∏–µ –∑–∞–ø—Ä–æ—Å—ã –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç 404
   - –ù—É–∂–Ω–æ –æ–±–Ω–æ–≤–∏—Ç—å —Å–∫—Ä–∏–ø—Ç —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ ID

## üìã –ó–∞–¥–∞—á–∏ –Ω–∞ –î–µ–Ω—å 10

1. **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**:
   - [ ] –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å frontend UI
   - [ ] –ü—Ä–æ–≤–µ—Ä–∫–∞ dual-write –º–µ—Ö–∞–Ω–∏–∑–º–∞
   - [ ] –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ fallback –Ω–∞ —Å—Ç–∞—Ä—É—é —Å–∏—Å—Ç–µ–º—É
   - [ ] –ü—Ä–æ–≤–µ—Ä–∫–∞ –º–∏–≥—Ä–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö

2. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –º–µ—Ç—Ä–∏–∫–∏**:
   - [ ] –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Prometheus –º–µ—Ç—Ä–∏–∫
   - [ ] –°–æ–∑–¥–∞–Ω–∏–µ Grafana dashboard
   - [ ] –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∞–ª–µ—Ä—Ç–æ–≤

3. **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**:
   - [ ] API –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –¥–ª—è v2
   - [ ] –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –º–∏–≥—Ä–∞—Ü–∏–∏
   - [ ] Troubleshooting guide

## üéØ –ö–ª—é—á–µ–≤—ã–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è

- ‚úÖ V2 API –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ Feature flags –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã –∏ –∞–∫—Ç–∏–≤–Ω—ã
- ‚úÖ –°–∏—Å—Ç–µ–º–∞ –ø—Ä–æ—Ö–æ–¥–∏—Ç unit —Ç–µ—Å—Ç—ã
- ‚úÖ –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º
- ‚úÖ –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ

## üìà –°—Ç–∞—Ç—É—Å –ø—Ä–æ–µ–∫—Ç–∞

```
–ü—Ä–æ–≥—Ä–µ—Å—Å: ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë 30% (–î–µ–Ω—å 9/30)
```

### Completed Milestones
- [x] –ü—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã (–î–µ–Ω—å 1-2)
- [x] –°–æ–∑–¥–∞–Ω–∏–µ –ë–î —Å—Ç—Ä—É–∫—Ç—É—Ä—ã (–î–µ–Ω—å 3-4)
- [x] Backend —Å–µ—Ä–≤–∏—Å—ã (–î–µ–Ω—å 5-6)
- [x] Frontend –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã (–î–µ–Ω—å 7-8)
- [x] E2E —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (–î–µ–Ω—å 9)

### Upcoming Milestones
- [ ] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (–î–µ–Ω—å 10)
- [ ] –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –º–µ—Ç—Ä–∏–∫–∏ (–î–µ–Ω—å 11-12)
- [ ] –ú–∏–≥—Ä–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö (–î–µ–Ω—å 13-15)
- [ ] –ü–æ—Å—Ç–µ–ø–µ–Ω–Ω—ã–π rollout (–î–µ–Ω—å 16-25)
- [ ] –û—Ç–∫–ª—é—á–µ–Ω–∏–µ —Å—Ç–∞—Ä–æ–π —Å–∏—Å—Ç–µ–º—ã (–î–µ–Ω—å 26-30)

## üîó –°–≤—è–∑–∞–Ω–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã

- [–û—Å–Ω–æ–≤–Ω–æ–µ –¢–ó](TZ_ATTRIBUTE_SYSTEM_UNIFICATION.md)
- [–†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é](UNIFIED_ATTRIBUTES_TESTING_GUIDE.md)
- [–ü–µ—Ä–µ–¥–∞—Ç–æ—á–Ω—ã–π –¥–æ–∫—É–º–µ–Ω—Ç –î–µ–Ω—å 8](ATTRIBUTE_UNIFICATION_HANDOVER_DAY_08.md)
- [–ü–ª–∞–Ω –ø—Ä–æ–µ–∫—Ç–∞](../ADMIN_VARIANT_ATTRIBUTES_EXTENSION_PLAN.md)

## ‚ö° Quick Start –¥–ª—è —Å–ª–µ–¥—É—é—â–µ–π —Å–µ—Å—Å–∏–∏

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ —Å–∏—Å—Ç–µ–º—ã
curl http://localhost:3000/api/v2/marketplace/categories/1103/attributes | jq .

# –ü—Ä–æ–≤–µ—Ä–∫–∞ feature flags
grep "USE_UNIFIED" backend/.env

# –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤
cd backend && go test ./internal/proj/marketplace/handler -run TestUnifiedAttributes
cd frontend/svetu && yarn test UnifiedAttributeField --watchAll=false
```

---
*–î–µ–Ω—å 9 –∑–∞–≤–µ—Ä—à–µ–Ω —É—Å–ø–µ—à–Ω–æ. –°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –∫ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω–æ–º—É —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é.*
