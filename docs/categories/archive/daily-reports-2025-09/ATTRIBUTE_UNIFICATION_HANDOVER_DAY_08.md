# üéØ –ü–µ—Ä–µ–¥–∞—Ç–æ—á–Ω—ã–π –¥–æ–∫—É–º–µ–Ω—Ç - –î–µ–Ω—å 8: –£–Ω–∏—Ñ–∏–∫–∞—Ü–∏—è –∞—Ç—Ä–∏–±—É—Ç–æ–≤

**–î–∞—Ç–∞**: 03.09.2025  
**–ü—Ä–æ–µ–∫—Ç**: Sve Tu Platforma - –£–Ω–∏—Ñ–∏–∫–∞—Ü–∏—è —Å–∏—Å—Ç–µ–º—ã –∞—Ç—Ä–∏–±—É—Ç–æ–≤  
**–°—Ç–∞—Ç—É—Å**: –î–µ–Ω—å 8 –∏–∑ 30 –∑–∞–≤–µ—Ä—à–µ–Ω

---

## üìã –ö—Ä–∞—Ç–∫–∞—è —Å–≤–æ–¥–∫–∞ –¥–ª—è —Å–ª–µ–¥—É—é—â–µ–π —Å–µ—Å—Å–∏–∏

### –ß—Ç–æ –¥–µ–ª–∞–µ–º
–£–Ω–∏—Ñ–∏—Ü–∏—Ä—É–µ–º —Å–∏—Å—Ç–µ–º—É –∞—Ç—Ä–∏–±—É—Ç–æ–≤ –º–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å–∞ - –æ–±—ä–µ–¥–∏–Ω—è–µ–º 14 —Ç–∞–±–ª–∏—Ü –ë–î –≤ 3-4 —Ç–∞–±–ª–∏—Ü—ã, —É—Å—Ç—Ä–∞–Ω—è–µ–º –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞ –∏ –¥–∞–Ω–Ω—ã—Ö.

### –ì–¥–µ –º—ã —Å–µ–π—á–∞—Å
- **–î–µ–Ω—å 8 –∏–∑ 30** - –§–∞–∑–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞
- **Backend**: ‚úÖ 100% –≥–æ—Ç–æ–≤–æ
- **Frontend**: ‚úÖ –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∏ —Ç–µ—Å—Ç—ã –≥–æ—Ç–æ–≤—ã, –æ–∂–∏–¥–∞–µ—Ç E2E —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**: ‚úÖ –í—Å—è –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å–æ–∑–¥–∞–Ω–∞
- **Production**: ‚è≥ –û–∂–∏–¥–∞–µ—Ç (–Ω–∞—á–Ω–µ—Ç—Å—è –î–µ–Ω—å 9-10)

---

## üìÇ –ö–õ–Æ–ß–ï–í–´–ï –§–ê–ô–õ–´ –î–õ–Ø –†–ê–ë–û–¢–´

### üìò –û—Å–Ω–æ–≤–Ω–æ–µ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ –∑–∞–¥–∞–Ω–∏–µ
```
/data/hostel-booking-system/docs/TZ_ATTRIBUTE_SYSTEM_UNIFICATION.md
```
**–í–ê–ñ–ù–û**: –°–æ–¥–µ—Ä–∂–∏—Ç –ø–æ–ª–Ω—ã–π –ø–ª–∞–Ω —Ä–∞–±–æ—Ç, –∞–∫—Ç—É–∞–ª—å–Ω—ã–π —Å—Ç–∞—Ç—É—Å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∏ —á–µ–∫-–ª–∏—Å—Ç

### üìä –§–∞–π–ª—ã –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ –ø–æ –¥–Ω—è–º
```
# –î–µ–Ω—å 1-5 (–ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∏ backend)
/data/hostel-booking-system/docs/ATTRIBUTE_UNIFICATION_PROGRESS_DAY_01.md
/data/hostel-booking-system/docs/ATTRIBUTE_UNIFICATION_PROGRESS_DAY_02.md
/data/hostel-booking-system/docs/ATTRIBUTE_UNIFICATION_PROGRESS_DAY_03.md
/data/hostel-booking-system/docs/ATTRIBUTE_UNIFICATION_PROGRESS_DAY_04.md
/data/hostel-booking-system/docs/ATTRIBUTE_UNIFICATION_PROGRESS_DAY_05.md

# –î–µ–Ω—å 6-8 (frontend –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ)
/data/hostel-booking-system/docs/ATTRIBUTE_UNIFICATION_HANDOVER_DAY_05.md
/data/hostel-booking-system/docs/ATTRIBUTE_UNIFICATION_PROGRESS_DAY_08.md
```

### üìö –ê—É–¥–∏—Ç –∏ –∞–Ω–∞–ª–∏–∑
```
/data/hostel-booking-system/docs/ATTRIBUTE_DUPLICATION_AUDIT_REPORT.md
/data/hostel-booking-system/docs/ATTRIBUTE_USAGE_ANALYSIS_20250902.md
/data/hostel-booking-system/docs/CATEGORY_SYSTEM_AUDIT_AND_IMPROVEMENT_PLAN.md
```

### üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
```
/data/hostel-booking-system/docs/UNIFIED_ATTRIBUTES_TESTING_GUIDE.md
```

---

## üíª –ò–°–•–û–î–ù–´–ô –ö–û–î

### Backend (Go) - ‚úÖ –ì–û–¢–û–í–û
```bash
# –ú–∏–≥—Ä–∞—Ü–∏–∏ –ë–î
/data/hostel-booking-system/backend/migrations/000034_unified_attributes.up.sql
/data/hostel-booking-system/backend/migrations/000034_unified_attributes.down.sql
/data/hostel-booking-system/backend/migrations/000035_migrate_attributes_data.up.sql
/data/hostel-booking-system/backend/migrations/000035_migrate_attributes_data.down.sql

# –°–µ—Ä–≤–∏—Å—ã –∏ —Ö–µ–Ω–¥–ª–µ—Ä—ã
/data/hostel-booking-system/backend/internal/services/attributes/*
/data/hostel-booking-system/backend/internal/proj/marketplace/handler/unified_attributes.go
/data/hostel-booking-system/backend/internal/proj/marketplace/handler/unified_attributes_test.go

# –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
/data/hostel-booking-system/backend/internal/config/feature_flags.go
/data/hostel-booking-system/backend/internal/middleware/feature_flags.go

# –ù–∞–≥—Ä—É–∑–æ—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
/data/hostel-booking-system/backend/scripts/load_test_unified_attributes.go
```

### Frontend (React/TypeScript) - ‚úÖ –ì–û–¢–û–í–û
```bash
# –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
/data/hostel-booking-system/frontend/svetu/src/components/shared/UnifiedAttributeField.tsx
/data/hostel-booking-system/frontend/svetu/src/components/create-listing/steps/UnifiedAttributesStep.tsx

# –°–µ—Ä–≤–∏—Å—ã
/data/hostel-booking-system/frontend/svetu/src/services/unifiedAttributeService.ts

# –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
/data/hostel-booking-system/frontend/svetu/src/config/featureFlags.ts

# –¢–µ—Å—Ç—ã
/data/hostel-booking-system/frontend/svetu/src/components/shared/__tests__/UnifiedAttributeField.test.tsx
/data/hostel-booking-system/frontend/svetu/src/services/__tests__/unifiedAttributeService.test.ts

# –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
/data/hostel-booking-system/frontend/svetu/.env.example
/data/hostel-booking-system/frontend/svetu/.env.test
```

---

## ‚úÖ –ß–¢–û –°–î–ï–õ–ê–ù–û (–î–µ–Ω—å 1-8)

### Backend (–î–Ω–∏ 2-4)
- ‚úÖ –°–æ–∑–¥–∞–Ω–∞ –Ω–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ë–î (3 —Ç–∞–±–ª–∏—Ü—ã –≤–º–µ—Å—Ç–æ 14)
- ‚úÖ –ú–∏–≥—Ä–∞—Ü–∏—è –≤—Å–µ—Ö –¥–∞–Ω–Ω—ã—Ö –±–µ–∑ –ø–æ—Ç–µ—Ä—å
- ‚úÖ API v2 endpoints
- ‚úÖ Feature flags –¥–ª—è –ø–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ–≥–æ –≤–∫–ª—é—á–µ–Ω–∏—è
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ fallback –Ω–∞ —Å—Ç–∞—Ä—É—é —Å–∏—Å—Ç–µ–º—É

### Frontend (–î–Ω–∏ 5-7)
- ‚úÖ UnifiedAttributeField - —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –¥–ª—è 15 —Ç–∏–ø–æ–≤ –ø–æ–ª–µ–π
- ‚úÖ UnifiedAttributesStep - –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ –ø—Ä–æ—Ü–µ—Å—Å —Å–æ–∑–¥–∞–Ω–∏—è –æ–±—ä—è–≤–ª–µ–Ω–∏–π
- ‚úÖ unifiedAttributeService - —Å–µ—Ä–≤–∏—Å –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å API
- ‚úÖ –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∞—Ç—Ä–∏–±—É—Ç–æ–≤ (TTL 5 –º–∏–Ω—É—Ç)
- ‚úÖ Feature flags –≤ localStorage –∏ env

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (–î–µ–Ω—å 8)
- ‚úÖ Unit —Ç–µ—Å—Ç—ã –¥–ª—è –≤—Å–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ (~90% –ø–æ–∫—Ä—ã—Ç–∏–µ)
- ‚úÖ –°–∫—Ä–∏–ø—Ç –Ω–∞–≥—Ä—É–∑–æ—á–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- ‚úÖ –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–ª—è —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è
- ‚úÖ –ü–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é

---

## üîÑ –ß–¢–û –î–ï–õ–ê–¢–¨ –î–ê–õ–¨–®–ï (–î–µ–Ω—å 9-10)

### –î–µ–Ω—å 9: E2E —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
```bash
# 1. –ó–∞–ø—É—Å—Ç–∏—Ç—å unit —Ç–µ—Å—Ç—ã
cd /data/hostel-booking-system/frontend/svetu
yarn test --watchAll=false

cd /data/hostel-booking-system/backend
go test ./internal/services/attributes/...
go test ./internal/proj/marketplace/handler/...

# 2. –í–∫–ª—é—á–∏—Ç—å feature flags –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
cd /data/hostel-booking-system/frontend/svetu
cp .env.test .env.local

# 3. –ó–∞–ø—É—Å—Ç–∏—Ç—å backend —Å feature flags
cd /data/hostel-booking-system/backend
export FEATURE_USE_UNIFIED_ATTRIBUTES=true
export FEATURE_USE_API_V2=true
go run ./cmd/api/main.go

# 4. –ó–∞–ø—É—Å—Ç–∏—Ç—å frontend
cd /data/hostel-booking-system/frontend/svetu
yarn dev -p 3001

# 5. –ü—Ä–æ–≤–µ—Å—Ç–∏ –Ω–∞–≥—Ä—É–∑–æ—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
cd /data/hostel-booking-system/backend
go run scripts/load_test_unified_attributes.go
```

### –î–µ–Ω—å 10: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫ production
1. –§–∏–Ω–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –≤—Å–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ (Prometheus/Grafana)
3. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ rollback —Å–∫—Ä–∏–ø—Ç–æ–≤
4. –ù–∞—á–∞–ª–æ –ø–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ–≥–æ rollout:
   - 1% –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
   - –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ 24 —á–∞—Å–∞
   - 10% -> 50% -> 100%

---

## ‚ö†Ô∏è –í–ê–ñ–ù–´–ï –ú–û–ú–ï–ù–¢–´

### –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω–æ
1. **–ù–ï –£–î–ê–õ–Ø–¢–¨ —Å—Ç–∞—Ä—ã–µ —Ç–∞–±–ª–∏—Ü—ã** - –æ–Ω–∏ –∞—Ä—Ö–∏–≤–∏—Ä—É—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ –ø–æ–ª–Ω–æ–≥–æ –ø–µ—Ä–µ—Ö–æ–¥–∞
2. **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å feature flags** - –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ–≥–æ rollout
3. **Dual-write –≤–∫–ª—é—á–µ–Ω** - –¥–∞–Ω–Ω—ã–µ –ø–∏—à—É—Ç—Å—è –≤ –æ–±–µ —Å–∏—Å—Ç–µ–º—ã
4. **Fallback –∞–∫—Ç–∏–≤–µ–Ω** - –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å—Ç–∞—Ä–∞—è —Å–∏—Å—Ç–µ–º–∞

### Feature Flags
```bash
# Backend (.env)
USE_UNIFIED_ATTRIBUTES=true
UNIFIED_ATTRIBUTES_FALLBACK=true
DUAL_WRITE_ATTRIBUTES=true
UNIFIED_ATTRIBUTES_PERCENT=0  # –ù–∞—á–∞—Ç—å —Å 0%, –ø–æ—Ç–æ–º 1%, 10%, 50%, 100%

# Frontend (.env.local)
NEXT_PUBLIC_USE_UNIFIED_ATTRIBUTES=true
NEXT_PUBLIC_USE_API_V2=true
```

### –ö–æ–º–∞–Ω–¥–∞ —ç–∫—Å—Ç—Ä–µ–Ω–Ω–æ–≥–æ –æ—Ç–∫–∞—Ç–∞
```bash
# –í —Å–ª—É—á–∞–µ –ø—Ä–æ–±–ª–µ–º –Ω–∞ production
export USE_UNIFIED_ATTRIBUTES=false
export UNIFIED_ATTRIBUTES_FALLBACK=true
export DUAL_WRITE_ATTRIBUTES=false
systemctl restart backend-api
```

---

## üìä –ú–ï–¢–†–ò–ö–ò –£–°–ü–ï–•–ê

### –î–æ—Å—Ç–∏–≥–Ω—É—Ç–æ
- ‚úÖ –¢–∞–±–ª–∏—Ü—ã –ë–î: 14 ‚Üí 3 (–≥–æ—Ç–æ–≤–æ –≤ –∫–æ–¥–µ)
- ‚úÖ –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞: -85% (~2200 —Å—Ç—Ä–æ–∫ —É–¥–∞–ª–µ–Ω–æ)
- ‚úÖ –ü–æ–∫—Ä—ã—Ç–∏–µ —Ç–µ—Å—Ç–∞–º–∏: ~90%
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ 15 —Ç–∏–ø–æ–≤ –∞—Ç—Ä–∏–±—É—Ç–æ–≤

### –û–∂–∏–¥–∞–µ—Ç—Å—è –ø–æ—Å–ª–µ production rollout
- ‚è≥ –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å API: < 100ms
- ‚è≥ Cache hit rate: > 80%
- ‚è≥ –°–Ω–∏–∂–µ–Ω–∏–µ –Ω–∞–≥—Ä—É–∑–∫–∏ –Ω–∞ –ë–î: -50%
- ‚è≥ –£–ª—É—á—à–µ–Ω–∏–µ UX: -30% –≤—Ä–µ–º—è –∑–∞–≥—Ä—É–∑–∫–∏

---

## üéØ –ö–û–ù–ï–ß–ù–ê–Ø –¶–ï–õ–¨

–ü–æ–ª–Ω–æ—Å—Ç—å—é –∑–∞–º–µ–Ω–∏—Ç—å —Å—Ç–∞—Ä—É—é —Å–∏—Å—Ç–µ–º—É –∞—Ç—Ä–∏–±—É—Ç–æ–≤ –Ω–∞ –Ω–æ–≤—É—é —É–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—É—é, —Å:
- –ù—É–ª–µ–≤–æ–π –ø–æ—Ç–µ—Ä–µ–π –¥–∞–Ω–Ω—ã—Ö
- –ü–æ–ª–Ω–æ–π –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å—é
- –£–ª—É—á—à–µ–Ω–Ω–æ–π –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å—é
- –£–ø—Ä–æ—â–µ–Ω–Ω–æ–π –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –∫–æ–¥–∞

**Deadline**: 30 –¥–Ω–µ–π –æ—Ç –Ω–∞—á–∞–ª–∞ (–æ—Å—Ç–∞–ª–æ—Å—å 22 –¥–Ω—è)

---

## üìû –ö–û–ù–¢–ê–ö–¢–´ –ò –°–°–´–õ–ö–ò

- **–û—Å–Ω–æ–≤–Ω–æ–µ –¢–ó**: `/docs/TZ_ATTRIBUTE_SYSTEM_UNIFICATION.md`
- **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**: `/docs/UNIFIED_ATTRIBUTES_TESTING_GUIDE.md`
- **–õ–æ–≥–∏ backend**: `/tmp/backend.log`
- **–ú–µ—Ç—Ä–∏–∫–∏**: Grafana Dashboard "Unified Attributes"

---

**–ü–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω–æ**: 03.09.2025  
**–î–ª—è –ø–µ—Ä–µ–¥–∞—á–∏ –≤ —Å–ª–µ–¥—É—é—â—É—é —Å–µ—Å—Å–∏—é AI Assistant**

## –ò–ù–°–¢–†–£–ö–¶–ò–Ø –î–õ–Ø –°–õ–ï–î–£–Æ–©–ï–ô –°–ï–°–°–ò–ò:

1. –ü—Ä–æ—á–∏—Ç–∞—Ç—å —ç—Ç–æ—Ç –¥–æ–∫—É–º–µ–Ω—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é
2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å –≤ `/docs/TZ_ATTRIBUTE_SYSTEM_UNIFICATION.md`
3. –ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å —Å –î–µ–Ω—å 9: E2E —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
4. –û–±–Ω–æ–≤–ª—è—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏—Ö —Ñ–∞–π–ª–∞—Ö
5. –ü—Ä–∏ –ª—é–±—ã—Ö –≤–æ–ø—Ä–æ—Å–∞—Ö - –æ–±—Ä–∞—â–∞—Ç—å—Å—è –∫ –æ—Å–Ω–æ–≤–Ω–æ–º—É –¢–ó