# üéì –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –æ–±—É—á–µ–Ω–∏—é –∫–æ–º–∞–Ω–¥—ã - –£–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –∞—Ç—Ä–∏–±—É—Ç–æ–≤

## üìö –ü—Ä–æ–≥—Ä–∞–º–º–∞ –æ–±—É—á–µ–Ω–∏—è

### –î–µ–Ω—å 1: –í–≤–µ–¥–µ–Ω–∏–µ –∏ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ (2 —á–∞—Å–∞)
1. **–û–±–∑–æ—Ä —Å–∏—Å—Ç–µ–º—ã** (30 –º–∏–Ω)
   - –ò—Å—Ç–æ—Ä–∏—è: –ø–æ—á–µ–º—É –ø–æ—Ç—Ä–µ–±–æ–≤–∞–ª–∞—Å—å —É–Ω–∏—Ñ–∏–∫–∞—Ü–∏—è
   - –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –Ω–æ–≤–æ–≥–æ –ø–æ–¥—Ö–æ–¥–∞
   - –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞—é—â–µ–π —Å–∏—Å—Ç–µ–º—ã

2. **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞** (45 –º–∏–Ω)
   - –û–±—â–∞—è —Å—Ö–µ–º–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
   - –í–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ frontend/backend
   - –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –∏ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ
   
3. **–ü—Ä–∞–∫—Ç–∏–∫–∞** (45 –º–∏–Ω)
   - –°–æ–∑–¥–∞–Ω–∏–µ –æ–±—ä—è–≤–ª–µ–Ω–∏—è —Å –∞—Ç—Ä–∏–±—É—Ç–∞–º–∏
   - –ü—Ä–æ—Å–º–æ—Ç—Ä –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
   - –ê–Ω–∞–ª–∏–∑ API –∑–∞–ø—Ä–æ—Å–æ–≤

### –î–µ–Ω—å 2: –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è (3 —á–∞—Å–∞)
1. **Frontend —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞** (1 —á–∞—Å)
   - –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã UnifiedAttributes
   - Hooks –∏ —Å–µ—Ä–≤–∏—Å—ã
   - –í–∞–ª–∏–¥–∞—Ü–∏—è –∏ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ

2. **Backend —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞** (1 —á–∞—Å)
   - AttributeService
   - API endpoints
   - –ú–∏–≥—Ä–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö

3. **–ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–æ–µ –∑–∞–¥–∞–Ω–∏–µ** (1 —á–∞—Å)
   - –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ —Ç–∏–ø–∞ –∞—Ç—Ä–∏–±—É—Ç–∞
   - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ –∫–∞—Ç–µ–≥–æ—Ä–∏—é
   - –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –î–µ–Ω—å 3: –≠–∫—Å–ø–ª—É–∞—Ç–∞—Ü–∏—è –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ (2 —á–∞—Å–∞)
1. **Deployment** (45 –º–∏–Ω)
   - CI/CD pipeline
   - Feature flags
   - Rollback –ø—Ä–æ—Ü–µ–¥—É—Ä—ã

2. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥** (45 –º–∏–Ω)
   - Grafana dashboards
   - Prometheus –º–µ—Ç—Ä–∏–∫–∏
   - Troubleshooting

3. **Q&A —Å–µ—Å—Å–∏—è** (30 –º–∏–Ω)

---

## üîß –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏—è

### –£–ø—Ä–∞–∂–Ω–µ–Ω–∏–µ 1: –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –∞—Ç—Ä–∏–±—É—Ç–∞
**–¶–µ–ª—å**: –ù–∞—É—á–∏—Ç—å—Å—è –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ –∞—Ç—Ä–∏–±—É—Ç—ã –≤ —Å–∏—Å—Ç–µ–º—É

**–®–∞–≥–∏**:
1. –°–æ–∑–¥–∞–π—Ç–µ –º–∏–≥—Ä–∞—Ü–∏—é –¥–ª—è –Ω–æ–≤–æ–≥–æ –∞—Ç—Ä–∏–±—É—Ç–∞ "warranty_period"
2. –î–æ–±–∞–≤—å—Ç–µ –∞—Ç—Ä–∏–±—É—Ç –≤ –∫–∞—Ç–µ–≥–æ—Ä–∏—é "–≠–ª–µ–∫—Ç—Ä–æ–Ω–∏–∫–∞"
3. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –≤–∞–ª–∏–¥–∞—Ü–∏—é (—á–∏—Å–ª–æ –æ—Ç 0 –¥–æ 60 –º–µ—Å—è—Ü–µ–≤)
4. –î–æ–±–∞–≤—å—Ç–µ –ø–µ—Ä–µ–≤–æ–¥—ã –¥–ª—è ru/en/sr
5. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ —á–µ—Ä–µ–∑ UI

**–†–µ—à–µ–Ω–∏–µ**:
```sql
-- Migration
INSERT INTO unified_attributes (code, type, name_key, validation_rules)
VALUES ('warranty_period', 'number', 'attributes.warranty_period', 
  '{"min": 0, "max": 60, "unit": "months"}'::jsonb);

-- Attach to category
INSERT INTO category_attributes (category_id, attribute_id, is_required)
SELECT 1, id, false FROM unified_attributes WHERE code = 'warranty_period';
```

### –£–ø—Ä–∞–∂–Ω–µ–Ω–∏–µ 2: –ú–∏–≥—Ä–∞—Ü–∏—è legacy –¥–∞–Ω–Ω—ã—Ö
**–¶–µ–ª—å**: –ü–æ–Ω—è—Ç—å –ø—Ä–æ—Ü–µ—Å—Å –º–∏–≥—Ä–∞—Ü–∏–∏ –∏–∑ —Å—Ç–∞—Ä–æ–π —Å–∏—Å—Ç–µ–º—ã

**–ó–∞–¥–∞–Ω–∏–µ**: –ú–∏–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –∞—Ç—Ä–∏–±—É—Ç—ã –∏–∑ —Ç–∞–±–ª–∏—Ü—ã `old_product_specs`

**–ü–æ–¥—Å–∫–∞–∑–∫–∏**:
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–∫—Ä–∏–ø—Ç `/backend/scripts/migrate_attributes.go`
- –°–æ–∑–¥–∞–π—Ç–µ mapping —Å—Ç–∞—Ä—ã—Ö –ø–æ–ª–µ–π –∫ –Ω–æ–≤—ã–º
- –í–∞–ª–∏–¥–∏—Ä—É–π—Ç–µ –¥–∞–Ω–Ω—ã–µ –ø–µ—Ä–µ–¥ –º–∏–≥—Ä–∞—Ü–∏–µ–π

### –£–ø—Ä–∞–∂–Ω–µ–Ω–∏–µ 3: –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
**–¶–µ–ª—å**: –ù–∞—É—á–∏—Ç—å—Å—è –Ω–∞—Ö–æ–¥–∏—Ç—å –∏ —É—Å—Ç—Ä–∞–Ω—è—Ç—å –ø—Ä–æ–±–ª–µ–º—ã –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

**–°—Ü–µ–Ω–∞—Ä–∏–π**: –°—Ç—Ä–∞–Ω–∏—Ü–∞ —Å –∞—Ç—Ä–∏–±—É—Ç–∞–º–∏ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –º–µ–¥–ª–µ–Ω–Ω–æ

**–®–∞–≥–∏ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏**:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ cache hit rate –≤ Redis
2. –ê–Ω–∞–ª–∏–∑–∏—Ä—É–π—Ç–µ EXPLAIN –∑–∞–ø—Ä–æ—Å–æ–≤
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∏–Ω–¥–µ–∫—Å—ã
4. –û–ø—Ç–∏–º–∏–∑–∏—Ä—É–π—Ç–µ N+1 –∑–∞–ø—Ä–æ—Å—ã

---

## üìñ –°–ø—Ä–∞–≤–æ—á–Ω—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã

### –ë—ã—Å—Ç—Ä—ã–µ –∫–æ–º–∞–Ω–¥—ã

#### Frontend
```bash
# –ó–∞–ø—É—Å–∫ –≤ dev —Ä–µ–∂–∏–º–µ —Å unified attributes
cd frontend/svetu
NEXT_PUBLIC_USE_UNIFIED_ATTRIBUTES=true yarn dev -p 3001

# –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
yarn test UnifiedAttribute

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∏–ø–æ–≤
yarn type-check
```

#### Backend
```bash
# –ó–∞–ø—É—Å–∫ —Å feature flag
cd backend
FEATURE_USE_UNIFIED_ATTRIBUTES=true go run cmd/api/main.go

# –¢–µ—Å—Ç—ã –∞—Ç—Ä–∏–±—É—Ç–æ–≤
go test ./internal/services/attributes/...

# –ú–∏–≥—Ä–∞—Ü–∏–∏
./migrator up
./migrator status
```

#### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
```sql
-- –í—Å–µ –∞—Ç—Ä–∏–±—É—Ç—ã –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
SELECT ua.*, ca.* 
FROM unified_attributes ua
JOIN category_attributes ca ON ua.id = ca.attribute_id
WHERE ca.category_id = 1
ORDER BY ca.display_order;

-- –ó–Ω–∞—á–µ–Ω–∏—è –∞—Ç—Ä–∏–±—É—Ç–æ–≤ –æ–±—ä—è–≤–ª–µ–Ω–∏—è
SELECT ua.code, av.* 
FROM attribute_values av
JOIN unified_attributes ua ON av.attribute_id = ua.id
WHERE av.listing_id = 123;

-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
SELECT 
    ua.code,
    ua.type,
    COUNT(av.id) as usage_count
FROM unified_attributes ua
LEFT JOIN attribute_values av ON ua.id = av.attribute_id
GROUP BY ua.code, ua.type
ORDER BY usage_count DESC;
```

### –¢–∏–ø–æ–≤—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏

#### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∞—Ç—Ä–∏–±—É—Ç–∞ –≤ –∫–∞—Ç–µ–≥–æ—Ä–∏—é
```typescript
// Frontend
const { attachAttribute } = useAttributeManagement();

await attachAttribute({
  categoryId: 1,
  attributeId: 10,
  required: true,
  displayOrder: 5
});
```

```go
// Backend
err := attrService.AttachAttributeToCategory(ctx, &AttachRequest{
    CategoryID:   1,
    AttributeID:  10,
    Required:     true,
    DisplayOrder: 5,
})
```

#### –í–∞–ª–∏–¥–∞—Ü–∏—è –∑–Ω–∞—á–µ–Ω–∏–π
```typescript
// Frontend
const { validate } = useAttributeValidation();

const errors = validate(attributes, values);
if (Object.keys(errors).length === 0) {
  // –í—Å–µ –≤–∞–ª–∏–¥–Ω–æ
}
```

```go
// Backend
for _, val := range values {
    if err := validator.ValidateAttributeValue(attr, val); err != nil {
        return fmt.Errorf("validation failed: %w", err)
    }
}
```

---

## ‚ö†Ô∏è –ß–∞—Å—Ç—ã–µ –æ—à–∏–±–∫–∏ –∏ —Ä–µ—à–µ–Ω–∏—è

### –û—à–∏–±–∫–∞: "Attributes not loading"
**–ü—Ä–∏—á–∏–Ω–∞**: –ö–µ—à —É—Å—Ç–∞—Ä–µ–ª –∏–ª–∏ Redis –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω
**–†–µ—à–µ–Ω–∏–µ**:
```bash
# –û—á–∏—Å—Ç–∏—Ç—å –∫–µ—à
redis-cli FLUSHALL

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å Redis
redis-cli ping

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–∏—Å
kubectl rollout restart deployment/unified-attributes
```

### –û—à–∏–±–∫–∞: "Validation failed"
**–ü—Ä–∏—á–∏–Ω–∞**: –ù–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Ç–∏–ø–æ–≤ –∏–ª–∏ –ø—Ä–∞–≤–∏–ª –≤–∞–ª–∏–¥–∞—Ü–∏–∏
**–†–µ—à–µ–Ω–∏–µ**:
```javascript
// Debug –≤ –∫–æ–Ω—Å–æ–ª–∏
console.log('Attribute:', attribute);
console.log('Value:', value);
console.log('Validation rules:', attribute.validation);
```

### –û—à–∏–±–∫–∞: "Migration failed"
**–ü—Ä–∏—á–∏–Ω–∞**: –ö–æ–Ω—Ñ–ª–∏–∫—Ç –¥–∞–Ω–Ω—ã—Ö –∏–ª–∏ –Ω–µ–≤–µ—Ä–Ω—ã–π mapping
**–†–µ—à–µ–Ω–∏–µ**:
```sql
-- –ù–∞–π—Ç–∏ –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã
SELECT code, COUNT(*) 
FROM unified_attributes 
GROUP BY code 
HAVING COUNT(*) > 1;

-- Rollback
./migrator down
```

---

## üéØ –ö–æ–Ω—Ç—Ä–æ–ª—å–Ω—ã–µ –≤–æ–ø—Ä–æ—Å—ã

### –£—Ä–æ–≤–µ–Ω—å Junior
1. –ö–∞–∫–∏–µ —Ç–∏–ø—ã –∞—Ç—Ä–∏–±—É—Ç–æ–≤ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Å–∏—Å—Ç–µ–º–∞?
2. –ö–∞–∫ –¥–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–π –∞—Ç—Ä–∏–±—É—Ç –≤ –∫–∞—Ç–µ–≥–æ—Ä–∏—é?
3. –ì–¥–µ —Ö—Ä–∞–Ω—è—Ç—Å—è –∑–Ω–∞—á–µ–Ω–∏—è –∞—Ç—Ä–∏–±—É—Ç–æ–≤?

### –£—Ä–æ–≤–µ–Ω—å Middle
1. –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∞—Ç—Ä–∏–±—É—Ç–æ–≤?
2. –û–ø–∏—à–∏—Ç–µ –ø—Ä–æ—Ü–µ—Å—Å –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –Ω–∞ frontend –∏ backend
3. –ö–∞–∫ –º–∏–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –∏–∑ —Å—Ç–∞—Ä–æ–π —Å–∏—Å—Ç–µ–º—ã?

### –£—Ä–æ–≤–µ–Ω—å Senior
1. –ö–∞–∫ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –ø—Ä–∏ –±–æ–ª—å—à–æ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ –∞—Ç—Ä–∏–±—É—Ç–æ–≤?
2. –ö–∞–∫ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –Ω–æ–≤—ã–π —Ç–∏–ø –∞—Ç—Ä–∏–±—É—Ç–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, geo-location)?
3. –ö–∞–∫ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å A/B —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –Ω–æ–≤—ã—Ö –∞—Ç—Ä–∏–±—É—Ç–æ–≤?

---

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

### –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- [–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è](UNIFIED_ATTRIBUTES_FINAL_TECHNICAL_DOCUMENTATION.md)
- [Testing Guide](UNIFIED_ATTRIBUTES_TESTING_GUIDE.md)
- [Production Runbook](UNIFIED_ATTRIBUTES_PRODUCTION_RUNBOOK.md)

### –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã
- [Swagger API](http://localhost:3000/swagger)
- [Grafana Dashboard](http://monitoring.svetu.rs/d/unified-attrs)
- [Sentry Errors](http://sentry.svetu.rs/unified-attributes)

### –ö–æ–Ω—Ç–∞–∫—Ç—ã —ç–∫—Å–ø–µ—Ä—Ç–æ–≤
- **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞**: @architect-team
- **Frontend**: @frontend-team  
- **Backend**: @backend-team
- **DevOps**: @devops-team

### Slack –∫–∞–Ω–∞–ª—ã
- `#unified-attributes` - –æ—Å–Ω–æ–≤–Ω–æ–π –∫–∞–Ω–∞–ª
- `#unified-attrs-support` - –ø–æ–¥–¥–µ—Ä–∂–∫–∞
- `#unified-attrs-incidents` - –∏–Ω—Ü–∏–¥–µ–Ω—Ç—ã

---

## üéâ –°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è

–ü–æ—Å–ª–µ –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏—è –æ–±—É—á–µ–Ω–∏—è –≤—ã —Å–º–æ–∂–µ—Ç–µ:
- ‚úÖ –†–∞–±–æ—Ç–∞—Ç—å —Å —É–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω–æ–π —Å–∏—Å—Ç–µ–º–æ–π –∞—Ç—Ä–∏–±—É—Ç–æ–≤
- ‚úÖ –î–æ–±–∞–≤–ª—è—Ç—å –∏ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—Ç—å –Ω–æ–≤—ã–µ –∞—Ç—Ä–∏–±—É—Ç—ã
- ‚úÖ –í—ã–ø–æ–ª–Ω—è—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –î–∏–∞–≥–Ω–æ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∏ —Ä–µ—à–∞—Ç—å –ø—Ä–æ–±–ª–µ–º—ã
- ‚úÖ –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
- ‚úÖ –ù–∞—Å—Ç—Ä–∞–∏–≤–∞—Ç—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –∞–ª–µ—Ä—Ç—ã

**–¢–µ—Å—Ç –¥–ª—è —Å–∞–º–æ–ø—Ä–æ–≤–µ—Ä–∫–∏**: [–ü—Ä–æ–π—Ç–∏ —Ç–µ—Å—Ç](http://training.svetu.rs/unified-attributes)

---

**–í–µ—Ä—Å–∏—è**: 1.0.0  
**–û–±–Ω–æ–≤–ª–µ–Ω–æ**: 03.09.2025  
**–ê–≤—Ç–æ—Ä**: Tech Team
