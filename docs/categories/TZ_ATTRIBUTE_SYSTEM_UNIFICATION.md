# üìã –¢–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ –∑–∞–¥–∞–Ω–∏–µ –Ω–∞ —É–Ω–∏—Ñ–∏–∫–∞—Ü–∏—é —Å–∏—Å—Ç–µ–º—ã –∞—Ç—Ä–∏–±—É—Ç–æ–≤
## Sve Tu Platforma - Marketplace

*–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è: 02.09.2025*  
*–î–∞—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è: 03.09.2025*  
*–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: üî¥ –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô*  
*–°—Ä–æ–∫ –∏—Å–ø–æ–ª–Ω–µ–Ω–∏—è: 30 –¥–Ω–µ–π*  
*–¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å: üöÄ PRODUCTION DEPLOYMENT (–î–µ–Ω—å 15/30 - 50%)*

---

## üéØ –¶–µ–ª—å –∑–∞–¥–∞–Ω–∏—è

–£—Å—Ç—Ä–∞–Ω–∏—Ç—å –∫—Ä–∏—Ç–∏—á–µ—Å–∫–æ–µ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ —Å–∏—Å—Ç–µ–º–µ –∞—Ç—Ä–∏–±—É—Ç–æ–≤, –≤—ã—è–≤–ª–µ–Ω–Ω–æ–µ –≤ –∞—É–¥–∏—Ç–µ –æ—Ç 02.09.2025. –°–æ–∑–¥–∞—Ç—å –µ–¥–∏–Ω—É—é, —É–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—É—é —Å–∏—Å—Ç–µ–º—É –∞—Ç—Ä–∏–±—É—Ç–æ–≤ –¥–ª—è –≤—Å–µ–≥–æ –º–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å–∞ —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ –∏ –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–º —Ä–∏—Å–∫–æ–º –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞.

---

## ‚ö†Ô∏è –ö–†–ò–¢–ò–ß–ï–°–ö–ò –í–ê–ñ–ù–´–ï –ü–†–ê–í–ò–õ–ê –ë–ï–ó–û–ü–ê–°–ù–û–°–¢–ò

### üõ°Ô∏è –ü—Ä–∏–Ω—Ü–∏–ø "–ù–ï –ù–ê–í–†–ï–î–ò"

1. **–ó–ê–ü–†–ï–©–ï–ù–û —É–¥–∞–ª—è—Ç—å –∏–ª–∏ –º–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Ç–∞–±–ª–∏—Ü—ã –ë–î –¥–æ —Å–æ–∑–¥–∞–Ω–∏—è –ø–æ–ª–Ω–æ–π —Ä–µ–∑–µ—Ä–≤–Ω–æ–π –∫–æ–ø–∏–∏**
2. **–ó–ê–ü–†–ï–©–ï–ù–û —É–¥–∞–ª—è—Ç—å —Ä–∞–±–æ—Ç–∞—é—â–∏–π –∫–æ–¥ –¥–æ –ø–æ–ª–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∑–∞–º–µ–Ω—ã**
3. **–ó–ê–ü–†–ï–©–ï–ù–û –≤–Ω–æ—Å–∏—Ç—å breaking changes –≤ –ø—É–±–ª–∏—á–Ω—ã–µ API –±–µ–∑ –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è**
4. **–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û —Å–æ–∑–¥–∞–≤–∞—Ç—å –æ–±—Ä–∞—Ç–∏–º—ã–µ –º–∏–≥—Ä–∞—Ü–∏–∏ (up/down) –¥–ª—è –≤—Å–µ—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π –ë–î**
5. **–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–∞–∂–¥–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ –Ω–∞ —Ç–µ—Å—Ç–æ–≤–æ–º –æ–∫—Ä—É–∂–µ–Ω–∏–∏**
6. **–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û —Å–æ—Ö—Ä–∞–Ω—è—Ç—å —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º–∏ –¥–∞–Ω–Ω—ã–º–∏**

### üìä –ö–æ–Ω—Ç—Ä–æ–ª—å–Ω—ã–µ —Ç–æ—á–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

–ü–µ—Ä–µ–¥ –∫–∞–∂–¥—ã–º —ç—Ç–∞–ø–æ–º —Ä–∞–±–æ—Ç—ã –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û:
- ‚úÖ –°–æ–∑–¥–∞—Ç—å backup –≤—Å–µ—Ö –∑–∞—Ç—Ä–∞–≥–∏–≤–∞–µ–º—ã—Ö —Ç–∞–±–ª–∏—Ü
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø–∏—Å–µ–π –≤ —Ç–∞–±–ª–∏—Ü–∞—Ö –¥–æ –∏ –ø–æ—Å–ª–µ –º–∏–≥—Ä–∞—Ü–∏–∏
- ‚úÖ –£–±–µ–¥–∏—Ç—å—Å—è –≤ –Ω–∞–ª–∏—á–∏–∏ rollback –ø–ª–∞–Ω–∞
- ‚úÖ –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ –∫–æ–ø–∏–∏ –ø—Ä–æ–¥–∞–∫—à–Ω –¥–∞–Ω–Ω—ã—Ö

---

## üìë –ò—Å—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ

### –¢–µ–∫—É—â–∞—è —Å–∏—Ç—É–∞—Ü–∏—è (–∏–∑ –∞—É–¥–∏—Ç–∞):
- **14 —Ç–∞–±–ª–∏—Ü –ë–î** –¥–ª—è —Å–∏—Å—Ç–µ–º—ã –∞—Ç—Ä–∏–±—É—Ç–æ–≤ (–¥–æ–ª–∂–Ω–æ –±—ã—Ç—å 3-4)
- **3 –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–µ —Å–∏—Å—Ç–µ–º—ã** –≤ backend –∫–æ–¥–µ
- **5 –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤** –≤–æ frontend (~2600 —Å—Ç—Ä–æ–∫)
- **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è** –¥–ª—è –∞—Ç—Ä–∏–±—É—Ç–æ–≤
- **–î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ OpenSearch** –∏–Ω–¥–µ–∫—Å–∞—Ö

### –û—Å–Ω–æ–≤–Ω—ã–µ —Å–∏—Å—Ç–µ–º—ã –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è:

1. **–°–∏—Å—Ç–µ–º–∞ –º–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å–∞** (—Ä–∞–±–æ—Ç–∞—é—â–∞—è):
   - `category_attributes` (85 –∑–∞–ø–∏—Å–µ–π)
   - `category_attribute_mapping` (611 –∑–∞–ø–∏—Å–µ–π)
   - `listing_attribute_values` (15 –∑–∞–ø–∏—Å–µ–π)

2. **–°–∏—Å—Ç–µ–º–∞ –≤–∏—Ç—Ä–∏–Ω** (—á–∞—Å—Ç–∏—á–Ω–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è):
   - `product_variant_attributes` (14 –∑–∞–ø–∏—Å–µ–π)
   - `storefront_product_attributes` (0 –∑–∞–ø–∏—Å–µ–π)
   - `product_variant_attribute_values`

3. **–£—Å—Ç–∞—Ä–µ–≤—à–∞—è —Å–∏—Å—Ç–µ–º–∞** (–Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è):
   - `category_variant_attributes` (4 –∑–∞–ø–∏—Å–∏)
   - `variant_attribute_mappings` (4 –∑–∞–ø–∏—Å–∏)

---

## üìã –î–ï–¢–ê–õ–¨–ù–´–ô –ü–õ–ê–ù –†–ê–ë–û–¢

## üìä –¢–ï–ö–£–©–ò–ô –°–¢–ê–¢–£–° –í–´–ü–û–õ–ù–ï–ù–ò–Ø

### ‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–Ω—ã–µ —ç—Ç–∞–ø—ã:
1. **–î–Ω–∏ 1-3: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∏ –∞–Ω–∞–ª–∏–∑** ‚úÖ 100%
2. **–î–Ω–∏ 4-6: –ú–∏–≥—Ä–∞—Ü–∏—è –ë–î** ‚úÖ 100%  
3. **–î–Ω–∏ 7-8: Backend —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è** ‚úÖ 100%
4. **–î–Ω–∏ 9-10: E2E –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ** ‚úÖ 100%
5. **–î–µ–Ω—å 11: –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –º–µ—Ç—Ä–∏–∫–∏** ‚úÖ 100%
6. **–î–µ–Ω—å 12: CI/CD Pipeline** ‚úÖ 100%

### üü° –í –ø—Ä–æ—Ü–µ—Å—Å–µ:
7. **–î–Ω–∏ 13-15: Production —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ** ‚è≥ 0%

### ‚è∞ –ü—Ä–µ–¥—Å—Ç–æ—è—â–∏–µ —ç—Ç–∞–ø—ã:
7. **–î–Ω–∏ 13-15: Production —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ**
8. **–î–Ω–∏ 16-20: –ú–∏–≥—Ä–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö**
9. **–î–Ω–∏ 21-25: –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∏ –¥–æ—Ä–∞–±–æ—Ç–∫–∏**
10. **–î–Ω–∏ 26-30: –û—á–∏—Å—Ç–∫–∞ –∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ**

---

### –≠–¢–ê–ü 1: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∏ –∞–Ω–∞–ª–∏–∑ (–î–Ω–∏ 1-3) ‚úÖ –ó–ê–í–ï–†–®–ï–ù–û

#### 1.1 –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª–Ω–æ–≥–æ –±—ç–∫–∞–ø–∞ (–î–µ–Ω—å 1) ‚úÖ

```bash
# –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–´–ï –∫–æ–º–∞–Ω–¥—ã –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:

# 1. –°–æ–∑–¥–∞—Ç—å –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –¥–ª—è –±—ç–∫–∞–ø–æ–≤
mkdir -p /data/backups/attribute_unification_$(date +%Y%m%d)

# 2. –ë—ç–∫–∞–ø –≤—Å–µ—Ö —Ç–∞–±–ª–∏—Ü –∞—Ç—Ä–∏–±—É—Ç–æ–≤
pg_dump -h localhost -U postgres -d svetubd \
  -t category_attributes \
  -t category_attribute_mapping \
  -t listing_attribute_values \
  -t product_variant_attributes \
  -t storefront_product_attributes \
  -t product_variant_attribute_values \
  -t category_variant_attributes \
  -t variant_attribute_mappings \
  -t attribute_groups \
  -t attribute_group_items \
  -t category_attribute_groups \
  -t translations \
  > /data/backups/attribute_unification_$(date +%Y%m%d)/attributes_backup.sql

# 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç–∏ –±—ç–∫–∞–ø–∞
psql -h localhost -U postgres -d test_restore < /data/backups/attribute_unification_$(date +%Y%m%d)/attributes_backup.sql
```

#### 1.2 –ê–Ω–∞–ª–∏–∑ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è (–î–µ–Ω—å 2)

**–ó–∞–¥–∞—á–∞**: –ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–∞–ª—å–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫–∞–∂–¥–æ–π —Å–∏—Å—Ç–µ–º—ã –∞—Ç—Ä–∏–±—É—Ç–æ–≤

```sql
-- –°–∫—Ä–∏–ø—Ç –∞–Ω–∞–ª–∏–∑–∞ –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
-- –°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤ /data/hostel-booking-system/docs/attribute_usage_analysis.md

-- 1. –ê–Ω–∞–ª–∏–∑ —Å–∏—Å—Ç–µ–º—ã –º–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å–∞
SELECT 
    'marketplace_system' as system,
    COUNT(DISTINCT ca.id) as unique_attributes,
    COUNT(DISTINCT cam.category_id) as categories_using,
    COUNT(DISTINCT lav.listing_id) as listings_using,
    COUNT(lav.id) as total_values
FROM category_attributes ca
LEFT JOIN category_attribute_mapping cam ON ca.id = cam.attribute_id
LEFT JOIN listing_attribute_values lav ON ca.id = lav.attribute_id;

-- 2. –ê–Ω–∞–ª–∏–∑ —Å–∏—Å—Ç–µ–º—ã –≤–∏—Ç—Ä–∏–Ω
SELECT 
    'storefront_system' as system,
    COUNT(DISTINCT pva.id) as unique_attributes,
    COUNT(DISTINCT spa.storefront_product_id) as products_using,
    COUNT(pvav.id) as total_values
FROM product_variant_attributes pva
LEFT JOIN storefront_product_attributes spa ON pva.id = spa.attribute_id
LEFT JOIN product_variant_attribute_values pvav ON pva.id = pvav.attribute_id;

-- 3. –ü–æ–∏—Å–∫ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∞—Ç—Ä–∏–±—É—Ç–æ–≤ –º–µ–∂–¥—É —Å–∏—Å—Ç–µ–º–∞–º–∏
SELECT 
    ca.name as marketplace_name,
    ca.attribute_type as marketplace_type,
    pva.name as storefront_name,
    pva.type as storefront_type
FROM category_attributes ca
FULL OUTER JOIN product_variant_attributes pva 
    ON LOWER(ca.name) = LOWER(pva.name)
WHERE ca.name IS NOT NULL OR pva.name IS NOT NULL
ORDER BY COALESCE(ca.name, pva.name);
```

#### 1.3 –°–æ–∑–¥–∞–Ω–∏–µ –∫–∞—Ä—Ç—ã –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π (–î–µ–Ω—å 3)

**–ó–∞–¥–∞—á–∞**: –ù–∞–π—Ç–∏ –≤—Å–µ –º–µ—Å—Ç–∞ –≤ –∫–æ–¥–µ, –∏—Å–ø–æ–ª—å–∑—É—é—â–∏–µ –∞—Ç—Ä–∏–±—É—Ç—ã

```bash
# Backend –∞–Ω–∞–ª–∏–∑
cd /data/hostel-booking-system/backend
grep -r "CategoryAttribute\|ProductVariantAttribute\|CategoryVariantAttribute" \
  --include="*.go" \
  --exclude-dir=vendor \
  > /tmp/backend_attribute_usage.txt

# Frontend –∞–Ω–∞–ª–∏–∑  
cd /data/hostel-booking-system/frontend/svetu
grep -r "attribute\|Attribute" \
  --include="*.tsx" --include="*.ts" \
  --exclude-dir=node_modules \
  > /tmp/frontend_attribute_usage.txt

# API —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã
cd /data/hostel-booking-system/backend
grep -r "@Router.*attribute" --include="*.go" > /tmp/api_endpoints.txt
```

### –≠–¢–ê–ü 2: –°–æ–∑–¥–∞–Ω–∏–µ —É–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã (–î–Ω–∏ 4-10)

#### 2.1 –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –ë–î (–î–µ–Ω—å 4-5)

**–í–ê–ñ–ù–û**: –ù–æ–≤—ã–µ —Ç–∞–±–ª–∏—Ü—ã —Å–æ–∑–¥–∞—é—Ç—Å—è –ü–ê–†–ê–õ–õ–ï–õ–¨–ù–û —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º, –±–µ–∑ —É–¥–∞–ª–µ–Ω–∏—è —Å—Ç–∞—Ä—ã—Ö!

```sql
-- –ú–∏–≥—Ä–∞—Ü–∏—è: backend/migrations/001_create_unified_attributes.up.sql

-- –£–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ –∞—Ç—Ä–∏–±—É—Ç–æ–≤
CREATE TABLE IF NOT EXISTS unified_attributes (
    id SERIAL PRIMARY KEY,
    code VARCHAR(100) UNIQUE NOT NULL, -- –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∫–æ–¥ –∞—Ç—Ä–∏–±—É—Ç–∞
    name VARCHAR(100) NOT NULL,
    display_name VARCHAR(200) NOT NULL,
    attribute_type VARCHAR(50) NOT NULL CHECK (attribute_type IN (
        'text', 'textarea', 'number', 'boolean', 
        'select', 'multiselect', 'date', 'color', 'size'
    )),
    purpose VARCHAR(20) NOT NULL DEFAULT 'regular' CHECK (purpose IN (
        'regular',    -- –û–±—ã—á–Ω—ã–π –∞—Ç—Ä–∏–±—É—Ç –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏/–ø–æ–∏—Å–∫–∞
        'variant',    -- –í–∞—Ä–∏–∞—Ç–∏–≤–Ω—ã–π –∞—Ç—Ä–∏–±—É—Ç (–≤–ª–∏—è–µ—Ç –Ω–∞ SKU)
        'both'        -- –ú–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –≤ –æ–±–æ–∏—Ö —Å–ª—É—á–∞—è—Ö
    )),
    
    -- –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∞—Ç—Ä–∏–±—É—Ç–∞
    options JSONB DEFAULT '{}',           -- –û–ø—Ü–∏–∏ –¥–ª—è select/multiselect
    validation_rules JSONB DEFAULT '{}',  -- –ü—Ä–∞–≤–∏–ª–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏
    ui_settings JSONB DEFAULT '{}',       -- –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è
    
    -- –§–ª–∞–≥–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
    is_searchable BOOLEAN DEFAULT false,
    is_filterable BOOLEAN DEFAULT false,
    is_required BOOLEAN DEFAULT false,
    affects_stock BOOLEAN DEFAULT false,  -- –î–ª—è –≤–∞—Ä–∏–∞—Ç–∏–≤–Ω—ã—Ö –∞—Ç—Ä–∏–±—É—Ç–æ–≤
    affects_price BOOLEAN DEFAULT false,  -- –î–ª—è –≤–∞—Ä–∏–∞—Ç–∏–≤–Ω—ã—Ö –∞—Ç—Ä–∏–±—É—Ç–æ–≤
    
    -- –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ
    sort_order INTEGER DEFAULT 0,
    is_active BOOLEAN DEFAULT true,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    
    -- –°–≤—è–∑—å —Å–æ —Å—Ç–∞—Ä–æ–π —Å–∏—Å—Ç–µ–º–æ–π (–≤—Ä–µ–º–µ–Ω–Ω–æ, –¥–ª—è –º–∏–≥—Ä–∞—Ü–∏–∏)
    legacy_category_attribute_id INTEGER,
    legacy_product_variant_attribute_id INTEGER
);

-- –°–≤—è–∑—å –∞—Ç—Ä–∏–±—É—Ç–æ–≤ —Å –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º–∏
CREATE TABLE IF NOT EXISTS unified_category_attributes (
    id SERIAL PRIMARY KEY,
    category_id INTEGER NOT NULL REFERENCES marketplace_categories(id) ON DELETE CASCADE,
    attribute_id INTEGER NOT NULL REFERENCES unified_attributes(id) ON DELETE CASCADE,
    
    -- –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
    is_enabled BOOLEAN DEFAULT true,
    is_required BOOLEAN DEFAULT false,
    sort_order INTEGER DEFAULT 0,
    
    -- –ü–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –∞—Ç—Ä–∏–±—É—Ç–∞ –¥–ª—è –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
    category_specific_options JSONB,
    
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    
    UNIQUE(category_id, attribute_id)
);

-- –ó–Ω–∞—á–µ–Ω–∏—è –∞—Ç—Ä–∏–±—É—Ç–æ–≤ (—É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞)
CREATE TABLE IF NOT EXISTS unified_attribute_values (
    id SERIAL PRIMARY KEY,
    entity_type VARCHAR(50) NOT NULL CHECK (entity_type IN (
        'listing',           -- –û–±—ä—è–≤–ª–µ–Ω–∏–µ –º–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å–∞
        'product',           -- –¢–æ–≤–∞—Ä –≤–∏—Ç—Ä–∏–Ω—ã
        'product_variant'    -- –í–∞—Ä–∏–∞–Ω—Ç —Ç–æ–≤–∞—Ä–∞
    )),
    entity_id INTEGER NOT NULL,
    attribute_id INTEGER NOT NULL REFERENCES unified_attributes(id) ON DELETE CASCADE,
    
    -- –ó–Ω–∞—á–µ–Ω–∏—è —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤
    text_value TEXT,
    numeric_value NUMERIC,
    boolean_value BOOLEAN,
    date_value DATE,
    json_value JSONB,
    
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    
    -- –ò–Ω–¥–µ–∫—Å –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –ø–æ–∏—Å–∫–∞
    UNIQUE(entity_type, entity_id, attribute_id)
);

-- –ò–Ω–¥–µ–∫—Å—ã –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
CREATE INDEX idx_unified_attributes_code ON unified_attributes(code);
CREATE INDEX idx_unified_attributes_purpose ON unified_attributes(purpose);
CREATE INDEX idx_unified_attributes_active ON unified_attributes(is_active);

CREATE INDEX idx_unified_category_attributes_category ON unified_category_attributes(category_id);
CREATE INDEX idx_unified_category_attributes_enabled ON unified_category_attributes(is_enabled);

CREATE INDEX idx_unified_attribute_values_entity ON unified_attribute_values(entity_type, entity_id);
CREATE INDEX idx_unified_attribute_values_attribute ON unified_attribute_values(attribute_id);
CREATE INDEX idx_unified_attribute_values_text ON unified_attribute_values(text_value) WHERE text_value IS NOT NULL;
CREATE INDEX idx_unified_attribute_values_numeric ON unified_attribute_values(numeric_value) WHERE numeric_value IS NOT NULL;
```

#### 2.2 –ú–∏–≥—Ä–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö 

**–ö–†–ò–¢–ò–ß–ù–û**: –ú–∏–≥—Ä–∞—Ü–∏—è –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –ë–ï–ó —É–¥–∞–ª–µ–Ω–∏—è —Å—Ç–∞—Ä—ã—Ö –¥–∞–Ω–Ω—ã—Ö!

```sql
-- –ú–∏–≥—Ä–∞—Ü–∏—è: backend/migrations/002_migrate_attributes_data.up.sql

-- –í–ê–ñ–ù–û: –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏—è –¥–ª—è –∞—Ç–æ–º–∞—Ä–Ω–æ—Å—Ç–∏
BEGIN;

-- 1. –ú–∏–≥—Ä–∞—Ü–∏—è –∞—Ç—Ä–∏–±—É—Ç–æ–≤ –∏–∑ category_attributes
INSERT INTO unified_attributes (
    code, name, display_name, attribute_type, purpose,
    options, validation_rules, ui_settings,
    is_searchable, is_filterable, is_required,
    affects_stock, affects_price,
    sort_order, legacy_category_attribute_id
)
SELECT 
    LOWER(REPLACE(name, ' ', '_')) as code,
    name,
    display_name,
    attribute_type,
    CASE 
        WHEN is_variant_compatible = true THEN 'both'
        ELSE 'regular'
    END as purpose,
    options,
    validation_rules,
    COALESCE(ui_settings, '{}'),
    is_searchable,
    is_filterable,
    is_required,
    affects_stock,
    false as affects_price, -- –î–æ–±–∞–≤–∏–º –ø–æ–∑–∂–µ –µ—Å–ª–∏ –Ω—É–∂–Ω–æ
    sort_order,
    id as legacy_category_attribute_id
FROM category_attributes
ON CONFLICT (code) DO UPDATE SET
    legacy_category_attribute_id = EXCLUDED.legacy_category_attribute_id;

-- 2. –ú–∏–≥—Ä–∞—Ü–∏—è –∞—Ç—Ä–∏–±—É—Ç–æ–≤ –∏–∑ product_variant_attributes
INSERT INTO unified_attributes (
    code, name, display_name, attribute_type, purpose,
    options, affects_stock, affects_price,
    legacy_product_variant_attribute_id
)
SELECT 
    LOWER(REPLACE(name, ' ', '_')) as code,
    name,
    name as display_name, -- –£ –Ω–∏—Ö –Ω–µ—Ç display_name
    type as attribute_type,
    'variant' as purpose,
    options,
    affects_stock,
    affects_price,
    id as legacy_product_variant_attribute_id
FROM product_variant_attributes
ON CONFLICT (code) DO UPDATE SET
    purpose = 'both', -- –ï—Å–ª–∏ –∞—Ç—Ä–∏–±—É—Ç —É–∂–µ –µ—Å—Ç—å, –¥–µ–ª–∞–µ–º –µ–≥–æ —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–º
    affects_stock = COALESCE(unified_attributes.affects_stock, EXCLUDED.affects_stock),
    affects_price = COALESCE(unified_attributes.affects_price, EXCLUDED.affects_price),
    legacy_product_variant_attribute_id = EXCLUDED.legacy_product_variant_attribute_id;

-- 3. –ú–∏–≥—Ä–∞—Ü–∏—è —Å–≤—è–∑–µ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–π —Å –∞—Ç—Ä–∏–±—É—Ç–∞–º–∏
INSERT INTO unified_category_attributes (
    category_id, attribute_id, is_enabled, is_required, sort_order
)
SELECT 
    cam.category_id,
    ua.id as attribute_id,
    cam.is_enabled,
    cam.is_required,
    cam.sort_order
FROM category_attribute_mapping cam
JOIN unified_attributes ua ON ua.legacy_category_attribute_id = cam.attribute_id;

-- 4. –ú–∏–≥—Ä–∞—Ü–∏—è –∑–Ω–∞—á–µ–Ω–∏–π –∞—Ç—Ä–∏–±—É—Ç–æ–≤ –æ–±—ä—è–≤–ª–µ–Ω–∏–π
INSERT INTO unified_attribute_values (
    entity_type, entity_id, attribute_id,
    text_value, numeric_value, boolean_value, json_value
)
SELECT 
    'listing' as entity_type,
    lav.listing_id as entity_id,
    ua.id as attribute_id,
    lav.text_value,
    lav.numeric_value,
    lav.boolean_value,
    lav.json_value
FROM listing_attribute_values lav
JOIN unified_attributes ua ON ua.legacy_category_attribute_id = lav.attribute_id;

-- 5. –ü—Ä–æ–≤–µ—Ä–∫–∞ –º–∏–≥—Ä–∞—Ü–∏–∏
DO $$
DECLARE
    old_count INTEGER;
    new_count INTEGER;
BEGIN
    -- –ü—Ä–æ–≤–µ—Ä—è–µ–º –∞—Ç—Ä–∏–±—É—Ç—ã
    SELECT COUNT(*) INTO old_count FROM category_attributes;
    SELECT COUNT(*) INTO new_count FROM unified_attributes WHERE legacy_category_attribute_id IS NOT NULL;
    
    IF old_count != new_count THEN
        RAISE EXCEPTION '–ú–∏–≥—Ä–∞—Ü–∏—è –∞—Ç—Ä–∏–±—É—Ç–æ–≤ –Ω–µ–ø–æ–ª–Ω–∞—è: —Å—Ç–∞—Ä—ã—Ö %, –Ω–æ–≤—ã—Ö %', old_count, new_count;
    END IF;
    
    -- –ü—Ä–æ–≤–µ—Ä—è–µ–º –∑–Ω–∞—á–µ–Ω–∏—è
    SELECT COUNT(*) INTO old_count FROM listing_attribute_values;
    SELECT COUNT(*) INTO new_count FROM unified_attribute_values WHERE entity_type = 'listing';
    
    IF old_count != new_count THEN
        RAISE EXCEPTION '–ú–∏–≥—Ä–∞—Ü–∏—è –∑–Ω–∞—á–µ–Ω–∏–π –Ω–µ–ø–æ–ª–Ω–∞—è: —Å—Ç–∞—Ä—ã—Ö %, –Ω–æ–≤—ã—Ö %', old_count, new_count;
    END IF;
END $$;

COMMIT;
```

#### 2.3 Backend: –°–æ–∑–¥–∞–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–Ω–æ–≥–æ —Å–ª–æ—è 

```go
// backend/internal/services/attributes/unified_service.go

package attributes

import (
    "context"
    "encoding/json"
    "fmt"
    "time"
)

// UnifiedAttribute –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —É–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∞—Ç—Ä–∏–±—É—Ç
type UnifiedAttribute struct {
    ID              int                    `json:"id"`
    Code            string                 `json:"code"`
    Name            string                 `json:"name"`
    DisplayName     string                 `json:"display_name"`
    Type            AttributeType          `json:"type"`
    Purpose         AttributePurpose       `json:"purpose"`
    Options         json.RawMessage        `json:"options,omitempty"`
    ValidationRules json.RawMessage        `json:"validation_rules,omitempty"`
    UISettings      json.RawMessage        `json:"ui_settings,omitempty"`
    IsSearchable    bool                   `json:"is_searchable"`
    IsFilterable    bool                   `json:"is_filterable"`
    IsRequired      bool                   `json:"is_required"`
    AffectsStock    bool                   `json:"affects_stock"`
    AffectsPrice    bool                   `json:"affects_price"`
    SortOrder       int                    `json:"sort_order"`
    Translations    map[string]Translation `json:"translations,omitempty"`
}

// UnifiedAttributeService - —Å–µ—Ä–≤–∏—Å –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —É–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–º–∏ –∞—Ç—Ä–∏–±—É—Ç–∞–º–∏
type UnifiedAttributeService struct {
    db    *sql.DB
    cache CacheService
    
    // –§–ª–∞–≥ –¥–ª—è –ø–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ–π –º–∏–≥—Ä–∞—Ü–∏–∏
    useLegacyFallback bool
}

// GetCategoryAttributes –ø–æ–ª—É—á–∞–µ—Ç –∞—Ç—Ä–∏–±—É—Ç—ã –¥–ª—è –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
// –í–ê–ñ–ù–û: –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç fallback –Ω–∞ —Å—Ç–∞—Ä—É—é —Å–∏—Å—Ç–µ–º—É
func (s *UnifiedAttributeService) GetCategoryAttributes(ctx context.Context, categoryID int) ([]*UnifiedAttribute, error) {
    // 1. –ü—Ä–æ–±—É–µ–º –ø–æ–ª—É—á–∏—Ç—å –∏–∑ –Ω–æ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã
    attributes, err := s.getUnifiedCategoryAttributes(ctx, categoryID)
    if err == nil && len(attributes) > 0 {
        return attributes, nil
    }
    
    // 2. –ï—Å–ª–∏ –≤–∫–ª—é—á–µ–Ω fallback –∏ –Ω–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞ –ø—É—Å—Ç–∞—è - –∏—Å–ø–æ–ª—å–∑—É–µ–º —Å—Ç–∞—Ä—É—é
    if s.useLegacyFallback {
        return s.getLegacyCategoryAttributes(ctx, categoryID)
    }
    
    return attributes, err
}

// SaveAttributeValue —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ –∞—Ç—Ä–∏–±—É—Ç–∞
// –í–ê–ñ–ù–û: –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –≤ –æ–±–µ —Å–∏—Å—Ç–µ–º—ã –¥–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏
func (s *UnifiedAttributeService) SaveAttributeValue(ctx context.Context, entityType string, entityID int, attributeID int, value interface{}) error {
    tx, err := s.db.BeginTx(ctx, nil)
    if err != nil {
        return err
    }
    defer tx.Rollback()
    
    // 1. –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤ –Ω–æ–≤—É—é —Å–∏—Å—Ç–µ–º—É
    if err := s.saveUnifiedValue(tx, entityType, entityID, attributeID, value); err != nil {
        return err
    }
    
    // 2. –ï—Å–ª–∏ –≤–∫–ª—é—á–µ–Ω fallback - –¥—É–±–ª–∏—Ä—É–µ–º –≤ —Å—Ç–∞—Ä—É—é —Å–∏—Å—Ç–µ–º—É
    if s.useLegacyFallback && entityType == "listing" {
        if err := s.saveLegacyValue(tx, entityID, attributeID, value); err != nil {
            // –õ–æ–≥–∏—Ä—É–µ–º –æ—à–∏–±–∫—É, –Ω–æ –Ω–µ –ø—Ä–µ—Ä—ã–≤–∞–µ–º - —Å—Ç–∞—Ä–∞—è —Å–∏—Å—Ç–µ–º–∞ –Ω–µ –∫—Ä–∏—Ç–∏—á–Ω–∞
            log.Printf("Failed to save to legacy system: %v", err)
        }
    }
    
    return tx.Commit()
}
```

#### 2.4 Frontend: –£–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç 

```typescript
// frontend/svetu/src/components/shared/UnifiedAttributeField.tsx

import React, { useMemo, useCallback } from 'react';
import { useTranslations } from 'next-intl';

export interface UnifiedAttribute {
  id: number;
  code: string;
  name: string;
  displayName: string;
  type: 'text' | 'textarea' | 'number' | 'boolean' | 'select' | 'multiselect' | 'date' | 'color' | 'size';
  purpose: 'regular' | 'variant' | 'both';
  options?: any;
  validationRules?: any;
  uiSettings?: any;
  isRequired: boolean;
  translations?: Record<string, any>;
}

interface UnifiedAttributeFieldProps {
  attribute: UnifiedAttribute;
  value: any;
  onChange: (value: any) => void;
  error?: string;
  disabled?: boolean;
  context?: 'listing' | 'product' | 'variant' | 'admin';
}

// –í–ê–ñ–ù–û: –ö–æ–º–ø–æ–Ω–µ–Ω—Ç –æ–±—Ä–∞—Ç–Ω–æ —Å–æ–≤–º–µ—Å—Ç–∏–º —Å–æ —Å—Ç–∞—Ä—ã–º–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞–º–∏ –¥–∞–Ω–Ω—ã—Ö
export const UnifiedAttributeField: React.FC<UnifiedAttributeFieldProps> = ({
  attribute,
  value,
  onChange,
  error,
  disabled = false,
  context = 'listing'
}) => {
  const t = useTranslations('attributes');
  
  // –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Å—Ç–∞—Ä–æ–≥–æ —Ñ–æ—Ä–º–∞—Ç–∞ –∞—Ç—Ä–∏–±—É—Ç–æ–≤ –¥–ª—è –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏
  const normalizedAttribute = useMemo(() => {
    // –ï—Å–ª–∏ —ç—Ç–æ —Å—Ç–∞—Ä—ã–π —Ñ–æ—Ä–º–∞—Ç category_attribute
    if ('attribute_type' in attribute && !('type' in attribute)) {
      return {
        ...attribute,
        type: attribute.attribute_type,
        displayName: attribute.display_name || attribute.name
      };
    }
    return attribute;
  }, [attribute]);
  
  // –†–µ–Ω–¥–µ—Ä –ø–æ–ª—è –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ç–∏–ø–∞
  const renderField = useCallback(() => {
    switch (normalizedAttribute.type) {
      case 'text':
        return (
          <input
            type="text"
            value={value || ''}
            onChange={(e) => onChange(e.target.value)}
            disabled={disabled}
            className="input input-bordered w-full"
            placeholder={t('placeholder.text')}
          />
        );
        
      case 'number':
        return (
          <input
            type="number"
            value={value || ''}
            onChange={(e) => onChange(parseFloat(e.target.value))}
            disabled={disabled}
            className="input input-bordered w-full"
            placeholder={t('placeholder.number')}
          />
        );
        
      case 'select':
        return (
          <select
            value={value || ''}
            onChange={(e) => onChange(e.target.value)}
            disabled={disabled}
            className="select select-bordered w-full"
          >
            <option value="">{t('placeholder.select')}</option>
            {normalizedAttribute.options?.map((option: any) => (
              <option key={option.value} value={option.value}>
                {option.label}
              </option>
            ))}
          </select>
        );
        
      // ... –æ—Å—Ç–∞–ª—å–Ω—ã–µ —Ç–∏–ø—ã –ø–æ–ª–µ–π
      
      default:
        return <div>Unsupported field type: {normalizedAttribute.type}</div>;
    }
  }, [normalizedAttribute, value, onChange, disabled, t]);
  
  return (
    <div className="form-control">
      <label className="label">
        <span className="label-text">
          {normalizedAttribute.displayName}
          {normalizedAttribute.isRequired && <span className="text-error ml-1">*</span>}
        </span>
      </label>
      {renderField()}
      {error && (
        <label className="label">
          <span className="label-text-alt text-error">{error}</span>
        </label>
      )}
    </div>
  );
};
```

### –≠–¢–ê–ü 3: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –≤–∞–ª–∏–¥–∞—Ü–∏—è 

#### 3.1 –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ç–µ—Å—Ç—ã 

```go
// backend/internal/services/attributes/unified_service_test.go

func TestUnifiedAttributeService_DataIntegrity(t *testing.T) {
    // 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ –º–∏–≥—Ä–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö
    t.Run("MigrationCompleteness", func(t *testing.T) {
        // –°—Ä–∞–≤–Ω–∏–≤–∞–µ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø–∏—Å–µ–π –≤ —Å—Ç–∞—Ä–æ–π –∏ –Ω–æ–≤–æ–π —Å–∏—Å—Ç–µ–º–∞—Ö
        oldCount := countOldAttributes()
        newCount := countNewAttributes()
        assert.Equal(t, oldCount, newCount, "–í—Å–µ –∞—Ç—Ä–∏–±—É—Ç—ã –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –º–∏–≥—Ä–∏—Ä–æ–≤–∞–Ω—ã")
    })
    
    // 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏
    t.Run("BackwardCompatibility", func(t *testing.T) {
        // –ü–æ–ª—É—á–∞–µ–º –∞—Ç—Ä–∏–±—É—Ç—ã —á–µ—Ä–µ–∑ —Å—Ç–∞—Ä—ã–π API
        oldAttributes := getAttributesOldWay(categoryID)
        // –ü–æ–ª—É—á–∞–µ–º —á–µ—Ä–µ–∑ –Ω–æ–≤—ã–π API —Å fallback
        newAttributes := service.GetCategoryAttributes(ctx, categoryID)
        
        assert.Equal(t, len(oldAttributes), len(newAttributes))
        // –ü—Ä–æ–≤–µ—Ä—è–µ–º —á—Ç–æ –¥–∞–Ω–Ω—ã–µ –∏–¥–µ–Ω—Ç–∏—á–Ω—ã
    })
    
    // 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –≤ –æ–±–µ —Å–∏—Å—Ç–µ–º—ã
    t.Run("DualSystemSave", func(t *testing.T) {
        // –°–æ—Ö—Ä–∞–Ω—è–µ–º —á–µ—Ä–µ–∑ –Ω–æ–≤—ã–π API
        service.SaveAttributeValue(ctx, "listing", 1, 1, "test")
        
        // –ü—Ä–æ–≤–µ—Ä—è–µ–º —á—Ç–æ —Å–æ—Ö—Ä–∞–Ω–∏–ª–æ—Å—å –≤ –æ–±–µ–∏—Ö —Å–∏—Å—Ç–µ–º–∞—Ö
        newValue := getValueFromNewSystem(1, 1)
        oldValue := getValueFromOldSystem(1, 1)
        
        assert.Equal(t, "test", newValue)
        assert.Equal(t, "test", oldValue)
    })
}
```

#### 3.2 –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ 

```sql
-- –°–∫—Ä–∏–ø—Ç –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
-- –í—ã–ø–æ–ª–Ω–∏—Ç—å –Ω–∞ –∫–æ–ø–∏–∏ –ø—Ä–æ–¥–∞–∫—à–Ω –ë–î

-- 1. –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Å—Ç–∞—Ä–æ–π —Å–∏—Å—Ç–µ–º—ã
EXPLAIN ANALYZE
SELECT ca.*, cam.*, lav.*
FROM category_attributes ca
JOIN category_attribute_mapping cam ON ca.id = cam.attribute_id
LEFT JOIN listing_attribute_values lav ON ca.id = lav.attribute_id
WHERE cam.category_id = 1;

-- 2. –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –Ω–æ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã
EXPLAIN ANALYZE
SELECT ua.*, uca.*, uav.*
FROM unified_attributes ua
JOIN unified_category_attributes uca ON ua.id = uca.attribute_id
LEFT JOIN unified_attribute_values uav ON ua.id = uav.attribute_id
WHERE uca.category_id = 1;

-- 3. –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞ –∏–Ω–¥–µ–∫—Å–æ–≤
SELECT 
    schemaname,
    tablename,
    indexname,
    pg_size_pretty(pg_relation_size(indexrelid)) AS index_size
FROM pg_stat_user_indexes
WHERE tablename IN (
    'category_attributes', 'unified_attributes',
    'category_attribute_mapping', 'unified_category_attributes',
    'listing_attribute_values', 'unified_attribute_values'
)
ORDER BY pg_relation_size(indexrelid) DESC;
```

#### 3.3 –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö 

```bash
#!/bin/bash
# validation_script.sh

echo "=== –í–∞–ª–∏–¥–∞—Ü–∏—è —É–Ω–∏—Ñ–∏–∫–∞—Ü–∏–∏ –∞—Ç—Ä–∏–±—É—Ç–æ–≤ ==="

# 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç–∏ –¥–∞–Ω–Ω—ã—Ö
psql $DATABASE_URL <<EOF
-- –ü—Ä–æ–≤–µ—Ä–∫–∞ —á—Ç–æ –≤—Å–µ —Å—Ç–∞—Ä—ã–µ –∞—Ç—Ä–∏–±—É—Ç—ã –º–∏–≥—Ä–∏—Ä–æ–≤–∞–Ω—ã
SELECT 
    '–ù–µ–º–∏–≥—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ category_attributes' as check_name,
    COUNT(*) as count
FROM category_attributes ca
WHERE NOT EXISTS (
    SELECT 1 FROM unified_attributes ua 
    WHERE ua.legacy_category_attribute_id = ca.id
);

-- –ü—Ä–æ–≤–µ—Ä–∫–∞ —á—Ç–æ –≤—Å–µ –∑–Ω–∞—á–µ–Ω–∏—è –º–∏–≥—Ä–∏—Ä–æ–≤–∞–Ω—ã
SELECT 
    '–ù–µ–º–∏–≥—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ listing_attribute_values' as check_name,
    COUNT(*) as count
FROM listing_attribute_values lav
WHERE NOT EXISTS (
    SELECT 1 FROM unified_attribute_values uav
    JOIN unified_attributes ua ON uav.attribute_id = ua.id
    WHERE ua.legacy_category_attribute_id = lav.attribute_id
    AND uav.entity_id = lav.listing_id
    AND uav.entity_type = 'listing'
);

-- –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤
SELECT 
    '–î—É–±–ª–∏–∫–∞—Ç—ã –≤ unified_attributes' as check_name,
    COUNT(*) - COUNT(DISTINCT code) as duplicates
FROM unified_attributes;
EOF

# 2. –¢–µ—Å—Ç API endpoints
echo "–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ API..."

# –°—Ç–∞—Ä—ã–π —ç–Ω–¥–ø–æ–∏–Ω—Ç
curl -s http://localhost:3000/api/v1/marketplace/categories/1/attributes > /tmp/old_api.json

# –ù–æ–≤—ã–π —ç–Ω–¥–ø–æ–∏–Ω—Ç (–µ—Å–ª–∏ —Å–æ–∑–¥–∞–Ω)
curl -s http://localhost:3000/api/v2/categories/1/attributes > /tmp/new_api.json

# –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
if [ -f /tmp/new_api.json ]; then
    python3 -c "
import json
old = json.load(open('/tmp/old_api.json'))
new = json.load(open('/tmp/new_api.json'))
print('API —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å:', 'OK' if len(old['data']) == len(new['data']) else 'FAIL')
"
fi

echo "=== –í–∞–ª–∏–¥–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞ ==="
```

### –≠–¢–ê–ü 4: –ü–æ—Å—Ç–µ–ø–µ–Ω–Ω—ã–π –ø–µ—Ä–µ—Ö–æ–¥ 

#### 4.1 Feature flags –¥–ª—è –∫–æ–Ω—Ç—Ä–æ–ª—è 

```go
// backend/internal/config/feature_flags.go

type FeatureFlags struct {
    // –§–ª–∞–≥–∏ –¥–ª—è –ø–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ–≥–æ –ø–µ—Ä–µ—Ö–æ–¥–∞
    UseUnifiedAttributes      bool `env:"USE_UNIFIED_ATTRIBUTES" default:"false"`
    UnifiedAttributesFallback bool `env:"UNIFIED_ATTRIBUTES_FALLBACK" default:"true"`
    DualWriteAttributes       bool `env:"DUAL_WRITE_ATTRIBUTES" default:"true"`
    
    // –ü—Ä–æ—Ü–µ–Ω—Ç —Ç—Ä–∞—Ñ–∏–∫–∞ –Ω–∞ –Ω–æ–≤—É—é —Å–∏—Å—Ç–µ–º—É (–¥–ª—è A/B —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è)
    UnifiedAttributesPercent int `env:"UNIFIED_ATTRIBUTES_PERCENT" default:"0"`
}

// –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ–ª–∂–µ–Ω –ª–∏ –∑–∞–ø—Ä–æ—Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –Ω–æ–≤—É—é —Å–∏—Å—Ç–µ–º—É
func (ff *FeatureFlags) ShouldUseUnifiedAttributes(userID int) bool {
    if !ff.UseUnifiedAttributes {
        return false
    }
    
    // A/B —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ –ø—Ä–æ—Ü–µ–Ω—Ç—É
    if ff.UnifiedAttributesPercent < 100 {
        hash := userID % 100
        return hash < ff.UnifiedAttributesPercent
    }
    
    return true
}
```

#### 4.2 –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –º–µ—Ç—Ä–∏–∫–∏ 

```go
// backend/internal/metrics/attributes.go

var (
    attributeSystemCalls = prometheus.NewCounterVec(
        prometheus.CounterOpts{
            Name: "attribute_system_calls_total",
            Help: "Total number of calls to attribute systems",
        },
        []string{"system", "method", "status"},
    )
    
    attributeSystemLatency = prometheus.NewHistogramVec(
        prometheus.HistogramOpts{
            Name: "attribute_system_latency_seconds",
            Help: "Latency of attribute system calls",
        },
        []string{"system", "method"},
    )
    
    dataSyncErrors = prometheus.NewCounter(
        prometheus.CounterOpts{
            Name: "attribute_data_sync_errors_total",
            Help: "Total number of data sync errors between systems",
        },
    )
)

// –û–±–µ—Ä—Ç–∫–∞ –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –º–µ—Ç—Ä–∏–∫
func trackAttributeOperation(system, method string, fn func() error) error {
    start := time.Now()
    err := fn()
    
    status := "success"
    if err != nil {
        status = "error"
    }
    
    attributeSystemCalls.WithLabelValues(system, method, status).Inc()
    attributeSystemLatency.WithLabelValues(system, method).Observe(time.Since(start).Seconds())
    
    return err
}
```

#### 4.3 –ü–æ—ç—Ç–∞–ø–Ω–æ–µ –≤–∫–ª—é—á–µ–Ω–∏–µ 

```yaml
# –ü–ª–∞–Ω –ø–æ—ç—Ç–∞–ø–Ω–æ–≥–æ –≤–∫–ª—é—á–µ–Ω–∏—è

# –ù–µ–¥–µ–ª—è 1: –¢–µ—Å—Ç–æ–≤–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ
- USE_UNIFIED_ATTRIBUTES: true
- UNIFIED_ATTRIBUTES_FALLBACK: true
- DUAL_WRITE_ATTRIBUTES: true
- UNIFIED_ATTRIBUTES_PERCENT: 100

# –ù–µ–¥–µ–ª—è 2: 10% –ø—Ä–æ–¥–∞–∫—à–Ω —Ç—Ä–∞—Ñ–∏–∫–∞
- USE_UNIFIED_ATTRIBUTES: true
- UNIFIED_ATTRIBUTES_FALLBACK: true
- DUAL_WRITE_ATTRIBUTES: true
- UNIFIED_ATTRIBUTES_PERCENT: 10

# –ù–µ–¥–µ–ª—è 3: 50% –ø—Ä–æ–¥–∞–∫—à–Ω —Ç—Ä–∞—Ñ–∏–∫–∞
- USE_UNIFIED_ATTRIBUTES: true
- UNIFIED_ATTRIBUTES_FALLBACK: true
- DUAL_WRITE_ATTRIBUTES: true
- UNIFIED_ATTRIBUTES_PERCENT: 50

# –ù–µ–¥–µ–ª—è 4: 100% –ø—Ä–æ–¥–∞–∫—à–Ω —Ç—Ä–∞—Ñ–∏–∫–∞
- USE_UNIFIED_ATTRIBUTES: true
- UNIFIED_ATTRIBUTES_FALLBACK: true
- DUAL_WRITE_ATTRIBUTES: true
- UNIFIED_ATTRIBUTES_PERCENT: 100

# –ü–æ—Å–ª–µ —Å—Ç–∞–±–∏–ª–∏–∑–∞—Ü–∏–∏: –û—Ç–∫–ª—é—á–µ–Ω–∏–µ —Å—Ç–∞—Ä–æ–π —Å–∏—Å—Ç–µ–º—ã
- USE_UNIFIED_ATTRIBUTES: true
- UNIFIED_ATTRIBUTES_FALLBACK: false
- DUAL_WRITE_ATTRIBUTES: false
- UNIFIED_ATTRIBUTES_PERCENT: 100
```

### –≠–¢–ê–ü 5: –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ –∏ –æ—á–∏—Å—Ç–∫–∞ 

#### 5.1 –§–∏–Ω–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ 

```sql
-- –§–∏–Ω–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ–¥ –æ—Ç–∫–ª—é—á–µ–Ω–∏–µ–º —Å—Ç–∞—Ä–æ–π —Å–∏—Å—Ç–µ–º—ã

-- 1. –°–≤–µ—Ä–∫–∞ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∑–∞–ø–∏—Å–µ–π
WITH comparison AS (
    SELECT 
        (SELECT COUNT(*) FROM category_attributes) as old_attributes,
        (SELECT COUNT(*) FROM unified_attributes WHERE legacy_category_attribute_id IS NOT NULL) as new_attributes,
        (SELECT COUNT(*) FROM listing_attribute_values) as old_values,
        (SELECT COUNT(*) FROM unified_attribute_values WHERE entity_type = 'listing') as new_values
)
SELECT 
    CASE 
        WHEN old_attributes = new_attributes AND old_values = new_values THEN 'OK'
        ELSE 'FAIL'
    END as migration_status,
    *
FROM comparison;

-- 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–∫—Ç–∏–≤–Ω—ã—Ö —Å–≤—è–∑–µ–π
SELECT 
    '–ê–∫—Ç–∏–≤–Ω—ã–µ foreign keys –Ω–∞ —Å—Ç–∞—Ä—ã–µ —Ç–∞–±–ª–∏—Ü—ã' as check_name,
    conname as constraint_name,
    conrelid::regclass as table_name,
    confrelid::regclass as referenced_table
FROM pg_constraint
WHERE confrelid IN (
    'category_attributes'::regclass,
    'category_attribute_mapping'::regclass,
    'listing_attribute_values'::regclass
)
AND conrelid NOT IN (
    'unified_attributes'::regclass,
    'unified_category_attributes'::regclass,
    'unified_attribute_values'::regclass
);
```

#### 5.2 –û—Ç–∫–ª—é—á–µ–Ω–∏–µ —Å—Ç–∞—Ä–æ–π —Å–∏—Å—Ç–µ–º—ã 

```go
// backend/internal/handlers/attributes_migration.go

// MigrationStatusHandler - —ç–Ω–¥–ø–æ–∏–Ω—Ç –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å—Ç–∞—Ç—É—Å–∞ –º–∏–≥—Ä–∞—Ü–∏–∏
func MigrationStatusHandler(c *fiber.Ctx) error {
    status := CheckMigrationStatus()
    
    return c.JSON(fiber.Map{
        "old_system_active": config.FeatureFlags.UnifiedAttributesFallback,
        "new_system_active": config.FeatureFlags.UseUnifiedAttributes,
        "dual_write": config.FeatureFlags.DualWriteAttributes,
        "traffic_percent": config.FeatureFlags.UnifiedAttributesPercent,
        "data_sync_status": status,
        "ready_for_cleanup": status.IsFullyMigrated && !status.HasActiveConnections,
    })
}
```

#### 5.3 –ê—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ç–∞—Ä—ã—Ö —Ç–∞–±–ª–∏—Ü 

```sql
-- –ú–∏–≥—Ä–∞—Ü–∏—è: backend/migrations/999_archive_old_attributes.up.sql
-- –í–´–ü–û–õ–ù–Ø–¢–¨ –¢–û–õ–¨–ö–û –ü–û–°–õ–ï –ü–û–õ–ù–û–ô –ü–†–û–í–ï–†–ö–ò!

BEGIN;

-- 1. –°–æ–∑–¥–∞–Ω–∏–µ –∞—Ä—Ö–∏–≤–Ω–æ–π —Å—Ö–µ–º—ã
CREATE SCHEMA IF NOT EXISTS archive;

-- 2. –ü–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ —Å—Ç–∞—Ä—ã—Ö —Ç–∞–±–ª–∏—Ü –≤ –∞—Ä—Ö–∏–≤ (–ù–ï –£–î–ê–õ–ï–ù–ò–ï!)
ALTER TABLE category_attributes SET SCHEMA archive;
ALTER TABLE category_attribute_mapping SET SCHEMA archive;
ALTER TABLE listing_attribute_values SET SCHEMA archive;
ALTER TABLE product_variant_attributes SET SCHEMA archive;
ALTER TABLE storefront_product_attributes SET SCHEMA archive;
ALTER TABLE product_variant_attribute_values SET SCHEMA archive;
ALTER TABLE category_variant_attributes SET SCHEMA archive;
ALTER TABLE variant_attribute_mappings SET SCHEMA archive;

-- 3. –°–æ–∑–¥–∞–Ω–∏–µ view –¥–ª—è –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ (–Ω–∞ —Å–ª—É—á–∞–π —ç–∫—Å—Ç—Ä–µ–Ω–Ω–æ–≥–æ –æ—Ç–∫–∞—Ç–∞)
CREATE VIEW category_attributes AS
SELECT 
    ua.id,
    ua.name,
    ua.display_name,
    ua.attribute_type,
    ua.options,
    ua.validation_rules,
    ua.is_searchable,
    ua.is_filterable,
    ua.is_required,
    CASE WHEN ua.purpose IN ('variant', 'both') THEN true ELSE false END as is_variant_compatible,
    ua.affects_stock,
    ua.sort_order
FROM unified_attributes ua
WHERE ua.legacy_category_attribute_id IS NOT NULL;

-- 4. –£–¥–∞–ª–µ–Ω–∏–µ legacy –ø–æ–ª–µ–π –∏–∑ –Ω–æ–≤—ã—Ö —Ç–∞–±–ª–∏—Ü (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –ø–æ—Å–ª–µ –º–µ—Å—è—Ü–∞ —Å—Ç–∞–±–∏–ª—å–Ω–æ–π —Ä–∞–±–æ—Ç—ã)
-- ALTER TABLE unified_attributes DROP COLUMN legacy_category_attribute_id;
-- ALTER TABLE unified_attributes DROP COLUMN legacy_product_variant_attribute_id;

COMMIT;
```

---

## üìä –ö—Ä–∏—Ç–µ—Ä–∏–∏ —É—Å–ø–µ—à–Ω–æ–≥–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

### –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –∫—Ä–∏—Ç–µ—Ä–∏–∏:
1. ‚úÖ **–ù—É–ª–µ–≤–∞—è –ø–æ—Ç–µ—Ä—è –¥–∞–Ω–Ω—ã—Ö** - –≤—Å–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –∞—Ç—Ä–∏–±—É—Ç—ã –∏ –∏—Ö –∑–Ω–∞—á–µ–Ω–∏—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã
2. ‚úÖ **–ü–æ–ª–Ω–∞—è –æ–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å** - —Å—Ç–∞—Ä—ã–µ API –ø—Ä–æ–¥–æ–ª–∂–∞—é—Ç —Ä–∞–±–æ—Ç–∞—Ç—å
3. ‚úÖ **–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –æ—Ç–∫–∞—Ç–∞** - –≤ –ª—é–±–æ–π –º–æ–º–µ–Ω—Ç –º–æ–∂–Ω–æ –≤–µ—Ä–Ω—É—Ç—å—Å—è –∫ —Å—Ç–∞—Ä–æ–π —Å–∏—Å—Ç–µ–º–µ
4. ‚úÖ **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –Ω–µ —É—Ö—É–¥—à–∏–ª–∞—Å—å** - –≤—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞ API <= —Ç–µ–∫—É—â–µ–≥–æ
5. ‚úÖ **–í—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç** - unit, integration, e2e —Ç–µ—Å—Ç—ã –∑–µ–ª–µ–Ω—ã–µ

### –¶–µ–ª–µ–≤—ã–µ –º–µ—Ç—Ä–∏–∫–∏ –ø–æ—Å–ª–µ —É–Ω–∏—Ñ–∏–∫–∞—Ü–∏–∏:
- üìâ –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–∞–±–ª–∏—Ü: —Å 14 –¥–æ 3-4
- üìâ –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–æ–¥: -70% (~1800 —Å—Ç—Ä–æ–∫)
- üìâ –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ SQL –∑–∞–ø—Ä–æ—Å–æ–≤: -50%
- ‚ö° –í—Ä–µ–º—è –∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç—Ä–∞–Ω–∏—Ü —Å –∞—Ç—Ä–∏–±—É—Ç–∞–º–∏: -30%
- üíæ Cache hit rate: >80%

---

## ‚ö†Ô∏è –†–∏—Å–∫–∏ –∏ –ø–ª–∞–Ω –º–∏—Ç–∏–≥–∞—Ü–∏–∏

### –†–∏—Å–∫ 1: –ü–æ—Ç–µ—Ä—è –¥–∞–Ω–Ω—ã—Ö –ø—Ä–∏ –º–∏–≥—Ä–∞—Ü–∏–∏
**–ú–∏—Ç–∏–≥–∞—Ü–∏—è:**
- –ü–æ–ª–Ω—ã–π –±—ç–∫–∞–ø –ø–µ—Ä–µ–¥ –∫–∞–∂–¥—ã–º —ç—Ç–∞–ø–æ–º
- –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç–∏ –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–π –º–∏–≥—Ä–∞—Ü–∏–∏
- –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–æ–Ω–Ω–æ—Å—Ç—å –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
- –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –æ—Ç–∫–∞—Ç–∞ –º–∏–≥—Ä–∞—Ü–∏–π

### –†–∏—Å–∫ 2: –ù–µ—Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º –∫–æ–¥–æ–º
**–ú–∏—Ç–∏–≥–∞—Ü–∏—è:**
- Fallback –Ω–∞ —Å—Ç–∞—Ä—É—é —Å–∏—Å—Ç–µ–º—É
- Dual-write –≤ –æ–±–µ —Å–∏—Å—Ç–µ–º—ã
- –ü–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ–µ –≤–∫–ª—é—á–µ–Ω–∏–µ —á–µ—Ä–µ–∑ feature flags
- A/B —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –†–∏—Å–∫ 3: –ü—Ä–æ–±–ª–µ–º—ã –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
**–ú–∏—Ç–∏–≥–∞—Ü–∏—è:**
- –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ –∫–æ–ø–∏–∏ –ø—Ä–æ–¥–∞–∫—à–Ω –¥–∞–Ω–Ω—ã—Ö
- –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –º–µ—Ç—Ä–∏–∫ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤ –∏ –∏–Ω–¥–µ–∫—Å–æ–≤
- –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ –≤—Å–µ—Ö —É—Ä–æ–≤–Ω—è—Ö

### –†–∏—Å–∫ 4: –û—à–∏–±–∫–∏ –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ
**–ú–∏—Ç–∏–≥–∞—Ü–∏—è:**
- –ü–æ—ç—Ç–∞–ø–Ω—ã–π rollout (10% -> 50% -> 100%)
- –î–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
- –ê–ª–µ—Ä—Ç—ã –Ω–∞ –∞–Ω–æ–º–∞–ª–∏–∏ –≤ –º–µ—Ç—Ä–∏–∫–∞—Ö
- –ì–æ—Ç–æ–≤—ã–π –ø–ª–∞–Ω –æ—Ç–∫–∞—Ç–∞

---

## üìù –ß–µ–∫-–ª–∏—Å—Ç –¥–ª—è –∫–æ–Ω—Ç—Ä–æ–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

### –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞:
- [ ] –°–æ–∑–¥–∞–Ω –ø–æ–ª–Ω—ã–π –±—ç–∫–∞–ø –≤—Å–µ—Ö —Ç–∞–±–ª–∏—Ü –∞—Ç—Ä–∏–±—É—Ç–æ–≤
- [ ] –ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∞—Ç—Ä–∏–±—É—Ç–æ–≤ –≤ –∫–æ–¥–µ
- [ ] –°–æ—Å—Ç–∞–≤–ª–µ–Ω–∞ –∫–∞—Ä—Ç–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
- [ ] –ù–∞—Å—Ç—Ä–æ–µ–Ω —Ç–µ—Å—Ç–æ–≤—ã–π —Å—Ç–µ–Ω–¥ —Å –∫–æ–ø–∏–µ–π –ø—Ä–æ–¥–∞–∫—à–Ω –¥–∞–Ω–Ω—ã—Ö

### –†–µ–∞–ª–∏–∑–∞—Ü–∏—è:
- [ ] –°–æ–∑–¥–∞–Ω—ã –Ω–æ–≤—ã–µ —Ç–∞–±–ª–∏—Ü—ã –ë–î (–±–µ–∑ —É–¥–∞–ª–µ–Ω–∏—è —Å—Ç–∞—Ä—ã—Ö)
- [ ] –ù–∞–ø–∏—Å–∞–Ω—ã –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã –º–∏–≥—Ä–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω —É–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Å–µ—Ä–≤–∏—Å —Å fallback
- [ ] –°–æ–∑–¥–∞–Ω —É–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–π frontend –∫–æ–º–ø–æ–Ω–µ–Ω—Ç
- [ ] –ù–∞–ø–∏—Å–∞–Ω—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ç–µ—Å—Ç—ã

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:
- [ ] –ü—Ä–æ–π–¥–µ–Ω—ã –≤—Å–µ unit —Ç–µ—Å—Ç—ã
- [ ] –ü—Ä–æ–π–¥–µ–Ω—ã integration —Ç–µ—Å—Ç—ã
- [ ] –ü—Ä–æ–≤–µ—Ä–µ–Ω–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
- [ ] –í–∞–ª–∏–¥–∏—Ä–æ–≤–∞–Ω–∞ —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∞ –æ–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å

### –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ:
- [ ] –ù–∞—Å—Ç—Ä–æ–µ–Ω—ã feature flags
- [ ] –†–∞–∑–≤–µ—Ä–Ω—É—Ç–æ –Ω–∞ —Ç–µ—Å—Ç–æ–≤–æ–º –æ–∫—Ä—É–∂–µ–Ω–∏–∏
- [ ] –í–∫–ª—é—á–µ–Ω–æ –¥–ª—è 10% —Ç—Ä–∞—Ñ–∏–∫–∞
- [ ] –í–∫–ª—é—á–µ–Ω–æ –¥–ª—è 50% —Ç—Ä–∞—Ñ–∏–∫–∞
- [ ] –í–∫–ª—é—á–µ–Ω–æ –¥–ª—è 100% —Ç—Ä–∞—Ñ–∏–∫–∞
- [ ] –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å—Ç–∞–±–∏–ª–µ–Ω 48 —á–∞—Å–æ–≤

### –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ:
- [ ] –û—Ç–∫–ª—é—á–µ–Ω fallback –Ω–∞ —Å—Ç–∞—Ä—É—é —Å–∏—Å—Ç–µ–º—É
- [ ] –û—Ç–∫–ª—é—á–µ–Ω dual-write
- [ ] –ê—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞–Ω—ã —Å—Ç–∞—Ä—ã–µ —Ç–∞–±–ª–∏—Ü—ã
- [ ] –û–±–Ω–æ–≤–ª–µ–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- [ ] –ü—Ä–æ–≤–µ–¥–µ–Ω —Ä–µ—Ç—Ä–æ—Å–ø–µ–∫—Ç–∏–≤–Ω—ã–π –∞–Ω–∞–ª–∏–∑

---

## üö® –ö–æ–º–∞–Ω–¥–∞ —ç–∫—Å—Ç—Ä–µ–Ω–Ω–æ–≥–æ –æ—Ç–∫–∞—Ç–∞

–í —Å–ª—É—á–∞–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –ø—Ä–æ–±–ª–µ–º –≤—ã–ø–æ–ª–Ω–∏—Ç—å:

```bash
#!/bin/bash
# emergency_rollback.sh

echo "‚ö†Ô∏è –≠–ö–°–¢–†–ï–ù–ù–´–ô –û–¢–ö–ê–¢ –°–ò–°–¢–ï–ú–´ –ê–¢–†–ò–ë–£–¢–û–í"

# 1. –û—Ç–∫–ª—é—á–µ–Ω–∏–µ –Ω–æ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã
export USE_UNIFIED_ATTRIBUTES=false
export UNIFIED_ATTRIBUTES_FALLBACK=true
export DUAL_WRITE_ATTRIBUTES=false

# 2. –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ —Å–µ—Ä–≤–∏—Å–æ–≤
systemctl restart backend-api

# 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏
curl http://localhost:3000/health

# 4. –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–∑ –±—ç–∫–∞–ø–∞ –µ—Å–ª–∏ –Ω—É–∂–Ω–æ
# psql $DATABASE_URL < /data/backups/attribute_unification_$(date +%Y%m%d)/attributes_backup.sql

echo "‚úÖ –û—Ç–∫–∞—Ç –∑–∞–≤–µ—Ä—à–µ–Ω"
```

---

## üìû –ö–æ–Ω—Ç–∞–∫—Ç—ã –¥–ª—è —ç—Å–∫–∞–ª–∞—Ü–∏–∏

–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –ø—Ä–æ–±–ª–µ–º:
1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏: `/var/log/backend/attributes.log`
2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –º–µ—Ç—Ä–∏–∫–∏: Grafana Dashboard "Attribute System"
3. –í—ã–ø–æ–ª–Ω–∏—Ç—å –æ—Ç–∫–∞—Ç –µ—Å–ª–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ
4. –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–±–ª–µ–º—É –≤ `/docs/incidents/`

---

**–ê–≤—Ç–æ—Ä –¢–ó**: System Architect  
**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è**: 02.09.2025  
**–í–µ—Ä—Å–∏—è**: 1.2.0  
**–°—Ç–∞—Ç—É—Å**: –í –ø—Ä–æ—Ü–µ—Å—Å–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è (–î–µ–Ω—å 12 –∏–∑ 30)

---

## üìà –ê–ö–¢–£–ê–õ–¨–ù–´–ô –°–¢–ê–¢–£–° –í–´–ü–û–õ–ù–ï–ù–ò–Ø

**–î–∞—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è**: 03.09.2025  
**–ü—Ä–æ–≥—Ä–µ—Å—Å**: –î–µ–Ω—å 12 –∏–∑ 30 (40% –≤—Ä–µ–º–µ–Ω–∏)

### ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–æ:

#### –≠—Ç–∞–ø 1: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∏ –∞–Ω–∞–ª–∏–∑ (–î–Ω–∏ 1-3) - ‚úÖ –ó–ê–í–ï–†–®–ï–ù–û
- ‚úÖ –°–æ–∑–¥–∞–Ω –ø–æ–ª–Ω—ã–π –±—ç–∫–∞–ø –≤—Å–µ—Ö —Ç–∞–±–ª–∏—Ü –∞—Ç—Ä–∏–±—É—Ç–æ–≤
- ‚úÖ –ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∞—Ç—Ä–∏–±—É—Ç–æ–≤ (85 –∞—Ç—Ä–∏–±—É—Ç–æ–≤, 611 —Å–≤—è–∑–µ–π, 15 –∑–Ω–∞—á–µ–Ω–∏–π)
- ‚úÖ –°–æ—Å—Ç–∞–≤–ª–µ–Ω–∞ –∫–∞—Ä—Ç–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
- ‚úÖ –°–æ–∑–¥–∞–Ω –ø–ª–∞–Ω –º–∏–≥—Ä–∞—Ü–∏–∏

#### –≠—Ç–∞–ø 2: Backend (–î–Ω–∏ 2-4) - ‚úÖ –ó–ê–í–ï–†–®–ï–ù–û
- ‚úÖ –°–æ–∑–¥–∞–Ω—ã –Ω–æ–≤—ã–µ —Ç–∞–±–ª–∏—Ü—ã –ë–î (unified_attributes, unified_category_attributes, unified_attribute_values)
- ‚úÖ –ù–∞–ø–∏—Å–∞–Ω—ã –º–∏–≥—Ä–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö (000034, 000035)
- ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω —É–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Å–µ—Ä–≤–∏—Å —Å fallback
- ‚úÖ –°–æ–∑–¥–∞–Ω API v2 –¥–ª—è –Ω–æ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ 15 —Ç–∏–ø–æ–≤ –∞—Ç—Ä–∏–±—É—Ç–æ–≤

#### –≠—Ç–∞–ø 3: Frontend (–î–Ω–∏ 5-7) - ‚úÖ –ó–ê–í–ï–†–®–ï–ù–û
- ‚úÖ –°–æ–∑–¥–∞–Ω UnifiedAttributeField –∫–æ–º–ø–æ–Ω–µ–Ω—Ç (–î–µ–Ω—å 6)
- ‚úÖ –°–æ–∑–¥–∞–Ω unifiedAttributeService (–î–µ–Ω—å 6)
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω UnifiedAttributesStep (–î–µ–Ω—å 7)
- ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ —Å–∏—Å—Ç–µ–º–∞ feature flags (–î–µ–Ω—å 7)
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Å TTL 5 –º–∏–Ω—É—Ç

#### –≠—Ç–∞–ø 4: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (–î–Ω–∏ 8-10) - ‚úÖ –ó–ê–í–ï–†–®–ï–ù–û
- ‚úÖ Unit —Ç–µ—Å—Ç—ã –¥–ª—è UnifiedAttributeField (~95% –ø–æ–∫—Ä—ã—Ç–∏–µ)
- ‚úÖ Unit —Ç–µ—Å—Ç—ã –¥–ª—è unifiedAttributeService (~90% –ø–æ–∫—Ä—ã—Ç–∏–µ)
- ‚úÖ –°–∫—Ä–∏–ø—Ç –Ω–∞–≥—Ä—É–∑–æ—á–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è (Go)
- ‚úÖ –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è feature flags (.env.test)
- ‚úÖ –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é —Å–æ–∑–¥–∞–Ω–æ
- ‚úÖ E2E —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —É—Å–ø–µ—à–Ω–æ –ø—Ä–æ–π–¥–µ–Ω–æ (–î–µ–Ω—å 9)
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–æ (–î–µ–Ω—å 10)
- ‚úÖ Dual-write –º–µ—Ö–∞–Ω–∏–∑–º –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω
- ‚úÖ Fallback —Å–∏—Å—Ç–µ–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

#### –≠—Ç–∞–ø 5: –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –º–µ—Ç—Ä–∏–∫–∏ (–î–µ–Ω—å 11) - ‚úÖ –ó–ê–í–ï–†–®–ï–ù–û
- ‚úÖ Prometheus –º–µ—Ç—Ä–∏–∫–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã (20+ –º–µ—Ç—Ä–∏–∫)
- ‚úÖ Health check endpoints —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã (/health/live, /health/ready)
- ‚úÖ Grafana dashboard —Å–æ–∑–¥–∞–Ω (12+ –ø–∞–Ω–µ–ª–µ–π)
- ‚úÖ Alert rules –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã (9 –ø—Ä–∞–≤–∏–ª)
- ‚úÖ Feature flags –º–µ—Ç—Ä–∏–∫–∏ –æ—Ç—Å–ª–µ–∂–∏–≤–∞—é—Ç—Å—è

#### –≠—Ç–∞–ø 6: CI/CD Pipeline (–î–µ–Ω—å 12) - ‚úÖ –ó–ê–í–ï–†–®–ï–ù–û
- ‚úÖ GitHub Actions workflow —Å–æ–∑–¥–∞–Ω
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ç–µ—Å—Ç—ã –Ω–∞ PR –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã
- ‚úÖ Load testing —Å–∫—Ä–∏–ø—Ç—ã —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã
- ‚úÖ Validation framework –Ω–∞—Å—Ç—Ä–æ–µ–Ω

#### –≠—Ç–∞–ø 7: Production –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞ (–î–Ω–∏ 13-14) - ‚úÖ –ó–ê–í–ï–†–®–ï–ù–û
- ‚úÖ Blue-green deployment –Ω–∞—Å—Ç—Ä–æ–µ–Ω
- ‚úÖ Canary release automation –≥–æ—Ç–æ–≤–∞
- ‚úÖ Production runbook —Å–æ–∑–¥–∞–Ω
- ‚úÖ Monitoring dashboards –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã

#### –≠—Ç–∞–ø 8: Production deployment (–î–µ–Ω—å 15) - üöÄ –í –ü–†–û–¶–ï–°–°–ï
- ‚úÖ Deployment —Å–∫—Ä–∏–ø—Ç—ã —Å–æ–∑–¥–∞–Ω—ã
- ‚úÖ Validation framework –≥–æ—Ç–æ–≤
- üîÑ Production —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è
- ‚è∞ Post-deployment –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
- ‚úÖ k6 load tests —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã
- ‚úÖ Dual-write validation scripts
- ‚úÖ Fallback testing scripts
- ‚úÖ Migration integrity checks

### üîÑ –í –ø—Ä–æ—Ü–µ—Å—Å–µ (–î–µ–Ω—å 13-15):

#### –î–Ω–∏ 13-15: Production —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ
- ‚è≥ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ production –æ–∫—Ä—É–∂–µ–Ω–∏—è
- ‚è≥ Blue-green deployment
- ‚è≥ Rollback –º–µ—Ö–∞–Ω–∏–∑–º—ã
- ‚è≥ Production –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
- ‚è≥ Graceful migration

### üìä –ú–µ—Ç—Ä–∏–∫–∏ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞:

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –ü–ª–∞–Ω | –§–∞–∫—Ç | –°—Ç–∞—Ç—É—Å |
|-----------|------|------|--------|
| Backend | 100% | 100% | ‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–æ |
| Frontend | 100% | 100% | ‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–æ |
| –ú–∏–≥—Ä–∞—Ü–∏—è –ë–î | 100% | 100% | ‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–æ |
| –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ | 100% | 100% | ‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–æ |
| –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ | 100% | 100% | ‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–æ |
| CI/CD | 100% | 100% | ‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–æ |
| Production rollout | 100% | 0% | üîÑ –í –ø—Ä–æ—Ü–µ—Å—Å–µ |

### üìã –ß–µ–∫-–ª–∏—Å—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:

#### –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞:
- [x] –°–æ–∑–¥–∞–Ω –ø–æ–ª–Ω—ã–π –±—ç–∫–∞–ø –≤—Å–µ—Ö —Ç–∞–±–ª–∏—Ü –∞—Ç—Ä–∏–±—É—Ç–æ–≤
- [x] –ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∞—Ç—Ä–∏–±—É—Ç–æ–≤ –≤ –∫–æ–¥–µ
- [x] –°–æ—Å—Ç–∞–≤–ª–µ–Ω–∞ –∫–∞—Ä—Ç–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
- [x] –ù–∞—Å—Ç—Ä–æ–µ–Ω —Ç–µ—Å—Ç–æ–≤—ã–π —Å—Ç–µ–Ω–¥ —Å –∫–æ–ø–∏–µ–π –ø—Ä–æ–¥–∞–∫—à–Ω –¥–∞–Ω–Ω—ã—Ö

#### –†–µ–∞–ª–∏–∑–∞—Ü–∏—è:
- [x] –°–æ–∑–¥–∞–Ω—ã –Ω–æ–≤—ã–µ —Ç–∞–±–ª–∏—Ü—ã –ë–î (–±–µ–∑ —É–¥–∞–ª–µ–Ω–∏—è —Å—Ç–∞—Ä—ã—Ö)
- [x] –ù–∞–ø–∏—Å–∞–Ω—ã –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã –º–∏–≥—Ä–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö
- [x] –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω —É–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Å–µ—Ä–≤–∏—Å —Å fallback
- [x] –°–æ–∑–¥–∞–Ω —É–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–π frontend –∫–æ–º–ø–æ–Ω–µ–Ω—Ç
- [x] –ù–∞–ø–∏—Å–∞–Ω—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ç–µ—Å—Ç—ã

#### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:
- [x] –ù–∞–ø–∏—Å–∞–Ω—ã unit —Ç–µ—Å—Ç—ã
- [x] –ü—Ä–æ–π–¥–µ–Ω—ã –≤—Å–µ unit —Ç–µ—Å—Ç—ã
- [x] –ü—Ä–æ–π–¥–µ–Ω—ã integration —Ç–µ—Å—Ç—ã
- [x] –ü—Ä–æ–≤–µ—Ä–µ–Ω–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å (<3ms response time)
- [x] –í–∞–ª–∏–¥–∏—Ä–æ–≤–∞–Ω–∞ —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö
- [x] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∞ –æ–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å

#### –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ:
- [x] –ù–∞—Å—Ç—Ä–æ–µ–Ω—ã feature flags
- [ ] –†–∞–∑–≤–µ—Ä–Ω—É—Ç–æ –Ω–∞ —Ç–µ—Å—Ç–æ–≤–æ–º –æ–∫—Ä—É–∂–µ–Ω–∏–∏
- [ ] –í–∫–ª—é—á–µ–Ω–æ –¥–ª—è 10% —Ç—Ä–∞—Ñ–∏–∫–∞
- [ ] –í–∫–ª—é—á–µ–Ω–æ –¥–ª—è 50% —Ç—Ä–∞—Ñ–∏–∫–∞
- [ ] –í–∫–ª—é—á–µ–Ω–æ –¥–ª—è 100% —Ç—Ä–∞—Ñ–∏–∫–∞
- [ ] –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å—Ç–∞–±–∏–ª–µ–Ω 48 —á–∞—Å–æ–≤

**–í–ê–ñ–ù–û–ï –ù–ê–ü–û–ú–ò–ù–ê–ù–ò–ï**: 
- –≠—Ç–æ –¢–ó –¥–æ–ª–∂–Ω–æ –≤—ã–ø–æ–ª–Ω—è—Ç—å—Å—è –ü–û–®–ê–ì–û–í–û
- –ó–ê–ü–†–ï–©–ï–ù–û –ø—Ä–æ–ø—É—Å–∫–∞—Ç—å —ç—Ç–∞–ø—ã –≤–∞–ª–∏–¥–∞—Ü–∏–∏
- –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û –¥–µ–ª–∞—Ç—å –±—ç–∫–∞–ø—ã –ø–µ—Ä–µ–¥ –∫–∞–∂–¥—ã–º —ç—Ç–∞–ø–æ–º
- –ü—Ä–∏ –ª—é–±—ã—Ö —Å–æ–º–Ω–µ–Ω–∏—è—Ö - –û–°–¢–ê–ù–û–í–ò–¢–¨–°–Ø –∏ –∑–∞–ø—Ä–æ—Å–∏—Ç—å —É—Ç–æ—á–Ω–µ–Ω–∏—è
