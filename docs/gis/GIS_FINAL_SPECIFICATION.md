# üó∫Ô∏è GIS –º–æ–¥—É–ª—å –¥–ª—è Sve Tu Marketplace - –§–∏–Ω–∞–ª—å–Ω–∞—è —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è

**–í–µ—Ä—Å–∏—è**: 1.0 FINAL  
**–î–∞—Ç–∞**: 2025-01-10  
**–°—Ç–∞—Ç—É—Å**: –ì–æ—Ç–æ–≤–æ –∫ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

## üìã –û–≥–ª–∞–≤–ª–µ–Ω–∏–µ

1. [–†–µ–∑—é–º–µ –ø—Ä–æ–µ–∫—Ç–∞](#—Ä–µ–∑—é–º–µ-–ø—Ä–æ–µ–∫—Ç–∞)
2. [–ë–∏–∑–Ω–µ—Å-—Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è](#–±–∏–∑–Ω–µ—Å-—Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è)
3. [–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è](#—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ-—Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è)
4. [–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞](#—Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è-–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞)
5. [–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö](#–±–∞–∑–∞-–¥–∞–Ω–Ω—ã—Ö)
6. [API —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è](#api-—Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è)
7. [Frontend –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã](#frontend-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã)
8. [–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –¥–æ—Å—Ç–∞–≤–∫–æ–π](#–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è-—Å-–¥–æ—Å—Ç–∞–≤–∫–æ–π)
9. [–ü–ª–∞–Ω —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏](#–ø–ª–∞–Ω-—Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏)
10. [–ú–µ—Ç—Ä–∏–∫–∏ —É—Å–ø–µ—Ö–∞](#–º–µ—Ç—Ä–∏–∫–∏-—É—Å–ø–µ—Ö–∞)

---

## 1. –†–µ–∑—é–º–µ –ø—Ä–æ–µ–∫—Ç–∞

### üéØ –¶–µ–ª—å
–°–æ–∑–¥–∞—Ç—å —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—É—é –≥–µ–æ–ª–æ–∫–∞—Ü–∏–æ–Ω–Ω—É—é –ø–ª–∞—Ç—Ñ–æ—Ä–º—É –¥–ª—è –º–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å–∞ Sve Tu, –∫–æ—Ç–æ—Ä–∞—è —É–ª—É—á—à–∏—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –æ–ø—ã—Ç —á–µ—Ä–µ–∑ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–µ –∫–∞—Ä—Ç—ã, —É–º–Ω—ã–π –≥–µ–æ–ø–æ–∏—Å–∫ –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é —Å–æ —Å–ª—É–∂–±–∞–º–∏ –¥–æ—Å—Ç–∞–≤–∫–∏.

### üìä –ö–ª—é—á–µ–≤—ã–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏
- **–°—Ä–æ–∫ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏**: 12 –Ω–µ–¥–µ–ª—å
- **–ö–æ–º–∞–Ω–¥–∞**: 3-4 —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞
- **–ë—é–¥–∂–µ—Ç —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π**: ~$1000/–º–µ—Å—è—Ü
- **ROI**: 6 –º–µ—Å—è—Ü–µ–≤

### ‚úÖ –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏
- –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è –∫–∞—Ä—Ç–∞ —Å –æ–±—ä—è–≤–ª–µ–Ω–∏—è–º–∏
- –ü–æ–∏—Å–∫ —Ç–æ–≤–∞—Ä–æ–≤ –ø–æ —Ä–∞–¥–∏—É—Å—É –∏ —Ä–∞–π–æ–Ω–∞–º
- –ó–æ–Ω—ã –¥–æ—Å—Ç–∞–≤–∫–∏ –¥–ª—è –º–∞–≥–∞–∑–∏–Ω–æ–≤
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å D Express –∏ –ü–æ—à—Ç–æ–π –°—Ä–±–∏—ò–µ
- –ì–µ–æ–∞–Ω–∞–ª–∏—Ç–∏–∫–∞ –¥–ª—è –ø—Ä–æ–¥–∞–≤—Ü–æ–≤
- –ú–æ–±–∏–ª—å–Ω–∞—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è

---

## 2. –ë–∏–∑–Ω–µ—Å-—Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

### 2.1 –ü—Ä–æ–±–ª–µ–º—ã, –∫–æ—Ç–æ—Ä—ã–µ —Ä–µ—à–∞–µ–º

1. **–î–ª—è –ø–æ–∫—É–ø–∞—Ç–µ–ª–µ–π**:
   - –°–ª–æ–∂–Ω–æ –Ω–∞–π—Ç–∏ —Ç–æ–≤–∞—Ä—ã —Ä—è–¥–æ–º
   - –ù–µ—è—Å–Ω–æ, –¥–æ—Å—Ç–∞–≤—è—Ç –ª–∏ –≤ –º–æ–π —Ä–∞–π–æ–Ω
   - –ù–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ø—É–Ω–∫—Ç–∞—Ö –≤—ã–¥–∞—á–∏

2. **–î–ª—è –ø—Ä–æ–¥–∞–≤—Ü–æ–≤**:
   - –ù–µ –ø–æ–Ω–∏–º–∞—é—Ç –≥–µ–æ–≥—Ä–∞—Ñ–∏—é —Å–≤–æ–∏—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤
   - –°–ª–æ–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –∑–æ–Ω—ã –¥–æ—Å—Ç–∞–≤–∫–∏
   - –ù–µ—Ç –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ –ø–æ —Ä–∞–π–æ–Ω–∞–º

3. **–î–ª—è –±–∏–∑–Ω–µ—Å–∞**:
   - –ù–∏–∑–∫–∞—è –∫–æ–Ω–≤–µ—Ä—Å–∏—è –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –ø–æ–∏—Å–∫–∞
   - –í—ã—Å–æ–∫–∏–µ –∑–∞—Ç—Ä–∞—Ç—ã –Ω–∞ –ª–æ–≥–∏—Å—Ç–∏–∫—É
   - –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –≥–µ–æ–¥–∞–Ω–Ω—ã—Ö –¥–ª—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∏

### 2.2 –û–∂–∏–¥–∞–µ–º—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã

| –ú–µ—Ç—Ä–∏–∫–∞ | –¢–µ–∫—É—â–µ–µ | –¶–µ–ª–µ–≤–æ–µ | –°—Ä–æ–∫ |
|---------|---------|---------|------|
| –ö–æ–Ω–≤–µ—Ä—Å–∏—è –ø–æ–∏—Å–∫–∞ | 3.2% | 4.5% | 3 –º–µ—Å |
| –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫–∞—Ä—Ç—ã | 0% | 40% | 2 –º–µ—Å |
| –õ–æ–∫–∞–ª—å–Ω—ã–µ –ø—Ä–æ–¥–∞–∂–∏ | –±–∞–∑–æ–≤—ã–π | +30% | 3 –º–µ—Å |
| –í—Ä–µ–º—è –Ω–∞ —Å–∞–π—Ç–µ | 4:30 | 6:00 | 2 –º–µ—Å |

---

## 3. –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

### 3.1 –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è –∫–∞—Ä—Ç–∞

#### –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:
- **–û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –æ–±—ä—è–≤–ª–µ–Ω–∏–π** –Ω–∞ –∫–∞—Ä—Ç–µ —Å –º–∞—Ä–∫–µ—Ä–∞–º–∏
- **–ö–ª–∞—Å—Ç–µ—Ä–∏–∑–∞—Ü–∏—è** –ø—Ä–∏ –±–æ–ª—å—à–æ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ –º–∞—Ä–∫–µ—Ä–æ–≤
- **–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã–µ –æ–∫–Ω–∞** —Å –ø—Ä–µ–≤—å—é —Ç–æ–≤–∞—Ä–∞
- **–§–∏–ª—å—Ç—Ä—ã** –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º, —Ü–µ–Ω–µ, –¥–æ—Å—Ç–∞–≤–∫–µ
- **–†–µ–∂–∏–º—ã –∫–∞—Ä—Ç—ã**: –æ–±—ã—á–Ω–∞—è, —Å–ø—É—Ç–Ω–∏–∫, —É–ø—Ä–æ—â–µ–Ω–Ω–∞—è

#### –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏:
```
1. –û—Ç–∫—Ä—ã—Ç—å –∫–∞—Ä—Ç—É ‚Üí –£–≤–∏–¥–µ—Ç—å —Ç–æ–≤–∞—Ä—ã —Ä—è–¥–æ–º
2. –ü—Ä–∏–º–µ–Ω–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä—ã ‚Üí –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
3. –ö–ª–∏–∫–Ω—É—Ç—å –Ω–∞ –º–∞—Ä–∫–µ—Ä ‚Üí –ü—Ä–µ–≤—å—é —Ç–æ–≤–∞—Ä–∞
4. –ü–µ—Ä–µ–π—Ç–∏ –∫ —Ç–æ–≤–∞—Ä—É ‚Üí –°—Ç—Ä–∞–Ω–∏—Ü–∞ –æ–±—ä—è–≤–ª–µ–Ω–∏—è
```

### 3.2 –ì–µ–æ–ø–æ–∏—Å–∫

#### –¢–∏–ø—ã –ø–æ–∏—Å–∫–∞:
1. **–ü–æ —Ä–∞–¥–∏—É—Å—É** - "–≤ —Ä–∞–¥–∏—É—Å–µ 5 –∫–º –æ—Ç –º–µ–Ω—è"
2. **–ü–æ —Ä–∞–π–æ–Ω—É** - "–≤ –ù–æ–≤–æ–º –ë–µ–ª–≥—Ä–∞–¥–µ"
3. **–ü–æ –º–∞—Ä—à—Ä—É—Ç—É** - "–ø–æ –¥–æ—Ä–æ–≥–µ –¥–æ–º–æ–π"
4. **–£–º–Ω—ã–π –ø–æ–∏—Å–∫** - "–¥–µ—Ç—Å–∫–∏–µ —Ç–æ–≤–∞—Ä—ã –¥–æ 5000 –¥–∏–Ω–∞—Ä —Ä—è–¥–æ–º"

#### –§–∏–ª—å—Ç—Ä—ã –ø–æ–∏—Å–∫–∞:
- –ö–∞—Ç–µ–≥–æ—Ä–∏—è —Ç–æ–≤–∞—Ä–∞
- –¶–µ–Ω–æ–≤–æ–π –¥–∏–∞–ø–∞–∑–æ–Ω
- –ù–∞–ª–∏—á–∏–µ –¥–æ—Å—Ç–∞–≤–∫–∏
- –†–µ–π—Ç–∏–Ω–≥ –ø—Ä–æ–¥–∞–≤—Ü–∞
- –í—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã (–¥–ª—è –º–∞–≥–∞–∑–∏–Ω–æ–≤)

### 3.3 –ó–æ–Ω—ã –¥–æ—Å—Ç–∞–≤–∫–∏

#### –î–ª—è –ø—Ä–æ–¥–∞–≤—Ü–æ–≤:
- –†–∏—Å–æ–≤–∞–Ω–∏–µ –∑–æ–Ω –Ω–∞ –∫–∞—Ä—Ç–µ
- –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å—Ç–æ–∏–º–æ—Å—Ç–∏ –ø–æ –∑–æ–Ω–∞–º
- –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Å—É–º–º–∞ –∑–∞–∫–∞–∑–∞
- –í—Ä–µ–º—è –¥–æ—Å—Ç–∞–≤–∫–∏

#### –î–ª—è –ø–æ–∫—É–ø–∞—Ç–µ–ª–µ–π:
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç–∞–≤–∫–∏ –ø–æ –∞–¥—Ä–µ—Å—É
- –†–∞—Å—á–µ—Ç —Å—Ç–æ–∏–º–æ—Å—Ç–∏
- –í—ã–±–æ—Ä –ø—É–Ω–∫—Ç–∞ —Å–∞–º–æ–≤—ã–≤–æ–∑–∞

### 3.4 –°–ª—É–∂–±—ã –¥–æ—Å—Ç–∞–≤–∫–∏

#### D Express:
- –≠–∫—Å–ø—Ä–µ—Å—Å-–¥–æ—Å—Ç–∞–≤–∫–∞ (1-2 –¥–Ω—è)
- –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- API –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è

#### –ü–æ—à—Ç–∞ –°—Ä–±–∏—ò–µ:
- –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è –¥–æ—Å—Ç–∞–≤–∫–∞ (2-5 –¥–Ω–µ–π)
- –°–µ—Ç—å –ø–æ—á—Ç–æ–≤—ã—Ö –æ—Ç–¥–µ–ª–µ–Ω–∏–π
- –ë—é–¥–∂–µ—Ç–Ω—ã–µ —Ç–∞—Ä–∏—Ñ—ã

### 3.5 –ì–µ–æ–∞–Ω–∞–ª–∏—Ç–∏–∫–∞

#### –î–ª—è –ø—Ä–æ–¥–∞–≤—Ü–æ–≤:
- –¢–µ–ø–ª–æ–≤–∞—è –∫–∞—Ä—Ç–∞ –ø–æ–∫—É–ø–∞—Ç–µ–ª–µ–π
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ —Ä–∞–π–æ–Ω–∞–º
- –ê–Ω–∞–ª–∏–∑ –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–æ–≤
- –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—é

#### –î–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ü–∏–∏:
- –û–±—â–∞—è –∫–∞—Ä—Ç–∞ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
- –ü—Ä–æ–±–ª–µ–º–Ω—ã–µ –∑–æ–Ω—ã –¥–æ—Å—Ç–∞–≤–∫–∏
- –¢—Ä–µ–Ω–¥—ã –ø–æ —Ä–µ–≥–∏–æ–Ω–∞–º

---

## 4. –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### 4.1 –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

#### Backend:
- **PostgreSQL + PostGIS 3.4** - –≥–µ–æ–ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–µ–Ω–Ω–∞—è –ë–î
- **Go** - –≤—ã—Å–æ–∫–æ–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã
- **Redis** - –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –≥–µ–æ–¥–∞–Ω–Ω—ã—Ö
- **Elasticsearch** - –≥–µ–æ–ø–æ–∏—Å–∫

#### Frontend:
- **React 18** + **TypeScript**
- **Mapbox GL JS** - –≤–µ–∫—Ç–æ—Ä–Ω—ã–µ –∫–∞—Ä—Ç—ã
- **TanStack Query** - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã–º–∏
- **Tailwind CSS** - —Å—Ç–∏–ª–∏–∑–∞—Ü–∏—è

#### –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞:
- **Docker** + **Kubernetes**
- **Cloudflare CDN** - –¥–ª—è –∫–∞—Ä—Ç
- **GitHub Actions** - CI/CD
- **Prometheus + Grafana** - –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### 4.2 –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–µ—Ä–≤–∏—Å–æ–≤

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   Web Client    ‚îÇ     ‚îÇ  Mobile Client  ‚îÇ     ‚îÇ   Admin Panel   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ                       ‚îÇ                         ‚îÇ
         ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                                 ‚îÇ
                    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                    ‚îÇ      API Gateway        ‚îÇ
                    ‚îÇ    (Kong/Nginx)         ‚îÇ
                    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                                 ‚îÇ
         ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
         ‚îÇ                       ‚îÇ                       ‚îÇ
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   GIS Service   ‚îÇ    ‚îÇ Delivery Service ‚îÇ    ‚îÇ Search Service  ‚îÇ
‚îÇ      (Go)       ‚îÇ    ‚îÇ      (Go)        ‚îÇ    ‚îÇ (Elasticsearch) ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ                       ‚îÇ                       ‚îÇ
         ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                                 ‚îÇ
                    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                    ‚îÇ      PostgreSQL         ‚îÇ
                    ‚îÇ    + PostGIS 3.4        ‚îÇ
                    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### 4.3 –ú–æ–¥—É–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞

```
backend/
‚îú‚îÄ‚îÄ internal/
‚îÇ   ‚îî‚îÄ‚îÄ proj/
‚îÇ       ‚îî‚îÄ‚îÄ gis/
‚îÇ           ‚îú‚îÄ‚îÄ handler/
‚îÇ           ‚îÇ   ‚îú‚îÄ‚îÄ spatial_search.go    # –ü—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π –ø–æ–∏—Å–∫
‚îÇ           ‚îÇ   ‚îú‚îÄ‚îÄ geocoding.go         # –ì–µ–æ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ
‚îÇ           ‚îÇ   ‚îú‚îÄ‚îÄ zones.go             # –ó–æ–Ω—ã –¥–æ—Å—Ç–∞–≤–∫–∏
‚îÇ           ‚îÇ   ‚îî‚îÄ‚îÄ analytics.go         # –ì–µ–æ–∞–Ω–∞–ª–∏—Ç–∏–∫–∞
‚îÇ           ‚îú‚îÄ‚îÄ service/
‚îÇ           ‚îÇ   ‚îú‚îÄ‚îÄ spatial_service.go   # –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
‚îÇ           ‚îÇ   ‚îú‚îÄ‚îÄ clustering.go        # –ö–ª–∞—Å—Ç–µ—Ä–∏–∑–∞—Ü–∏—è
‚îÇ           ‚îÇ   ‚îî‚îÄ‚îÄ routing.go           # –ú–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è
‚îÇ           ‚îú‚îÄ‚îÄ repository/
‚îÇ           ‚îÇ   ‚îú‚îÄ‚îÄ postgis_repo.go      # PostGIS –∑–∞–ø—Ä–æ—Å—ã
‚îÇ           ‚îÇ   ‚îî‚îÄ‚îÄ cache_repo.go        # Redis –∫—ç—à
‚îÇ           ‚îî‚îÄ‚îÄ types/
‚îÇ               ‚îî‚îÄ‚îÄ geo_types.go         # –¢–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö
‚îî‚îÄ‚îÄ migrations/
    ‚îú‚îÄ‚îÄ 001_enable_postgis.sql
    ‚îú‚îÄ‚îÄ 002_create_geo_tables.sql
    ‚îî‚îÄ‚îÄ 003_add_spatial_indexes.sql

frontend/svetu/src/
‚îú‚îÄ‚îÄ components/
‚îÇ   ‚îî‚îÄ‚îÄ GIS/
‚îÇ       ‚îú‚îÄ‚îÄ Map/
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ InteractiveMap.tsx       # –û—Å–Ω–æ–≤–Ω–∞—è –∫–∞—Ä—Ç–∞
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ MapControls.tsx          # –ö–æ–Ω—Ç—Ä–æ–ª—ã –∫–∞—Ä—Ç—ã
‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ MapFilters.tsx           # –§–∏–ª—å—Ç—Ä—ã
‚îÇ       ‚îú‚îÄ‚îÄ Markers/
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ ListingMarker.tsx        # –ú–∞—Ä–∫–µ—Ä —Ç–æ–≤–∞—Ä–∞
‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ ClusterMarker.tsx        # –ö–ª–∞—Å—Ç–µ—Ä
‚îÇ       ‚îú‚îÄ‚îÄ Search/
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ RadiusSearch.tsx         # –ü–æ–∏—Å–∫ –ø–æ —Ä–∞–¥–∏—É—Å—É
‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ SmartSearch.tsx          # –£–º–Ω—ã–π –ø–æ–∏—Å–∫
‚îÇ       ‚îî‚îÄ‚îÄ Delivery/
‚îÇ           ‚îú‚îÄ‚îÄ ZoneEditor.tsx           # –†–µ–¥–∞–∫—Ç–æ—Ä –∑–æ–Ω
‚îÇ           ‚îî‚îÄ‚îÄ DeliverySelector.tsx     # –í—ã–±–æ—Ä –¥–æ—Å—Ç–∞–≤–∫–∏
‚îî‚îÄ‚îÄ hooks/
    ‚îî‚îÄ‚îÄ gis/
        ‚îú‚îÄ‚îÄ useGeolocation.ts            # –ì–µ–æ–ª–æ–∫–∞—Ü–∏—è
        ‚îú‚îÄ‚îÄ useGeoSearch.ts              # –ü–æ–∏—Å–∫
        ‚îî‚îÄ‚îÄ useDeliveryZones.ts          # –ó–æ–Ω—ã –¥–æ—Å—Ç–∞–≤–∫–∏
```

---

## 5. –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

### 5.1 –û—Å–Ω–æ–≤–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã

```sql
-- –í–∫–ª—é—á–µ–Ω–∏–µ PostGIS
CREATE EXTENSION IF NOT EXISTS postgis;
CREATE EXTENSION IF NOT EXISTS postgis_topology;
CREATE EXTENSION IF NOT EXISTS pg_trgm;

-- –ì–µ–æ–¥–∞–Ω–Ω—ã–µ –æ–±—ä—è–≤–ª–µ–Ω–∏–π
CREATE TABLE listings_geo (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    listing_id UUID NOT NULL REFERENCES marketplace_listings(id),
    location GEOGRAPHY(POINT, 4326) NOT NULL,
    -- –ì–µ–æ—Ö–µ—à–∏ –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –ø–æ–∏—Å–∫–∞
    geohash4 VARCHAR(4) GENERATED ALWAYS AS (ST_GeoHash(location, 4)) STORED,
    geohash6 VARCHAR(6) GENERATED ALWAYS AS (ST_GeoHash(location, 6)) STORED,
    geohash8 VARCHAR(8) GENERATED ALWAYS AS (ST_GeoHash(location, 8)) STORED,
    -- –î–µ–Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
    city VARCHAR(100),
    district VARCHAR(100),
    postal_code VARCHAR(10),
    created_at TIMESTAMPTZ DEFAULT NOW(),
    updated_at TIMESTAMPTZ DEFAULT NOW()
);

-- –ò–Ω–¥–µ–∫—Å—ã
CREATE INDEX idx_listings_geo_location ON listings_geo USING GIST(location);
CREATE INDEX idx_listings_geo_geohash4 ON listings_geo(geohash4);
CREATE INDEX idx_listings_geo_geohash6 ON listings_geo(geohash6);
CREATE INDEX idx_listings_geo_city ON listings_geo(city);
CREATE INDEX idx_listings_geo_listing ON listings_geo(listing_id);

-- –ó–æ–Ω—ã –¥–æ—Å—Ç–∞–≤–∫–∏
CREATE TABLE delivery_zones (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    storefront_id UUID NOT NULL REFERENCES user_storefronts(id),
    zone_name VARCHAR(100),
    zone_polygon GEOGRAPHY(POLYGON, 4326) NOT NULL,
    delivery_fee DECIMAL(10,2) DEFAULT 0,
    min_order_amount DECIMAL(10,2) DEFAULT 0,
    max_delivery_time_minutes INT,
    color VARCHAR(7), -- HEX —Ü–≤–µ—Ç –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è
    is_active BOOLEAN DEFAULT true,
    created_at TIMESTAMPTZ DEFAULT NOW(),
    updated_at TIMESTAMPTZ DEFAULT NOW()
);

CREATE INDEX idx_delivery_zones_polygon ON delivery_zones USING GIST(zone_polygon);
CREATE INDEX idx_delivery_zones_storefront ON delivery_zones(storefront_id);

-- –°–ª—É–∂–±—ã –¥–æ—Å—Ç–∞–≤–∫–∏
CREATE TABLE delivery_providers (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    code VARCHAR(50) UNIQUE NOT NULL, -- 'dexpress', 'posta_srbije'
    name VARCHAR(100) NOT NULL,
    name_cyrillic VARCHAR(100),
    api_endpoint VARCHAR(255),
    is_active BOOLEAN DEFAULT true,
    capabilities JSONB DEFAULT '{}',
    created_at TIMESTAMPTZ DEFAULT NOW()
);

-- –ü—É–Ω–∫—Ç—ã –≤—ã–¥–∞—á–∏
CREATE TABLE pickup_points (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    provider_id UUID REFERENCES delivery_providers(id),
    external_id VARCHAR(100),
    name VARCHAR(200) NOT NULL,
    address VARCHAR(500) NOT NULL,
    location GEOGRAPHY(POINT, 4326) NOT NULL,
    city VARCHAR(100),
    postal_code VARCHAR(10),
    working_hours JSONB,
    services JSONB DEFAULT '[]',
    is_active BOOLEAN DEFAULT true,
    updated_at TIMESTAMPTZ DEFAULT NOW()
);

CREATE INDEX idx_pickup_points_location ON pickup_points USING GIST(location);
CREATE INDEX idx_pickup_points_city ON pickup_points(city);
CREATE INDEX idx_pickup_points_provider ON pickup_points(provider_id);

-- –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω—ã–µ –≥—Ä–∞–Ω–∏—Ü—ã –°–µ—Ä–±–∏–∏
CREATE TABLE administrative_boundaries (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    code VARCHAR(20) UNIQUE NOT NULL,
    name VARCHAR(100) NOT NULL,
    name_cyrillic VARCHAR(100),
    name_latin VARCHAR(100),
    type VARCHAR(50) NOT NULL, -- 'municipality', 'district', 'region'
    parent_id UUID REFERENCES administrative_boundaries(id),
    boundary GEOGRAPHY(MULTIPOLYGON, 4326),
    center_point GEOGRAPHY(POINT, 4326),
    population INT,
    area_km2 DECIMAL(10,2),
    metadata JSONB DEFAULT '{}',
    created_at TIMESTAMPTZ DEFAULT NOW()
);

CREATE INDEX idx_boundaries_type ON administrative_boundaries(type);
CREATE INDEX idx_boundaries_boundary ON administrative_boundaries USING GIST(boundary);

-- –ö—ç—à –≥–µ–æ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è
CREATE TABLE geocoding_cache (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    address_hash VARCHAR(64) UNIQUE NOT NULL,
    original_address TEXT NOT NULL,
    normalized_address TEXT,
    location GEOGRAPHY(POINT, 4326),
    confidence_score FLOAT,
    provider VARCHAR(50),
    raw_response JSONB,
    created_at TIMESTAMPTZ DEFAULT NOW(),
    last_used TIMESTAMPTZ DEFAULT NOW()
);

CREATE INDEX idx_geocoding_hash ON geocoding_cache(address_hash);
CREATE INDEX idx_geocoding_location ON geocoding_cache USING GIST(location);
```

### 5.2 –§—É–Ω–∫—Ü–∏–∏ –∏ –ø—Ä–æ—Ü–µ–¥—É—Ä—ã

```sql
-- –ü–æ–∏—Å–∫ –æ–±—ä—è–≤–ª–µ–Ω–∏–π –≤ —Ä–∞–¥–∏—É—Å–µ
CREATE OR REPLACE FUNCTION search_listings_radius(
    p_center GEOGRAPHY,
    p_radius_meters INT,
    p_category_id INT DEFAULT NULL,
    p_price_min DECIMAL DEFAULT NULL,
    p_price_max DECIMAL DEFAULT NULL,
    p_limit INT DEFAULT 100
) RETURNS TABLE (
    listing_id UUID,
    distance_meters FLOAT,
    title VARCHAR,
    price DECIMAL,
    location GEOGRAPHY
) AS $$
BEGIN
    RETURN QUERY
    SELECT 
        lg.listing_id,
        ST_Distance(lg.location, p_center) as distance_meters,
        ml.title,
        ml.price,
        lg.location
    FROM listings_geo lg
    JOIN marketplace_listings ml ON lg.listing_id = ml.id
    WHERE 
        ST_DWithin(lg.location, p_center, p_radius_meters)
        AND ml.is_active = true
        AND (p_category_id IS NULL OR ml.category_id = p_category_id)
        AND (p_price_min IS NULL OR ml.price >= p_price_min)
        AND (p_price_max IS NULL OR ml.price <= p_price_max)
    ORDER BY distance_meters
    LIMIT p_limit;
END;
$$ LANGUAGE plpgsql;

-- –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç–∞–≤–∫–∏ –≤ —Ç–æ—á–∫—É
CREATE OR REPLACE FUNCTION check_delivery_availability(
    p_storefront_id UUID,
    p_location GEOGRAPHY
) RETURNS TABLE (
    zone_id UUID,
    zone_name VARCHAR,
    delivery_fee DECIMAL,
    min_order_amount DECIMAL,
    delivery_time INT
) AS $$
BEGIN
    RETURN QUERY
    SELECT 
        dz.id,
        dz.zone_name,
        dz.delivery_fee,
        dz.min_order_amount,
        dz.max_delivery_time_minutes
    FROM delivery_zones dz
    WHERE 
        dz.storefront_id = p_storefront_id
        AND dz.is_active = true
        AND ST_Contains(dz.zone_polygon::geometry, p_location::geometry);
END;
$$ LANGUAGE plpgsql;

-- –ö–ª–∞—Å—Ç–µ—Ä–∏–∑–∞—Ü–∏—è –¥–ª—è –∫–∞—Ä—Ç—ã
CREATE OR REPLACE FUNCTION create_clusters(
    p_bounds GEOGRAPHY,
    p_zoom INT,
    p_category_id INT DEFAULT NULL
) RETURNS TABLE (
    cluster_center GEOGRAPHY,
    cluster_count INT,
    cluster_bounds GEOGRAPHY
) AS $$
DECLARE
    grid_size FLOAT;
BEGIN
    -- –†–∞–∑–º–µ—Ä —Å–µ—Ç–∫–∏ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –∑—É–º–∞
    grid_size := CASE 
        WHEN p_zoom < 10 THEN 0.1
        WHEN p_zoom < 14 THEN 0.01
        ELSE 0.001
    END;
    
    RETURN QUERY
    SELECT 
        ST_Centroid(ST_Collect(lg.location::geometry))::geography as cluster_center,
        COUNT(*)::INT as cluster_count,
        ST_Envelope(ST_Collect(lg.location::geometry))::geography as cluster_bounds
    FROM listings_geo lg
    JOIN marketplace_listings ml ON lg.listing_id = ml.id
    WHERE 
        ST_Intersects(lg.location, p_bounds)
        AND ml.is_active = true
        AND (p_category_id IS NULL OR ml.category_id = p_category_id)
    GROUP BY 
        FLOOR(ST_X(lg.location::geometry) / grid_size),
        FLOOR(ST_Y(lg.location::geometry) / grid_size)
    HAVING COUNT(*) > 1;
END;
$$ LANGUAGE plpgsql;
```

---

## 6. API —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è

### 6.1 Endpoints

#### –ü—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π –ø–æ–∏—Å–∫
```yaml
POST /api/v1/gis/search/radius:
  summary: –ü–æ–∏—Å–∫ –æ–±—ä—è–≤–ª–µ–Ω–∏–π –≤ —Ä–∞–¥–∏—É—Å–µ
  requestBody:
    content:
      application/json:
        schema:
          type: object
          required: [lat, lng]
          properties:
            lat:
              type: number
              description: –®–∏—Ä–æ—Ç–∞ —Ü–µ–Ω—Ç—Ä–∞ –ø–æ–∏—Å–∫–∞
            lng:
              type: number
              description: –î–æ–ª–≥–æ—Ç–∞ —Ü–µ–Ω—Ç—Ä–∞ –ø–æ–∏—Å–∫–∞
            radius:
              type: integer
              default: 5000
              description: –†–∞–¥–∏—É—Å –ø–æ–∏—Å–∫–∞ –≤ –º–µ—Ç—Ä–∞—Ö
            category_id:
              type: integer
              description: ID –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
            price_min:
              type: number
            price_max:
              type: number
            limit:
              type: integer
              default: 100
              maximum: 500
  responses:
    200:
      content:
        application/json:
          schema:
            type: object
            properties:
              results:
                type: array
                items:
                  $ref: '#/components/schemas/GeoListing'
              total:
                type: integer
              center:
                $ref: '#/components/schemas/Point'

GET /api/v1/gis/search/bounds:
  summary: –ü–æ–∏—Å–∫ –≤ –≥—Ä–∞–Ω–∏—Ü–∞—Ö –∫–∞—Ä—Ç—ã
  parameters:
    - name: bounds
      in: query
      required: true
      description: "sw_lat,sw_lng,ne_lat,ne_lng"
      schema:
        type: string
    - name: zoom
      in: query
      schema:
        type: integer
        minimum: 1
        maximum: 20
    - name: clustered
      in: query
      schema:
        type: boolean
        default: true

POST /api/v1/gis/geocode:
  summary: –ì–µ–æ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ –∞–¥—Ä–µ—Å–∞
  requestBody:
    content:
      application/json:
        schema:
          type: object
          required: [address]
          properties:
            address:
              type: string
              description: –ê–¥—Ä–µ—Å –¥–ª—è –≥–µ–æ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è
            country:
              type: string
              default: "RS"

GET /api/v1/gis/reverse:
  summary: –û–±—Ä–∞—Ç–Ω–æ–µ –≥–µ–æ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ
  parameters:
    - name: lat
      in: query
      required: true
    - name: lng
      in: query
      required: true
```

#### –ó–æ–Ω—ã –¥–æ—Å—Ç–∞–≤–∫–∏
```yaml
GET /api/v1/gis/delivery/zones/{storefront_id}:
  summary: –ü–æ–ª—É—á–∏—Ç—å –∑–æ–Ω—ã –¥–æ—Å—Ç–∞–≤–∫–∏ –º–∞–≥–∞–∑–∏–Ω–∞
  
POST /api/v1/gis/delivery/zones:
  summary: –°–æ–∑–¥–∞—Ç—å –∑–æ–Ω—É –¥–æ—Å—Ç–∞–≤–∫–∏
  requestBody:
    content:
      application/json:
        schema:
          $ref: '#/components/schemas/DeliveryZone'

PUT /api/v1/gis/delivery/zones/{zone_id}:
  summary: –û–±–Ω–æ–≤–∏—Ç—å –∑–æ–Ω—É –¥–æ—Å—Ç–∞–≤–∫–∏

DELETE /api/v1/gis/delivery/zones/{zone_id}:
  summary: –£–¥–∞–ª–∏—Ç—å –∑–æ–Ω—É –¥–æ—Å—Ç–∞–≤–∫–∏

POST /api/v1/gis/delivery/check:
  summary: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –¥–æ—Å—Ç–∞–≤–∫–∏
  requestBody:
    content:
      application/json:
        schema:
          type: object
          required: [storefront_id, lat, lng]
          properties:
            storefront_id:
              type: string
              format: uuid
            lat:
              type: number
            lng:
              type: number
```

#### –°–ª—É–∂–±—ã –¥–æ—Å—Ç–∞–≤–∫–∏
```yaml
GET /api/v1/gis/delivery/providers:
  summary: –°–ø–∏—Å–æ–∫ —Å–ª—É–∂–± –¥–æ—Å—Ç–∞–≤–∫–∏

POST /api/v1/gis/delivery/calculate:
  summary: –†–∞—Å—á–µ—Ç —Å—Ç–æ–∏–º–æ—Å—Ç–∏ –¥–æ—Å—Ç–∞–≤–∫–∏
  requestBody:
    content:
      application/json:
        schema:
          type: object
          required: [from_postal, to_postal, weight]
          properties:
            from_postal:
              type: string
            to_postal:
              type: string
            weight:
              type: number
              description: –í–µ—Å –≤ –∫–∏–ª–æ–≥—Ä–∞–º–º–∞—Ö
            provider:
              type: string
              enum: [dexpress, posta_srbije]

GET /api/v1/gis/delivery/pickup-points:
  summary: –ü—É–Ω–∫—Ç—ã –≤—ã–¥–∞—á–∏
  parameters:
    - name: provider
      in: query
      schema:
        type: string
        enum: [dexpress, posta_srbije]
    - name: city
      in: query
    - name: lat
      in: query
    - name: lng
      in: query
    - name: radius
      in: query

GET /api/v1/gis/delivery/tracking/{tracking_number}:
  summary: –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –ø–æ—Å—ã–ª–∫–∏
```

#### –ê–Ω–∞–ª–∏—Ç–∏–∫–∞
```yaml
GET /api/v1/gis/analytics/heatmap:
  summary: –¢–µ–ø–ª–æ–≤–∞—è –∫–∞—Ä—Ç–∞ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
  parameters:
    - name: type
      in: query
      schema:
        type: string
        enum: [purchases, views, searches]
    - name: period
      in: query
      schema:
        type: string
        enum: [day, week, month]

GET /api/v1/gis/analytics/districts:
  summary: –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ —Ä–∞–π–æ–Ω–∞–º
  parameters:
    - name: storefront_id
      in: query
    - name: metric
      in: query
      schema:
        type: string
        enum: [orders, revenue, customers]
```

### 6.2 –ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö

```typescript
// –û—Å–Ω–æ–≤–Ω—ã–µ —Ç–∏–ø—ã
interface Point {
  lat: number;
  lng: number;
}

interface Bounds {
  southwest: Point;
  northeast: Point;
}

interface GeoListing {
  id: string;
  title: string;
  price: number;
  location: Point;
  distance?: number;
  category: {
    id: number;
    name: string;
  };
  thumbnail: string;
  seller: {
    id: string;
    name: string;
    rating: number;
  };
}

interface Cluster {
  id: string;
  center: Point;
  count: number;
  bounds: Bounds;
}

interface DeliveryZone {
  id?: string;
  storefront_id: string;
  name: string;
  polygon: Point[];
  delivery_fee: number;
  min_order_amount: number;
  max_delivery_time_minutes: number;
  color: string;
  is_active: boolean;
}

interface DeliveryProvider {
  id: string;
  code: 'dexpress' | 'posta_srbije';
  name: string;
  name_cyrillic: string;
  capabilities: string[];
}

interface PickupPoint {
  id: string;
  provider: DeliveryProvider;
  name: string;
  address: string;
  location: Point;
  working_hours: Record<string, string>;
  services: string[];
}

interface TrackingInfo {
  tracking_number: string;
  status: 'pending' | 'picked_up' | 'in_transit' | 'delivered';
  current_location: string;
  events: TrackingEvent[];
  estimated_delivery: string;
}
```

---

## 7. Frontend –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

### 7.1 –û—Å–Ω–æ–≤–Ω–∞—è –∫–∞—Ä—Ç–∞

```typescript
// src/components/GIS/Map/InteractiveMap.tsx
import { useEffect, useRef, useState } from 'react';
import mapboxgl from 'mapbox-gl';
import 'mapbox-gl/dist/mapbox-gl.css';

interface InteractiveMapProps {
  center?: [number, number];
  zoom?: number;
  listings?: GeoListing[];
  onBoundsChange?: (bounds: Bounds) => void;
  onMarkerClick?: (listing: GeoListing) => void;
}

export const InteractiveMap: React.FC<InteractiveMapProps> = ({
  center = [20.4568, 44.8178], // –ë–µ–ª–≥—Ä–∞–¥
  zoom = 12,
  listings = [],
  onBoundsChange,
  onMarkerClick
}) => {
  const mapContainer = useRef<HTMLDivElement>(null);
  const map = useRef<mapboxgl.Map | null>(null);
  const [isLoading, setIsLoading] = useState(true);
  
  useEffect(() => {
    if (!mapContainer.current) return;
    
    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∫–∞—Ä—Ç—ã
    map.current = new mapboxgl.Map({
      container: mapContainer.current,
      style: 'mapbox://styles/mapbox/streets-v12',
      center,
      zoom,
      attributionControl: false
    });
    
    // –î–æ–±–∞–≤–ª—è–µ–º –∫–æ–Ω—Ç—Ä–æ–ª—ã
    map.current.addControl(new mapboxgl.NavigationControl(), 'top-right');
    map.current.addControl(new mapboxgl.GeolocateControl({
      positionOptions: { enableHighAccuracy: true },
      trackUserLocation: true
    }), 'top-right');
    
    // –°–æ–±—ã—Ç–∏—è –∫–∞—Ä—Ç—ã
    map.current.on('load', () => {
      setIsLoading(false);
    });
    
    map.current.on('moveend', () => {
      if (onBoundsChange) {
        const bounds = map.current!.getBounds();
        onBoundsChange({
          southwest: { 
            lat: bounds.getSouth(), 
            lng: bounds.getWest() 
          },
          northeast: { 
            lat: bounds.getNorth(), 
            lng: bounds.getEast() 
          }
        });
      }
    });
    
    return () => {
      map.current?.remove();
    };
  }, []);
  
  // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –º–∞—Ä–∫–µ—Ä–æ–≤
  useEffect(() => {
    if (!map.current || isLoading) return;
    
    // –£–¥–∞–ª—è–µ–º —Å—Ç–∞—Ä—ã–µ –º–∞—Ä–∫–µ—Ä—ã
    const markers = document.getElementsByClassName('mapboxgl-marker');
    while (markers[0]) {
      markers[0].remove();
    }
    
    // –î–æ–±–∞–≤–ª—è–µ–º –Ω–æ–≤—ã–µ –º–∞—Ä–∫–µ—Ä—ã
    listings.forEach(listing => {
      const el = document.createElement('div');
      el.className = 'custom-marker';
      el.style.width = '30px';
      el.style.height = '30px';
      el.style.backgroundImage = `url(/api/categories/${listing.category.id}/icon)`;
      el.style.backgroundSize = 'cover';
      el.style.borderRadius = '50%';
      el.style.border = '2px solid white';
      el.style.boxShadow = '0 2px 4px rgba(0,0,0,0.3)';
      el.style.cursor = 'pointer';
      
      // –î–æ–±–∞–≤–ª—è–µ–º —ç—Ñ—Ñ–µ–∫—Ç —Ä–∞–∑–º—ã—Ç–∏—è –¥–ª—è –ø—Ä–∏–≤–∞—Ç–Ω—ã—Ö –ª–æ–∫–∞—Ü–∏–π
      if (listing.is_blurred) {
        el.style.opacity = '0.7';
        el.classList.add('blurred-location');
      }
      
      const marker = new mapboxgl.Marker(el)
        .setLngLat([listing.location.lng, listing.location.lat])
        .addTo(map.current!);
        
      el.addEventListener('click', () => {
        if (onMarkerClick) {
          onMarkerClick(listing);
        }
      });
      
      // –ü–æ–ø–∞–ø —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π
      const popup = new mapboxgl.Popup({ offset: 25 })
        .setHTML(`
          <div class="p-2">
            <img src="${listing.thumbnail}" class="w-full h-24 object-cover rounded mb-2" />
            <h3 class="font-semibold">${listing.title}</h3>
            <p class="text-lg font-bold">${listing.price} –†–°–î</p>
            <p class="text-sm text-gray-600">${listing.distance ? `${listing.distance}–º` : ''}</p>
          </div>
        `);
        
      marker.setPopup(popup);
    });
  }, [listings, isLoading]);
  
  return (
    <div className="relative w-full h-full">
      <div ref={mapContainer} className="w-full h-full" />
      {isLoading && (
        <div className="absolute inset-0 flex items-center justify-center bg-white bg-opacity-75">
          <div className="animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"></div>
        </div>
      )}
    </div>
  );
};
```

### 7.2 –ü–æ–∏—Å–∫ –ø–æ —Ä–∞–¥–∏—É—Å—É

```typescript
// src/components/GIS/Search/RadiusSearch.tsx
import { useState } from 'react';
import { useGeolocation } from '@/hooks/useGeolocation';
import { useGeoSearch } from '@/hooks/useGeoSearch';

export const RadiusSearch: React.FC = () => {
  const { location, error: geoError, requestLocation } = useGeolocation();
  const { search, isLoading } = useGeoSearch();
  const [radius, setRadius] = useState(5); // –∫–º
  const [filters, setFilters] = useState({
    category_id: null,
    price_min: null,
    price_max: null
  });
  
  const handleSearch = () => {
    if (!location) {
      requestLocation();
      return;
    }
    
    search({
      lat: location.coords.latitude,
      lng: location.coords.longitude,
      radius: radius * 1000, // –≤ –º–µ—Ç—Ä—ã
      ...filters
    });
  };
  
  return (
    <div className="bg-white p-4 rounded-lg shadow-lg">
      <h3 className="text-lg font-semibold mb-4">–ü–æ–∏—Å–∫ —Ä—è–¥–æ–º —Å –≤–∞–º–∏</h3>
      
      {/* –†–∞–¥–∏—É—Å –ø–æ–∏—Å–∫–∞ */}
      <div className="mb-4">
        <label className="block text-sm font-medium mb-2">
          –†–∞–¥–∏—É—Å –ø–æ–∏—Å–∫–∞: {radius} –∫–º
        </label>
        <input
          type="range"
          min="1"
          max="50"
          value={radius}
          onChange={(e) => setRadius(Number(e.target.value))}
          className="w-full"
        />
      </div>
      
      {/* –§–∏–ª—å—Ç—Ä—ã */}
      <CategoryFilter 
        value={filters.category_id}
        onChange={(cat) => setFilters({...filters, category_id: cat})}
      />
      
      <PriceRangeFilter
        min={filters.price_min}
        max={filters.price_max}
        onChange={(min, max) => setFilters({...filters, price_min: min, price_max: max})}
      />
      
      {/* –ö–Ω–æ–ø–∫–∞ –ø–æ–∏—Å–∫–∞ */}
      <button
        onClick={handleSearch}
        disabled={isLoading}
        className="w-full mt-4 bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 disabled:opacity-50"
      >
        {isLoading ? '–ü–æ–∏—Å–∫...' : '–ù–∞–π—Ç–∏'}
      </button>
      
      {geoError && (
        <p className="text-red-600 text-sm mt-2">
          –ù–µ —É–¥–∞–ª–æ—Å—å –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ
        </p>
      )}
    </div>
  );
};
```

### 7.3 –†–µ–¥–∞–∫—Ç–æ—Ä –∑–æ–Ω –¥–æ—Å—Ç–∞–≤–∫–∏

```typescript
// src/components/GIS/Delivery/ZoneEditor.tsx
import { useState, useRef } from 'react';
import { MapboxDraw } from '@mapbox/mapbox-gl-draw';
import '@mapbox/mapbox-gl-draw/dist/mapbox-gl-draw.css';

interface DeliveryZoneEditorProps {
  storefrontId: string;
  existingZones?: DeliveryZone[];
  onSave: (zones: DeliveryZone[]) => void;
}

export const DeliveryZoneEditor: React.FC<DeliveryZoneEditorProps> = ({
  storefrontId,
  existingZones = [],
  onSave
}) => {
  const [zones, setZones] = useState<DeliveryZone[]>(existingZones);
  const [selectedZone, setSelectedZone] = useState<string | null>(null);
  const drawRef = useRef<MapboxDraw | null>(null);
  
  useEffect(() => {
    if (!map.current) return;
    
    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ —Ä–∏—Å–æ–≤–∞–Ω–∏—è
    drawRef.current = new MapboxDraw({
      displayControlsDefault: false,
      controls: {
        polygon: true,
        trash: true
      },
      defaultMode: 'draw_polygon'
    });
    
    map.current.addControl(drawRef.current);
    
    // –ó–∞–≥—Ä—É–∂–∞–µ–º —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –∑–æ–Ω—ã
    existingZones.forEach(zone => {
      drawRef.current!.add({
        type: 'Feature',
        id: zone.id,
        geometry: {
          type: 'Polygon',
          coordinates: [zone.polygon.map(p => [p.lng, p.lat])]
        },
        properties: zone
      });
    });
    
    // –°–æ–±—ã—Ç–∏—è —Ä–∏—Å–æ–≤–∞–Ω–∏—è
    map.current.on('draw.create', (e) => {
      const feature = e.features[0];
      const polygon = feature.geometry.coordinates[0].map(coord => ({
        lat: coord[1],
        lng: coord[0]
      }));
      
      const newZone: DeliveryZone = {
        id: feature.id,
        storefront_id: storefrontId,
        name: `–ó–æ–Ω–∞ ${zones.length + 1}`,
        polygon,
        delivery_fee: 0,
        min_order_amount: 0,
        max_delivery_time_minutes: 60,
        color: generateColor(),
        is_active: true
      };
      
      setZones([...zones, newZone]);
      setSelectedZone(newZone.id);
    });
    
    return () => {
      if (drawRef.current && map.current) {
        map.current.removeControl(drawRef.current);
      }
    };
  }, []);
  
  const updateZone = (zoneId: string, updates: Partial<DeliveryZone>) => {
    setZones(zones.map(z => 
      z.id === zoneId ? { ...z, ...updates } : z
    ));
  };
  
  const deleteZone = (zoneId: string) => {
    drawRef.current?.delete(zoneId);
    setZones(zones.filter(z => z.id !== zoneId));
    setSelectedZone(null);
  };
  
  return (
    <div className="flex h-full">
      {/* –ö–∞—Ä—Ç–∞ */}
      <div className="flex-1">
        <InteractiveMap />
      </div>
      
      {/* –ü–∞–Ω–µ–ª—å –Ω–∞—Å—Ç—Ä–æ–µ–∫ */}
      <div className="w-80 bg-white p-4 shadow-lg overflow-y-auto">
        <h3 className="text-lg font-semibold mb-4">–ó–æ–Ω—ã –¥–æ—Å—Ç–∞–≤–∫–∏</h3>
        
        {zones.length === 0 ? (
          <p className="text-gray-600 text-sm">
            –ù–∞—Ä–∏—Å—É–π—Ç–µ –∑–æ–Ω—É –Ω–∞ –∫–∞—Ä—Ç–µ –¥–ª—è –Ω–∞—á–∞–ª–∞
          </p>
        ) : (
          <div className="space-y-4">
            {zones.map(zone => (
              <div
                key={zone.id}
                className={`border rounded-lg p-3 cursor-pointer ${
                  selectedZone === zone.id ? 'border-blue-500' : 'border-gray-200'
                }`}
                onClick={() => setSelectedZone(zone.id)}
              >
                <div className="flex items-center justify-between mb-2">
                  <input
                    type="text"
                    value={zone.name}
                    onChange={(e) => updateZone(zone.id!, { name: e.target.value })}
                    className="font-semibold bg-transparent"
                    onClick={(e) => e.stopPropagation()}
                  />
                  <div
                    className="w-6 h-6 rounded"
                    style={{ backgroundColor: zone.color }}
                  />
                </div>
                
                <div className="space-y-2 text-sm">
                  <div>
                    <label className="text-gray-600">–°—Ç–æ–∏–º–æ—Å—Ç—å –¥–æ—Å—Ç–∞–≤–∫–∏:</label>
                    <input
                      type="number"
                      value={zone.delivery_fee}
                      onChange={(e) => updateZone(zone.id!, { 
                        delivery_fee: Number(e.target.value) 
                      })}
                      className="ml-2 w-20 border rounded px-1"
                      onClick={(e) => e.stopPropagation()}
                    /> –†–°–î
                  </div>
                  
                  <div>
                    <label className="text-gray-600">–ú–∏–Ω. —Å—É–º–º–∞:</label>
                    <input
                      type="number"
                      value={zone.min_order_amount}
                      onChange={(e) => updateZone(zone.id!, { 
                        min_order_amount: Number(e.target.value) 
                      })}
                      className="ml-2 w-20 border rounded px-1"
                      onClick={(e) => e.stopPropagation()}
                    /> –†–°–î
                  </div>
                  
                  <div>
                    <label className="text-gray-600">–í—Ä–µ–º—è –¥–æ—Å—Ç–∞–≤–∫–∏:</label>
                    <input
                      type="number"
                      value={zone.max_delivery_time_minutes}
                      onChange={(e) => updateZone(zone.id!, { 
                        max_delivery_time_minutes: Number(e.target.value) 
                      })}
                      className="ml-2 w-16 border rounded px-1"
                      onClick={(e) => e.stopPropagation()}
                    /> –º–∏–Ω
                  </div>
                </div>
                
                <button
                  onClick={(e) => {
                    e.stopPropagation();
                    deleteZone(zone.id!);
                  }}
                  className="mt-2 text-red-600 text-sm hover:underline"
                >
                  –£–¥–∞–ª–∏—Ç—å –∑–æ–Ω—É
                </button>
              </div>
            ))}
          </div>
        )}
        
        <button
          onClick={() => onSave(zones)}
          className="mt-6 w-full bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700"
        >
          –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∑–æ–Ω—ã
        </button>
      </div>
    </div>
  );
};
```

### 7.4 –í—ã–±–æ—Ä —Å–ª—É–∂–±—ã –¥–æ—Å—Ç–∞–≤–∫–∏

```typescript
// src/components/GIS/Delivery/ServiceSelector.tsx
export const DeliveryServiceSelector: React.FC<{
  from: Point;
  to: Point;
  weight: number;
  onSelect: (option: DeliveryOption) => void;
}> = ({ from, to, weight, onSelect }) => {
  const { data: options, isLoading } = useQuery({
    queryKey: ['delivery-options', from, to, weight],
    queryFn: () => api.calculateDeliveryOptions({ from, to, weight })
  });
  
  if (isLoading) return <LoadingSpinner />;
  
  return (
    <div className="space-y-4">
      {/* D Express */}
      {options?.dexpress && (
        <div 
          className="border rounded-lg p-4 cursor-pointer hover:border-blue-500 transition-colors"
          onClick={() => onSelect(options.dexpress)}
        >
          <div className="flex items-center justify-between">
            <div className="flex items-center space-x-3">
              <img 
                src="/images/dexpress-logo.png" 
                alt="D Express" 
                className="h-10"
              />
              <div>
                <h4 className="font-semibold">D Express</h4>
                <p className="text-sm text-gray-600">
                  –ë—Ä–∑–∞ –¥–æ—Å—Ç–∞–≤–∞ –∑–∞ 1-2 –¥–∞–Ω–∞
                </p>
              </div>
            </div>
            <div className="text-right">
              <p className="text-2xl font-bold">{options.dexpress.price} –†–°–î</p>
              <p className="text-sm text-gray-600">1-2 –¥–∞–Ω–∞</p>
            </div>
          </div>
        </div>
      )}
      
      {/* –ü–æ—à—Ç–∞ –°—Ä–±–∏—ò–µ */}
      {options?.posta_srbije && (
        <div 
          className="border rounded-lg p-4 cursor-pointer hover:border-blue-500 transition-colors"
          onClick={() => onSelect(options.posta_srbije)}
        >
          <div className="flex items-center justify-between">
            <div className="flex items-center space-x-3">
              <img 
                src="/images/posta-srbije-logo.png" 
                alt="–ü–æ—à—Ç–∞ –°—Ä–±–∏—ò–µ" 
                className="h-10"
              />
              <div>
                <h4 className="font-semibold">–ü–æ—à—Ç–∞ –°—Ä–±–∏—ò–µ</h4>
                <p className="text-sm text-gray-600">
                  –°—Ç–∞–Ω–¥–∞—Ä–¥–Ω–∞ –¥–æ—Å—Ç–∞–≤–∞
                </p>
              </div>
            </div>
            <div className="text-right">
              <p className="text-2xl font-bold">{options.posta_srbije.price} –†–°–î</p>
              <p className="text-sm text-gray-600">2-5 –¥–∞–Ω–∞</p>
            </div>
          </div>
        </div>
      )}
    </div>
  );
};
```

---

## 8. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –¥–æ—Å—Ç–∞–≤–∫–æ–π

### 8.1 D Express

```go
// internal/proj/delivery/providers/dexpress/client.go
package dexpress

type Client struct {
    apiURL   string
    apiKey   string
    client   *http.Client
    cache    *redis.Client
}

func (c *Client) CalculatePrice(params PriceParams) (*PriceResponse, error) {
    // –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫—ç—à–∞
    cacheKey := fmt.Sprintf("dexpress:price:%s:%s:%.2f", 
        params.FromPostal, params.ToPostal, params.Weight)
    
    if cached, err := c.cache.Get(context.Background(), cacheKey).Result(); err == nil {
        var resp PriceResponse
        json.Unmarshal([]byte(cached), &resp)
        return &resp, nil
    }
    
    // API –∑–∞–ø—Ä–æ—Å
    reqBody, _ := json.Marshal(map[string]interface{}{
        "from_postal": params.FromPostal,
        "to_postal":   params.ToPostal,
        "weight":      params.Weight,
        "cod_amount":  params.CODAmount,
    })
    
    req, _ := http.NewRequest("POST", 
        c.apiURL+"/calculate-price", 
        bytes.NewBuffer(reqBody))
    req.Header.Set("Authorization", "Bearer "+c.apiKey)
    req.Header.Set("Content-Type", "application/json")
    
    resp, err := c.client.Do(req)
    if err != nil {
        return nil, err
    }
    defer resp.Body.Close()
    
    var priceResp PriceResponse
    json.NewDecoder(resp.Body).Decode(&priceResp)
    
    // –ö—ç—à–∏—Ä—É–µ–º –Ω–∞ 1 —á–∞—Å
    c.cache.Set(context.Background(), cacheKey, 
        json.Marshal(priceResp), time.Hour)
    
    return &priceResp, nil
}

func (c *Client) CreateShipment(order ShipmentOrder) (*Shipment, error) {
    reqBody, _ := json.Marshal(order)
    
    req, _ := http.NewRequest("POST", 
        c.apiURL+"/shipments", 
        bytes.NewBuffer(reqBody))
    req.Header.Set("Authorization", "Bearer "+c.apiKey)
    
    resp, err := c.client.Do(req)
    if err != nil {
        return nil, err
    }
    
    var shipment Shipment
    json.NewDecoder(resp.Body).Decode(&shipment)
    
    return &shipment, nil
}

func (c *Client) TrackShipment(trackingNumber string) (*TrackingInfo, error) {
    req, _ := http.NewRequest("GET", 
        fmt.Sprintf("%s/tracking/%s", c.apiURL, trackingNumber), nil)
    req.Header.Set("Authorization", "Bearer "+c.apiKey)
    
    resp, err := c.client.Do(req)
    if err != nil {
        return nil, err
    }
    
    var tracking TrackingInfo
    json.NewDecoder(resp.Body).Decode(&tracking)
    
    // –ú–∞–ø–ø–∏–Ω–≥ —Å—Ç–∞—Ç—É—Å–æ–≤
    tracking.Status = c.mapStatus(tracking.Status)
    
    return &tracking, nil
}
```

### 8.2 –ü–æ—à—Ç–∞ –°—Ä–±–∏—ò–µ

```go
// internal/proj/delivery/providers/posta/client.go
package posta

type Client struct {
    apiURL   string
    username string
    password string
    client   *http.Client
    db       *sql.DB
}

func (c *Client) CalculatePrice(params PriceParams) (*PriceResponse, error) {
    // –ü–æ—à—Ç–∞ –°—Ä–±–∏—ò–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∑–æ–Ω—ã
    zone := c.calculateZone(params.FromPostal, params.ToPostal)
    
    // –ë–∞–∑–æ–≤–∞—è —Ü–µ–Ω–∞ –ø–æ –∑–æ–Ω–µ
    basePrice := map[int]float64{
        1: 250, // –≤–Ω—É—Ç—Ä–∏ –≥–æ—Ä–æ–¥–∞
        2: 350, // –º–µ–∂–¥—É –≥–æ—Ä–æ–¥–∞–º–∏
        3: 450, // —É–¥–∞–ª–µ–Ω–Ω—ã–µ —Ä–∞–π–æ–Ω—ã
    }[zone]
    
    // –î–æ–ø–ª–∞—Ç–∞ –∑–∞ –≤–µ—Å
    weightPrice := 0.0
    if params.Weight > 1 {
        weightPrice = (params.Weight - 1) * 50
    }
    
    return &PriceResponse{
        Price:         basePrice + weightPrice,
        EstimatedDays: c.getEstimatedDays(zone),
        Zone:          zone,
    }, nil
}

func (c *Client) calculateZone(from, to string) int {
    // –õ–æ–≥–∏–∫–∞ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –∑–æ–Ω—ã –ø–æ –ø–æ—á—Ç–æ–≤—ã–º –∏–Ω–¥–µ–∫—Å–∞–º
    fromRegion := c.getRegionByPostal(from)
    toRegion := c.getRegionByPostal(to)
    
    if fromRegion == toRegion {
        return 1 // –≤–Ω—É—Ç—Ä–∏ —Ä–µ–≥–∏–æ–Ω–∞
    } else if c.isMajorCity(fromRegion) && c.isMajorCity(toRegion) {
        return 2 // –º–µ–∂–¥—É –∫—Ä—É–ø–Ω—ã–º–∏ –≥–æ—Ä–æ–¥–∞–º–∏
    }
    return 3 // –æ—Å—Ç–∞–ª—å–Ω–æ–µ
}

func (c *Client) FindNearestOffices(lat, lng float64, limit int) ([]PostOffice, error) {
    query := `
        SELECT 
            id, name, address, postal_code,
            ST_Distance(location::geography, ST_Point($1, $2)::geography) as distance,
            working_hours, services
        FROM pickup_points
        WHERE 
            provider_id = (SELECT id FROM delivery_providers WHERE code = 'posta_srbije')
            AND is_active = true
        ORDER BY location <-> ST_Point($1, $2)::geography
        LIMIT $3
    `
    
    rows, err := c.db.Query(query, lng, lat, limit)
    if err != nil {
        return nil, err
    }
    defer rows.Close()
    
    var offices []PostOffice
    for rows.Next() {
        var office PostOffice
        var servicesJSON []byte
        var hoursJSON []byte
        
        err := rows.Scan(
            &office.ID, &office.Name, &office.Address, 
            &office.PostalCode, &office.Distance,
            &hoursJSON, &servicesJSON,
        )
        if err != nil {
            continue
        }
        
        json.Unmarshal(hoursJSON, &office.WorkingHours)
        json.Unmarshal(servicesJSON, &office.Services)
        
        offices = append(offices, office)
    }
    
    return offices, nil
}
```

---

## 9. –ü–ª–∞–Ω —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### 9.1 –ö–æ–º–∞–Ω–¥–∞ –∏ —Ä–µ—Å—É—Ä—Å—ã

| –†–æ–ª—å | –ó–∞–Ω—è—Ç–æ—Å—Ç—å | –û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å |
|------|-----------|-----------------|
| Backend Senior | 100% | PostGIS, API, –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ |
| Frontend Senior | 100% | –ö–∞—Ä—Ç—ã, UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã |
| Full-stack Middle+ | 100% | –î–æ—Å—Ç–∞–≤–∫–∞, –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ |
| DevOps | 30% | –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞, –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ |
| UI/UX Designer | 50% (4 –Ω–µ–¥–µ–ª–∏) | –î–∏–∑–∞–π–Ω –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ |

### 9.2 –§–∞–∑—ã —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

#### –§–∞–∑–∞ 1: –ë–∞–∑–æ–≤–∞—è –∫–∞—Ä—Ç–∞ (4 –Ω–µ–¥–µ–ª–∏)
**–¶–µ–ª—å**: –ü–æ–ª–Ω–æ—Å—Ç—å—é —Ä–∞–±–æ—Ç–∞—é—â–∞—è –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è –∫–∞—Ä—Ç–∞ —Å –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–µ–π —Ç–æ–≤–∞—Ä–æ–≤ –∏ –≤–∏—Ç—Ä–∏–Ω

**–†–µ–∑—É–ª—å—Ç–∞—Ç —Ñ–∞–∑—ã**: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –º–æ–≥—É—Ç –æ—Ç–∫—Ä—ã—Ç—å –∫–∞—Ä—Ç—É, —É–≤–∏–¥–µ—Ç—å —Ç–æ–≤–∞—Ä—ã —Ä—è–¥–æ–º, –∫–ª–∏–∫–Ω—É—Ç—å –Ω–∞ –º–∞—Ä–∫–µ—Ä –∏ –ø–µ—Ä–µ–π—Ç–∏ –∫ —Ç–æ–≤–∞—Ä—É

**–ù–µ–¥–µ–ª—è 1: –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∏ –¥–∞–Ω–Ω—ã–µ**
- [ ] –ù–∞—Å—Ç—Ä–æ–π–∫–∞ PostGIS –≤ Docker
- [ ] –°–æ–∑–¥–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü listings_geo
- [ ] –ú–∏–≥—Ä–∞—Ü–∏—è –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –æ–±—ä—è–≤–ª–µ–Ω–∏–π
- [ ] –ë–∞–∑–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ GIS –º–æ–¥—É–ª—è

**–ù–µ–¥–µ–ª—è 2: Backend API**
- [ ] GET /api/v1/gis/search/bounds - –ø–æ–∏—Å–∫ –≤ –≥—Ä–∞–Ω–∏—Ü–∞—Ö –∫–∞—Ä—Ç—ã
- [ ] GET /api/v1/gis/listings/{id}/location - –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã —Ç–æ–≤–∞—Ä–∞
- [ ] POST /api/v1/gis/listings/{id}/location - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç
- [ ] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Redis –¥–ª—è –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è

**–ù–µ–¥–µ–ª—è 3: Frontend –∫–∞—Ä—Ç–∞**  
- [ ] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è Mapbox GL JS
- [ ] –ö–æ–º–ø–æ–Ω–µ–Ω—Ç InteractiveMap —Å –º–∞—Ä–∫–µ—Ä–∞–º–∏
- [ ] –ü–æ–ø–∞–ø—ã —Å –ø—Ä–µ–≤—å—é —Ç–æ–≤–∞—Ä–∞
- [ ] –ë–∞–∑–æ–≤—ã–µ –∫–æ–Ω—Ç—Ä–æ–ª—ã –∫–∞—Ä—Ç—ã (–∑—É–º, –Ω–∞–≤–∏–≥–∞—Ü–∏—è)

**–ù–µ–¥–µ–ª—è 4: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è**
- [ ] –ö–ª–∞—Å—Ç–µ—Ä–∏–∑–∞—Ü–∏—è –º–∞—Ä–∫–µ—Ä–æ–≤ –ø—Ä–∏ –±–æ–ª—å—à–æ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ
- [ ] Lazy loading –º–∞—Ä–∫–µ—Ä–æ–≤ –ø–æ –º–µ—Ä–µ –¥–≤–∏–∂–µ–Ω–∏—è –∫–∞—Ä—Ç—ã
- [ ] –ú–æ–±–∏–ª—å–Ω–∞—è –∞–¥–∞–ø—Ç–∞—Ü–∏—è –∫–∞—Ä—Ç—ã
- [ ] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

**–ú–µ—Ç—Ä–∏–∫–∏ —É—Å–ø–µ—Ö–∞ —Ñ–∞–∑—ã 1**:
- –ö–∞—Ä—Ç–∞ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è < 2 —Å–µ–∫
- –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è 1000+ –º–∞—Ä–∫–µ—Ä–æ–≤ –±–µ–∑ –ª–∞–≥–æ–≤
- CTR —Å –º–∞—Ä–∫–µ—Ä–∞ –Ω–∞ —Ç–æ–≤–∞—Ä > 5%

#### –§–∞–∑–∞ 2: –ì–µ–æ–ø–æ–∏—Å–∫ –∏ —Ñ–∏–ª—å—Ç—Ä—ã (4 –Ω–µ–¥–µ–ª–∏)
**–¶–µ–ª—å**: –ü–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π –ø–æ–∏—Å–∫ —Ç–æ–≤–∞—Ä–æ–≤ –ø–æ –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏—é —Å —Ñ–∏–ª—å—Ç—Ä–∞–º–∏

**–†–µ–∑—É–ª—å—Ç–∞—Ç —Ñ–∞–∑—ã**: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –º–æ–≥—É—Ç –∏—Å–∫–∞—Ç—å —Ç–æ–≤–∞—Ä—ã –≤ —Ä–∞–¥–∏—É—Å–µ –æ—Ç —Å–µ–±—è, –ø–æ —Ä–∞–π–æ–Ω–∞–º, —Å —Ñ–∏–ª—å—Ç—Ä–∞–º–∏ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º –∏ —Ü–µ–Ω–µ

**–ù–µ–¥–µ–ª—è 5-6: –ü—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π –ø–æ–∏—Å–∫**
- [ ] POST /api/v1/gis/search/radius - –ø–æ–∏—Å–∫ –≤ —Ä–∞–¥–∏—É—Å–µ
- [ ] GET /api/v1/gis/districts - —Å–ø–∏—Å–æ–∫ —Ä–∞–π–æ–Ω–æ–≤
- [ ] POST /api/v1/gis/search/district - –ø–æ–∏—Å–∫ –ø–æ —Ä–∞–π–æ–Ω—É
- [ ] –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è PostGIS –∏–Ω–¥–µ–∫—Å–æ–≤

**–ù–µ–¥–µ–ª—è 7: –ì–µ–æ–ª–æ–∫–∞—Ü–∏—è –∏ –≥–µ–æ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ**
- [ ] Hook useGeolocation –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏—è
- [ ] POST /api/v1/gis/geocode - –∞–¥—Ä–µ—Å –≤ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã
- [ ] GET /api/v1/gis/reverse - –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –≤ –∞–¥—Ä–µ—Å
- [ ] –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –≥–µ–æ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è

**–ù–µ–¥–µ–ª—è 8: UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –ø–æ–∏—Å–∫–∞**
- [ ] –ö–æ–º–ø–æ–Ω–µ–Ω—Ç RadiusSearch —Å —Å–ª–∞–π–¥–µ—Ä–æ–º —Ä–∞–¥–∏—É—Å–∞
- [ ] –ö–æ–º–ø–æ–Ω–µ–Ω—Ç DistrictSelector —Å –≤—ã–±–æ—Ä–æ–º —Ä–∞–π–æ–Ω–∞
- [ ] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Ñ–∏–ª—å—Ç—Ä–æ–≤ –∫–∞—Ç–µ–≥–æ—Ä–∏–π –∏ —Ü–µ–Ω—ã
- [ ] –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏

**–ú–µ—Ç—Ä–∏–∫–∏ —É—Å–ø–µ—Ö–∞ —Ñ–∞–∑—ã 2**:
- –ü–æ–∏—Å–∫ –ø–æ —Ä–∞–¥–∏—É—Å—É < 200ms
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≥–µ–æ–ø–æ–∏—Å–∫–∞ > 30% –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- –ö–æ–Ω–≤–µ—Ä—Å–∏—è –∏–∑ –≥–µ–æ–ø–æ–∏—Å–∫–∞ > 10%

#### –§–∞–∑–∞ 3: –£–º–Ω—ã–π –ø–æ–∏—Å–∫ –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ (4 –Ω–µ–¥–µ–ª–∏)  
**–¶–µ–ª—å**: AI-powered –ø–æ–∏—Å–∫ –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ –¥–ª—è –ø—Ä–æ–¥–∞–≤—Ü–æ–≤

**–†–µ–∑—É–ª—å—Ç–∞—Ç —Ñ–∞–∑—ã**: –£–º–Ω—ã–π –ø–æ–∏—Å–∫ —Å —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è–º–∏, —Ç–µ–ø–ª–æ–≤—ã–µ –∫–∞—Ä—Ç—ã –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏, —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ —Ä–∞–π–æ–Ω–∞–º

**–ù–µ–¥–µ–ª—è 9-10: –£–º–Ω—ã–π –ø–æ–∏—Å–∫**
- [ ] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Elasticsearch –¥–ª—è –≥–µ–æ–ø–æ–∏—Å–∫–∞
- [ ] POST /api/v1/gis/search/smart - —É–º–Ω—ã–π –ø–æ–∏—Å–∫
- [ ] –ö–æ–º–ø–æ–Ω–µ–Ω—Ç SmartSearch —Å –∞–≤—Ç–æ–∫–æ–º–ø–ª–∏—Ç–æ–º
- [ ] –ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –ø–æ –∏—Å—Ç–æ—Ä–∏–∏

**–ù–µ–¥–µ–ª—è 11: –ì–µ–æ–∞–Ω–∞–ª–∏—Ç–∏–∫–∞**  
- [ ] GET /api/v1/gis/analytics/heatmap - —Ç–µ–ø–ª–æ–≤–∞—è –∫–∞—Ä—Ç–∞
- [ ] GET /api/v1/gis/analytics/districts - —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ä–∞–π–æ–Ω–æ–≤
- [ ] –ö–æ–º–ø–æ–Ω–µ–Ω—Ç HeatmapLayer –¥–ª—è –∫–∞—Ä—Ç—ã
- [ ] –î–∞—à–±–æ—Ä–¥ –ø—Ä–æ–¥–∞–≤—Ü–∞ —Å –≥–µ–æ—Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–æ–π

**–ù–µ–¥–µ–ª—è 12: –î–æ—Å—Ç–∞–≤–∫–∞ –∏ —Ñ–∏–Ω–∞–ª–∏–∑–∞—Ü–∏—è**
- [ ] –ë–∞–∑–æ–≤—ã–µ –∑–æ–Ω—ã –¥–æ—Å—Ç–∞–≤–∫–∏ –¥–ª—è –≤–∏—Ç—Ä–∏–Ω
- [ ] –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç–∞–≤–∫–∏ –ø–æ –∞–¥—Ä–µ—Å—É
- [ ] –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- [ ] Production deploy –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

**–ú–µ—Ç—Ä–∏–∫–∏ —É—Å–ø–µ—Ö–∞ —Ñ–∞–∑—ã 3**:
- –£–º–Ω—ã–π –ø–æ–∏—Å–∫ –∏—Å–ø–æ–ª—å–∑—É—é—Ç > 50% –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- –ù–∞—Å—Ç—Ä–æ–µ–Ω–æ > 100 –∑–æ–Ω –¥–æ—Å—Ç–∞–≤–∫–∏
- Uptime > 99.9%

### 9.3 –†–∏—Å–∫–∏ –∏ –º–∏—Ç–∏–≥–∞—Ü–∏—è

| –†–∏—Å–∫ | –í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å | –í–ª–∏—è–Ω–∏–µ | –ú–∏—Ç–∏–≥–∞—Ü–∏—è |
|------|-------------|---------|-----------|  
| –ó–∞–¥–µ—Ä–∂–∫–∞ PostGIS | –ù–∏–∑–∫–∞—è | –í—ã—Å–æ–∫–æ–µ | –ì–æ—Ç–æ–≤—ã–π Docker –æ–±—Ä–∞–∑ |
| API –ª–∏–º–∏—Ç—ã –∫–∞—Ä—Ç | –°—Ä–µ–¥–Ω—è—è | –°—Ä–µ–¥–Ω–µ–µ | –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ, OSM fallback |
| –°–ª–æ–∂–Ω–æ—Å—Ç—å UX | –ù–∏–∑–∫–∞—è | –í—ã—Å–æ–∫–æ–µ | –ò—Ç–µ—Ä–∞—Ç–∏–≤–Ω—ã–π –¥–∏–∑–∞–π–Ω |
| –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å | –°—Ä–µ–¥–Ω—è—è | –í—ã—Å–æ–∫–æ–µ | –ü—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤–∞–Ω–∏–µ —Å –¥–µ–Ω—å 1 |

---

## 10. –ú–µ—Ç—Ä–∏–∫–∏ —É—Å–ø–µ—Ö–∞

### 10.1 –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –º–µ—Ç—Ä–∏–∫–∏

| –ú–µ—Ç—Ä–∏–∫–∞ | –¶–µ–ª—å | –ò–∑–º–µ—Ä–µ–Ω–∏–µ |
|---------|------|-----------|
| Uptime | 99.9% | Prometheus |
| P95 latency –≥–µ–æ–ø–æ–∏—Å–∫–∞ | < 200ms | Grafana |
| –ó–∞–≥—Ä—É–∑–∫–∞ –∫–∞—Ä—Ç—ã | < 2 —Å–µ–∫ | Google Analytics |
| –û—à–∏–±–∫–∏ API | < 0.1% | Sentry |

### 10.2 –ü—Ä–æ–¥—É–∫—Ç–æ–≤—ã–µ –º–µ—Ç—Ä–∏–∫–∏

| –ú–µ—Ç—Ä–∏–∫–∞ | –ë–∞–∑–æ–≤–æ–µ | –¶–µ–ª—å (3 –º–µ—Å) |
|---------|---------|--------------|
| –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫–∞—Ä—Ç—ã | 0% | 40% |
| –ö–æ–Ω–≤–µ—Ä—Å–∏—è –∏–∑ –∫–∞—Ä—Ç—ã | - | 8% |
| –ü–æ–∏—Å–∫ –ø–æ –≥–µ–æ–ª–æ–∫–∞—Ü–∏–∏ | 0% | 25% |
| –ù–∞—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ –∑–æ–Ω—ã –¥–æ—Å—Ç–∞–≤–∫–∏ | 0 | 500 |

### 10.3 –ë–∏–∑–Ω–µ—Å –º–µ—Ç—Ä–∏–∫–∏

| –ú–µ—Ç—Ä–∏–∫–∞ | –í–ª–∏—è–Ω–∏–µ |
|---------|---------|
| –†–æ—Å—Ç –ª–æ–∫–∞–ª—å–Ω—ã—Ö –ø—Ä–æ–¥–∞–∂ | +30% |
| –°–Ω–∏–∂–µ–Ω–∏–µ –≤–æ–∑–≤—Ä–∞—Ç–æ–≤ | -15% |
| –£–≤–µ–ª–∏—á–µ–Ω–∏–µ —Å—Ä–µ–¥–Ω–µ–≥–æ —á–µ–∫–∞ | +20% |
| NPS –ø—Ä–æ–¥–∞–≤—Ü–æ–≤ | +15 –ø—É–Ω–∫—Ç–æ–≤ |

---

## üìé –ü—Ä–∏–ª–æ–∂–µ–Ω–∏—è

### A. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

```yaml
# .env.example
# Mapbox
MAPBOX_ACCESS_TOKEN=pk.xxx
MAPBOX_STYLE_URL=mapbox://styles/mapbox/streets-v12

# PostGIS
POSTGIS_VERSION=3.4
POSTGIS_ENABLE_RASTER=true

# –ì–µ–æ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ
NOMINATIM_URL=https://nominatim.openstreetmap.org
GEOCODING_CACHE_TTL=86400

# D Express
DEXPRESS_API_URL=https://api.dexpress.rs/v1
DEXPRESS_API_KEY=xxx

# –ü–æ—à—Ç–∞ –°—Ä–±–∏—ò–µ
POSTA_API_URL=https://api.posta.rs/v2
POSTA_USERNAME=xxx
POSTA_PASSWORD=xxx

# –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ
REDIS_GEO_TTL=300
TILE_CACHE_SIZE=1GB
```

### B. –¢–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ

```sql
-- –¢–µ—Å—Ç–æ–≤—ã–µ –æ–±—ä—è–≤–ª–µ–Ω–∏—è –¥–ª—è –ë–µ–ª–≥—Ä–∞–¥–∞
INSERT INTO listings_geo (listing_id, location, city, district)
SELECT 
    id,
    ST_Point(
        20.4568 + (random() - 0.5) * 0.1,
        44.8178 + (random() - 0.5) * 0.1
    )::geography,
    '–ë–µ–æ–≥—Ä–∞–¥',
    CASE (random() * 5)::int
        WHEN 0 THEN '–°—Ç–∞—Ä–∏ –≥—Ä–∞–¥'
        WHEN 1 THEN '–ù–æ–≤–∏ –ë–µ–æ–≥—Ä–∞–¥'
        WHEN 2 THEN '–ó–µ–º—É–Ω'
        WHEN 3 THEN '–ü–∞–ª–∏–ª—É–ª–∞'
        ELSE '–ß—É–∫–∞—Ä–∏—Ü–∞'
    END
FROM marketplace_listings
WHERE city = '–ë–µ–æ–≥—Ä–∞–¥'
LIMIT 1000;

-- –¢–µ—Å—Ç–æ–≤—ã–µ –ø–æ—á—Ç–æ–≤—ã–µ –æ—Ç–¥–µ–ª–µ–Ω–∏—è
INSERT INTO pickup_points (provider_id, name, address, location, city, postal_code)
VALUES
    ((SELECT id FROM delivery_providers WHERE code = 'posta_srbije'),
     '–ü–æ—à—Ç–∞ 11000 –ë–µ–æ–≥—Ä–∞–¥ 1', '–¢–∞–∫–æ–≤—Å–∫–∞ 2', ST_Point(20.4589, 44.8098)::geography, 
     '–ë–µ–æ–≥—Ä–∞–¥', '11000'),
    ((SELECT id FROM delivery_providers WHERE code = 'posta_srbije'),
     '–ü–æ—à—Ç–∞ 11070 –ù–æ–≤–∏ –ë–µ–æ–≥—Ä–∞–¥', '–ë—É–ª–µ–≤–∞—Ä –ú–∏—Ö–∞—ò–ª–∞ –ü—É–ø–∏–Ω–∞ 165', ST_Point(20.4023, 44.8219)::geography, 
     '–ë–µ–æ–≥—Ä–∞–¥', '11070');
```

---

## ‚úÖ –ö–æ–Ω—Ç—Ä–æ–ª—å–Ω—ã–π —Å–ø–∏—Å–æ–∫ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏

### Pre-development
- [ ] –ö–æ–º–∞–Ω–¥–∞ —Å—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∞
- [ ] –î–æ—Å—Ç—É–ø—ã –∫ API –ø–æ–ª—É—á–µ–Ω—ã
- [ ] –û–∫—Ä—É–∂–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ
- [ ] –î–∏–∑–∞–π–Ω-–º–∞–∫–µ—Ç—ã –≥–æ—Ç–æ–≤—ã

### Development
- [ ] PostGIS —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] API endpoints –≥–æ—Ç–æ–≤—ã
- [ ] –ö–∞—Ä—Ç–∞ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è
- [ ] –ü–æ–∏—Å–∫ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∏—Ä—É–µ—Ç
- [ ] –î–æ—Å—Ç–∞–≤–∫–∞ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–∞

### Pre-launch
- [ ] –¢–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç
- [ ] –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –Ω–∞–ø–∏—Å–∞–Ω–∞
- [ ] –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –Ω–∞—Å—Ç—Ä–æ–µ–Ω
- [ ] –ö–æ–º–∞–Ω–¥–∞ –æ–±—É—á–µ–Ω–∞

### Launch
- [ ] Production deploy
- [ ] A/B —Ç–µ—Å—Ç –∑–∞–ø—É—â–µ–Ω
- [ ] –ú–µ—Ç—Ä–∏–∫–∏ —Å–æ–±–∏—Ä–∞—é—Ç—Å—è
- [ ] Support –≥–æ—Ç–æ–≤

---

**–î–æ–∫—É–º–µ–Ω—Ç –≥–æ—Ç–æ–≤ –∫ –ø–µ—Ä–µ–¥–∞—á–µ –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫—É!** üöÄ

–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –≤–æ–ø—Ä–æ—Å–æ–≤ –æ–±—Ä–∞—â–∞–π—Ç–µ—Å—å –∫ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–º—É —Ä—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—é –ø—Ä–æ–µ–∫—Ç–∞.