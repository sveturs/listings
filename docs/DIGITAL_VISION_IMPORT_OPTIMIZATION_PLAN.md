# –ü–ª–∞–Ω –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –∏–º–ø–æ—Ä—Ç–∞ –¥–ª—è Digital Vision

**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è:** 2025-10-06
**–í–µ—Ä—Å–∏—è:** 1.0
**–ö–ª–∏–µ–Ω—Ç:** Digital Vision (https://digitalvision.rs)
**–°—Ç–∞—Ç—É—Å:** üìã –ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üî• –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô (Premium –∫–ª–∏–µ–Ω—Ç)

---

## üéØ –¶–µ–ª—å –ø—Ä–æ–µ–∫—Ç–∞

Digital Vision - –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–π premium –∫–ª–∏–µ–Ω—Ç (—Å–∞–º–∞—è –¥–æ—Ä–æ–≥–∞—è –ø–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ –≤–∏—Ç—Ä–∏–Ω—É). –ò—Ö –ø—Ä–∞–π—Å –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –æ–Ω–ª–∞–π–Ω –¥–ª—è —Ç–æ—á–µ–∫ –ø—Ä–æ–¥–∞–∂ –≤ –¢–¶. **–ù–∞—à–∞ –∑–∞–¥–∞—á–∞**: —Å–¥–µ–ª–∞—Ç—å —Ä–∞–±–æ—Ç—É —Å –Ω–∞—à–µ–π –≤–∏—Ç—Ä–∏–Ω–æ–π –∏ –ü–í–ó —Ç–∞–∫–æ–π –∂–µ —É–¥–æ–±–Ω–æ–π –∫–∞–∫ –∏—Ö –æ—Å—Ç—Ä–æ–≤–∫–∏, –Ω–æ –≤—ã–≥–æ–¥–Ω–µ–µ –∏ –ª—É—á—à–µ.

### –ö–ª—é—á–µ–≤—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è
1. ‚úÖ **–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ —É–¥–æ–±—Å—Ç–≤–æ** –∏–º–ø–æ—Ä—Ç–∞ 17,000+ —Ç–æ–≤–∞—Ä–æ–≤
2. ‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è** —Ä–µ–≥—É–ª—è—Ä–Ω—ã—Ö –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π –ø—Ä–∞–π—Å–∞
3. ‚úÖ **–¢–æ—á–Ω–∞—è –∫–∞—Ç–µ–≥–æ—Ä–∏–∑–∞—Ü–∏—è** —Ç–æ–≤–∞—Ä–æ–≤ (3-—É—Ä–æ–≤–Ω–µ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞)
4. ‚úÖ **–ë—ã—Å—Ç—Ä–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞** –±–æ–ª—å—à–∏—Ö –æ–±—ä–µ–º–æ–≤ –¥–∞–Ω–Ω—ã—Ö
5. ‚úÖ **–ü–æ–Ω—è—Ç–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å** –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –ø—Ä–æ—Ü–µ—Å—Å–∞

---

## üìä –ê–Ω–∞–ª–∏–∑ —Ç–µ–∫—É—â–µ–π —Å–∏—Ç—É–∞—Ü–∏–∏

### Digital Vision XML —Ñ–æ—Ä–º–∞—Ç

**URL –ø—Ä–∞–π—Å–∞:** `https://digitalvision.rs/xml/DigitalVision.zip`

**–•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏:**
- üì¶ **–¢–æ–≤–∞—Ä–æ–≤:** 17,353 –ø–æ–∑–∏—Ü–∏–π
- üìÑ **–†–∞–∑–º–µ—Ä:** 38MB (ZIP ~3MB)
- üîÑ **–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** –ï–∂–µ–¥–Ω–µ–≤–Ω–æ–µ (–æ–Ω–ª–∞–π–Ω –ø—Ä–∞–π—Å –¥–ª—è —Ç–æ—á–µ–∫ –ø—Ä–æ–¥–∞–∂)

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏–π:**
```
–ö–∞—Ç–µ–≥–æ—Ä–∏—è 1 (7 –æ—Å–Ω–æ–≤–Ω—ã—Ö):
  - OPREMA ZA MOBILNI
  - OPREMA ZA TABLET
  - RACUNARSKA OPREMA
  - GADGETS
  - SECURITY
  - SERVIS
  - (–ø—É—Å—Ç—ã–µ)

–ö–∞—Ç–µ–≥–æ—Ä–∏—è 2 (56 –ø–æ–¥–∫–∞—Ç–µ–≥–æ—Ä–∏–π):
  - BATERIJE
  - ALATI
  - PUNJACI ZA TELEFONE
  - DRZACI STALCI I DOCKING
  - ADAPTERI I KABLOVI
  - –∏ –¥—Ä.

–ö–∞—Ç–µ–≥–æ—Ä–∏—è 3 (388 —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã—Ö –∫–∞—Ç–µ–≥–æ—Ä–∏–π):
  - BATERIJE OUTLET
  - BATERIJE ECO GRADE
  - KUCNI PUNJACI
  - ALATI ZA OTVARANJE TELEFONA
  - –∏ –¥—Ä.
```

**–ü—Ä–∏–º–µ—Ä —Ç–æ–≤–∞—Ä–∞:**
```xml
<artikal>
  <id>38525</id>
  <sifra>3023</sifra>
  <naziv><![CDATA[Baterija za LG B2050 950 mAh]]></naziv>
  <kategorija1><![CDATA[OPREMA ZA MOBILNI]]></kategorija1>
  <kategorija2><![CDATA[BATERIJE]]></kategorija2>
  <kategorija3><![CDATA[BATERIJE OUTLET]]></kategorija3>
  <uvoznik>Digital Vision doo</uvoznik>
  <godinaUvoza>2025.</godinaUvoza>
  <zemljaPorekla>Kina</zemljaPorekla>
  <vpCena>235.95</vpCena>        <!-- –û–ø—Ç–æ–≤–∞—è —Ü–µ–Ω–∞ -->
  <mpCena>590.0000</mpCena>      <!-- –†–æ–∑–Ω–∏—á–Ω–∞—è —Ü–µ–Ω–∞ -->
  <dostupan>1</dostupan>          <!-- –í –Ω–∞–ª–∏—á–∏–∏ -->
  <naAkciji>1</naAkciji>          <!-- –ù–∞ –∞–∫—Ü–∏–∏ -->
  <opis><![CDATA[<p>Standard zamenska baterija za LG.</p>]]></opis>
  <barKod></barKod>
  <slike>
    <slika><![CDATA[https://digitalvision.rs/p/38/38525/bat-lg-b2050.png]]></slika>
  </slike>
</artikal>
```

### –¢–µ–∫—É—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –∏–º–ø–æ—Ä—Ç–∞

**‚úÖ –ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç —Ö–æ—Ä–æ—à–æ:**

1. **XML –ø–∞—Ä—Å–µ—Ä Digital Vision** (`backend/internal/proj/storefronts/parsers/xml_parser.go`)
   - ‚úÖ –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ –ø–∞—Ä—Å–∏—Ç —Ñ–æ—Ä–º–∞—Ç Digital Vision
   - ‚úÖ –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç CDATA –±–ª–æ–∫–∏
   - ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è —Ü–µ–Ω, –Ω–∞–∑–≤–∞–Ω–∏–π, SKU
   - ‚úÖ –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π

2. **–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞** (–°–ø—Ä–∏–Ω—Ç 2 - 100% –∑–∞–≤–µ—Ä—à–µ–Ω)
   - ‚úÖ Worker pool (4 –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã—Ö –≤–æ—Ä–∫–µ—Ä–∞)
   - ‚úÖ Queue —Ä–∞–∑–º–µ—Ä–æ–º 100 –∑–∞–¥–∞—á
   - ‚úÖ Graceful shutdown
   - ‚úÖ Fallback –Ω–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π –∏–º–ø–æ—Ä—Ç

3. **–û–±—Ä–∞–±–æ—Ç–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π** (–°–ø—Ä–∏–Ω—Ç 2 - 100% –∑–∞–≤–µ—Ä—à–µ–Ω)
   - ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –∏–∑ URL
   - ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è —Ñ–æ—Ä–º–∞—Ç–∞ –∏ —Ä–∞–∑–º–µ—Ä–∞
   - ‚úÖ –ì–µ–Ω–µ—Ä–∞—Ü–∏—è thumbnails
   - ‚úÖ –ó–∞–≥—Ä—É–∑–∫–∞ –≤ MinIO

4. **Preview —Ñ—É–Ω–∫—Ü–∏—è** (–°–ø—Ä–∏–Ω—Ç 3 - 100% –∑–∞–≤–µ—Ä—à–µ–Ω)
   - ‚úÖ –ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä –ø–µ—Ä–µ–¥ –∏–º–ø–æ—Ä—Ç–æ–º
   - ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
   - ‚úÖ Frontend –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è

5. **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö**
   - ‚úÖ –¢–∞–±–ª–∏—Ü–∞ `import_jobs` —Å –ø–æ–ª–Ω–æ–π –∏—Å—Ç–æ—Ä–∏–µ–π
   - ‚úÖ –¢–∞–±–ª–∏—Ü–∞ `import_errors` –¥–ª—è –¥–µ—Ç–∞–ª—å–Ω—ã—Ö –æ—à–∏–±–æ–∫
   - ‚úÖ –¢–∞–±–ª–∏—Ü–∞ `storefront_category_mappings` –¥–ª—è –º–∞–ø–ø–∏–Ω–≥–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏–π
   - ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è `storefront_products` ‚Üí `marketplace_listings`

**‚ùå –ß—Ç–æ —Ç—Ä–µ–±—É–µ—Ç —É–ª—É—á—à–µ–Ω–∏—è:**

1. **–ö–∞—Ç–µ–≥–æ—Ä–∏–∑–∞—Ü–∏—è**
   - ‚ùå –í—Å–µ —Ç–æ–≤–∞—Ä—ã –∏–¥—É—Ç –≤ `category_id=1` (default)
   - ‚ùå –ù–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è 3-—É—Ä–æ–≤–Ω–µ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞ Digital Vision
   - ‚ùå AI –∫–∞—Ç–µ–≥–æ—Ä–∏–∑–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç, –Ω–æ –Ω–µ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
   - ‚ùå –ù–µ—Ç –º–∞–ø–ø–∏–Ω–≥–∞ –≤–Ω–µ—à–Ω–∏—Ö –∫–∞—Ç–µ–≥–æ—Ä–∏–π –Ω–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –º–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å–∞

2. **–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π**
   - ‚ùå –ù–µ—Ç scheduled –∏–º–ø–æ—Ä—Ç–∞
   - ‚ùå –ù–µ—Ç API endpoint –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –∏–º–ø–æ—Ä—Ç–∞ –ø–æ URL
   - ‚ùå –ù–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –æ–± –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö –ø—Ä–∞–π—Å–∞

3. **UX –¥–ª—è –±–æ–ª—å—à–∏—Ö –ø—Ä–∞–π—Å–æ–≤**
   - ‚ùå Preview –æ–≥—Ä–∞–Ω–∏—á–µ–Ω (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 10 —Ç–æ–≤–∞—Ä–æ–≤)
   - ‚ùå –ù–µ—Ç –ø—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä–∞ –¥–ª—è –±–æ–ª—å—à–∏—Ö —Ñ–∞–π–ª–æ–≤
   - ‚ùå –ù–µ—Ç —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ preview –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º

4. **–°–ø–µ—Ü–∏—Ñ–∏–∫–∞ Digital Vision**
   - ‚ùå –ù–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –∞—Ç—Ä–∏–±—É—Ç—ã: uvoznik, godinaUvoza, zemljaPorekla
   - ‚ùå –û–ø—Ç–æ–≤–∞—è —Ü–µ–Ω–∞ (vpCena) –∏–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç—Å—è
   - ‚ùå –ù–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å—Ç–∞—Ç—É—Å–∞ "–ù–∞ –∞–∫—Ü–∏–∏" (naAkciji)

---

## üöÄ –ü–ª–∞–Ω —É–ª—É—á—à–µ–Ω–∏–π

### –§–∞–∑–∞ 1: –ö–∞—Ç–µ–≥–æ—Ä–∏–∑–∞—Ü–∏—è –∏ –º–∞–ø–ø–∏–Ω–≥ (–ö–†–ò–¢–ò–ß–ù–û)
**–°—Ä–æ–∫:** 2-3 –¥–Ω—è
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üî• –í–´–°–û–ö–ò–ô

#### –ó–∞–¥–∞—á–∞ 1.1: –°–æ–∑–¥–∞—Ç—å –º–∞–ø–ø–∏–Ω–≥ –∫–∞—Ç–µ–≥–æ—Ä–∏–π Digital Vision
**–í—Ä–µ–º—è:** 4 —á–∞—Å–∞

**–®–∞–≥–∏:**
1. –ò–∑–≤–ª–µ—á—å –≤—Å–µ —É–Ω–∏–∫–∞–ª—å–Ω—ã–µ –∫–æ–º–±–∏–Ω–∞—Ü–∏–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–π –∏–∑ Digital Vision XML
2. –ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å marketplace_categories –≤ –Ω–∞—à–µ–π –ë–î
3. –°–æ–∑–¥–∞—Ç—å –Ω–∞—á–∞–ª—å–Ω—ã–π –º–∞–ø–ø–∏–Ω–≥ —á–µ—Ä–µ–∑ SQL migration
4. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∞–ª–≥–æ—Ä–∏—Ç–º –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –º–∞–ø–ø–∏–Ω–≥–∞:
   ```
   "OPREMA ZA MOBILNI > BATERIJE > BATERIJE OUTLET"
   ‚Üí
   marketplace_categories: "–≠–ª–µ–∫—Ç—Ä–æ–Ω–∏–∫–∞ > –ê–∫—Å–µ—Å—Å—É–∞—Ä—ã > –ë–∞—Ç–∞—Ä–µ–∏"
   ```

**–§–∞–π–ª—ã:**
- `backend/migrations/000XXX_digital_vision_category_mapping.up.sql`
- `backend/internal/proj/storefronts/parsers/category_mapper.go`

**–ö—Ä–∏—Ç–µ—Ä–∏–∏ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏:**
- [ ] –°–æ–∑–¥–∞–Ω –º–∞–ø–ø–∏–Ω–≥ –¥–ª—è –≤—Å–µ—Ö 7 –∫–∞—Ç–µ–≥–æ—Ä–∏–π —É—Ä–æ–≤–Ω—è 1
- [ ] –°–æ–∑–¥–∞–Ω –º–∞–ø–ø–∏–Ω–≥ –¥–ª—è —Ç–æ–ø-20 –∫–∞—Ç–µ–≥–æ—Ä–∏–π —É—Ä–æ–≤–Ω—è 2
- [ ] –ê–ª–≥–æ—Ä–∏—Ç–º –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –∫–∞—Ç–µ–≥–æ—Ä–∏—é –ø–æ –ø—É—Ç–∏

#### –ó–∞–¥–∞—á–∞ 1.2: –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –º–∞–ø–ø–∏–Ω–≥ –≤ –∏–º–ø–æ—Ä—Ç
**–í—Ä–µ–º—è:** 3 —á–∞—Å–∞

**–ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∫–æ–¥–µ:**
```go
// backend/internal/proj/storefronts/service/import_service.go

func (s *ImportService) resolveCategoryID(
    ctx context.Context,
    storefrontID int,
    externalCategory string,
) (int, error) {
    // 1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫—ç—à –º–∞–ø–ø–∏–Ω–≥–∞ –≤ –ë–î
    mapping, err := s.categoryMappingService.GetMapping(ctx, storefrontID, externalCategory)
    if err == nil && mapping != nil {
        return mapping.MarketplaceCategoryID, nil
    }

    // 2. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∞–ª–≥–æ—Ä–∏—Ç–º –º–∞–ø–ø–∏–Ω–≥–∞
    categoryID := s.categoryMapper.MapDigitalVisionCategory(externalCategory)
    if categoryID > 0 {
        // –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤ –∫—ç—à
        s.categoryMappingService.SaveMapping(ctx, &models.CategoryMapping{
            StorefrontID:          storefrontID,
            ExternalCategory:      externalCategory,
            MarketplaceCategoryID: categoryID,
            CreatedByAI:           false,
            ConfidenceScore:       0.95,
        })
        return categoryID, nil
    }

    // 3. Fallback –Ω–∞ AI –∫–∞—Ç–µ–≥–æ—Ä–∏–∑–∞—Ü–∏—é
    return s.aiCategoryDetector.DetectCategory(ctx, product)
}
```

**–ö—Ä–∏—Ç–µ—Ä–∏–∏ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏:**
- [ ] 95%+ —Ç–æ–≤–∞—Ä–æ–≤ –ø–æ–ø–∞–¥–∞—é—Ç –≤ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
- [ ] –ö—ç—à –º–∞–ø–ø–∏–Ω–≥–æ–≤ —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] AI fallback –¥–ª—è –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω—ã—Ö –∫–∞—Ç–µ–≥–æ—Ä–∏–π

#### –ó–∞–¥–∞—á–∞ 1.3: –î–æ–±–∞–≤–∏—Ç—å —Ä—É—á–Ω–æ–π –º–∞–ø–ø–∏–Ω–≥ —á–µ—Ä–µ–∑ UI
**–í—Ä–µ–º—è:** 6 —á–∞—Å–æ–≤

**Frontend –∫–æ–º–ø–æ–Ω–µ–Ω—Ç:**
```tsx
// frontend/svetu/src/components/import/CategoryMappingManager.tsx

interface CategoryMappingManagerProps {
  storefrontId: number;
  externalCategories: string[];  // –ò–∑ Digital Vision
  marketplaceCategories: Category[];
}

// –§—É–Ω–∫—Ü–∏–∏:
// - –ü–æ–∫–∞–∑–∞—Ç—å —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö external –∫–∞—Ç–µ–≥–æ—Ä–∏–π
// - –î–ª—è –∫–∞–∂–¥–æ–π –ø–æ–∫–∞–∑–∞—Ç—å —Ç–µ–∫—É—â–∏–π –º–∞–ø–ø–∏–Ω–≥
// - –ü–æ–∑–≤–æ–ª–∏—Ç—å –∏–∑–º–µ–Ω–∏—Ç—å –º–∞–ø–ø–∏–Ω–≥ –≤—Ä—É—á–Ω—É—é
// - –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –º–∞–ø–ø–∏–Ω–≥–∏ —á–µ—Ä–µ–∑ API
```

**API endpoints:**
```go
// backend/internal/proj/storefronts/handler/category_mapping_handler.go

GET    /api/v1/storefronts/:id/category-mappings
POST   /api/v1/storefronts/:id/category-mappings
PUT    /api/v1/storefronts/:id/category-mappings/:mapping_id
DELETE /api/v1/storefronts/:id/category-mappings/:mapping_id
```

**–ö—Ä–∏—Ç–µ—Ä–∏–∏ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏:**
- [ ] UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω –≤ ImportWizard
- [ ] API endpoints —Ä–∞–±–æ—Ç–∞—é—Ç
- [ ] –ú–∞–ø–ø–∏–Ω–≥–∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ –ë–î
- [ ] –ú–æ–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å AI-–ø—Ä–µ–¥–ª–æ–∂–µ–Ω–Ω—ã–µ –º–∞–ø–ø–∏–Ω–≥–∏

---

### –§–∞–∑–∞ 2: –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π (–í–ê–ñ–ù–û)
**–°—Ä–æ–∫:** 3-4 –¥–Ω—è
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üü° –°–†–ï–î–ù–ò–ô

#### –ó–∞–¥–∞—á–∞ 2.1: Scheduled –∏–º–ø–æ—Ä—Ç
**–í—Ä–µ–º—è:** 8 —á–∞—Å–æ–≤

**–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞:**
```
Cron Job (backend) ‚Üí ImportScheduler ‚Üí ImportService ‚Üí Worker Pool ‚Üí DB
                          ‚Üì
                   Email/WebSocket —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
```

**–†–µ–∞–ª–∏–∑–∞—Ü–∏—è:**
```go
// backend/internal/proj/storefronts/service/import_scheduler.go

type ImportScheduler struct {
    importService *ImportService
    cronManager   *cron.Cron
}

func (s *ImportScheduler) ScheduleImport(schedule models.ImportSchedule) error {
    // –°–æ–∑–¥–∞—Ç—å cron job –¥–ª—è –∏–º–ø–æ—Ä—Ç–∞ –ø–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é
    // –ü–∞—Ä–∞–º–µ—Ç—Ä—ã:
    // - URL –ø—Ä–∞–π—Å–∞
    // - –ß–∞—Å—Ç–æ—Ç–∞ (daily, hourly, weekly)
    // - Update mode (upsert –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
    // - Email —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
}

func (s *ImportScheduler) ExecuteScheduledImport(scheduleID int) error {
    // 1. –ó–∞–≥—Ä—É–∑–∏—Ç—å schedule –∏–∑ –ë–î
    // 2. –°–∫–∞—á–∞—Ç—å —Ñ–∞–π–ª –ø–æ URL
    // 3. –ó–∞–ø—É—Å—Ç–∏—Ç—å –∏–º–ø–æ—Ä—Ç —á–µ—Ä–µ–∑ ImportService
    // 4. –û—Ç–ø—Ä–∞–≤–∏—Ç—å email —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏
}
```

**–ù–æ–≤–∞—è —Ç–∞–±–ª–∏—Ü–∞:**
```sql
CREATE TABLE import_schedules (
    id SERIAL PRIMARY KEY,
    storefront_id INT NOT NULL REFERENCES storefronts(id),
    user_id INT NOT NULL,
    file_url TEXT NOT NULL,
    file_type VARCHAR(10) NOT NULL,
    cron_expression VARCHAR(100) NOT NULL,  -- "0 2 * * *" = –∫–∞–∂–¥—ã–π –¥–µ–Ω—å –≤ 2 —É—Ç—Ä–∞
    update_mode VARCHAR(20) DEFAULT 'upsert',
    notify_email BOOLEAN DEFAULT true,
    is_active BOOLEAN DEFAULT true,
    last_run_at TIMESTAMP,
    next_run_at TIMESTAMP,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
```

**Frontend:**
```tsx
// –í ImportWizard –¥–æ–±–∞–≤–∏—Ç—å checkbox:
<input type="checkbox" id="schedule-import" />
<label>–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤–ª—è—Ç—å –ø—Ä–∞–π—Å</label>

<select name="frequency">
  <option value="daily">–ï–∂–µ–¥–Ω–µ–≤–Ω–æ –≤ 2:00</option>
  <option value="hourly">–ö–∞–∂–¥—ã–π —á–∞—Å</option>
  <option value="weekly">–ï–∂–µ–Ω–µ–¥–µ–ª—å–Ω–æ (–ø–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫ 2:00)</option>
  <option value="custom">–ù–∞—Å—Ç—Ä–æ–∏—Ç—å —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ</option>
</select>
```

**–ö—Ä–∏—Ç–µ—Ä–∏–∏ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏:**
- [ ] Cron jobs —Ä–∞–±–æ—Ç–∞—é—Ç
- [ ] Email —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è
- [ ] UI –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ–º
- [ ] –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö scheduled –∏–º–ø–æ—Ä—Ç–æ–≤

#### –ó–∞–¥–∞—á–∞ 2.2: Webhook –¥–ª—è —Ç—Ä–∏–≥–≥–µ—Ä–∞ –∏–º–ø–æ—Ä—Ç–∞
**–í—Ä–µ–º—è:** 4 —á–∞—Å–∞

**API endpoint:**
```go
POST /api/v1/storefronts/:id/import/webhook
Authorization: Bearer <API_KEY>

{
  "file_url": "https://digitalvision.rs/xml/DigitalVision.zip",
  "trigger": "price_update"
}
```

**–†–µ–∞–ª–∏–∑–∞—Ü–∏—è:**
```go
// backend/internal/proj/storefronts/handler/import_handler.go

func (h *ImportHandler) WebhookImport(c *fiber.Ctx) error {
    // 1. –í–∞–ª–∏–¥–∞—Ü–∏—è API –∫–ª—é—á–∞ (—Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π –¥–ª—è webhooks)
    // 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ —á—Ç–æ URL —Ä–∞–∑—Ä–µ—à–µ–Ω –¥–ª—è —ç—Ç–æ–π –≤–∏—Ç—Ä–∏–Ω—ã
    // 3. –ó–∞–ø—É—Å–∫ async –∏–º–ø–æ—Ä—Ç–∞
    // 4. –í–æ–∑–≤—Ä–∞—Ç job_id
}
```

**Use case –¥–ª—è Digital Vision:**
- –û–Ω–∏ –º–æ–≥—É—Ç –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å webhook –Ω–∞ —Å–≤–æ–µ–π —Å—Ç–æ—Ä–æ–Ω–µ
- –ü—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ –ø—Ä–∞–π—Å–∞ ‚Üí webhook ‚Üí –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∏–º–ø–æ—Ä—Ç
- –ù–∞—à–∞ –≤–∏—Ç—Ä–∏–Ω–∞ –≤—Å–µ–≥–¥–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω–∞

**–ö—Ä–∏—Ç–µ—Ä–∏–∏ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏:**
- [ ] Webhook endpoint —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] API –∫–ª—é—á–∏ –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è –¥–ª—è –≤–∏—Ç—Ä–∏–Ω
- [ ] Whitelist —Ä–∞–∑—Ä–µ—à–µ–Ω–Ω—ã—Ö URL
- [ ] Rate limiting –¥–ª—è webhooks

---

### –§–∞–∑–∞ 3: UX —É–ª—É—á—à–µ–Ω–∏—è (–ü–û–õ–ï–ó–ù–û)
**–°—Ä–æ–∫:** 2-3 –¥–Ω—è
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üü¢ –ù–ò–ó–ö–ò–ô

#### –ó–∞–¥–∞—á–∞ 3.1: –£–ª—É—á—à–µ–Ω–Ω—ã–π preview –¥–ª—è –±–æ–ª—å—à–∏—Ö —Ñ–∞–π–ª–æ–≤
**–í—Ä–µ–º—è:** 4 —á–∞—Å–∞

**–§—É–Ω–∫—Ü–∏–∏:**
1. **–ü—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä –ø–∞—Ä—Å–∏–Ω–≥–∞:**
   ```tsx
   <ProgressBar
     current={parsedRows}
     total={totalRows}
     label="–ü–∞—Ä—Å–∏–Ω–≥ XML..."
   />
   ```

2. **–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è preview:**
   ```tsx
   <select onChange={(e) => filterByCategory(e.target.value)}>
     <option value="">–í—Å–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏</option>
     {uniqueCategories.map(cat => (
       <option key={cat}>{cat}</option>
     ))}
   </select>
   ```

3. **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ preview:**
   ```tsx
   <PreviewStats>
     - –í—Å–µ–≥–æ —Ç–æ–≤–∞—Ä–æ–≤: 17,353
     - –ö–∞—Ç–µ–≥–æ—Ä–∏–π: 388
     - –¢–æ–≤–∞—Ä–æ–≤ —Å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è–º–∏: 14,205 (82%)
     - –¢–æ–≤–∞—Ä–æ–≤ –Ω–∞ –∞–∫—Ü–∏–∏: 3,421 (20%)
     - –°—Ä–µ–¥–Ω—è—è —Ü–µ–Ω–∞: 1,250 RSD
   </PreviewStats>
   ```

**–ö—Ä–∏—Ç–µ—Ä–∏–∏ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏:**
- [ ] –ü—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –¥–ª—è —Ñ–∞–π–ª–æ–≤ >1000 —Ç–æ–≤–∞—Ä–æ–≤
- [ ] –§–∏–ª—å—Ç—Ä—ã —Ä–∞–±–æ—Ç–∞—é—Ç
- [ ] –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞

#### –ó–∞–¥–∞—á–∞ 3.2: –°–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ –ø–æ–ª—è Digital Vision
**–í—Ä–µ–º—è:** 3 —á–∞—Å–∞

**–î–æ–±–∞–≤–∏—Ç—å –≤ ImportProductRequest:**
```go
type ImportProductRequest struct {
    // ... existing fields ...

    // Digital Vision specific
    ImporterName    *string  `json:"importer_name"`      // uvoznik
    ImportYear      *string  `json:"import_year"`        // godinaUvoza
    CountryOfOrigin *string  `json:"country_of_origin"`  // zemljaPorekla
    OnSale          bool     `json:"on_sale"`            // naAkciji
}
```

**–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ attributes:**
```go
product.Attributes = map[string]interface{}{
    "importer":         dvProduct.Uvoznik,
    "import_year":      dvProduct.GodinaUvoza,
    "country_of_origin": dvProduct.ZemljaPorekla,
    "on_sale":          dvProduct.NaAkciji == "1",
    // –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ –¥–ª—è –ø–æ–∏—Å–∫–∞
    "external_category_1": dvProduct.Kategorija1,
    "external_category_2": dvProduct.Kategorija2,
    "external_category_3": dvProduct.Kategorija3,
}
```

**Frontend –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ:**
```tsx
// –í –∫–∞—Ä—Ç–æ—á–∫–µ —Ç–æ–≤–∞—Ä–∞ –ø–æ–∫–∞–∑–∞—Ç—å:
<ProductAttributes>
  <div>–ò–º–ø–æ—Ä—Ç–µ—Ä: Digital Vision doo</div>
  <div>–°—Ç—Ä–∞–Ω–∞ –ø—Ä–æ–∏—Å—Ö–æ–∂–¥–µ–Ω–∏—è: –ö–∏—Ç–∞–π</div>
  <div>–ì–æ–¥ –∏–º–ø–æ—Ä—Ç–∞: 2025</div>
  {product.on_sale && <Badge>–ù–∞ –∞–∫—Ü–∏–∏!</Badge>}
</ProductAttributes>
```

**–ö—Ä–∏—Ç–µ—Ä–∏–∏ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏:**
- [ ] –ê—Ç—Ä–∏–±—É—Ç—ã —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ –ë–î
- [ ] Frontend –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∞—Ç—Ä–∏–±—É—Ç—ã
- [ ] –ú–æ–∂–Ω–æ —Ñ–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å –ø–æ "–ù–∞ –∞–∫—Ü–∏–∏"

---

### –§–∞–∑–∞ 4: –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ (–ñ–ï–õ–ê–¢–ï–õ–¨–ù–û)
**–°—Ä–æ–∫:** 2 –¥–Ω—è
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üü¢ –ù–ò–ó–ö–ò–ô

#### –ó–∞–¥–∞—á–∞ 4.1: Batch –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
**–í—Ä–µ–º—è:** 6 —á–∞—Å–æ–≤

**–ü—Ä–æ–±–ª–µ–º–∞:**
- –°–µ–π—á–∞—Å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è —Å–∫–∞—á–∏–≤–∞—é—Ç—Å—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ
- –î–ª—è 17,000 —Ç–æ–≤–∞—Ä–æ–≤ —ç—Ç–æ –∑–∞–π–º–µ—Ç ~8 —á–∞—Å–æ–≤

**–†–µ—à–µ–Ω–∏–µ:**
```go
// backend/internal/proj/storefronts/service/image_batch_processor.go

type ImageBatchProcessor struct {
    workerPool    chan struct{}  // Semaphore –¥–ª—è –∫–æ–Ω—Ç—Ä–æ–ª—è –ø–∞—Ä–∞–ª–ª–µ–ª–∏–∑–º–∞
    batchSize     int             // 100 –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –≤ batch
    downloadQueue chan *ImageDownloadTask
}

func (p *ImageBatchProcessor) ProcessBatch(products []models.ImportProductRequest) error {
    // 1. –°–æ–±—Ä–∞—Ç—å –≤—Å–µ URL –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
    // 2. –†–∞–∑–±–∏—Ç—å –Ω–∞ batches –ø–æ 100
    // 3. –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ —Å–∫–∞—á–∞—Ç—å (20 –≥–æ—Ä—É—Ç–∏–Ω)
    // 4. –ó–∞–≥—Ä—É–∑–∏—Ç—å –≤ MinIO batch upload
    // 5. –û–±–Ω–æ–≤–∏—Ç—å –ë–î batch insert
}
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- –°–∫–æ—Ä–æ—Å—Ç—å: —Å 8 —á–∞—Å–æ–≤ ‚Üí 30 –º–∏–Ω—É—Ç
- –ù–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ—Ç—Å—è

**–ö—Ä–∏—Ç–µ—Ä–∏–∏ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏:**
- [ ] Batch processor —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] –ö–æ–Ω—Ç—Ä–æ–ª—å –ø–∞—Ä–∞–ª–ª–µ–ª–∏–∑–º–∞ (max 20 –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ)
- [ ] Graceful –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
- [ ] –ü—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä batch –æ–±—Ä–∞–±–æ—Ç–∫–∏

#### –ó–∞–¥–∞—á–∞ 4.2: –ò–Ω–∫—Ä–µ–º–µ–Ω—Ç–∞–ª—å–Ω—ã–π –∏–º–ø–æ—Ä—Ç
**–í—Ä–µ–º—è:** 4 —á–∞—Å–∞

**–ò–¥–µ—è:**
- –ù–µ –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –≤–µ—Å—å –ø—Ä–∞–π—Å –∫–∞–∂–¥—ã–π —Ä–∞–∑
- –¢–æ–ª—å–∫–æ –∏–∑–º–µ–Ω–∏–≤—à–∏–µ—Å—è —Ç–æ–≤–∞—Ä—ã

**–†–µ–∞–ª–∏–∑–∞—Ü–∏—è:**
```go
func (s *ImportService) IncrementalImport(
    ctx context.Context,
    storefrontID int,
    newProducts []models.ImportProductRequest,
) (*models.ImportJob, error) {
    // 1. –ó–∞–≥—Ä—É–∑–∏—Ç—å –≤—Å–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ SKU –∏–∑ –ë–î
    existingSKUs := s.productService.GetAllSKUs(ctx, storefrontID)

    // 2. –°—Ä–∞–≤–Ω–∏—Ç—å newProducts —Å existing
    toCreate := []models.ImportProductRequest{}
    toUpdate := []models.ImportProductRequest{}
    toDelete := []string{}  // SKU –∫–æ—Ç–æ—Ä—ã—Ö –±–æ–ª—å—à–µ –Ω–µ—Ç –≤ –ø—Ä–∞–π—Å–µ

    // 3. –û–±—Ä–∞–±–æ—Ç–∞—Ç—å —Ç–æ–ª—å–∫–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è
    // 4. –í–µ—Ä–Ω—É—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É: created, updated, deleted
}
```

**–ö—Ä–∏—Ç–µ—Ä–∏–∏ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏:**
- [ ] –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è
- [ ] –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —Ç–æ–ª—å–∫–æ –¥–µ–ª—å—Ç—É
- [ ] –ü–æ–º–µ—á–∞–µ—Ç –Ω–µ–∞–∫—Ç–∏–≤–Ω—ã–º–∏ —É–¥–∞–ª–µ–Ω–Ω—ã–µ —Ç–æ–≤–∞—Ä—ã

---

## üìã –ü—Ä–∏–æ—Ä–∏—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–ª–∞–Ω –¥–µ–π—Å—Ç–≤–∏–π

### Week 1: MVP –¥–ª—è Digital Vision
**–¶–µ–ª—å:** –ë–∞–∑–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –¥–ª—è –∑–∞–ø—É—Å–∫–∞

**–î–µ–Ω—å 1-2:**
- [x] –ó–∞–¥–∞—á–∞ 1.1: –ú–∞–ø–ø–∏–Ω–≥ –∫–∞—Ç–µ–≥–æ—Ä–∏–π Digital Vision (4—á)
- [x] –ó–∞–¥–∞—á–∞ 1.2: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –º–∞–ø–ø–∏–Ω–≥–∞ (3—á)
- [ ] –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–º–ø–æ—Ä—Ç–∞ 100 —Ç–æ–≤–∞—Ä–æ–≤ (1—á)

**–î–µ–Ω—å 3-4:**
- [ ] –ó–∞–¥–∞—á–∞ 1.3: UI –¥–ª—è —Ä—É—á–Ω–æ–≥–æ –º–∞–ø–ø–∏–Ω–≥–∞ (6—á)
- [ ] –ó–∞–¥–∞—á–∞ 3.2: –°–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ –ø–æ–ª—è Digital Vision (3—á)
- [ ] –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–ª–Ω–æ–≥–æ –∏–º–ø–æ—Ä—Ç–∞ 17K —Ç–æ–≤–∞—Ä–æ–≤ (2—á)

**–î–µ–Ω—å 5:**
- [ ] –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø–æ—Å–ª–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- [ ] –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –¥–µ–º–æ –¥–ª—è Digital Vision
- [ ] –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ì–æ—Ç–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞ –¥–ª—è –∏–º–ø–æ—Ä—Ç–∞ Digital Vision –ø—Ä–∞–π—Å–∞

---

### Week 2: –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è
**–¶–µ–ª—å:** –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

**–î–µ–Ω—å 1-2:**
- [ ] –ó–∞–¥–∞—á–∞ 2.1: Scheduled –∏–º–ø–æ—Ä—Ç (8—á)

**–î–µ–Ω—å 3:**
- [ ] –ó–∞–¥–∞—á–∞ 2.2: Webhook endpoint (4—á)

**–î–µ–Ω—å 4-5:**
- [ ] Frontend –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ–º
- [ ] –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π
- [ ] Email —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ü–æ–ª–Ω–∞—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –ø—Ä–∞–π—Å–∞

---

### Week 3: –ü–æ–ª–∏—Ä–æ–≤–∫–∞ UX
**–¶–µ–ª—å:** –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ —É–¥–æ–±—Å—Ç–≤–æ

**–î–µ–Ω—å 1-2:**
- [ ] –ó–∞–¥–∞—á–∞ 3.1: –£–ª—É—á—à–µ–Ω–Ω—ã–π preview (4—á)
- [ ] –ó–∞–¥–∞—á–∞ 4.1: Batch –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π (6—á)

**–î–µ–Ω—å 3-4:**
- [ ] –ó–∞–¥–∞—á–∞ 4.2: –ò–Ω–∫—Ä–µ–º–µ–Ω—Ç–∞–ª—å–Ω—ã–π –∏–º–ø–æ—Ä—Ç (4—á)
- [ ] –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

**–î–µ–Ω—å 5:**
- [ ] –§–∏–Ω–∞–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- [ ] –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- [ ] –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫ —Ä–µ–ª–∏–∑—É

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** Production-ready —Å–∏—Å—Ç–µ–º–∞

---

## üéØ –ú–µ—Ç—Ä–∏–∫–∏ —É—Å–ø–µ—Ö–∞

### –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
- [ ] –ò–º–ø–æ—Ä—Ç 17,353 —Ç–æ–≤–∞—Ä–æ–≤ < 10 –º–∏–Ω—É—Ç (—Å–µ–π—á–∞—Å ~30 –º–∏–Ω—É—Ç)
- [ ] –ö–∞—Ç–µ–≥–æ—Ä–∏–∑–∞—Ü–∏—è accuracy > 95%
- [ ] –û–±—Ä–∞–±–æ—Ç–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π < 30 –º–∏–Ω—É—Ç (—Å–µ–π—á–∞—Å ~8 —á–∞—Å–æ–≤)
- [ ] Preview –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è < 3 —Å–µ–∫—É–Ω–¥—ã

### UX
- [ ] Scheduled –∏–º–ø–æ—Ä—Ç –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è –∑–∞ 2 –∫–ª–∏–∫–∞
- [ ] –†—É—á–Ω–æ–π –º–∞–ø–ø–∏–Ω–≥ –∫–∞—Ç–µ–≥–æ—Ä–∏–π –∏–Ω—Ç—É–∏—Ç–∏–≤–µ–Ω
- [ ] –ü—Ä–æ–≥—Ä–µ—Å—Å –∏–º–ø–æ—Ä—Ç–∞ –≤–∏–¥–µ–Ω –≤ real-time
- [ ] Email —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω—ã

### –ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å
- [ ] –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Ä–∞–±–æ—Ç–∞—é—Ç 99.9% –≤—Ä–µ–º–µ–Ω–∏
- [ ] Graceful –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ (–Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã–π URL, –±–∏—Ç–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ)
- [ ] Rollback –ø—Ä–∏ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ—à–∏–±–∫–∞—Ö
- [ ] –î–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

---

## üí∞ –ë–∏–∑–Ω–µ—Å-—Ü–µ–Ω–Ω–æ—Å—Ç—å

### –î–ª—è Digital Vision
1. ‚úÖ **–≠–∫–æ–Ω–æ–º–∏—è –≤—Ä–µ–º–µ–Ω–∏**: –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è –≤–º–µ—Å—Ç–æ —Ä—É—á–Ω–æ–≥–æ –∏–º–ø–æ—Ä—Ç–∞
2. ‚úÖ **–ê–∫—Ç—É–∞–ª—å–Ω–æ—Å—Ç—å**: –ø—Ä–∞–π—Å –≤—Å–µ–≥–¥–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω
3. ‚úÖ **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å**: –ª–µ–≥–∫–æ –¥–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–µ —Ç–æ—á–∫–∏ –ø—Ä–æ–¥–∞–∂
4. ‚úÖ **–ê–Ω–∞–ª–∏—Ç–∏–∫–∞**: —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø—Ä–æ–¥–∞–∂ —á–µ—Ä–µ–∑ –Ω–∞—à—É –≤–∏—Ç—Ä–∏–Ω—É

### –î–ª—è –Ω–∞—Å (Svetu.rs)
1. ‚úÖ **Premium –∫–ª–∏–µ–Ω—Ç**: —Å–∞–º–∞—è –¥–æ—Ä–æ–≥–∞—è –ø–æ–¥–ø–∏—Å–∫–∞
2. ‚úÖ **–†–µ—Ñ–µ—Ä–µ–Ω—Å**: –º–æ–∂–µ–º –ø–æ–∫–∞–∑–∞—Ç—å –¥—Ä—É–≥–∏–º –æ–ø—Ç–æ–≤–∏–∫–∞–º
3. ‚úÖ **–¢–µ—Ö–Ω–æ–ª–æ–≥–∏—è**: –æ—Ç—Ä–∞–±–æ—Ç–∞–µ–º —Å–∏—Å—Ç–µ–º—É –¥–ª—è –¥—Ä—É–≥–∏—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤
4. ‚úÖ **–ú–∞—Å—à—Ç–∞–±**: —Å–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –¥–ª—è –∫–ª–∏–µ–Ω—Ç–æ–≤ —Å –±–æ–ª—å—à–∏–º–∏ –ø—Ä–∞–π—Å–∞–º–∏

---

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

### –î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤
- [x] [STOREFRONT_IMPORT_IMPLEMENTATION_PLAN.md](./STOREFRONT_IMPORT_IMPLEMENTATION_PLAN.md) - —Ç–µ–∫—É—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è
- [ ] Digital Vision XML Parser Guide
- [ ] Category Mapping Algorithm Spec
- [ ] Import Scheduler Architecture

### –î–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- [ ] Digital Vision Quick Start Guide
- [ ] Category Mapping Tutorial
- [ ] Scheduled Import Setup Guide
- [ ] Troubleshooting Common Issues

---

## ‚ö†Ô∏è –†–∏—Å–∫–∏ –∏ –º–∏—Ç–∏–≥–∞—Ü–∏—è

### –†–∏—Å–∫ 1: –ö–∞—Ç–µ–≥–æ—Ä–∏–∑–∞—Ü–∏—è –Ω–µ—Ç–æ—á–Ω–∞—è
**–í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å:** –°—Ä–µ–¥–Ω—è—è
**–í–ª–∏—è–Ω–∏–µ:** –í—ã—Å–æ–∫–æ–µ
**–ú–∏—Ç–∏–≥–∞—Ü–∏—è:**
- –†—É—á–Ω–æ–π –º–∞–ø–ø–∏–Ω–≥ –¥–ª—è –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –∫–∞—Ç–µ–≥–æ—Ä–∏–π
- AI fallback –¥–ª—è –Ω–æ–≤—ã—Ö –∫–∞—Ç–µ–≥–æ—Ä–∏–π
- –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –º–∞—Å—Å–æ–≤–æ–≥–æ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∫–∞—Ç–µ–≥–æ—Ä–∏–π

### –†–∏—Å–∫ 2: –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –ø—Ä–∏ 17K —Ç–æ–≤–∞—Ä–æ–≤
**–í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å:** –ù–∏–∑–∫–∞—è
**–í–ª–∏—è–Ω–∏–µ:** –í—ã—Å–æ–∫–æ–µ
**–ú–∏—Ç–∏–≥–∞—Ü–∏—è:**
- –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —É–∂–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
- Batch –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
- –ò–Ω–∫—Ä–µ–º–µ–Ω—Ç–∞–ª—å–Ω—ã–π –∏–º–ø–æ—Ä—Ç –¥–ª—è —Ä–µ–≥—É–ª—è—Ä–Ω—ã—Ö –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π

### –†–∏—Å–∫ 3: –ü—Ä–∞–π—Å Digital Vision –∏–∑–º–µ–Ω–∏—Ç —Ñ–æ—Ä–º–∞—Ç
**–í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å:** –ù–∏–∑–∫–∞—è
**–í–ª–∏—è–Ω–∏–µ:** –°—Ä–µ–¥–Ω–µ–µ
**–ú–∏—Ç–∏–≥–∞—Ü–∏—è:**
- –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏–∑–º–µ–Ω–µ–Ω–∏–π —Ñ–æ—Ä–º–∞—Ç–∞
- –í–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞—Ä—Å–µ—Ä–æ–≤
- Fallback –Ω–∞ generic XML parser

### –†–∏—Å–∫ 4: Scheduled –∏–º–ø–æ—Ä—Ç –ø–∞–¥–∞–µ—Ç
**–í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å:** –°—Ä–µ–¥–Ω—è—è
**–í–ª–∏—è–Ω–∏–µ:** –°—Ä–µ–¥–Ω–µ–µ
**–ú–∏—Ç–∏–≥–∞—Ü–∏—è:**
- Retry mechanism (3 –ø–æ–ø—ã—Ç–∫–∏)
- Email alerting –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö
- Fallback –Ω–∞ manual –∏–º–ø–æ—Ä—Ç

---

## üîÑ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

### –ù–µ–º–µ–¥–ª–µ–Ω–Ω–æ (Day 1)
1. ‚úÖ –°–æ–∑–¥–∞—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é –¥–ª—è –º–∞–ø–ø–∏–Ω–≥–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏–π
2. ‚úÖ –ò–∑–≤–ª–µ—á—å –≤—Å–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –∏–∑ Digital Vision XML
3. ‚úÖ –ù–∞–ø–∏—Å–∞—Ç—å –∞–ª–≥–æ—Ä–∏—Ç–º –º–∞–ø–ø–∏–Ω–≥–∞

### –≠—Ç–∞ –Ω–µ–¥–µ–ª—è (Week 1)
1. [ ] –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –º–∞–ø–ø–∏–Ω–≥ –≤ import service
2. [ ] –°–æ–∑–¥–∞—Ç—å UI –¥–ª—è —Ä—É—á–Ω–æ–≥–æ –º–∞–ø–ø–∏–Ω–≥–∞
3. [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ –ø–æ–ª–Ω–æ–º –ø—Ä–∞–π—Å–µ

### –°–ª–µ–¥—É—é—â–∞—è –Ω–µ–¥–µ–ª—è (Week 2)
1. [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å scheduled –∏–º–ø–æ—Ä—Ç
2. [ ] –°–æ–∑–¥–∞—Ç—å webhook endpoint
3. [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å email —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

---

## üìû –ö–æ–Ω—Ç–∞–∫—Ç—ã –∏ —Ä–µ—Å—É—Ä—Å—ã

**Digital Vision:**
- –°–∞–π—Ç: https://digitalvision.rs
- –ü—Ä–∞–π—Å: https://digitalvision.rs/xml/DigitalVision.zip
- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ: –ï–∂–µ–¥–Ω–µ–≤–Ω–æ

**–ù–∞—à–∞ –∫–æ–º–∞–Ω–¥–∞:**
- Backend: `backend/internal/proj/storefronts/`
- Frontend: `frontend/svetu/src/components/import/`
- –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è: `docs/STOREFRONT_*`

**–ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏:**
- [–¢–µ–∫—É—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –∏–º–ø–æ—Ä—Ç–∞](./STOREFRONT_IMPORT_IMPLEMENTATION_PLAN.md)
- [Digital Vision XML sample](/tmp/dv_sample_valid.xml)
- [Category structure analysis](/tmp/dv_categories_analysis.txt)

---

**–î–∞—Ç–∞ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:** 2025-10-06
**–°—Ç–∞—Ç—É—Å:** üìã Ready for implementation
**Next review:** –ü–æ—Å–ª–µ Week 1 (–æ—Ü–µ–Ω–∫–∞ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞)
