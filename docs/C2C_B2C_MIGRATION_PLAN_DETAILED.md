# ðŸš€ PRODUCTION-READY ÐŸÐ›ÐÐ ÐœÐ˜Ð“Ð ÐÐ¦Ð˜Ð˜ C2Câ†’B2C (Ð”ÐµÑ‚Ð°Ð»ÑŒÐ½Ñ‹Ð¹)

**Ð¡Ñ‚Ð°Ñ‚ÑƒÑ Ð´Ð¾ÐºÑƒÐ¼ÐµÐ½Ñ‚Ð°**: ðŸ”´ Ð–Ð˜Ð’ÐžÐ™ Ð”ÐžÐšÐ£ÐœÐ•ÐÐ¢ - ÐŸÐžÐ¡Ð¢ÐžÐ¯ÐÐÐžÐ• ÐžÐ‘ÐÐžÐ’Ð›Ð•ÐÐ˜Ð• ÐžÐ‘Ð¯Ð—ÐÐ¢Ð•Ð›Ð¬ÐÐž!
**Ð”Ð°Ñ‚Ð° ÑÐ¾Ð·Ð´Ð°Ð½Ð¸Ñ**: 2025-10-09
**Ð’ÐµÑ€ÑÐ¸Ñ Ð¿Ð»Ð°Ð½Ð°**: 1.0
**Ð¦ÐµÐ»ÑŒ**: Ð’Ñ‹Ñ…Ð¾Ð´ Ð² Ð¿Ñ€Ð¾Ð´Ð°ÐºÑˆÐ½ Ñ Ñ‡Ð¸ÑÑ‚Ð¾Ð¹ Ð°Ñ€Ñ…Ð¸Ñ‚ÐµÐºÑ‚ÑƒÑ€Ð¾Ð¹

---

## âš ï¸ ÐšÐ Ð˜Ð¢Ð˜Ð§Ð•Ð¡ÐšÐ˜Ð• ÐŸÐ Ð˜ÐÐ¦Ð˜ÐŸÐ«

### ðŸŽ¯ **ZERO TECHNICAL DEBT POLICY**
- âœ… ÐšÐ°Ð¶Ð´Ð°Ñ Ñ„Ð°Ð·Ð° Ð¿Ñ€Ð¾Ð²ÐµÑ€ÑÐµÑ‚ÑÑ Ð½Ð° 100% Ð·Ð°Ð²ÐµÑ€ÑˆÐµÐ½Ð½Ð¾ÑÑ‚ÑŒ
- âœ… ÐÐ•Ð¢ "TODO" ÐºÐ¾Ð¼Ð¼ÐµÐ½Ñ‚Ð°Ñ€Ð¸ÐµÐ² Ð² Ñ„Ð¸Ð½Ð°Ð»ÑŒÐ½Ð¾Ð¼ ÐºÐ¾Ð´Ðµ
- âœ… ÐÐ•Ð¢ Ð²Ñ€ÐµÐ¼ÐµÐ½Ð½Ñ‹Ñ… workaround'Ð¾Ð²
- âœ… ÐÐ•Ð¢ ÐºÐ¾Ð¿Ð¸Ð¿Ð°ÑÑ‚Ñ‹ - Ñ‚Ð¾Ð»ÑŒÐºÐ¾ Ð¿ÐµÑ€ÐµÐ¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÐ¼Ñ‹Ð¹ ÐºÐ¾Ð´
- âœ… ÐŸÐ¾Ð»Ð½Ð¾Ðµ Ð¿Ð¾ÐºÑ€Ñ‹Ñ‚Ð¸Ðµ Ñ‚ÐµÑÑ‚Ð°Ð¼Ð¸ (unit + integration)

### ðŸ“‹ **ÐžÐ‘Ð¯Ð—ÐÐ¢Ð•Ð›Ð¬ÐÐžÐ• ÐžÐ‘ÐÐžÐ’Ð›Ð•ÐÐ˜Ð• ÐŸÐ›ÐÐÐ**
ÐŸÐ¾ÑÐ»Ðµ ÐºÐ°Ð¶Ð´Ð¾Ð¹ Ñ„Ð°Ð·Ñ‹:
1. âœ… ÐžÐ±Ð½Ð¾Ð²Ð¸Ñ‚ÑŒ ÑÑ‚Ð°Ñ‚ÑƒÑ Ð²Ñ‹Ð¿Ð¾Ð»Ð½ÐµÐ½Ð¸Ñ (âœ…/ðŸš§/âŒ)
3. âœ… Ð—Ð°Ð´Ð¾ÐºÑƒÐ¼ÐµÐ½Ñ‚Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ Ð¿Ñ€Ð¾Ð±Ð»ÐµÐ¼Ñ‹ Ð¸ Ñ€ÐµÑˆÐµÐ½Ð¸Ñ
4. âœ… ÐžÐ±Ð½Ð¾Ð²Ð¸Ñ‚ÑŒ Ñ€Ð¸ÑÐºÐ¸ (Ð½Ð¾Ð²Ñ‹Ðµ/Ð·Ð°ÐºÑ€Ñ‹Ñ‚Ñ‹Ðµ)
5. âœ… Ð¡ÐºÐ¾Ñ€Ñ€ÐµÐºÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ Ð¾Ñ†ÐµÐ½ÐºÐ¸ ÑÐ»ÐµÐ´ÑƒÑŽÑ‰Ð¸Ñ… Ñ„Ð°Ð·

### ðŸŽ–ï¸ **PRODUCTION-GRADE QUALITY**
- âœ… ÐšÐ¾Ð´ Ð¿Ñ€Ð¾Ñ…Ð¾Ð´Ð¸Ñ‚ pre-commit hooks
- âœ… Ð›Ð¸Ð½Ñ‚ÐµÑ€Ñ‹: 0 warnings, 0 errors
- âœ… Ð¢ÐµÑÑ‚Ñ‹: 100% ÐºÑ€Ð¸Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¸Ñ… Ð¿ÑƒÑ‚ÐµÐ¹ Ð¿Ð¾ÐºÑ€Ñ‹Ñ‚Ð¾
- âœ… Ð”Ð¾ÐºÑƒÐ¼ÐµÐ½Ñ‚Ð°Ñ†Ð¸Ñ Ð¾Ð±Ð½Ð¾Ð²Ð»ÐµÐ½Ð° (Swagger, CLAUDE.md)


---

## ðŸ“Š Ð“Ð›ÐžÐ‘ÐÐ›Ð¬ÐÐÐ¯ ÐœÐ•Ð¢Ð Ð˜ÐšÐ ÐŸÐ ÐžÐ“Ð Ð•Ð¡Ð¡Ð

| Ð¤Ð°Ð·Ð° | Ð¡Ñ‚Ð°Ñ‚ÑƒÑ | ÐŸÑ€Ð¾Ð³Ñ€ÐµÑÑ | ÐšÐ°Ñ‡ÐµÑÑ‚Ð²Ð¾ | Ð”Ð°Ñ‚Ð° Ð½Ð°Ñ‡Ð°Ð»Ð° | Ð”Ð°Ñ‚Ð° Ð¾ÐºÐ¾Ð½Ñ‡Ð°Ð½Ð¸Ñ |
|------|--------|----------|----------|-------------|----------------|
| 0. Ð˜Ð½Ð¸Ñ†Ð¸Ð°Ð»Ð¸Ð·Ð°Ñ†Ð¸Ñ | â¸ï¸ Pending | 0% | N/A | - | - |
| 1. ÐŸÐ¾Ð´Ð³Ð¾Ñ‚Ð¾Ð²ÐºÐ° | â¸ï¸ Pending | 0% | N/A | - | - |
| 2. Ð‘Ð” Ð¼Ð¸Ð³Ñ€Ð°Ñ†Ð¸Ñ | â¸ï¸ Pending | 0% | N/A | - | - |
| 3. Backend | â¸ï¸ Pending | 0% | N/A | - | - |
| 4. Frontend | â¸ï¸ Pending | 0% | N/A | - | - |
| 5. OpenSearch | â¸ï¸ Pending | 0% | N/A | - | - |
| 6. MinIO/S3 | â¸ï¸ Pending | 0% | N/A | - | - |
| 7. Ð¢ÐµÑÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ | â¸ï¸ Pending | 0% | N/A | - | - |
| 8. Production Ð”ÐµÐ¿Ð»Ð¾Ð¹ | â¸ï¸ Pending | 0% | N/A | - | - |

**ÐžÐ±Ñ‰Ð¸Ð¹ Ð¿Ñ€Ð¾Ð³Ñ€ÐµÑÑ**: 0% (0/8 Ñ„Ð°Ð·)

---

## ðŸŽ¬ Ð¤ÐÐ—Ð 0: Ð˜ÐÐ˜Ð¦Ð˜ÐÐ›Ð˜Ð—ÐÐ¦Ð˜Ð¯ (Ð”ÐµÐ½ÑŒ 0)

### Ð¦ÐµÐ»ÑŒ
ÐŸÐ¾Ð´Ð³Ð¾Ñ‚Ð¾Ð²Ð¸Ñ‚ÑŒ Ð¸Ð½Ñ„Ñ€Ð°ÑÑ‚Ñ€ÑƒÐºÑ‚ÑƒÑ€Ñƒ Ð´Ð»Ñ Ð¼Ð¸Ð³Ñ€Ð°Ñ†Ð¸Ð¸, ÑÐ¾Ð·Ð´Ð°Ñ‚ÑŒ Ñ‚Ð¾Ñ‡ÐºÐ¸ Ð¾Ñ‚ÐºÐ°Ñ‚Ð°.

### Ð—Ð°Ð´Ð°Ñ‡Ð¸

#### 0.1 Git Workflow
```bash
# Ð¡Ð¾Ð·Ð´Ð°Ñ‚ÑŒ feature Ð²ÐµÑ‚ÐºÑƒ
git checkout -b feature/c2c-b2c-migration

# Ð¡Ð¾Ð·Ð´Ð°Ñ‚ÑŒ backup tag ÐŸÐ•Ð Ð•Ð” Ð½Ð°Ñ‡Ð°Ð»Ð¾Ð¼
git tag -a migration-pre-start -m "Snapshot before C2Câ†’B2C migration"
git push origin migration-pre-start

# Ð—Ð°Ñ‰Ð¸Ñ‚Ð° Ð¾ÑÐ½Ð¾Ð²Ð½Ð¾Ð¹ Ð²ÐµÑ‚ÐºÐ¸ (Ð½Ð° GitHub/GitLab)
# - Ð¢Ñ€ÐµÐ±Ð¾Ð²Ð°Ñ‚ÑŒ PR Ð´Ð»Ñ Ð²ÑÐµÑ… Ð¸Ð·Ð¼ÐµÐ½ÐµÐ½Ð¸Ð¹
# - ÐœÐ¸Ð½Ð¸Ð¼ÑƒÐ¼ 1 reviewer
# - ÐŸÑ€Ð¾Ñ…Ð¾Ð´Ð¸Ñ‚ÑŒ CI/CD checks
```

#### 0.2 Ð ÐµÐ·ÐµÑ€Ð²Ð½Ñ‹Ðµ ÐºÐ¾Ð¿Ð¸Ð¸ (ÐšÐ Ð˜Ð¢Ð˜Ð§ÐÐž!)
```bash
# 1. PostgreSQL - Ð¿Ð¾Ð»Ð½Ñ‹Ð¹ Ð´Ð°Ð¼Ð¿ (SQL Ñ„Ð¾Ñ€Ð¼Ð°Ñ‚ Ð´Ð»Ñ Ñ‡Ð¸Ñ‚Ð°ÐµÐ¼Ð¾ÑÑ‚Ð¸ Ð¸ Ð¾Ñ‚Ð»Ð°Ð´ÐºÐ¸)
PGPASSWORD=mX3g1XGhMRUZEX3l pg_dump \
  -h localhost \
  -U postgres \
  -d svetubd \
  --no-owner \
  --no-acl \
  --column-inserts \
  --inserts \
  -f /tmp/svetubd_migration_backup_$(date +%Y%m%d_%H%M%S).sql

# 2. OpenSearch snapshot
curl -X PUT "localhost:9200/_snapshot/migration_backup" -H 'Content-Type: application/json' -d'
{
  "type": "fs",
  "settings": {
    "location": "/var/opensearch/backups/migration_$(date +%Y%m%d)"
  }
}'

curl -X PUT "localhost:9200/_snapshot/migration_backup/snapshot_pre_migration?wait_for_completion=true"

# 3. MinIO/S3 - Ð·ÐµÑ€ÐºÐ°Ð»Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ
mc mirror --preserve local/marketplace-images /tmp/backup/marketplace-images
mc mirror --preserve local/storefront-images /tmp/backup/storefront-images

# 4. Ð¤Ð°Ð¹Ð»Ñ‹ ÐºÐ¾Ð½Ñ„Ð¸Ð³ÑƒÑ€Ð°Ñ†Ð¸Ð¸
tar -czf /tmp/config_backup_$(date +%Y%m%d).tar.gz \
  backend/config.yaml \
  frontend/svetu/.env.local \
  docker-compose.yml
```

#### 0.3 Ð¢ÐµÑÑ‚Ð¾Ð²Ð°Ñ ÑÑ€ÐµÐ´Ð°
```bash
# Ð¡Ð¾Ð·Ð´Ð°Ñ‚ÑŒ Ð¸Ð·Ð¾Ð»Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð½ÑƒÑŽ Ð‘Ð” Ð´Ð»Ñ Ñ‚ÐµÑÑ‚Ð¾Ð² Ð¼Ð¸Ð³Ñ€Ð°Ñ†Ð¸Ð¸
createdb svetubd_migration_test

# Ð’Ð¾ÑÑÑ‚Ð°Ð½Ð¾Ð²Ð¸Ñ‚ÑŒ Ð´Ð°Ð¼Ð¿ (SQL Ñ„Ð¾Ñ€Ð¼Ð°Ñ‚)
PGPASSWORD=mX3g1XGhMRUZEX3l psql \
  -h localhost \
  -U postgres \
  -d svetubd_migration_test \
  -f /tmp/svetubd_migration_backup_*.sql

# ÐžÐ±Ð½Ð¾Ð²Ð¸Ñ‚ÑŒ .env Ð´Ð»Ñ Ñ‚ÐµÑÑ‚Ð¾Ð²
DATABASE_URL_TEST=postgres://postgres:mX3g1XGhMRUZEX3l@localhost:5432/svetubd_migration_test?sslmode=disable
```

#### 0.4 Ð¡ÐºÑ€Ð¸Ð¿Ñ‚Ñ‹ Ð¼Ð¸Ð³Ñ€Ð°Ñ†Ð¸Ð¸
```bash
# Ð¡Ð¾Ð·Ð´Ð°Ñ‚ÑŒ Ð´Ð¸Ñ€ÐµÐºÑ‚Ð¾Ñ€Ð¸ÑŽ Ð´Ð»Ñ ÑƒÑ‚Ð¸Ð»Ð¸Ñ‚
mkdir -p /data/hostel-booking-system/migration-tools

# Ð¡ÐºÑ€Ð¸Ð¿Ñ‚ Ð¿Ð¾Ð¸ÑÐºÐ° ÑƒÐ¿Ð¾Ð¼Ð¸Ð½Ð°Ð½Ð¸Ð¹ (Ð´Ð»Ñ ÐºÐ¾Ð½Ñ‚Ñ€Ð¾Ð»Ñ Ð¿Ñ€Ð¾Ð³Ñ€ÐµÑÑÐ°)
cat > /data/hostel-booking-system/migration-tools/check-references.sh << 'EOF'
#!/bin/bash
echo "=== Checking old references ==="
echo "Backend marketplace: $(grep -r "marketplace" backend/internal/proj --include="*.go" | wc -l)"
echo "Backend storefronts: $(grep -r "storefronts" backend/internal/proj --include="*.go" | wc -l)"
echo "Frontend marketplace: $(grep -r "marketplace" frontend/svetu/src --include="*.ts*" | wc -l)"
echo "Frontend storefronts: $(grep -r "storefronts" frontend/svetu/src --include="*.ts*" | wc -l)"
EOF
chmod +x /data/hostel-booking-system/migration-tools/check-references.sh
```

### ÐšÑ€Ð¸Ñ‚ÐµÑ€Ð¸Ð¸ Ð¿Ñ€Ð¸Ñ‘Ð¼ÐºÐ¸ (Definition of Done)
- [ ] âœ… Git branch ÑÐ¾Ð·Ð´Ð°Ð½Ð° Ð¸ Ð·Ð°Ñ‰Ð¸Ñ‰ÐµÐ½Ð°
- [ ] âœ… 3 Ñ€ÐµÐ·ÐµÑ€Ð²Ð½Ñ‹Ðµ ÐºÐ¾Ð¿Ð¸Ð¸ (Ð‘Ð”, OpenSearch, MinIO) Ð¿Ñ€Ð¾Ð²ÐµÑ€ÐµÐ½Ñ‹
- [ ] âœ… Ð¢ÐµÑÑ‚Ð¾Ð²Ð°Ñ Ð‘Ð” Ñ€Ð°Ð±Ð¾Ñ‚Ð°ÐµÑ‚ Ð¸ Ð´Ð¾ÑÑ‚ÑƒÐ¿Ð½Ð°
- [ ] âœ… Ð¡ÐºÑ€Ð¸Ð¿Ñ‚Ñ‹ Ð¿Ñ€Ð¾Ð²ÐµÑ€ÐºÐ¸ ÑÐ¾Ð·Ð´Ð°Ð½Ñ‹ Ð¸ Ð¿Ñ€Ð¾Ñ‚ÐµÑÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ñ‹
- [ ] âœ… ÐŸÐ»Ð°Ð½ Ð¾Ð±Ð½Ð¾Ð²Ð»Ñ‘Ð½: Ð´Ð°Ñ‚Ð° Ð½Ð°Ñ‡Ð°Ð»Ð°, ÑÑ‚Ð°Ñ‚ÑƒÑ â†’ ðŸš§ In Progress

### Ð Ð¸ÑÐºÐ¸ Ð¸ Ð¼Ð¸Ñ‚Ð¸Ð³Ð°Ñ†Ð¸Ñ
| Ð Ð¸ÑÐº | Ð’ÐµÑ€Ð¾ÑÑ‚Ð½Ð¾ÑÑ‚ÑŒ | Ð ÐµÑˆÐµÐ½Ð¸Ðµ |
|------|-------------|---------|
| Ð‘ÑÐºÐ°Ð¿Ñ‹ Ð¿Ð¾Ð²Ñ€ÐµÐ¶Ð´ÐµÐ½Ñ‹ | ÐÐ¸Ð·ÐºÐ°Ñ | ÐŸÑ€Ð¾Ð²ÐµÑ€Ð¸Ñ‚ÑŒ Ð²Ð¾ÑÑÑ‚Ð°Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ðµ Ð´Ð¾ Ð½Ð°Ñ‡Ð°Ð»Ð° Ð¼Ð¸Ð³Ñ€Ð°Ñ†Ð¸Ð¸ |
| ÐÐµÑ…Ð²Ð°Ñ‚ÐºÐ° Ð¼ÐµÑÑ‚Ð° | Ð¡Ñ€ÐµÐ´Ð½ÑÑ | ÐžÑÐ²Ð¾Ð±Ð¾Ð´Ð¸Ñ‚ÑŒ Ð¼Ð¸Ð½Ð¸Ð¼ÑƒÐ¼ 10GB Ð¿ÐµÑ€ÐµÐ´ ÑÑ‚Ð°Ñ€Ñ‚Ð¾Ð¼ |

### Ð¤Ð°ÐºÑ‚Ð¸Ñ‡ÐµÑÐºÐ¸Ðµ Ð´Ð°Ð½Ð½Ñ‹Ðµ (Ð·Ð°Ð¿Ð¾Ð»Ð½Ð¸Ñ‚ÑŒ Ð¿Ð¾ÑÐ»Ðµ Ð²Ñ‹Ð¿Ð¾Ð»Ð½ÐµÐ½Ð¸Ñ)
- **Ð’Ñ€ÐµÐ¼Ñ**: ___ Ñ‡Ð°ÑÐ¾Ð² (Ð¿Ð»Ð°Ð½: 4-6 Ñ‡Ð°ÑÐ¾Ð²)
- **ÐŸÑ€Ð¾Ð±Ð»ÐµÐ¼Ñ‹**: ___
- **Ð ÐµÑˆÐµÐ½Ð¸Ñ**: ___

---

## ðŸ“‚ Ð¤ÐÐ—Ð 1: ÐŸÐžÐ”Ð“ÐžÐ¢ÐžÐ’ÐšÐ Ð˜ ÐœÐÐŸÐŸÐ˜ÐÐ“ (Ð”Ð½Ð¸ 1-2)

### Ð¦ÐµÐ»ÑŒ
Ð¡Ð¾Ð·Ð´Ð°Ñ‚ÑŒ Ð¿Ð¾Ð»Ð½Ñ‹Ð¹ Ð¼Ð°Ð¿Ð¿Ð¸Ð½Ð³ ÑÑƒÑ‰Ð½Ð¾ÑÑ‚ÐµÐ¹, Ð°Ð²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ð·Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ Ð¿Ñ€Ð¾Ð²ÐµÑ€ÐºÐ¸, Ð¿Ð¾Ð´Ð³Ð¾Ñ‚Ð¾Ð²Ð¸Ñ‚ÑŒ Ð¼Ð¸Ð³Ñ€Ð°Ñ†Ð¸Ð¾Ð½Ð½Ñ‹Ðµ ÑÐºÑ€Ð¸Ð¿Ñ‚Ñ‹.

### Ð—Ð°Ð´Ð°Ñ‡Ð¸

#### 1.1 Ð¡Ð¾Ð·Ð´Ð°Ð½Ð¸Ðµ Ð¼Ð°Ð¿Ð¿Ð¸Ð½Ð³Ð° Ð¸Ð¼Ñ‘Ð½ (ÐšÐ Ð˜Ð¢Ð˜Ð§ÐÐž!)

**Ð¤Ð°Ð¹Ð»**: `/data/hostel-booking-system/migration-tools/naming-map.json`

```json
{
  "version": "1.0",
  "database_tables": {
    "marketplace_listings": "c2c_listings",
    "marketplace_categories": "c2c_categories",
    "marketplace_images": "c2c_images",
    "marketplace_chats": "c2c_chats",
    "marketplace_messages": "c2c_messages",
    "marketplace_favorites": "c2c_favorites",
    "marketplace_orders": "c2c_orders",
    "marketplace_listing_variants": "c2c_listing_variants",
    "storefronts": "b2c_stores",
    "storefront_products": "b2c_products",
    "storefront_product_images": "b2c_product_images",
    "storefront_product_variants": "b2c_product_variants",
    "storefront_product_attributes": "b2c_product_attributes",
    "storefront_orders": "b2c_orders",
    "storefront_order_items": "b2c_order_items",
    "storefront_favorites": "b2c_favorites",
    "storefront_hours": "b2c_store_hours",
    "storefront_staff": "b2c_store_staff",
    "storefront_payment_methods": "b2c_payment_methods",
    "storefront_delivery_options": "b2c_delivery_options",
    "storefront_inventory_movements": "b2c_inventory_movements",
    "user_storefronts": "user_b2c_stores",
    "storefront_product_variant_images": "b2c_product_variant_images"
  },
  "api_endpoints": {
    "/api/v1/marketplace": "/api/v1/c2c",
    "/api/v1/storefronts": "/api/v1/b2c/stores",
    "/api/v1/admin/marketplace": "/api/v1/admin/c2c",
    "/api/v1/admin/storefronts": "/api/v1/admin/b2c"
  },
  "go_modules": {
    "internal/proj/marketplace": "internal/proj/c2c",
    "internal/proj/storefronts": "internal/proj/b2c"
  },
  "go_types": {
    "MarketplaceListing": "C2CListing",
    "MarketplaceCategory": "C2CCategory",
    "MarketplaceImage": "C2CImage",
    "MarketplaceChat": "C2CChat",
    "MarketplaceMessage": "C2CMessage",
    "MarketplaceFavorite": "C2CFavorite",
    "MarketplaceOrder": "C2COrder",
    "Storefront": "B2CStore",
    "StorefrontProduct": "B2CProduct",
    "StorefrontProductImage": "B2CProductImage",
    "StorefrontProductVariant": "B2CProductVariant"
  },
  "frontend_routes": {
    "/marketplace": "/c2c",
    "/storefronts": "/b2c"
  },
  "frontend_components": {
    "components/marketplace": "components/c2c",
    "components/storefronts": "components/b2c"
  },
  "i18n_keys": {
    "marketplace": "c2c",
    "storefronts": "b2c"
  },
  "opensearch_indices": {
    "marketplace_listings": "c2c_listings",
    "storefront_products": "b2c_products",
    "storefronts": "b2c_stores"
  },
  "minio_buckets": {
    "marketplace-images": "c2c-images",
    "storefront-images": "b2c-images"
  }
}
```

#### 1.2 Ð’Ð°Ð»Ð¸Ð´Ð°Ñ†Ð¸Ð¾Ð½Ð½Ñ‹Ð¹ ÑÐºÑ€Ð¸Ð¿Ñ‚

**Ð¤Ð°Ð¹Ð»**: `/data/hostel-booking-system/migration-tools/validate-mapping.py`

```python
#!/usr/bin/env python3
"""
Ð’Ð°Ð»Ð¸Ð´Ð¸Ñ€ÑƒÐµÑ‚ Ð¿Ð¾Ð»Ð½Ð¾Ñ‚Ñƒ Ð¼Ð°Ð¿Ð¿Ð¸Ð½Ð³Ð° Ð¸ Ð½Ð°Ñ…Ð¾Ð´Ð¸Ñ‚ Ð¿Ð¾Ñ‚ÐµÐ½Ñ†Ð¸Ð°Ð»ÑŒÐ½Ñ‹Ðµ Ð¿Ñ€Ð¾Ð¿ÑƒÑÐºÐ¸.
"""
import json
import os
import re
import subprocess
from pathlib import Path

REPO_ROOT = Path("/data/hostel-booking-system")
MAPPING_FILE = REPO_ROOT / "migration-tools/naming-map.json"

def load_mapping():
    with open(MAPPING_FILE) as f:
        return json.load(f)

def find_old_references(pattern, paths):
    """Ð˜Ñ‰ÐµÑ‚ ÑƒÐ¿Ð¾Ð¼Ð¸Ð½Ð°Ð½Ð¸Ñ ÑÑ‚Ð°Ñ€Ñ‹Ñ… Ð¸Ð¼Ñ‘Ð½ Ð² ÐºÐ¾Ð´Ðµ."""
    cmd = ["grep", "-r", pattern, "--include=*.go", "--include=*.ts", "--include=*.tsx"] + paths
    result = subprocess.run(cmd, capture_output=True, text=True)
    return result.stdout.splitlines()

def validate_database_tables(mapping):
    """ÐŸÑ€Ð¾Ð²ÐµÑ€ÑÐµÑ‚ ÑƒÐ¿Ð¾Ð¼Ð¸Ð½Ð°Ð½Ð¸Ñ ÑÑ‚Ð°Ñ€Ñ‹Ñ… Ñ‚Ð°Ð±Ð»Ð¸Ñ† Ð² SQL Ð¸ Go ÐºÐ¾Ð´Ðµ."""
    print("ðŸ” Checking database table references...")

    old_tables = list(mapping["database_tables"].keys())
    issues = []

    for old_table in old_tables:
        refs = find_old_references(old_table, [
            str(REPO_ROOT / "backend/migrations"),
            str(REPO_ROOT / "backend/internal")
        ])
        if refs:
            issues.append({
                "category": "database",
                "old_name": old_table,
                "new_name": mapping["database_tables"][old_table],
                "references": len(refs),
                "files": list(set([r.split(":")[0] for r in refs]))
            })

    return issues

def validate_go_types(mapping):
    """ÐŸÑ€Ð¾Ð²ÐµÑ€ÑÐµÑ‚ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ð½Ð¸Ðµ ÑÑ‚Ð°Ñ€Ñ‹Ñ… Go Ñ‚Ð¸Ð¿Ð¾Ð²."""
    print("ðŸ” Checking Go type references...")

    old_types = list(mapping["go_types"].keys())
    issues = []

    for old_type in old_types:
        pattern = f"\\b{old_type}\\b"
        refs = find_old_references(pattern, [str(REPO_ROOT / "backend")])
        if refs:
            issues.append({
                "category": "go_types",
                "old_name": old_type,
                "new_name": mapping["go_types"][old_type],
                "references": len(refs)
            })

    return issues

def main():
    print("=" * 60)
    print("ðŸ§ª MIGRATION MAPPING VALIDATOR")
    print("=" * 60)

    mapping = load_mapping()

    all_issues = []
    all_issues.extend(validate_database_tables(mapping))
    all_issues.extend(validate_go_types(mapping))

    if not all_issues:
        print("âœ… No old references found - mapping is complete!")
        return 0

    print(f"\nâš ï¸  Found {len(all_issues)} categories with old references:")
    for issue in all_issues:
        print(f"\n  ðŸ“Œ {issue['old_name']} â†’ {issue['new_name']}")
        print(f"     References: {issue['references']}")
        if 'files' in issue:
            print(f"     Files affected: {len(issue['files'])}")

    return 1

if __name__ == "__main__":
    exit(main())
```

#### 1.3 Ð¡ÐºÑ€Ð¸Ð¿Ñ‚ Ð°Ð²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¾Ð³Ð¾ Ð¿ÐµÑ€ÐµÐ¸Ð¼ÐµÐ½Ð¾Ð²Ð°Ð½Ð¸Ñ

**Ð¤Ð°Ð¹Ð»**: `/data/hostel-booking-system/migration-tools/auto-rename.sh`

```bash
#!/bin/bash
set -e

REPO_ROOT="/data/hostel-booking-system"
cd "$REPO_ROOT"

echo "ðŸ”„ Starting automatic renaming..."

# Backend: Go modules
echo "ðŸ“¦ Renaming Go modules..."
git mv backend/internal/proj/marketplace backend/internal/proj/c2c
git mv backend/internal/proj/storefronts backend/internal/proj/b2c

# Backend: Update imports
echo "ðŸ“ Updating Go imports..."
find backend -name "*.go" -type f -exec sed -i \
  's|internal/proj/marketplace|internal/proj/c2c|g' {} +
find backend -name "*.go" -type f -exec sed -i \
  's|internal/proj/storefronts|internal/proj/b2c|g' {} +

# Frontend: Components
echo "ðŸŽ¨ Renaming frontend components..."
git mv frontend/svetu/src/components/marketplace frontend/svetu/src/components/c2c || true
git mv frontend/svetu/src/components/storefronts frontend/svetu/src/components/b2c || true

# Frontend: Routes
echo "ðŸ›¤ï¸  Renaming frontend routes..."
git mv frontend/svetu/src/app/\[locale\]/marketplace frontend/svetu/src/app/\[locale\]/c2c || true
git mv frontend/svetu/src/app/\[locale\]/storefronts frontend/svetu/src/app/\[locale\]/b2c || true

# Frontend: i18n
echo "ðŸŒ Renaming translation files..."
for lang in en ru sr; do
  git mv frontend/svetu/src/messages/$lang/marketplace.json \
         frontend/svetu/src/messages/$lang/c2c.json || true
  git mv frontend/svetu/src/messages/$lang/storefronts.json \
         frontend/svetu/src/messages/$lang/b2c.json || true
done

echo "âœ… Automatic renaming complete!"
echo "âš ï¸  Run validation script to check for remaining references"
```

### ÐšÑ€Ð¸Ñ‚ÐµÑ€Ð¸Ð¸ Ð¿Ñ€Ð¸Ñ‘Ð¼ÐºÐ¸
- [ ] âœ… `naming-map.json` ÑÐ¾Ð·Ð´Ð°Ð½ Ð¸ Ð¿Ñ€Ð¾Ð²ÐµÑ€ÐµÐ½
- [ ] âœ… Ð’Ð°Ð»Ð¸Ð´Ð°Ñ†Ð¸Ð¾Ð½Ð½Ñ‹Ð¹ ÑÐºÑ€Ð¸Ð¿Ñ‚ Ñ€Ð°Ð±Ð¾Ñ‚Ð°ÐµÑ‚ Ð¸ Ð¿Ñ€Ð¾Ñ…Ð¾Ð´Ð¸Ñ‚
- [ ] âœ… Auto-rename ÑÐºÑ€Ð¸Ð¿Ñ‚ Ð¿Ñ€Ð¾Ñ‚ÐµÑÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½ Ð½Ð° test branch
- [ ] âœ… Ð”Ð¾ÐºÑƒÐ¼ÐµÐ½Ñ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½ mapping Ð´Ð»Ñ Ð²ÑÐµÑ… 8 ÐºÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸Ð¹
- [ ] âœ… ÐŸÐ»Ð°Ð½ Ð¾Ð±Ð½Ð¾Ð²Ð»Ñ‘Ð½: Ñ„Ð°ÐºÑ‚Ð¸Ñ‡ÐµÑÐºÐ¾Ðµ Ð²Ñ€ÐµÐ¼Ñ, Ð¿Ñ€Ð¾Ð±Ð»ÐµÐ¼Ñ‹

### Ð Ð¸ÑÐºÐ¸
| Ð Ð¸ÑÐº | ÐœÐ¸Ñ‚Ð¸Ð³Ð°Ñ†Ð¸Ñ |
|------|-----------|
| ÐÐµÐ¿Ð¾Ð»Ð½Ñ‹Ð¹ Ð¼Ð°Ð¿Ð¿Ð¸Ð½Ð³ | Ð—Ð°Ð¿ÑƒÑÑ‚Ð¸Ñ‚ÑŒ Ð²Ð°Ð»Ð¸Ð´Ð°Ñ†Ð¸ÑŽ 3 Ñ€Ð°Ð·Ð° Ð½Ð° Ñ€Ð°Ð·Ð½Ñ‹Ñ… ÑÑ‚Ð°Ð¿Ð°Ñ… |
| ÐšÐ¾Ð½Ñ„Ð»Ð¸ÐºÑ‚Ñ‹ Ð¿Ñ€Ð¸ git mv | Ð¢ÐµÑÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ Ð½Ð° ÐºÐ¾Ð¿Ð¸Ð¸ Ñ€ÐµÐ¿Ð¾Ð·Ð¸Ñ‚Ð¾Ñ€Ð¸Ñ |

### Ð¤Ð°ÐºÑ‚Ð¸Ñ‡ÐµÑÐºÐ¸Ðµ Ð´Ð°Ð½Ð½Ñ‹Ðµ (Ð·Ð°Ð¿Ð¾Ð»Ð½Ð¸Ñ‚ÑŒ)
- **Ð’Ñ€ÐµÐ¼Ñ**: ___ Ð´Ð½ÐµÐ¹ (Ð¿Ð»Ð°Ð½: 1.5-2 Ð´Ð½Ñ)
- **ÐÐ°Ð¹Ð´ÐµÐ½Ð¾ ÑƒÐ¿Ð¾Ð¼Ð¸Ð½Ð°Ð½Ð¸Ð¹**: ___
- **ÐŸÑ€Ð¾Ð±Ð»ÐµÐ¼Ñ‹**: ___

---

## ðŸ—„ï¸ Ð¤ÐÐ—Ð 2: ÐœÐ˜Ð“Ð ÐÐ¦Ð˜Ð¯ Ð‘ÐÐ—Ð« Ð”ÐÐÐÐ«Ð¥ (Ð”Ð½Ð¸ 3-7)

### Ð¦ÐµÐ»ÑŒ
Ð¡Ð¾Ð·Ð´Ð°Ñ‚ÑŒ Ð½Ð¾Ð²Ñ‹Ðµ Ñ‚Ð°Ð±Ð»Ð¸Ñ†Ñ‹, Ð¼Ð¸Ð³Ñ€Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ Ð´Ð°Ð½Ð½Ñ‹Ðµ Ñ ÑÐ¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸ÐµÐ¼ Ñ†ÐµÐ»Ð¾ÑÑ‚Ð½Ð¾ÑÑ‚Ð¸, Ð¾Ð±ÐµÑÐ¿ÐµÑ‡Ð¸Ñ‚ÑŒ 100% Ð¿Ð¾ÐºÑ€Ñ‹Ñ‚Ð¸Ðµ Ñ‚ÐµÑÑ‚Ð°Ð¼Ð¸.

### Ð—Ð°Ð´Ð°Ñ‡Ð¸

#### 2.1 Ð¡Ð¾Ð·Ð´Ð°Ð½Ð¸Ðµ Ð¼Ð¸Ð³Ñ€Ð°Ñ†Ð¸Ð¸ ÑÑ…ÐµÐ¼Ñ‹

**Ð¤Ð°Ð¹Ð»**: `backend/migrations/000172_create_c2c_b2c_tables.up.sql`

```sql
-- ============================================================================
-- ÐœÐ˜Ð“Ð ÐÐ¦Ð˜Ð¯: Ð¡Ð¾Ð·Ð´Ð°Ð½Ð¸Ðµ C2C Ð¸ B2C Ñ‚Ð°Ð±Ð»Ð¸Ñ†
-- Ð”Ð°Ñ‚Ð°: 2025-10-09
-- ÐžÐ¿Ð¸ÑÐ°Ð½Ð¸Ðµ: ÐŸÐµÑ€ÐµÐ¸Ð¼ÐµÐ½Ð¾Ð²Ð°Ð½Ð¸Ðµ marketplace â†’ c2c, storefronts â†’ b2c
-- ÐÐ²Ñ‚Ð¾Ñ€: Migration Plan v1.0
-- ============================================================================

BEGIN;

-- ============================================================================
-- C2C TABLES (Ð±Ñ‹Ð²ÑˆÐ¸Ðµ marketplace_*)
-- ============================================================================

-- 1. C2C Categories
CREATE TABLE c2c_categories (
    LIKE marketplace_categories INCLUDING ALL
);

-- 2. C2C Listings
CREATE TABLE c2c_listings (
    LIKE marketplace_listings INCLUDING ALL
);

-- 3. C2C Images
CREATE TABLE c2c_images (
    LIKE marketplace_images INCLUDING ALL
);

-- 4. C2C Chats
CREATE TABLE c2c_chats (
    LIKE marketplace_chats INCLUDING ALL
);

-- 5. C2C Messages
CREATE TABLE c2c_messages (
    LIKE marketplace_messages INCLUDING ALL
);

-- 6. C2C Favorites
CREATE TABLE c2c_favorites (
    LIKE marketplace_favorites INCLUDING ALL
);

-- 7. C2C Orders
CREATE TABLE c2c_orders (
    LIKE marketplace_orders INCLUDING ALL
);

-- 8. C2C Listing Variants
CREATE TABLE c2c_listing_variants (
    LIKE marketplace_listing_variants INCLUDING ALL
);

-- ============================================================================
-- B2C TABLES (Ð±Ñ‹Ð²ÑˆÐ¸Ðµ storefront_*)
-- ============================================================================

-- 1. B2C Stores (Ð¾ÑÐ½Ð¾Ð²Ð½Ð°Ñ Ñ‚Ð°Ð±Ð»Ð¸Ñ†Ð° Ð¼Ð°Ð³Ð°Ð·Ð¸Ð½Ð¾Ð²)
CREATE TABLE b2c_stores (
    LIKE storefronts INCLUDING ALL
);

-- 2. B2C Products
CREATE TABLE b2c_products (
    LIKE storefront_products INCLUDING ALL
);

-- 3. B2C Product Images
CREATE TABLE b2c_product_images (
    LIKE storefront_product_images INCLUDING ALL
);

-- 4. B2C Product Variants
CREATE TABLE b2c_product_variants (
    LIKE storefront_product_variants INCLUDING ALL
);

-- 5. B2C Product Attributes
CREATE TABLE b2c_product_attributes (
    LIKE storefront_product_attributes INCLUDING ALL
);

-- 6. B2C Orders
CREATE TABLE b2c_orders (
    LIKE storefront_orders INCLUDING ALL
);

-- 7. B2C Order Items
CREATE TABLE b2c_order_items (
    LIKE storefront_order_items INCLUDING ALL
);

-- 8. B2C Favorites
CREATE TABLE b2c_favorites (
    LIKE storefront_favorites INCLUDING ALL
);

-- 9. B2C Store Hours
CREATE TABLE b2c_store_hours (
    LIKE storefront_hours INCLUDING ALL
);

-- 10. B2C Store Staff
CREATE TABLE b2c_store_staff (
    LIKE storefront_staff INCLUDING ALL
);

-- 11. B2C Payment Methods
CREATE TABLE b2c_payment_methods (
    LIKE storefront_payment_methods INCLUDING ALL
);

-- 12. B2C Delivery Options
CREATE TABLE b2c_delivery_options (
    LIKE storefront_delivery_options INCLUDING ALL
);

-- 13. B2C Inventory Movements
CREATE TABLE b2c_inventory_movements (
    LIKE storefront_inventory_movements INCLUDING ALL
);

-- 14. User B2C Stores (ÑÐ²ÑÐ·ÑŒ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÐµÐ¹ Ñ Ð¼Ð°Ð³Ð°Ð·Ð¸Ð½Ð°Ð¼Ð¸)
CREATE TABLE user_b2c_stores (
    LIKE user_storefronts INCLUDING ALL
);

-- 15. B2C Product Variant Images
CREATE TABLE b2c_product_variant_images (
    LIKE storefront_product_variant_images INCLUDING ALL
);

COMMIT;

-- ============================================================================
-- Ð’ÐÐ–ÐÐž: Ð˜Ð½Ð´ÐµÐºÑÑ‹ Ð¸ constraints ÑÐºÐ¾Ð¿Ð¸Ñ€Ð¾Ð²Ð°Ð½Ñ‹ Ñ‡ÐµÑ€ÐµÐ· INCLUDING ALL
-- Ð¡Ð»ÐµÐ´ÑƒÑŽÑ‰Ð¸Ð¹ ÑˆÐ°Ð³: Ð¼Ð¸Ð³Ñ€Ð°Ñ†Ð¸Ñ Ð´Ð°Ð½Ð½Ñ‹Ñ… (Ð¾Ñ‚Ð´ÐµÐ»ÑŒÐ½Ð°Ñ Ð¼Ð¸Ð³Ñ€Ð°Ñ†Ð¸Ñ)
-- ============================================================================
```

**Ð¤Ð°Ð¹Ð»**: `backend/migrations/000172_create_c2c_b2c_tables.down.sql`

```sql
BEGIN;

-- Drop C2C tables
DROP TABLE IF EXISTS c2c_listing_variants CASCADE;
DROP TABLE IF EXISTS c2c_orders CASCADE;
DROP TABLE IF EXISTS c2c_favorites CASCADE;
DROP TABLE IF EXISTS c2c_messages CASCADE;
DROP TABLE IF EXISTS c2c_chats CASCADE;
DROP TABLE IF EXISTS c2c_images CASCADE;
DROP TABLE IF EXISTS c2c_listings CASCADE;
DROP TABLE IF EXISTS c2c_categories CASCADE;

-- Drop B2C tables
DROP TABLE IF EXISTS b2c_product_variant_images CASCADE;
DROP TABLE IF EXISTS user_b2c_stores CASCADE;
DROP TABLE IF EXISTS b2c_inventory_movements CASCADE;
DROP TABLE IF EXISTS b2c_delivery_options CASCADE;
DROP TABLE IF EXISTS b2c_payment_methods CASCADE;
DROP TABLE IF EXISTS b2c_store_staff CASCADE;
DROP TABLE IF EXISTS b2c_store_hours CASCADE;
DROP TABLE IF EXISTS b2c_favorites CASCADE;
DROP TABLE IF EXISTS b2c_order_items CASCADE;
DROP TABLE IF EXISTS b2c_orders CASCADE;
DROP TABLE IF EXISTS b2c_product_attributes CASCADE;
DROP TABLE IF EXISTS b2c_product_variants CASCADE;
DROP TABLE IF EXISTS b2c_product_images CASCADE;
DROP TABLE IF EXISTS b2c_products CASCADE;
DROP TABLE IF EXISTS b2c_stores CASCADE;

COMMIT;
```

#### 2.2 ÐœÐ¸Ð³Ñ€Ð°Ñ†Ð¸Ñ Ð´Ð°Ð½Ð½Ñ‹Ñ…

**Ð¤Ð°Ð¹Ð»**: `backend/migrations/000173_migrate_c2c_b2c_data.up.sql`

```sql
-- ============================================================================
-- ÐœÐ˜Ð“Ð ÐÐ¦Ð˜Ð¯ Ð”ÐÐÐÐ«Ð¥: ÐšÐ¾Ð¿Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ Ð¸Ð· marketplace/storefront Ð² c2c/b2c
-- ÐšÐ Ð˜Ð¢Ð˜Ð§ÐÐž: Ð¡Ð¾Ñ…Ñ€Ð°Ð½ÑÐµÐ¼ ID Ð´Ð»Ñ ÑÐ²ÑÐ·ÐµÐ¹!
-- ============================================================================

BEGIN;

-- ============================================================================
-- C2C DATA MIGRATION
-- ============================================================================

-- 1. Categories (ÑÐ½Ð°Ñ‡Ð°Ð»Ð° - Ð´Ð»Ñ FK)
INSERT INTO c2c_categories SELECT * FROM marketplace_categories;

-- 2. Listings (Ð·Ð°Ð²Ð¸ÑÐ¸Ñ‚ Ð¾Ñ‚ categories)
INSERT INTO c2c_listings SELECT * FROM marketplace_listings;

-- 3. Images (Ð·Ð°Ð²Ð¸ÑÐ¸Ñ‚ Ð¾Ñ‚ listings)
INSERT INTO c2c_images SELECT * FROM marketplace_images;

-- 4. Listing Variants (Ð·Ð°Ð²Ð¸ÑÐ¸Ñ‚ Ð¾Ñ‚ listings)
INSERT INTO c2c_listing_variants SELECT * FROM marketplace_listing_variants;

-- 5. Chats (Ð·Ð°Ð²Ð¸ÑÐ¸Ñ‚ Ð¾Ñ‚ listings)
INSERT INTO c2c_chats SELECT * FROM marketplace_chats;

-- 6. Messages (Ð·Ð°Ð²Ð¸ÑÐ¸Ñ‚ Ð¾Ñ‚ chats)
INSERT INTO c2c_messages SELECT * FROM marketplace_messages;

-- 7. Favorites (Ð·Ð°Ð²Ð¸ÑÐ¸Ñ‚ Ð¾Ñ‚ listings)
INSERT INTO c2c_favorites SELECT * FROM marketplace_favorites;

-- 8. Orders (Ð·Ð°Ð²Ð¸ÑÐ¸Ñ‚ Ð¾Ñ‚ listings)
INSERT INTO c2c_orders SELECT * FROM marketplace_orders;

-- ============================================================================
-- B2C DATA MIGRATION
-- ============================================================================

-- 1. Stores (Ð¾ÑÐ½Ð¾Ð²Ð½Ð°Ñ Ñ‚Ð°Ð±Ð»Ð¸Ñ†Ð° - ÑÐ½Ð°Ñ‡Ð°Ð»Ð°)
INSERT INTO b2c_stores SELECT * FROM storefronts;

-- 2. User-Store links (Ð·Ð°Ð²Ð¸ÑÐ¸Ñ‚ Ð¾Ñ‚ stores)
INSERT INTO user_b2c_stores SELECT * FROM user_storefronts;

-- 3. Products (Ð·Ð°Ð²Ð¸ÑÐ¸Ñ‚ Ð¾Ñ‚ stores)
INSERT INTO b2c_products SELECT * FROM storefront_products;

-- 4. Product Images (Ð·Ð°Ð²Ð¸ÑÐ¸Ñ‚ Ð¾Ñ‚ products)
INSERT INTO b2c_product_images SELECT * FROM storefront_product_images;

-- 5. Product Variants (Ð·Ð°Ð²Ð¸ÑÐ¸Ñ‚ Ð¾Ñ‚ products)
INSERT INTO b2c_product_variants SELECT * FROM storefront_product_variants;

-- 6. Product Variant Images (Ð·Ð°Ð²Ð¸ÑÐ¸Ñ‚ Ð¾Ñ‚ variants)
INSERT INTO b2c_product_variant_images SELECT * FROM storefront_product_variant_images;

-- 7. Product Attributes (Ð·Ð°Ð²Ð¸ÑÐ¸Ñ‚ Ð¾Ñ‚ products)
INSERT INTO b2c_product_attributes SELECT * FROM storefront_product_attributes;

-- 8. Orders (Ð·Ð°Ð²Ð¸ÑÐ¸Ñ‚ Ð¾Ñ‚ stores)
INSERT INTO b2c_orders SELECT * FROM storefront_orders;

-- 9. Order Items (Ð·Ð°Ð²Ð¸ÑÐ¸Ñ‚ Ð¾Ñ‚ orders Ð¸ products)
INSERT INTO b2c_order_items SELECT * FROM storefront_order_items;

-- 10. Favorites (Ð·Ð°Ð²Ð¸ÑÐ¸Ñ‚ Ð¾Ñ‚ products)
INSERT INTO b2c_favorites SELECT * FROM storefront_favorites;

-- 11. Store Hours (Ð·Ð°Ð²Ð¸ÑÐ¸Ñ‚ Ð¾Ñ‚ stores)
INSERT INTO b2c_store_hours SELECT * FROM storefront_hours;

-- 12. Store Staff (Ð·Ð°Ð²Ð¸ÑÐ¸Ñ‚ Ð¾Ñ‚ stores)
INSERT INTO b2c_store_staff SELECT * FROM storefront_staff;

-- 13. Payment Methods (Ð·Ð°Ð²Ð¸ÑÐ¸Ñ‚ Ð¾Ñ‚ stores)
INSERT INTO b2c_payment_methods SELECT * FROM storefront_payment_methods;

-- 14. Delivery Options (Ð·Ð°Ð²Ð¸ÑÐ¸Ñ‚ Ð¾Ñ‚ stores)
INSERT INTO b2c_delivery_options SELECT * FROM storefront_delivery_options;

-- 15. Inventory Movements (Ð·Ð°Ð²Ð¸ÑÐ¸Ñ‚ Ð¾Ñ‚ variants)
INSERT INTO b2c_inventory_movements SELECT * FROM storefront_inventory_movements;

COMMIT;

-- ============================================================================
-- ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° Ñ†ÐµÐ»Ð¾ÑÑ‚Ð½Ð¾ÑÑ‚Ð¸ Ð´Ð°Ð½Ð½Ñ‹Ñ…
-- ============================================================================

DO $$
DECLARE
    c2c_count INTEGER;
    b2c_count INTEGER;
    old_c2c_count INTEGER;
    old_b2c_count INTEGER;
BEGIN
    -- ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° C2C listings
    SELECT COUNT(*) INTO c2c_count FROM c2c_listings;
    SELECT COUNT(*) INTO old_c2c_count FROM marketplace_listings;

    IF c2c_count != old_c2c_count THEN
        RAISE EXCEPTION 'C2C listings count mismatch! Expected %, got %', old_c2c_count, c2c_count;
    END IF;

    -- ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° B2C products
    SELECT COUNT(*) INTO b2c_count FROM b2c_products;
    SELECT COUNT(*) INTO old_b2c_count FROM storefront_products;

    IF b2c_count != old_b2c_count THEN
        RAISE EXCEPTION 'B2C products count mismatch! Expected %, got %', old_b2c_count, b2c_count;
    END IF;

    RAISE NOTICE 'âœ… Data migration validated: C2C=%, B2C=%', c2c_count, b2c_count;
END $$;
```

**Ð¤Ð°Ð¹Ð»**: `backend/migrations/000173_migrate_c2c_b2c_data.down.sql`

```sql
BEGIN;

-- ÐžÑ‡Ð¸ÑÑ‚Ð¸Ñ‚ÑŒ Ð²ÑÐµ Ð´Ð°Ð½Ð½Ñ‹Ðµ Ð¸Ð· Ð½Ð¾Ð²Ñ‹Ñ… Ñ‚Ð°Ð±Ð»Ð¸Ñ† (Ð¾Ð±Ñ€Ð°Ñ‚Ð½Ð°Ñ Ð¼Ð¸Ð³Ñ€Ð°Ñ†Ð¸Ñ)
TRUNCATE TABLE c2c_messages CASCADE;
TRUNCATE TABLE c2c_chats CASCADE;
TRUNCATE TABLE c2c_favorites CASCADE;
TRUNCATE TABLE c2c_orders CASCADE;
TRUNCATE TABLE c2c_listing_variants CASCADE;
TRUNCATE TABLE c2c_images CASCADE;
TRUNCATE TABLE c2c_listings CASCADE;
TRUNCATE TABLE c2c_categories CASCADE;

TRUNCATE TABLE b2c_inventory_movements CASCADE;
TRUNCATE TABLE b2c_delivery_options CASCADE;
TRUNCATE TABLE b2c_payment_methods CASCADE;
TRUNCATE TABLE b2c_store_staff CASCADE;
TRUNCATE TABLE b2c_store_hours CASCADE;
TRUNCATE TABLE b2c_favorites CASCADE;
TRUNCATE TABLE b2c_order_items CASCADE;
TRUNCATE TABLE b2c_orders CASCADE;
TRUNCATE TABLE b2c_product_attributes CASCADE;
TRUNCATE TABLE b2c_product_variant_images CASCADE;
TRUNCATE TABLE b2c_product_variants CASCADE;
TRUNCATE TABLE b2c_product_images CASCADE;
TRUNCATE TABLE b2c_products CASCADE;
TRUNCATE TABLE user_b2c_stores CASCADE;
TRUNCATE TABLE b2c_stores CASCADE;

COMMIT;
```

#### 2.3 ÐžÐ±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ðµ Foreign Keys

**Ð¤Ð°Ð¹Ð»**: `backend/migrations/000174_update_c2c_b2c_constraints.up.sql`

```sql
-- ============================================================================
-- ÐžÐ‘ÐÐžÐ’Ð›Ð•ÐÐ˜Ð• CONSTRAINTS: ÐŸÐµÑ€ÐµÐ¸Ð¼ÐµÐ½Ð¾Ð²Ð°Ð½Ð¸Ðµ FK Ð½Ð° Ð½Ð¾Ð²Ñ‹Ðµ Ñ‚Ð°Ð±Ð»Ð¸Ñ†Ñ‹
-- ============================================================================

BEGIN;

-- ============================================================================
-- C2C Foreign Keys
-- ============================================================================

-- c2c_listings
ALTER TABLE c2c_listings
  DROP CONSTRAINT IF EXISTS marketplace_listings_category_id_fkey CASCADE,
  ADD CONSTRAINT c2c_listings_category_id_fkey
    FOREIGN KEY (category_id) REFERENCES c2c_categories(id) ON DELETE CASCADE;

ALTER TABLE c2c_listings
  DROP CONSTRAINT IF EXISTS marketplace_listings_user_id_fkey CASCADE,
  ADD CONSTRAINT c2c_listings_user_id_fkey
    FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE;

-- c2c_images
ALTER TABLE c2c_images
  DROP CONSTRAINT IF EXISTS marketplace_images_listing_id_fkey CASCADE,
  ADD CONSTRAINT c2c_images_listing_id_fkey
    FOREIGN KEY (listing_id) REFERENCES c2c_listings(id) ON DELETE CASCADE;

-- c2c_chats
ALTER TABLE c2c_chats
  DROP CONSTRAINT IF EXISTS marketplace_chats_listing_id_fkey CASCADE,
  ADD CONSTRAINT c2c_chats_listing_id_fkey
    FOREIGN KEY (listing_id) REFERENCES c2c_listings(id) ON DELETE CASCADE;

-- c2c_messages
ALTER TABLE c2c_messages
  DROP CONSTRAINT IF EXISTS marketplace_messages_chat_id_fkey CASCADE,
  ADD CONSTRAINT c2c_messages_chat_id_fkey
    FOREIGN KEY (chat_id) REFERENCES c2c_chats(id) ON DELETE CASCADE;

-- c2c_favorites
ALTER TABLE c2c_favorites
  DROP CONSTRAINT IF EXISTS marketplace_favorites_listing_id_fkey CASCADE,
  ADD CONSTRAINT c2c_favorites_listing_id_fkey
    FOREIGN KEY (listing_id) REFERENCES c2c_listings(id) ON DELETE CASCADE;

-- c2c_orders
ALTER TABLE c2c_orders
  DROP CONSTRAINT IF EXISTS marketplace_orders_listing_id_fkey CASCADE,
  ADD CONSTRAINT c2c_orders_listing_id_fkey
    FOREIGN KEY (listing_id) REFERENCES c2c_listings(id) ON DELETE CASCADE;

-- c2c_listing_variants
ALTER TABLE c2c_listing_variants
  DROP CONSTRAINT IF EXISTS marketplace_listing_variants_listing_id_fkey CASCADE,
  ADD CONSTRAINT c2c_listing_variants_listing_id_fkey
    FOREIGN KEY (listing_id) REFERENCES c2c_listings(id) ON DELETE CASCADE;

-- ============================================================================
-- B2C Foreign Keys
-- ============================================================================

-- user_b2c_stores
ALTER TABLE user_b2c_stores
  DROP CONSTRAINT IF EXISTS user_storefronts_storefront_id_fkey CASCADE,
  ADD CONSTRAINT user_b2c_stores_store_id_fkey
    FOREIGN KEY (storefront_id) REFERENCES b2c_stores(id) ON DELETE CASCADE;

ALTER TABLE user_b2c_stores
  DROP CONSTRAINT IF EXISTS user_storefronts_user_id_fkey CASCADE,
  ADD CONSTRAINT user_b2c_stores_user_id_fkey
    FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE;

-- b2c_products
ALTER TABLE b2c_products
  DROP CONSTRAINT IF EXISTS storefront_products_storefront_id_fkey CASCADE,
  ADD CONSTRAINT b2c_products_store_id_fkey
    FOREIGN KEY (storefront_id) REFERENCES b2c_stores(id) ON DELETE CASCADE;

-- b2c_product_images
ALTER TABLE b2c_product_images
  DROP CONSTRAINT IF EXISTS storefront_product_images_product_id_fkey CASCADE,
  ADD CONSTRAINT b2c_product_images_product_id_fkey
    FOREIGN KEY (product_id) REFERENCES b2c_products(id) ON DELETE CASCADE;

-- b2c_product_variants
ALTER TABLE b2c_product_variants
  DROP CONSTRAINT IF EXISTS storefront_product_variants_product_id_fkey CASCADE,
  ADD CONSTRAINT b2c_product_variants_product_id_fkey
    FOREIGN KEY (product_id) REFERENCES b2c_products(id) ON DELETE CASCADE;

-- b2c_product_variant_images
ALTER TABLE b2c_product_variant_images
  DROP CONSTRAINT IF EXISTS storefront_product_variant_images_variant_id_fkey CASCADE,
  ADD CONSTRAINT b2c_product_variant_images_variant_id_fkey
    FOREIGN KEY (variant_id) REFERENCES b2c_product_variants(id) ON DELETE CASCADE;

-- b2c_product_attributes
ALTER TABLE b2c_product_attributes
  DROP CONSTRAINT IF EXISTS storefront_product_attributes_product_id_fkey CASCADE,
  ADD CONSTRAINT b2c_product_attributes_product_id_fkey
    FOREIGN KEY (product_id) REFERENCES b2c_products(id) ON DELETE CASCADE;

-- b2c_orders
ALTER TABLE b2c_orders
  DROP CONSTRAINT IF EXISTS storefront_orders_storefront_id_fkey CASCADE,
  ADD CONSTRAINT b2c_orders_store_id_fkey
    FOREIGN KEY (storefront_id) REFERENCES b2c_stores(id) ON DELETE CASCADE;

-- b2c_order_items
ALTER TABLE b2c_order_items
  DROP CONSTRAINT IF EXISTS storefront_order_items_order_id_fkey CASCADE,
  ADD CONSTRAINT b2c_order_items_order_id_fkey
    FOREIGN KEY (order_id) REFERENCES b2c_orders(id) ON DELETE CASCADE;

ALTER TABLE b2c_order_items
  DROP CONSTRAINT IF EXISTS storefront_order_items_product_id_fkey CASCADE,
  ADD CONSTRAINT b2c_order_items_product_id_fkey
    FOREIGN KEY (product_id) REFERENCES b2c_products(id) ON DELETE SET NULL;

-- b2c_favorites
ALTER TABLE b2c_favorites
  DROP CONSTRAINT IF EXISTS storefront_favorites_product_id_fkey CASCADE,
  ADD CONSTRAINT b2c_favorites_product_id_fkey
    FOREIGN KEY (product_id) REFERENCES b2c_products(id) ON DELETE CASCADE;

-- b2c_store_hours
ALTER TABLE b2c_store_hours
  DROP CONSTRAINT IF EXISTS storefront_hours_storefront_id_fkey CASCADE,
  ADD CONSTRAINT b2c_store_hours_store_id_fkey
    FOREIGN KEY (storefront_id) REFERENCES b2c_stores(id) ON DELETE CASCADE;

-- b2c_store_staff
ALTER TABLE b2c_store_staff
  DROP CONSTRAINT IF EXISTS storefront_staff_storefront_id_fkey CASCADE,
  ADD CONSTRAINT b2c_store_staff_store_id_fkey
    FOREIGN KEY (storefront_id) REFERENCES b2c_stores(id) ON DELETE CASCADE;

-- b2c_payment_methods
ALTER TABLE b2c_payment_methods
  DROP CONSTRAINT IF EXISTS storefront_payment_methods_storefront_id_fkey CASCADE,
  ADD CONSTRAINT b2c_payment_methods_store_id_fkey
    FOREIGN KEY (storefront_id) REFERENCES b2c_stores(id) ON DELETE CASCADE;

-- b2c_delivery_options
ALTER TABLE b2c_delivery_options
  DROP CONSTRAINT IF EXISTS storefront_delivery_options_storefront_id_fkey CASCADE,
  ADD CONSTRAINT b2c_delivery_options_store_id_fkey
    FOREIGN KEY (storefront_id) REFERENCES b2c_stores(id) ON DELETE CASCADE;

-- b2c_inventory_movements
ALTER TABLE b2c_inventory_movements
  DROP CONSTRAINT IF EXISTS storefront_inventory_movements_variant_id_fkey CASCADE,
  ADD CONSTRAINT b2c_inventory_movements_variant_id_fkey
    FOREIGN KEY (variant_id) REFERENCES b2c_product_variants(id) ON DELETE CASCADE;

COMMIT;

-- ============================================================================
-- Ð’ÐµÑ€Ð¸Ñ„Ð¸ÐºÐ°Ñ†Ð¸Ñ
-- ============================================================================

DO $$
DECLARE
    fk_count INTEGER;
BEGIN
    -- ÐŸÐ¾Ð´ÑÑ‡Ð¸Ñ‚Ð°Ñ‚ÑŒ Ð²ÑÐµ FK Ð½Ð° Ð½Ð¾Ð²Ñ‹Ðµ Ñ‚Ð°Ð±Ð»Ð¸Ñ†Ñ‹
    SELECT COUNT(*) INTO fk_count
    FROM information_schema.table_constraints
    WHERE constraint_type = 'FOREIGN KEY'
      AND (table_name LIKE 'c2c_%' OR table_name LIKE 'b2c_%');

    RAISE NOTICE 'âœ… Created % foreign keys for C2C/B2C tables', fk_count;
END $$;
```

### ÐšÑ€Ð¸Ñ‚ÐµÑ€Ð¸Ð¸ Ð¿Ñ€Ð¸Ñ‘Ð¼ÐºÐ¸
- [ ] âœ… Ð’ÑÐµ 3 Ð¼Ð¸Ð³Ñ€Ð°Ñ†Ð¸Ð¸ (ÑÐ¾Ð·Ð´Ð°Ð½Ð¸Ðµ, Ð´Ð°Ð½Ð½Ñ‹Ðµ, FK) Ñ€Ð°Ð±Ð¾Ñ‚Ð°ÑŽÑ‚
- [ ] âœ… Up/Down Ð¼Ð¸Ð³Ñ€Ð°Ñ†Ð¸Ð¸ Ð¿Ñ€Ð¾Ñ‚ÐµÑÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ñ‹ 3 Ñ€Ð°Ð·Ð°
- [ ] âœ… Ð”Ð°Ð½Ð½Ñ‹Ðµ Ð¼Ð¸Ð³Ñ€Ð¸Ñ€Ð¾Ð²Ð°Ð½Ñ‹ Ð½Ð° 100% (Ð¿Ñ€Ð¾Ð²ÐµÑ€ÐºÐ° COUNT)
- [ ] âœ… Ð’ÑÐµ FK ÑÑÑ‹Ð»Ð°ÑŽÑ‚ÑÑ Ð½Ð° Ð½Ð¾Ð²Ñ‹Ðµ Ñ‚Ð°Ð±Ð»Ð¸Ñ†Ñ‹
- [ ] âœ… ÐÐµÑ‚ orphaned records (Ð¿Ñ€Ð¾Ð²ÐµÑ€ÐºÐ° Ñ†ÐµÐ»Ð¾ÑÑ‚Ð½Ð¾ÑÑ‚Ð¸)
- [ ] âœ… Ð¢Ñ€Ð¸Ð³Ð³ÐµÑ€Ñ‹ Ð¿ÐµÑ€ÐµÑÐ¾Ð·Ð´Ð°Ð½Ñ‹ Ð´Ð»Ñ Ð½Ð¾Ð²Ñ‹Ñ… Ñ‚Ð°Ð±Ð»Ð¸Ñ†

### Ð Ð¸ÑÐºÐ¸
| Ð Ð¸ÑÐº | ÐœÐ¸Ñ‚Ð¸Ð³Ð°Ñ†Ð¸Ñ |
|------|-----------|
| ÐŸÐ¾Ñ‚ÐµÑ€Ñ Ð´Ð°Ð½Ð½Ñ‹Ñ… | Ð¢Ñ€Ð¾Ð¹Ð½Ð°Ñ Ð¿Ñ€Ð¾Ð²ÐµÑ€ÐºÐ° COUNT Ð¿ÐµÑ€ÐµÐ´/Ð¿Ð¾ÑÐ»Ðµ |
| Ð¡Ð»Ð¾Ð¼Ð°Ð½Ð½Ñ‹Ðµ FK | ÐÐ²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ°Ñ Ð²Ð°Ð»Ð¸Ð´Ð°Ñ†Ð¸Ñ Ð² Ð¼Ð¸Ð³Ñ€Ð°Ñ†Ð¸Ð¸ |
| Ð’Ñ€ÐµÐ¼Ñ Ð²Ñ‹Ð¿Ð¾Ð»Ð½ÐµÐ½Ð¸Ñ | Ð¢ÐµÑÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ Ð½Ð° ÐºÐ¾Ð¿Ð¸Ð¸ Ð‘Ð”, Ð¾Ð¿Ñ‚Ð¸Ð¼Ð¸Ð·Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ Ð¸Ð½Ð´ÐµÐºÑÑ‹ |

### Ð¤Ð°ÐºÑ‚Ð¸Ñ‡ÐµÑÐºÐ¸Ðµ Ð´Ð°Ð½Ð½Ñ‹Ðµ
- **Ð’Ñ€ÐµÐ¼Ñ**: ___ Ð´Ð½ÐµÐ¹ (Ð¿Ð»Ð°Ð½: 4-5 Ð´Ð½ÐµÐ¹)
- **ÐœÐ¸Ð³Ñ€Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¾ ÑÑ‚Ñ€Ð¾Ðº**: C2C=___, B2C=___
- **ÐŸÑ€Ð¾Ð±Ð»ÐµÐ¼Ñ‹**: ___

---

## ðŸ”§ Ð¤ÐÐ—Ð 3: BACKEND ÐœÐ˜Ð“Ð ÐÐ¦Ð˜Ð¯ (Ð”Ð½Ð¸ 8-14)

### Ð¦ÐµÐ»ÑŒ
ÐŸÐµÑ€ÐµÐ¸Ð¼ÐµÐ½Ð¾Ð²Ð°Ñ‚ÑŒ Ð¼Ð¾Ð´ÑƒÐ»Ð¸, Ð¾Ð±Ð½Ð¾Ð²Ð¸Ñ‚ÑŒ Ð²ÑÐµ Go Ñ‚Ð¸Ð¿Ñ‹, SQL Ð·Ð°Ð¿Ñ€Ð¾ÑÑ‹, API endpoints. 100% ÐºÐ¾Ð¼Ð¿Ð¸Ð»ÑÑ†Ð¸Ñ + Ñ‚ÐµÑÑ‚Ñ‹.

### Ð—Ð°Ð´Ð°Ñ‡Ð¸

#### 3.1 ÐŸÐµÑ€ÐµÐ¸Ð¼ÐµÐ½Ð¾Ð²Ð°Ð½Ð¸Ðµ Ð¼Ð¾Ð´ÑƒÐ»ÐµÐ¹ Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð°

```bash
#!/bin/bash
# Ð¤Ð°Ð¹Ð»: /data/hostel-booking-system/migration-tools/backend-rename-modules.sh

set -e
cd /data/hostel-booking-system/backend

echo "ðŸ”„ Renaming backend modules..."

# 1. ÐŸÐµÑ€ÐµÐ¸Ð¼ÐµÐ½Ð¾Ð²Ð°Ñ‚ÑŒ Ð´Ð¸Ñ€ÐµÐºÑ‚Ð¾Ñ€Ð¸Ð¸
git mv internal/proj/marketplace internal/proj/c2c
git mv internal/proj/storefronts internal/proj/b2c

# 2. ÐžÐ±Ð½Ð¾Ð²Ð¸Ñ‚ÑŒ Ð¸Ð¼Ð¿Ð¾Ñ€Ñ‚Ñ‹ Ð²Ð¾ Ð²ÑÐµÑ… Go Ñ„Ð°Ð¹Ð»Ð°Ñ…
echo "ðŸ“ Updating imports in all Go files..."

find . -name "*.go" -type f -exec sed -i \
  's|backend/internal/proj/marketplace|backend/internal/proj/c2c|g' {} +

find . -name "*.go" -type f -exec sed -i \
  's|backend/internal/proj/storefronts|backend/internal/proj/b2c|g' {} +

# 3. ÐžÐ±Ð½Ð¾Ð²Ð¸Ñ‚ÑŒ domain models
echo "ðŸ“¦ Renaming domain model files..."

# C2C models
cd internal/domain
git mv marketplace_listing.go c2c_listing.go || true
git mv marketplace_category.go c2c_category.go || true
git mv marketplace_image.go c2c_image.go || true
git mv marketplace_chat.go c2c_chat.go || true
git mv marketplace_message.go c2c_message.go || true
git mv marketplace_favorite.go c2c_favorite.go || true
git mv marketplace_order.go c2c_order.go || true

# B2C models
git mv storefront.go b2c_store.go || true
git mv storefront_product.go b2c_product.go || true
git mv storefront_product_image.go b2c_product_image.go || true
git mv storefront_product_variant.go b2c_product_variant.go || true
git mv storefront_order.go b2c_order.go || true

cd ../..

echo "âœ… Module renaming complete!"
echo "âš ï¸  Next: run go build to verify compilation"
```

#### 3.2 ÐžÐ±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ðµ Go Ñ‚Ð¸Ð¿Ð¾Ð²

**Ð¡ÐºÑ€Ð¸Ð¿Ñ‚**: `/data/hostel-booking-system/migration-tools/backend-rename-types.sh`

```bash
#!/bin/bash
set -e

cd /data/hostel-booking-system/backend

echo "ðŸ”¤ Renaming Go types..."

# C2C types
find . -name "*.go" -exec sed -i 's/\bMarketplaceListing\b/C2CListing/g' {} +
find . -name "*.go" -exec sed -i 's/\bMarketplaceCategory\b/C2CCategory/g' {} +
find . -name "*.go" -exec sed -i 's/\bMarketplaceImage\b/C2CImage/g' {} +
find . -name "*.go" -exec sed -i 's/\bMarketplaceChat\b/C2CChat/g' {} +
find . -name "*.go" -exec sed -i 's/\bMarketplaceMessage\b/C2CMessage/g' {} +
find . -name "*.go" -exec sed -i 's/\bMarketplaceFavorite\b/C2CFavorite/g' {} +
find . -name "*.go" -exec sed -i 's/\bMarketplaceOrder\b/C2COrder/g' {} +

# B2C types
find . -name "*.go" -exec sed -i 's/\bStorefront\b/B2CStore/g' {} +
find . -name "*.go" -exec sed -i 's/\bStorefrontProduct\b/B2CProduct/g' {} +
find . -name "*.go" -exec sed -i 's/\bStorefrontProductImage\b/B2CProductImage/g' {} +
find . -name "*.go" -exec sed -i 's/\bStorefrontProductVariant\b/B2CProductVariant/g' {} +
find . -name "*.go" -exec sed -i 's/\bStorefrontOrder\b/B2COrder/g' {} +

echo "âœ… Type renaming complete!"
```

#### 3.3 ÐžÐ±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ðµ SQL Ð·Ð°Ð¿Ñ€Ð¾ÑÐ¾Ð² Ð² ÐºÐ¾Ð´Ðµ

```bash
#!/bin/bash
# Ð¤Ð°Ð¹Ð»: /data/hostel-booking-system/migration-tools/backend-rename-sql.sh

set -e
cd /data/hostel-booking-system/backend

echo "ðŸ—„ï¸  Updating SQL table references..."

# C2C tables
find internal/proj/c2c -name "*.go" -exec sed -i \
  's/marketplace_listings/c2c_listings/g' {} +
find internal/proj/c2c -name "*.go" -exec sed -i \
  's/marketplace_categories/c2c_categories/g' {} +
find internal/proj/c2c -name "*.go" -exec sed -i \
  's/marketplace_images/c2c_images/g' {} +
find internal/proj/c2c -name "*.go" -exec sed -i \
  's/marketplace_chats/c2c_chats/g' {} +
find internal/proj/c2c -name "*.go" -exec sed -i \
  's/marketplace_messages/c2c_messages/g' {} +
find internal/proj/c2c -name "*.go" -exec sed -i \
  's/marketplace_favorites/c2c_favorites/g' {} +
find internal/proj/c2c -name "*.go" -exec sed -i \
  's/marketplace_orders/c2c_orders/g' {} +
find internal/proj/c2c -name "*.go" -exec sed -i \
  's/marketplace_listing_variants/c2c_listing_variants/g' {} +

# B2C tables
find internal/proj/b2c -name "*.go" -exec sed -i \
  's/storefronts\b/b2c_stores/g' {} +
find internal/proj/b2c -name "*.go" -exec sed -i \
  's/storefront_products/b2c_products/g' {} +
find internal/proj/b2c -name "*.go" -exec sed -i \
  's/storefront_product_images/b2c_product_images/g' {} +
find internal/proj/b2c -name "*.go" -exec sed -i \
  's/storefront_product_variants/b2c_product_variants/g' {} +
find internal/proj/b2c -name "*.go" -exec sed -i \
  's/storefront_product_attributes/b2c_product_attributes/g' {} +
find internal/proj/b2c -name "*.go" -exec sed -i \
  's/storefront_orders/b2c_orders/g' {} +
find internal/proj/b2c -name "*.go" -exec sed -i \
  's/storefront_order_items/b2c_order_items/g' {} +
find internal/proj/b2c -name "*.go" -exec sed -i \
  's/storefront_favorites/b2c_favorites/g' {} +
find internal/proj/b2c -name "*.go" -exec sed -i \
  's/storefront_hours/b2c_store_hours/g' {} +
find internal/proj/b2c -name "*.go" -exec sed -i \
  's/storefront_staff/b2c_store_staff/g' {} +
find internal/proj/b2c -name "*.go" -exec sed -i \
  's/storefront_payment_methods/b2c_payment_methods/g' {} +
find internal/proj/b2c -name "*.go" -exec sed -i \
  's/storefront_delivery_options/b2c_delivery_options/g' {} +
find internal/proj/b2c -name "*.go" -exec sed -i \
  's/storefront_inventory_movements/b2c_inventory_movements/g' {} +
find internal/proj/b2c -name "*.go" -exec sed -i \
  's/user_storefronts/user_b2c_stores/g' {} +
find internal/proj/b2c -name "*.go" -exec sed -i \
  's/storefront_product_variant_images/b2c_product_variant_images/g' {} +

echo "âœ… SQL references updated!"
```

#### 3.4 ÐžÐ±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ðµ API endpoints (routes)

**Ð’ÐÐ–ÐÐž**: ÐÐ•Ð¢ Ð¾Ð±Ñ€Ð°Ñ‚Ð½Ð¾Ð¹ ÑÐ¾Ð²Ð¼ÐµÑÑ‚Ð¸Ð¼Ð¾ÑÑ‚Ð¸ - ÑƒÐ´Ð°Ð»ÑÐµÐ¼ ÑÑ‚Ð°Ñ€Ñ‹Ðµ Ñ€Ð¾ÑƒÑ‚Ñ‹ Ð¿Ð¾Ð»Ð½Ð¾ÑÑ‚ÑŒÑŽ!

ÐŸÑ€Ð¸Ð¼ÐµÑ€ Ð´Ð»Ñ `backend/internal/proj/c2c/handler/routes.go`:

```go
package handler

import (
	"github.com/gofiber/fiber/v2"
	authMiddleware "github.com/sveturs/auth/pkg/http/fiber/middleware"
	"backend/internal/middleware"
)

// RegisterRoutes Ñ€ÐµÐ³Ð¸ÑÑ‚Ñ€Ð¸Ñ€ÑƒÐµÑ‚ C2C (Ð±Ñ‹Ð²ÑˆÐ¸Ðµ marketplace) ÑÐ½Ð´Ð¿Ð¾Ð¸Ð½Ñ‚Ñ‹
func (h *Handler) RegisterRoutes(app *fiber.App, mw *middleware.Middleware) error {
	// ============================================================================
	// C2C PUBLIC ENDPOINTS
	// ============================================================================
	c2cPublic := app.Group("/api/v1/c2c")

	// Listings
	c2cPublic.Get("/listings", h.GetListings)                // GET /api/v1/c2c/listings
	c2cPublic.Get("/listings/:id", h.GetListingByID)         // GET /api/v1/c2c/listings/:id
	c2cPublic.Get("/listings/user/:userId", h.GetUserListings)

	// Categories
	c2cPublic.Get("/categories", h.GetCategories)            // GET /api/v1/c2c/categories
	c2cPublic.Get("/categories/:id", h.GetCategoryByID)

	// Search
	c2cPublic.Get("/search", h.SearchListings)               // GET /api/v1/c2c/search

	// ============================================================================
	// C2C AUTHENTICATED ENDPOINTS
	// ============================================================================
	c2cAuth := app.Group("/api/v1/c2c", h.jwtParserMW, authMiddleware.RequireAuth())

	// Create/Update/Delete
	c2cAuth.Post("/listings", h.CreateListing)               // POST /api/v1/c2c/listings
	c2cAuth.Put("/listings/:id", h.UpdateListing)            // PUT /api/v1/c2c/listings/:id
	c2cAuth.Delete("/listings/:id", h.DeleteListing)         // DELETE /api/v1/c2c/listings/:id

	// Images
	c2cAuth.Post("/listings/:id/images", h.UploadImages)     // POST /api/v1/c2c/listings/:id/images
	c2cAuth.Delete("/images/:id", h.DeleteImage)

	// Favorites
	c2cAuth.Get("/favorites", h.GetFavorites)                // GET /api/v1/c2c/favorites
	c2cAuth.Post("/favorites", h.AddFavorite)
	c2cAuth.Delete("/favorites/:id", h.RemoveFavorite)

	// Chats
	c2cAuth.Get("/chats", h.GetChats)                        // GET /api/v1/c2c/chats
	c2cAuth.Post("/chats", h.CreateChat)
	c2cAuth.Get("/chats/:id/messages", h.GetMessages)
	c2cAuth.Post("/chats/:id/messages", h.SendMessage)

	// ============================================================================
	// C2C ADMIN ENDPOINTS
	// ============================================================================
	c2cAdmin := app.Group("/api/v1/admin/c2c", h.jwtParserMW, authMiddleware.RequireAuthString("admin"))

	c2cAdmin.Get("/listings", h.GetAllListingsAdmin)         // GET /api/v1/admin/c2c/listings
	c2cAdmin.Put("/listings/:id/status", h.UpdateListingStatus)
	c2cAdmin.Delete("/listings/:id", h.DeleteListingAdmin)

	c2cAdmin.Get("/categories", h.GetAllCategoriesAdmin)
	c2cAdmin.Post("/categories", h.CreateCategory)
	c2cAdmin.Put("/categories/:id", h.UpdateCategory)
	c2cAdmin.Delete("/categories/:id", h.DeleteCategory)

	return nil
}

func (h *Handler) GetPrefix() string {
	return "/api/v1/c2c"  // Ð¾Ð±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¾ Ñ "/api/v1/marketplace"
}
```

ÐÐ½Ð°Ð»Ð¾Ð³Ð¸Ñ‡Ð½Ð¾ Ð´Ð»Ñ B2C (`backend/internal/proj/b2c/handler/routes.go`):

```go
// RegisterRoutes Ñ€ÐµÐ³Ð¸ÑÑ‚Ñ€Ð¸Ñ€ÑƒÐµÑ‚ B2C (Ð±Ñ‹Ð²ÑˆÐ¸Ðµ storefronts) ÑÐ½Ð´Ð¿Ð¾Ð¸Ð½Ñ‚Ñ‹
func (h *Handler) RegisterRoutes(app *fiber.App, mw *middleware.Middleware) error {
	// ============================================================================
	// B2C PUBLIC ENDPOINTS
	// ============================================================================
	b2cPublic := app.Group("/api/v1/b2c")

	// Stores
	b2cPublic.Get("/stores", h.GetStores)                    // GET /api/v1/b2c/stores
	b2cPublic.Get("/stores/:id", h.GetStoreByID)             // GET /api/v1/b2c/stores/:id
	b2cPublic.Get("/stores/:id/products", h.GetStoreProducts)

	// Products
	b2cPublic.Get("/products", h.GetProducts)                // GET /api/v1/b2c/products
	b2cPublic.Get("/products/:id", h.GetProductByID)         // GET /api/v1/b2c/products/:id

	// Search
	b2cPublic.Get("/search", h.SearchProducts)               // GET /api/v1/b2c/search

	// ============================================================================
	// B2C AUTHENTICATED ENDPOINTS
	// ============================================================================
	b2cAuth := app.Group("/api/v1/b2c", h.jwtParserMW, authMiddleware.RequireAuth())

	// Store management
	b2cAuth.Post("/stores", h.CreateStore)                   // POST /api/v1/b2c/stores
	b2cAuth.Put("/stores/:id", h.UpdateStore)                // PUT /api/v1/b2c/stores/:id
	b2cAuth.Delete("/stores/:id", h.DeleteStore)

	// Product management
	b2cAuth.Post("/products", h.CreateProduct)               // POST /api/v1/b2c/products
	b2cAuth.Put("/products/:id", h.UpdateProduct)
	b2cAuth.Delete("/products/:id", h.DeleteProduct)

	// Product images
	b2cAuth.Post("/products/:id/images", h.UploadProductImages)
	b2cAuth.Delete("/images/:id", h.DeleteProductImage)

	// Variants
	b2cAuth.Post("/products/:id/variants", h.CreateVariant)
	b2cAuth.Put("/variants/:id", h.UpdateVariant)
	b2cAuth.Delete("/variants/:id", h.DeleteVariant)

	// ============================================================================
	// B2C ADMIN ENDPOINTS
	// ============================================================================
	b2cAdmin := app.Group("/api/v1/admin/b2c", h.jwtParserMW, authMiddleware.RequireAuthString("admin"))

	b2cAdmin.Get("/stores", h.GetAllStoresAdmin)             // GET /api/v1/admin/b2c/stores
	b2cAdmin.Put("/stores/:id/status", h.UpdateStoreStatus)
	b2cAdmin.Delete("/stores/:id", h.DeleteStoreAdmin)

	b2cAdmin.Get("/products", h.GetAllProductsAdmin)
	b2cAdmin.Put("/products/:id/status", h.UpdateProductStatus)

	return nil
}

func (h *Handler) GetPrefix() string {
	return "/api/v1/b2c"  // Ð¾Ð±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¾ Ñ "/api/v1/storefronts"
}
```

#### 3.5 ÐžÐ±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ðµ Swagger Ð°Ð½Ð½Ð¾Ñ‚Ð°Ñ†Ð¸Ð¹

ÐŸÑ€Ð¸Ð¼ÐµÑ€ Ð´Ð»Ñ C2C listing handler:

```go
// GetListings godoc
// @Summary      Get C2C listings
// @Description  Get paginated list of C2C (customer-to-customer) listings
// @Tags         c2c
// @Accept       json
// @Produce      json
// @Param        page     query    int     false  "Page number"
// @Param        limit    query    int     false  "Items per page"
// @Param        category query    string  false  "Category ID"
// @Success      200      {object} utils.SuccessResponse{data=[]domain.C2CListing}
// @Failure      400      {object} utils.ErrorResponse
// @Failure      500      {object} utils.ErrorResponse
// @Router       /api/v1/c2c/listings [get]
func (h *Handler) GetListings(c *fiber.Ctx) error {
	// ...
}
```

**ÐŸÐ¾ÑÐ»Ðµ Ð¾Ð±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ñ Ð²ÑÐµÑ… Ð°Ð½Ð½Ð¾Ñ‚Ð°Ñ†Ð¸Ð¹:**

```bash
cd /data/hostel-booking-system/backend
make swagger  # Ñ€ÐµÐ³ÐµÐ½ÐµÑ€Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ swagger.json

# ÐŸÑ€Ð¾Ð²ÐµÑ€Ð¸Ñ‚ÑŒ Ñ€ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚
python3 -m http.server 8888 -d docs &
curl http://localhost:8888/swagger.json | jq '.paths | keys' | grep -E "c2c|b2c"
pkill -f "python3 -m http.server 8888"
```

### ÐšÑ€Ð¸Ñ‚ÐµÑ€Ð¸Ð¸ Ð¿Ñ€Ð¸Ñ‘Ð¼ÐºÐ¸
- [ ] âœ… Ð’ÑÐµ Ð¼Ð¾Ð´ÑƒÐ»Ð¸ Ð¿ÐµÑ€ÐµÐ¸Ð¼ÐµÐ½Ð¾Ð²Ð°Ð½Ñ‹ (c2c, b2c)
- [ ] âœ… `go build ./...` Ð¿Ñ€Ð¾Ñ…Ð¾Ð´Ð¸Ñ‚ Ð±ÐµÐ· Ð¾ÑˆÐ¸Ð±Ð¾Ðº
- [ ] âœ… Ð’ÑÐµ Ð¸Ð¼Ð¿Ð¾Ñ€Ñ‚Ñ‹ Ð¾Ð±Ð½Ð¾Ð²Ð»ÐµÐ½Ñ‹
- [ ] âœ… Ð’ÑÐµ API endpoints Ð¾Ð±Ð½Ð¾Ð²Ð»ÐµÐ½Ñ‹
- [ ] âœ… Swagger Ð°Ð½Ð½Ð¾Ñ‚Ð°Ñ†Ð¸Ð¸ Ð¾Ð±Ð½Ð¾Ð²Ð»ÐµÐ½Ñ‹ + regenerated
- [ ] âœ… `make lint` Ð¿Ñ€Ð¾Ñ…Ð¾Ð´Ð¸Ñ‚ (0 warnings)
- [ ] âœ… `go test ./...` Ð¿Ñ€Ð¾Ñ…Ð¾Ð´Ð¸Ñ‚ (100% ÑÑƒÑ‰ÐµÑÑ‚Ð²ÑƒÑŽÑ‰Ð¸Ñ… Ñ‚ÐµÑÑ‚Ð¾Ð²)
- [ ] âœ… ÐÐµÑ‚ ÑƒÐ¿Ð¾Ð¼Ð¸Ð½Ð°Ð½Ð¸Ð¹ "marketplace" Ð¸Ð»Ð¸ "storefront" Ð² backend/internal/proj

### Ð Ð¸ÑÐºÐ¸
| Ð Ð¸ÑÐº | ÐœÐ¸Ñ‚Ð¸Ð³Ð°Ñ†Ð¸Ñ |
|------|-----------|
| Ð¡Ð»Ð¾Ð¼Ð°Ð½Ð½Ð°Ñ ÐºÐ¾Ð¼Ð¿Ð¸Ð»ÑÑ†Ð¸Ñ | ÐŸÐ¾ÑÑ‚Ð°Ð¿Ð½Ð¾Ðµ Ð¿ÐµÑ€ÐµÐ¸Ð¼ÐµÐ½Ð¾Ð²Ð°Ð½Ð¸Ðµ + Ñ‡Ð°ÑÑ‚Ñ‹Ðµ Ð¿Ñ€Ð¾Ð²ÐµÑ€ÐºÐ¸ |
| ÐŸÑ€Ð¾Ð¿ÑƒÑ‰ÐµÐ½Ð½Ñ‹Ðµ Ð¸Ð¼Ð¿Ð¾Ñ€Ñ‚Ñ‹ | ÐÐ²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¸Ð¹ ÑÐºÑ€Ð¸Ð¿Ñ‚ + go build |
| ÐšÐ¾Ð½Ñ„Ð»Ð¸ÐºÑ‚Ñ‹ Ð² git mv | Ð”ÐµÐ»Ð°Ñ‚ÑŒ Ð² Ð¸Ð·Ð¾Ð»Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð½Ð¾Ð¹ Ð²ÐµÑ‚ÐºÐµ |

### Ð¤Ð°ÐºÑ‚Ð¸Ñ‡ÐµÑÐºÐ¸Ðµ Ð´Ð°Ð½Ð½Ñ‹Ðµ
- **Ð’Ñ€ÐµÐ¼Ñ**: ___ Ð´Ð½ÐµÐ¹ (Ð¿Ð»Ð°Ð½: 5-7 Ð´Ð½ÐµÐ¹)
- **Ð¤Ð°Ð¹Ð»Ð¾Ð² Ð¾Ð±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¾**: ___
- **ÐŸÑ€Ð¾Ð±Ð»ÐµÐ¼Ñ‹**: ___

---

## ðŸŽ¨ Ð¤ÐÐ—Ð 4: FRONTEND ÐœÐ˜Ð“Ð ÐÐ¦Ð˜Ð¯ (Ð”Ð½Ð¸ 15-19)

### Ð¦ÐµÐ»ÑŒ
ÐŸÐµÑ€ÐµÐ¸Ð¼ÐµÐ½Ð¾Ð²Ð°Ñ‚ÑŒ ÐºÐ¾Ð¼Ð¿Ð¾Ð½ÐµÐ½Ñ‚Ñ‹, Ñ‚Ð¸Ð¿Ñ‹, Ñ€Ð¾ÑƒÑ‚Ñ‹, Ð¿ÐµÑ€ÐµÐ²Ð¾Ð´Ñ‹. 100% ÐºÐ¾Ð¼Ð¿Ð¸Ð»ÑÑ†Ð¸Ñ TypeScript + ÑÐ±Ð¾Ñ€ÐºÐ° Next.js.

### Ð—Ð°Ð´Ð°Ñ‡Ð¸

#### 4.1 ÐŸÐµÑ€ÐµÐ¸Ð¼ÐµÐ½Ð¾Ð²Ð°Ð½Ð¸Ðµ Ð´Ð¸Ñ€ÐµÐºÑ‚Ð¾Ñ€Ð¸Ð¹

```bash
#!/bin/bash
# Ð¤Ð°Ð¹Ð»: /data/hostel-booking-system/migration-tools/frontend-rename-dirs.sh

set -e
cd /data/hostel-booking-system/frontend/svetu

echo "ðŸ“ Renaming frontend directories..."

# App routes
git mv src/app/\[locale\]/marketplace src/app/\[locale\]/c2c || true
git mv src/app/\[locale\]/storefronts src/app/\[locale\]/b2c || true

# Components
git mv src/components/marketplace src/components/c2c || true
git mv src/components/storefronts src/components/b2c || true

# Services
git mv src/services/marketplaceApi.ts src/services/c2cApi.ts || true
git mv src/services/storefrontsApi.ts src/services/b2cApi.ts || true

# Types
git mv src/types/marketplace.ts src/types/c2c.ts || true
git mv src/types/storefront.ts src/types/b2c.ts || true

# Store (Redux)
git mv src/store/slices/marketplaceSlice.ts src/store/slices/c2cSlice.ts || true
git mv src/store/slices/storefrontsSlice.ts src/store/slices/b2cSlice.ts || true

echo "âœ… Directory renaming complete!"
```

#### 4.2 ÐžÐ±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ðµ TypeScript Ñ‚Ð¸Ð¿Ð¾Ð²

```bash
#!/bin/bash
# Ð¤Ð°Ð¹Ð»: /data/hostel-booking-system/migration-tools/frontend-rename-types.sh

set -e
cd /data/hostel-booking-system/frontend/svetu

echo "ðŸ”¤ Updating TypeScript types..."

# C2C types
find src -name "*.ts" -o -name "*.tsx" | xargs sed -i \
  's/\bMarketplaceListing\b/C2CListing/g'
find src -name "*.ts" -o -name "*.tsx" | xargs sed -i \
  's/\bMarketplaceCategory\b/C2CCategory/g'
find src -name "*.ts" -o -name "*.tsx" | xargs sed -i \
  's/\bMarketplaceImage\b/C2CImage/g'

# B2C types
find src -name "*.ts" -o -name "*.tsx" | xargs sed -i \
  's/\bStorefront\b/B2CStore/g'
find src -name "*.ts" -o -name "*.tsx" | xargs sed -i \
  's/\bStorefrontProduct\b/B2CProduct/g'
find src -name "*.ts" -o -name "*.tsx" | xargs sed -i \
  's/\bStorefrontProductImage\b/B2CProductImage/g'

echo "âœ… Type renaming complete!"
```

#### 4.3 ÐžÐ±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ðµ API ÐºÐ»Ð¸ÐµÐ½Ñ‚Ð¾Ð²

ÐŸÑ€Ð¸Ð¼ÐµÑ€ `src/services/c2cApi.ts` (Ð±Ñ‹Ð²ÑˆÐ¸Ð¹ marketplaceApi.ts):

```typescript
import { apiClient } from '@/services/api-client';
import type { C2CListing, C2CCategory, C2CImage } from '@/types/c2c';

export class C2CApi {
  // ============================================================================
  // LISTINGS
  // ============================================================================

  async getListings(params?: {
    page?: number;
    limit?: number;
    categoryId?: string;
  }): Promise<{ listings: C2CListing[]; total: number }> {
    const response = await apiClient.get('/c2c/listings', { params });
    return response.data;
  }

  async getListingById(id: string): Promise<C2CListing> {
    const response = await apiClient.get(`/c2c/listings/${id}`);
    return response.data;
  }

  async createListing(data: Partial<C2CListing>): Promise<C2CListing> {
    const response = await apiClient.post('/c2c/listings', data);
    return response.data;
  }

  async updateListing(id: string, data: Partial<C2CListing>): Promise<C2CListing> {
    const response = await apiClient.put(`/c2c/listings/${id}`, data);
    return response.data;
  }

  async deleteListing(id: string): Promise<void> {
    await apiClient.delete(`/c2c/listings/${id}`);
  }

  // ============================================================================
  // CATEGORIES
  // ============================================================================

  async getCategories(): Promise<C2CCategory[]> {
    const response = await apiClient.get('/c2c/categories');
    return response.data;
  }

  // ============================================================================
  // IMAGES
  // ============================================================================

  async uploadImages(listingId: string, files: File[]): Promise<C2CImage[]> {
    const formData = new FormData();
    files.forEach(file => formData.append('images', file));

    const response = await apiClient.post(`/c2c/listings/${listingId}/images`, formData, {
      headers: { 'Content-Type': 'multipart/form-data' }
    });
    return response.data;
  }

  async deleteImage(imageId: string): Promise<void> {
    await apiClient.delete(`/c2c/images/${imageId}`);
  }

  // ============================================================================
  // SEARCH
  // ============================================================================

  async search(query: string, filters?: Record<string, any>): Promise<C2CListing[]> {
    const response = await apiClient.get('/c2c/search', {
      params: { q: query, ...filters }
    });
    return response.data;
  }

  // ============================================================================
  // FAVORITES
  // ============================================================================

  async getFavorites(): Promise<C2CListing[]> {
    const response = await apiClient.get('/c2c/favorites');
    return response.data;
  }

  async addFavorite(listingId: string): Promise<void> {
    await apiClient.post('/c2c/favorites', { listingId });
  }

  async removeFavorite(favoriteId: string): Promise<void> {
    await apiClient.delete(`/c2c/favorites/${favoriteId}`);
  }
}

export const c2cApi = new C2CApi();
```

ÐÐ½Ð°Ð»Ð¾Ð³Ð¸Ñ‡Ð½Ð¾ Ð´Ð»Ñ `src/services/b2cApi.ts`.

#### 4.4 ÐžÐ±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ðµ Ð¿ÐµÑ€ÐµÐ²Ð¾Ð´Ð¾Ð² (i18n)

```bash
#!/bin/bash
# Ð¤Ð°Ð¹Ð»: /data/hostel-booking-system/migration-tools/frontend-rename-i18n.sh

set -e
cd /data/hostel-booking-system/frontend/svetu

echo "ðŸŒ Renaming translation files..."

for lang in en ru sr; do
  # ÐŸÐµÑ€ÐµÐ¸Ð¼ÐµÐ½Ð¾Ð²Ð°Ñ‚ÑŒ Ñ„Ð°Ð¹Ð»Ñ‹
  git mv src/messages/$lang/marketplace.json src/messages/$lang/c2c.json || true
  git mv src/messages/$lang/storefronts.json src/messages/$lang/b2c.json || true

  # ÐžÐ±Ð½Ð¾Ð²Ð¸Ñ‚ÑŒ ÐºÐ»ÑŽÑ‡Ð¸ Ð²Ð½ÑƒÑ‚Ñ€Ð¸ Ñ„Ð°Ð¹Ð»Ð¾Ð²
  if [ -f src/messages/$lang/c2c.json ]; then
    # Ð—Ð°Ð¼ÐµÐ½Ð¸Ñ‚ÑŒ Ð²ÑÐµ ÐºÐ»ÑŽÑ‡Ð¸ marketplace.* Ð½Ð° c2c.*
    sed -i 's/"marketplace\./"c2c./g' src/messages/$lang/c2c.json
  fi

  if [ -f src/messages/$lang/b2c.json ]; then
    # Ð—Ð°Ð¼ÐµÐ½Ð¸Ñ‚ÑŒ Ð²ÑÐµ ÐºÐ»ÑŽÑ‡Ð¸ storefronts.* Ð½Ð° b2c.*
    sed -i 's/"storefronts\./"b2c./g' src/messages/$lang/b2c.json
  fi
done

echo "âœ… Translation files updated!"
```

ÐŸÑ€Ð¸Ð¼ÐµÑ€ Ð¾Ð±Ð½Ð¾Ð²Ð»Ñ‘Ð½Ð½Ð¾Ð³Ð¾ Ñ„Ð°Ð¹Ð»Ð° `src/messages/en/c2c.json`:

```json
{
  "c2c": {
    "title": "C2C Marketplace",
    "subtitle": "Buy and sell directly with other users",
    "listings": {
      "title": "Listings",
      "create": "Create Listing",
      "edit": "Edit Listing",
      "delete": "Delete Listing",
      "no_results": "No listings found"
    },
    "categories": {
      "title": "Categories",
      "select": "Select Category",
      "all": "All Categories"
    },
    "search": {
      "placeholder": "Search listings...",
      "button": "Search",
      "filters": "Filters"
    },
    "favorites": {
      "title": "My Favorites",
      "add": "Add to Favorites",
      "remove": "Remove from Favorites"
    }
  }
}
```

#### 4.5 ÐžÐ±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ðµ Ñ€Ð¾ÑƒÑ‚Ð¸Ð½Ð³Ð° Ð¸ ÐºÐ¾Ð¼Ð¿Ð¾Ð½ÐµÐ½Ñ‚Ð¾Ð²

ÐŸÑ€Ð¸Ð¼ÐµÑ€ ÑÑ‚Ñ€Ð°Ð½Ð¸Ñ†Ñ‹ `src/app/[locale]/c2c/page.tsx`:

```tsx
import { useTranslations } from 'next-intl';
import { C2CListings } from '@/components/c2c/C2CListings';
import { C2CFilters } from '@/components/c2c/C2CFilters';

export default function C2CPage() {
  const t = useTranslations('c2c');

  return (
    <div className="container mx-auto py-8">
      <h1 className="text-3xl font-bold mb-6">{t('title')}</h1>
      <p className="text-gray-600 mb-8">{t('subtitle')}</p>

      <div className="grid grid-cols-1 lg:grid-cols-4 gap-8">
        <aside className="lg:col-span-1">
          <C2CFilters />
        </aside>

        <main className="lg:col-span-3">
          <C2CListings />
        </main>
      </div>
    </div>
  );
}
```

### ÐšÑ€Ð¸Ñ‚ÐµÑ€Ð¸Ð¸ Ð¿Ñ€Ð¸Ñ‘Ð¼ÐºÐ¸
- [ ] âœ… Ð’ÑÐµ Ð´Ð¸Ñ€ÐµÐºÑ‚Ð¾Ñ€Ð¸Ð¸ Ð¿ÐµÑ€ÐµÐ¸Ð¼ÐµÐ½Ð¾Ð²Ð°Ð½Ñ‹
- [ ] âœ… `yarn build` Ð¿Ñ€Ð¾Ñ…Ð¾Ð´Ð¸Ñ‚ Ð±ÐµÐ· Ð¾ÑˆÐ¸Ð±Ð¾Ðº
- [ ] âœ… TypeScript: 0 Ð¾ÑˆÐ¸Ð±Ð¾Ðº ÐºÐ¾Ð¼Ð¿Ð¸Ð»ÑÑ†Ð¸Ð¸
- [ ] âœ… ESLint: `yarn lint` Ð¿Ñ€Ð¾Ñ…Ð¾Ð´Ð¸Ñ‚ (0 warnings)
- [ ] âœ… Prettier: `yarn format` Ð²Ñ‹Ð¿Ð¾Ð»Ð½ÐµÐ½
- [ ] âœ… Ð’ÑÐµ Ð¿ÐµÑ€ÐµÐ²Ð¾Ð´Ñ‹ Ð¾Ð±Ð½Ð¾Ð²Ð»ÐµÐ½Ñ‹ (3 ÑÐ·Ñ‹ÐºÐ°)
- [ ] âœ… Ð Ð¾ÑƒÑ‚Ñ‹ Ñ€Ð°Ð±Ð¾Ñ‚Ð°ÑŽÑ‚: `/c2c`, `/b2c`
- [ ] âœ… ÐÐµÑ‚ ÑƒÐ¿Ð¾Ð¼Ð¸Ð½Ð°Ð½Ð¸Ð¹ "marketplace" Ð¸Ð»Ð¸ "storefronts" Ð² src/

### Ð Ð¸ÑÐºÐ¸
| Ð Ð¸ÑÐº | ÐœÐ¸Ñ‚Ð¸Ð³Ð°Ñ†Ð¸Ñ |
|------|-----------|
| Ð¡Ð»Ð¾Ð¼Ð°Ð½Ð½Ñ‹Ðµ Ð¸Ð¼Ð¿Ð¾Ñ€Ñ‚Ñ‹ | TypeScript Ð¿Ñ€Ð¾Ð²ÐµÑ€ÐºÐ° + yarn build |
| ÐŸÐ¾Ñ‚ÐµÑ€ÑÐ½Ð½Ñ‹Ðµ Ð¿ÐµÑ€ÐµÐ²Ð¾Ð´Ñ‹ | ÐŸÑ€Ð¾Ð²ÐµÑ€Ð¸Ñ‚ÑŒ Ð²ÑÐµ 3 ÑÐ·Ñ‹ÐºÐ° Ð²Ñ€ÑƒÑ‡Ð½ÑƒÑŽ |
| Ð Ð¾ÑƒÑ‚Ñ‹ 404 | Ð¢ÐµÑÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ ÐºÐ°Ð¶Ð´Ñ‹Ð¹ Ñ€Ð¾ÑƒÑ‚ Ð¿Ð¾ÑÐ»Ðµ Ð¾Ð±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ñ |

### Ð¤Ð°ÐºÑ‚Ð¸Ñ‡ÐµÑÐºÐ¸Ðµ Ð´Ð°Ð½Ð½Ñ‹Ðµ
- **Ð’Ñ€ÐµÐ¼Ñ**: ___ Ð´Ð½ÐµÐ¹ (Ð¿Ð»Ð°Ð½: 4-5 Ð´Ð½ÐµÐ¹)
- **ÐšÐ¾Ð¼Ð¿Ð¾Ð½ÐµÐ½Ñ‚Ð¾Ð² Ð¾Ð±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¾**: ___
- **ÐŸÑ€Ð¾Ð±Ð»ÐµÐ¼Ñ‹**: ___

---

## ðŸ” Ð¤ÐÐ—Ð 5: OPENSEARCH ÐœÐ˜Ð“Ð ÐÐ¦Ð˜Ð¯ (Ð”Ð½Ð¸ 20-22)

### Ð¦ÐµÐ»ÑŒ
Ð¡Ð¾Ð·Ð´Ð°Ñ‚ÑŒ Ð½Ð¾Ð²Ñ‹Ðµ Ð¸Ð½Ð´ÐµÐºÑÑ‹, Ð¼Ð¸Ð³Ñ€Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ Ð´Ð°Ð½Ð½Ñ‹Ðµ, Ð¾Ð±Ð½Ð¾Ð²Ð¸Ñ‚ÑŒ ÐºÐ¾Ð´ Ð¿Ð¾Ð¸ÑÐºÐ°.

### Ð—Ð°Ð´Ð°Ñ‡Ð¸

#### 5.1 Ð¡Ð¾Ð·Ð´Ð°Ð½Ð¸Ðµ Ð½Ð¾Ð²Ñ‹Ñ… Ð¸Ð½Ð´ÐµÐºÑÐ¾Ð²

**Ð¤Ð°Ð¹Ð»**: `/data/hostel-booking-system/migration-tools/opensearch-create-indices.sh`

```bash
#!/bin/bash
set -e

OPENSEARCH_URL="http://localhost:9200"

echo "ðŸ” Creating new OpenSearch indices..."

# ============================================================================
# C2C LISTINGS INDEX
# ============================================================================

curl -X PUT "$OPENSEARCH_URL/c2c_listings" \
  -H 'Content-Type: application/json' \
  -d '{
  "settings": {
    "number_of_shards": 1,
    "number_of_replicas": 0,
    "analysis": {
      "analyzer": {
        "custom_analyzer": {
          "type": "custom",
          "tokenizer": "standard",
          "filter": ["lowercase", "asciifolding"]
        }
      }
    }
  },
  "mappings": {
    "properties": {
      "id": { "type": "keyword" },
      "title": {
        "type": "text",
        "analyzer": "custom_analyzer",
        "fields": {
          "keyword": { "type": "keyword" }
        }
      },
      "description": {
        "type": "text",
        "analyzer": "custom_analyzer"
      },
      "price": { "type": "float" },
      "currency": { "type": "keyword" },
      "category_id": { "type": "keyword" },
      "category_name": { "type": "text" },
      "user_id": { "type": "keyword" },
      "status": { "type": "keyword" },
      "condition": { "type": "keyword" },
      "location": { "type": "text" },
      "tags": { "type": "keyword" },
      "created_at": { "type": "date" },
      "updated_at": { "type": "date" }
    }
  }
}'

echo "âœ… C2C listings index created"

# ============================================================================
# B2C PRODUCTS INDEX
# ============================================================================

curl -X PUT "$OPENSEARCH_URL/b2c_products" \
  -H 'Content-Type: application/json' \
  -d '{
  "settings": {
    "number_of_shards": 1,
    "number_of_replicas": 0,
    "analysis": {
      "analyzer": {
        "custom_analyzer": {
          "type": "custom",
          "tokenizer": "standard",
          "filter": ["lowercase", "asciifolding"]
        }
      }
    }
  },
  "mappings": {
    "properties": {
      "id": { "type": "keyword" },
      "name": {
        "type": "text",
        "analyzer": "custom_analyzer",
        "fields": {
          "keyword": { "type": "keyword" }
        }
      },
      "description": {
        "type": "text",
        "analyzer": "custom_analyzer"
      },
      "price": { "type": "float" },
      "currency": { "type": "keyword" },
      "store_id": { "type": "keyword" },
      "store_name": { "type": "text" },
      "category": { "type": "keyword" },
      "status": { "type": "keyword" },
      "in_stock": { "type": "boolean" },
      "quantity": { "type": "integer" },
      "tags": { "type": "keyword" },
      "created_at": { "type": "date" },
      "updated_at": { "type": "date" }
    }
  }
}'

echo "âœ… B2C products index created"

# ============================================================================
# B2C STORES INDEX
# ============================================================================

curl -X PUT "$OPENSEARCH_URL/b2c_stores" \
  -H 'Content-Type: application/json' \
  -d '{
  "settings": {
    "number_of_shards": 1,
    "number_of_replicas": 0,
    "analysis": {
      "analyzer": {
        "custom_analyzer": {
          "type": "custom",
          "tokenizer": "standard",
          "filter": ["lowercase", "asciifolding"]
        }
      }
    }
  },
  "mappings": {
    "properties": {
      "id": { "type": "keyword" },
      "name": {
        "type": "text",
        "analyzer": "custom_analyzer",
        "fields": {
          "keyword": { "type": "keyword" }
        }
      },
      "description": {
        "type": "text",
        "analyzer": "custom_analyzer"
      },
      "slug": { "type": "keyword" },
      "owner_id": { "type": "keyword" },
      "status": { "type": "keyword" },
      "location": { "type": "text" },
      "tags": { "type": "keyword" },
      "created_at": { "type": "date" },
      "updated_at": { "type": "date" }
    }
  }
}'

echo "âœ… B2C stores index created"

# ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ°
curl -s "$OPENSEARCH_URL/_cat/indices?v" | grep -E "c2c|b2c"
```

#### 5.2 ÐŸÐµÑ€ÐµÐ¸Ð½Ð´ÐµÐºÑÐ°Ñ†Ð¸Ñ Ð´Ð°Ð½Ð½Ñ‹Ñ…

```bash
#!/bin/bash
# Ð¤Ð°Ð¹Ð»: /data/hostel-booking-system/migration-tools/opensearch-reindex.sh

set -e

OPENSEARCH_URL="http://localhost:9200"

echo "ðŸ”„ Reindexing data..."

# ============================================================================
# REINDEX C2C LISTINGS
# ============================================================================

curl -X POST "$OPENSEARCH_URL/_reindex?wait_for_completion=true" \
  -H 'Content-Type: application/json' \
  -d '{
  "source": {
    "index": "marketplace_listings"
  },
  "dest": {
    "index": "c2c_listings"
  }
}'

echo "âœ… C2C listings reindexed"

# ============================================================================
# REINDEX B2C PRODUCTS
# ============================================================================

curl -X POST "$OPENSEARCH_URL/_reindex?wait_for_completion=true" \
  -H 'Content-Type: application/json' \
  -d '{
  "source": {
    "index": "storefront_products"
  },
  "dest": {
    "index": "b2c_products"
  }
}'

echo "âœ… B2C products reindexed"

# ============================================================================
# REINDEX B2C STORES
# ============================================================================

curl -X POST "$OPENSEARCH_URL/_reindex?wait_for_completion=true" \
  -H 'Content-Type: application/json' \
  -d '{
  "source": {
    "index": "storefronts"
  },
  "dest": {
    "index": "b2c_stores"
  }
}'

echo "âœ… B2C stores reindexed"

# ============================================================================
# VERIFICATION
# ============================================================================

echo "ðŸ“Š Document counts:"
curl -s "$OPENSEARCH_URL/c2c_listings/_count" | jq -r '"C2C listings: " + (.count | tostring)'
curl -s "$OPENSEARCH_URL/b2c_products/_count" | jq -r '"B2C products: " + (.count | tostring)'
curl -s "$OPENSEARCH_URL/b2c_stores/_count" | jq -r '"B2C stores: " + (.count | tostring)'

echo "âœ… Reindexing complete!"
```

#### 5.3 ÐžÐ±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ðµ ÐºÐ¾Ð´Ð° Ð¿Ð¾Ð¸ÑÐºÐ° (Backend)

**Ð¤Ð°Ð¹Ð»**: `backend/internal/proj/c2c/storage/opensearch/repository.go`

```go
package opensearch

import (
	"context"
	"encoding/json"

	"github.com/opensearch-project/opensearch-go/v2"
	"backend/internal/domain"
)

const (
	c2cListingsIndex = "c2c_listings"  // Ð±Ñ‹Ð»Ð¾ "marketplace_listings"
)

type Repository struct {
	client *opensearch.Client
}

func NewRepository(client *opensearch.Client) *Repository {
	return &Repository{client: client}
}

// SearchListings Ð²Ñ‹Ð¿Ð¾Ð»Ð½ÑÐµÑ‚ Ð¿Ð¾Ð¸ÑÐº Ð¿Ð¾ C2C Ð¾Ð±ÑŠÑÐ²Ð»ÐµÐ½Ð¸ÑÐ¼
func (r *Repository) SearchListings(ctx context.Context, query string, filters map[string]interface{}) ([]domain.C2CListing, error) {
	searchQuery := map[string]interface{}{
		"query": map[string]interface{}{
			"bool": map[string]interface{}{
				"must": []map[string]interface{}{
					{
						"multi_match": map[string]interface{}{
							"query":  query,
							"fields": []string{"title^2", "description", "tags"},
						},
					},
				},
				"filter": buildFilters(filters),
			},
		},
	}

	queryJSON, _ := json.Marshal(searchQuery)

	res, err := r.client.Search(
		r.client.Search.WithContext(ctx),
		r.client.Search.WithIndex(c2cListingsIndex),
		r.client.Search.WithBody(strings.NewReader(string(queryJSON))),
	)
	if err != nil {
		return nil, err
	}
	defer res.Body.Close()

	// Parse results...
	var results []domain.C2CListing
	// ... parsing logic

	return results, nil
}

func buildFilters(filters map[string]interface{}) []map[string]interface{} {
	// ... Ñ„Ð¸Ð»ÑŒÑ‚Ñ€Ñ‹
	return nil
}
```

ÐÐ½Ð°Ð»Ð¾Ð³Ð¸Ñ‡Ð½Ð¾ Ð´Ð»Ñ B2C (`backend/internal/proj/b2c/storage/opensearch/product_repository.go`).

### ÐšÑ€Ð¸Ñ‚ÐµÑ€Ð¸Ð¸ Ð¿Ñ€Ð¸Ñ‘Ð¼ÐºÐ¸
- [ ] âœ… ÐÐ¾Ð²Ñ‹Ðµ Ð¸Ð½Ð´ÐµÐºÑÑ‹ ÑÐ¾Ð·Ð´Ð°Ð½Ñ‹ (3 ÑˆÑ‚)
- [ ] âœ… Ð”Ð°Ð½Ð½Ñ‹Ðµ Ð¿Ð¾Ð»Ð½Ð¾ÑÑ‚ÑŒÑŽ Ð¿ÐµÑ€ÐµÐ¸Ð½Ð´ÐµÐºÑÐ¸Ñ€Ð¾Ð²Ð°Ð½Ñ‹
- [ ] âœ… COUNT ÑÐ¾Ð²Ð¿Ð°Ð´Ð°ÐµÑ‚ (ÑÑ‚Ð°Ñ€Ñ‹Ð¹ Ð¸Ð½Ð´ÐµÐºÑ = Ð½Ð¾Ð²Ñ‹Ð¹ Ð¸Ð½Ð´ÐµÐºÑ)
- [ ] âœ… ÐšÐ¾Ð´ Ð¿Ð¾Ð¸ÑÐºÐ° Ð¾Ð±Ð½Ð¾Ð²Ð»Ñ‘Ð½ Ð¸ Ñ‚ÐµÑÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½
- [ ] âœ… Ð¢ÐµÑÑ‚Ð¾Ð²Ñ‹Ðµ Ð·Ð°Ð¿Ñ€Ð¾ÑÑ‹ Ð²Ð¾Ð·Ð²Ñ€Ð°Ñ‰Ð°ÑŽÑ‚ Ñ€ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚Ñ‹

### Ð¤Ð°ÐºÑ‚Ð¸Ñ‡ÐµÑÐºÐ¸Ðµ Ð´Ð°Ð½Ð½Ñ‹Ðµ
- **Ð’Ñ€ÐµÐ¼Ñ**: ___ Ð´Ð½ÐµÐ¹ (Ð¿Ð»Ð°Ð½: 2-3 Ð´Ð½Ñ)
- **Ð”Ð¾ÐºÑƒÐ¼ÐµÐ½Ñ‚Ð¾Ð² Ð¼Ð¸Ð³Ñ€Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¾**: ___
- **ÐŸÑ€Ð¾Ð±Ð»ÐµÐ¼Ñ‹**: ___

---

## ðŸ“¦ Ð¤ÐÐ—Ð 6: MINIO/S3 ÐœÐ˜Ð“Ð ÐÐ¦Ð˜Ð¯ (Ð”Ð½Ð¸ 23-24)

### Ð¦ÐµÐ»ÑŒ
ÐŸÐµÑ€ÐµÐ¸Ð¼ÐµÐ½Ð¾Ð²Ð°Ñ‚ÑŒ bucket'Ñ‹ Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ð¹, Ð¾Ð±Ð½Ð¾Ð²Ð¸Ñ‚ÑŒ ÐºÐ¾Ð´ Ð·Ð°Ð³Ñ€ÑƒÐ·ÐºÐ¸.

### Ð—Ð°Ð´Ð°Ñ‡Ð¸

#### 6.1 Ð¡Ð¾Ð·Ð´Ð°Ð½Ð¸Ðµ Ð½Ð¾Ð²Ñ‹Ñ… bucket'Ð¾Ð²

```bash
#!/bin/bash
# Ð¤Ð°Ð¹Ð»: /data/hostel-booking-system/migration-tools/minio-migrate-buckets.sh

set -e

echo "ðŸ“¦ Migrating MinIO buckets..."

# ÐŸÑ€Ð¾Ð²ÐµÑ€Ð¸Ñ‚ÑŒ Ð´Ð¾ÑÑ‚ÑƒÐ¿Ð½Ð¾ÑÑ‚ÑŒ mc (MinIO Client)
if ! command -v mc &> /dev/null; then
    echo "âŒ MinIO Client (mc) not found. Install: https://min.io/docs/minio/linux/reference/minio-mc.html"
    exit 1
fi

# ÐÐ°ÑÑ‚Ñ€Ð¾Ð¸Ñ‚ÑŒ alias (ÐµÑÐ»Ð¸ ÐµÑ‰Ñ‘ Ð½Ðµ Ð½Ð°ÑÑ‚Ñ€Ð¾ÐµÐ½Ð¾)
mc alias set local http://localhost:9000 minioadmin minioadmin || true

# ============================================================================
# CREATE NEW BUCKETS
# ============================================================================

echo "ðŸª£ Creating new buckets..."
mc mb local/c2c-images --ignore-existing
mc mb local/b2c-images --ignore-existing

# Set public read policy (ÐµÑÐ»Ð¸ Ð½ÑƒÐ¶Ð½Ð¾)
mc anonymous set download local/c2c-images
mc anonymous set download local/b2c-images

# ============================================================================
# COPY DATA FROM OLD BUCKETS
# ============================================================================

echo "ðŸ“‹ Copying data from old buckets..."

# C2C images (marketplace â†’ c2c)
mc mirror local/marketplace-images local/c2c-images --preserve

# B2C images (storefront â†’ b2c)
mc mirror local/storefront-images local/b2c-images --preserve

# ============================================================================
# VERIFICATION
# ============================================================================

echo "ðŸ” Verifying migration..."

OLD_C2C_COUNT=$(mc ls local/marketplace-images --recursive | wc -l)
NEW_C2C_COUNT=$(mc ls local/c2c-images --recursive | wc -l)

OLD_B2C_COUNT=$(mc ls local/storefront-images --recursive | wc -l)
NEW_B2C_COUNT=$(mc ls local/b2c-images --recursive | wc -l)

echo "C2C images: $OLD_C2C_COUNT â†’ $NEW_C2C_COUNT"
echo "B2C images: $OLD_B2C_COUNT â†’ $NEW_B2C_COUNT"

if [ "$OLD_C2C_COUNT" -ne "$NEW_C2C_COUNT" ]; then
    echo "âš ï¸  C2C image count mismatch!"
    exit 1
fi

if [ "$OLD_B2C_COUNT" -ne "$NEW_B2C_COUNT" ]; then
    echo "âš ï¸  B2C image count mismatch!"
    exit 1
fi

echo "âœ… MinIO migration complete!"
```

#### 6.2 ÐžÐ±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ðµ ÐºÐ¾Ð´Ð° (Backend)

**Ð¤Ð°Ð¹Ð»**: `backend/internal/storage/minio/client.go`

```go
package minio

import (
	"context"
	"github.com/minio/minio-go/v7"
)

const (
	C2CImagesBucket = "c2c-images"  // Ð±Ñ‹Ð»Ð¾ "marketplace-images"
	B2CImagesBucket = "b2c-images"  // Ð±Ñ‹Ð»Ð¾ "storefront-images"
)

type Client struct {
	client *minio.Client
}

func NewClient(endpoint, accessKey, secretKey string, useSSL bool) (*Client, error) {
	minioClient, err := minio.New(endpoint, &minio.Options{
		Creds:  credentials.NewStaticV4(accessKey, secretKey, ""),
		Secure: useSSL,
	})
	if err != nil {
		return nil, err
	}

	return &Client{client: minioClient}, nil
}

// UploadC2CImage Ð·Ð°Ð³Ñ€ÑƒÐ¶Ð°ÐµÑ‚ Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ðµ C2C Ð¾Ð±ÑŠÑÐ²Ð»ÐµÐ½Ð¸Ñ
func (c *Client) UploadC2CImage(ctx context.Context, objectName string, file io.Reader, size int64, contentType string) error {
	_, err := c.client.PutObject(ctx, C2CImagesBucket, objectName, file, size, minio.PutObjectOptions{
		ContentType: contentType,
	})
	return err
}

// UploadB2CImage Ð·Ð°Ð³Ñ€ÑƒÐ¶Ð°ÐµÑ‚ Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ðµ B2C Ð¿Ñ€Ð¾Ð´ÑƒÐºÑ‚Ð°
func (c *Client) UploadB2CImage(ctx context.Context, objectName string, file io.Reader, size int64, contentType string) error {
	_, err := c.client.PutObject(ctx, B2CImagesBucket, objectName, file, size, minio.PutObjectOptions{
		ContentType: contentType,
	})
	return err
}

// DeleteC2CImage ÑƒÐ´Ð°Ð»ÑÐµÑ‚ Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ðµ C2C Ð¾Ð±ÑŠÑÐ²Ð»ÐµÐ½Ð¸Ñ
func (c *Client) DeleteC2CImage(ctx context.Context, objectName string) error {
	return c.client.RemoveObject(ctx, C2CImagesBucket, objectName, minio.RemoveObjectOptions{})
}

// DeleteB2CImage ÑƒÐ´Ð°Ð»ÑÐµÑ‚ Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ðµ B2C Ð¿Ñ€Ð¾Ð´ÑƒÐºÑ‚Ð°
func (c *Client) DeleteB2CImage(ctx context.Context, objectName string) error {
	return c.client.RemoveObject(ctx, B2CImagesBucket, objectName, minio.RemoveObjectOptions{})
}
```

### ÐšÑ€Ð¸Ñ‚ÐµÑ€Ð¸Ð¸ Ð¿Ñ€Ð¸Ñ‘Ð¼ÐºÐ¸
- [ ] âœ… ÐÐ¾Ð²Ñ‹Ðµ bucket'Ñ‹ ÑÐ¾Ð·Ð´Ð°Ð½Ñ‹
- [ ] âœ… Ð’ÑÐµ Ñ„Ð°Ð¹Ð»Ñ‹ ÑÐºÐ¾Ð¿Ð¸Ñ€Ð¾Ð²Ð°Ð½Ñ‹ (COUNT ÑÐ¾Ð²Ð¿Ð°Ð´Ð°ÐµÑ‚)
- [ ] âœ… ÐšÐ¾Ð´ Ð¾Ð±Ð½Ð¾Ð²Ð»Ñ‘Ð½ Ð¸ Ñ‚ÐµÑÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½
- [ ] âœ… Ð—Ð°Ð³Ñ€ÑƒÐ·ÐºÐ° Ð½Ð¾Ð²Ñ‹Ñ… Ñ„Ð°Ð¹Ð»Ð¾Ð² Ñ€Ð°Ð±Ð¾Ñ‚Ð°ÐµÑ‚

### Ð¤Ð°ÐºÑ‚Ð¸Ñ‡ÐµÑÐºÐ¸Ðµ Ð´Ð°Ð½Ð½Ñ‹Ðµ
- **Ð’Ñ€ÐµÐ¼Ñ**: ___ Ð´Ð½ÐµÐ¹ (Ð¿Ð»Ð°Ð½: 1-2 Ð´Ð½Ñ)
- **Ð¤Ð°Ð¹Ð»Ð¾Ð² Ð¼Ð¸Ð³Ñ€Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¾**: ___

---

## âœ… Ð¤ÐÐ—Ð 7: Ð¢Ð•Ð¡Ð¢Ð˜Ð ÐžÐ’ÐÐÐ˜Ð• (Ð”Ð½Ð¸ 25-29)

### Ð¦ÐµÐ»ÑŒ
100% Ð¿Ð¾ÐºÑ€Ñ‹Ñ‚Ð¸Ðµ ÐºÑ€Ð¸Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¸Ñ… Ð¿ÑƒÑ‚ÐµÐ¹, Ð¸Ð½Ñ‚ÐµÐ³Ñ€Ð°Ñ†Ð¸Ð¾Ð½Ð½Ñ‹Ðµ Ñ‚ÐµÑÑ‚Ñ‹, E2E Ð¿Ñ€Ð¾Ð²ÐµÑ€ÐºÐ°.

### Ð—Ð°Ð´Ð°Ñ‡Ð¸

#### 7.1 Unit Ñ‚ÐµÑÑ‚Ñ‹ (Backend)

```bash
cd /data/hostel-booking-system/backend

# Ð—Ð°Ð¿ÑƒÑÑ‚Ð¸Ñ‚ÑŒ Ð²ÑÐµ Ñ‚ÐµÑÑ‚Ñ‹
go test ./... -v -race -coverprofile=coverage.out

# ÐŸÐ¾ÑÐ¼Ð¾Ñ‚Ñ€ÐµÑ‚ÑŒ Ð¿Ð¾ÐºÑ€Ñ‹Ñ‚Ð¸Ðµ
go tool cover -html=coverage.out -o coverage.html

# Ð¢Ð Ð•Ð‘ÐžÐ’ÐÐÐ˜Ð•: Ð¼Ð¸Ð½Ð¸Ð¼ÑƒÐ¼ 80% Ð¿Ð¾ÐºÑ€Ñ‹Ñ‚Ð¸Ñ Ð´Ð»Ñ critical paths
```

ÐŸÑ€Ð¸Ð¼ÐµÑ€ Ñ‚ÐµÑÑ‚Ð° Ð´Ð»Ñ C2C repository:

```go
// backend/internal/proj/c2c/storage/postgres/repository_test.go
package postgres_test

import (
	"context"
	"testing"

	"github.com/stretchr/testify/assert"
	"github.com/stretchr/testify/require"

	"backend/internal/domain"
	"backend/internal/proj/c2c/storage/postgres"
)

func TestRepository_CreateListing(t *testing.T) {
	// Setup test DB
	db := setupTestDB(t)
	defer db.Close()

	repo := postgres.NewRepository(db)

	listing := &domain.C2CListing{
		Title:       "Test Listing",
		Description: "Test description",
		Price:       100.0,
		Currency:    "USD",
		CategoryID:  "category-123",
		UserID:      "user-456",
		Status:      "active",
	}

	// Test
	created, err := repo.CreateListing(context.Background(), listing)

	// Assertions
	require.NoError(t, err)
	assert.NotEmpty(t, created.ID)
	assert.Equal(t, listing.Title, created.Title)
	assert.NotZero(t, created.CreatedAt)
}

func TestRepository_GetListingByID(t *testing.T) {
	// ... Ð°Ð½Ð°Ð»Ð¾Ð³Ð¸Ñ‡Ð½Ð¾
}

// ... Ð¾ÑÑ‚Ð°Ð»ÑŒÐ½Ñ‹Ðµ Ñ‚ÐµÑÑ‚Ñ‹ CRUD Ð¾Ð¿ÐµÑ€Ð°Ñ†Ð¸Ð¹
```

#### 7.2 Integration Ñ‚ÐµÑÑ‚Ñ‹ (API)

```bash
#!/bin/bash
# Ð¤Ð°Ð¹Ð»: /data/hostel-booking-system/migration-tools/test-api-endpoints.sh

set -e

API_URL="http://localhost:3000"
TOKEN=$(cat /tmp/token)  # JWT Ð´Ð»Ñ Ð°Ð²Ñ‚Ð¾Ñ€Ð¸Ð·Ð°Ñ†Ð¸Ð¸

echo "ðŸ§ª Testing API endpoints..."

# ============================================================================
# C2C ENDPOINTS
# ============================================================================

echo "Testing C2C endpoints..."

# GET /api/v1/c2c/listings
curl -s -X GET "$API_URL/api/v1/c2c/listings" | jq '.data | length'

# GET /api/v1/c2c/categories
curl -s -X GET "$API_URL/api/v1/c2c/categories" | jq '.data | length'

# POST /api/v1/c2c/listings (authenticated)
LISTING_ID=$(curl -s -X POST "$API_URL/api/v1/c2c/listings" \
  -H "Authorization: Bearer $TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "title": "Test Listing",
    "description": "Test",
    "price": 100,
    "currency": "USD",
    "category_id": "category-123"
  }' | jq -r '.data.id')

echo "Created listing: $LISTING_ID"

# GET /api/v1/c2c/listings/:id
curl -s -X GET "$API_URL/api/v1/c2c/listings/$LISTING_ID" | jq '.data.title'

# DELETE /api/v1/c2c/listings/:id
curl -s -X DELETE "$API_URL/api/v1/c2c/listings/$LISTING_ID" \
  -H "Authorization: Bearer $TOKEN"

echo "âœ… C2C endpoints OK"

# ============================================================================
# B2C ENDPOINTS
# ============================================================================

echo "Testing B2C endpoints..."

# GET /api/v1/b2c/stores
curl -s -X GET "$API_URL/api/v1/b2c/stores" | jq '.data | length'

# GET /api/v1/b2c/products
curl -s -X GET "$API_URL/api/v1/b2c/products" | jq '.data | length'

echo "âœ… B2C endpoints OK"

echo "âœ… All API tests passed!"
```

#### 7.3 E2E Ñ‚ÐµÑÑ‚Ñ‹ (Playwright/Cypress)

ÐŸÑ€Ð¸Ð¼ÐµÑ€ Ñ‚ÐµÑÑ‚Ð° `frontend/svetu/e2e/c2c.spec.ts`:

```typescript
import { test, expect } from '@playwright/test';

test.describe('C2C Marketplace', () => {
  test('should display listings page', async ({ page }) => {
    await page.goto('/c2c');

    // ÐŸÑ€Ð¾Ð²ÐµÑ€Ð¸Ñ‚ÑŒ Ð·Ð°Ð³Ð¾Ð»Ð¾Ð²Ð¾Ðº
    await expect(page.locator('h1')).toContainText('C2C Marketplace');

    // ÐŸÑ€Ð¾Ð²ÐµÑ€Ð¸Ñ‚ÑŒ Ð½Ð°Ð»Ð¸Ñ‡Ð¸Ðµ ÑÐ¿Ð¸ÑÐºÐ° Ð¾Ð±ÑŠÑÐ²Ð»ÐµÐ½Ð¸Ð¹
    const listings = page.locator('[data-testid="c2c-listing"]');
    await expect(listings).toHaveCount({ min: 1 });
  });

  test('should create new listing', async ({ page }) => {
    // Login
    await page.goto('/auth/login');
    await page.fill('[name="email"]', 'test@example.com');
    await page.fill('[name="password"]', 'password123');
    await page.click('button[type="submit"]');

    // Navigate to create page
    await page.goto('/c2c/create');

    // Fill form
    await page.fill('[name="title"]', 'Test Listing');
    await page.fill('[name="description"]', 'Test description');
    await page.fill('[name="price"]', '100');
    await page.selectOption('[name="category"]', 'electronics');

    // Submit
    await page.click('button[type="submit"]');

    // Verify redirect
    await expect(page).toHaveURL(/\/c2c\/\d+/);
    await expect(page.locator('h1')).toContainText('Test Listing');
  });

  test('should search listings', async ({ page }) => {
    await page.goto('/c2c');

    // Search
    await page.fill('[data-testid="search-input"]', 'laptop');
    await page.click('[data-testid="search-button"]');

    // Verify results
    await expect(page.locator('[data-testid="search-results"]')).toBeVisible();
  });
});
```

### ÐšÑ€Ð¸Ñ‚ÐµÑ€Ð¸Ð¸ Ð¿Ñ€Ð¸Ñ‘Ð¼ÐºÐ¸
- [ ] âœ… Backend: `go test ./...` Ð¿Ñ€Ð¾Ñ…Ð¾Ð´Ð¸Ñ‚ (100% Ñ‚ÐµÑÑ‚Ð¾Ð²)
- [ ] âœ… Backend: Ð¼Ð¸Ð½Ð¸Ð¼ÑƒÐ¼ 80% Ð¿Ð¾ÐºÑ€Ñ‹Ñ‚Ð¸Ðµ critical paths
- [ ] âœ… API Ñ‚ÐµÑÑ‚Ñ‹: Ð²ÑÐµ endpoints Ñ€Ð°Ð±Ð¾Ñ‚Ð°ÑŽÑ‚ (C2C + B2C)
- [ ] âœ… Frontend: `yarn test` Ð¿Ñ€Ð¾Ñ…Ð¾Ð´Ð¸Ñ‚ (100% Ñ‚ÐµÑÑ‚Ð¾Ð²)
- [ ] âœ… E2E Ñ‚ÐµÑÑ‚Ñ‹: Ð¾ÑÐ½Ð¾Ð²Ð½Ñ‹Ðµ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŒÑÐºÐ¸Ðµ ÑÑ†ÐµÐ½Ð°Ñ€Ð¸Ð¸ Ñ€Ð°Ð±Ð¾Ñ‚Ð°ÑŽÑ‚
- [ ] âœ… ÐÐµÑ‚ Ñ€ÐµÐ³Ñ€ÐµÑÑÐ¸Ð¹ (ÑÑ‚Ð°Ñ€Ð°Ñ Ñ„ÑƒÐ½ÐºÑ†Ð¸Ð¾Ð½Ð°Ð»ÑŒÐ½Ð¾ÑÑ‚ÑŒ ÑÐ¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð°)

### Ð¤Ð°ÐºÑ‚Ð¸Ñ‡ÐµÑÐºÐ¸Ðµ Ð´Ð°Ð½Ð½Ñ‹Ðµ
- **Ð’Ñ€ÐµÐ¼Ñ**: ___ Ð´Ð½ÐµÐ¹ (Ð¿Ð»Ð°Ð½: 3-5 Ð´Ð½ÐµÐ¹)
- **Ð¢ÐµÑÑ‚Ð¾Ð² Ð½Ð°Ð¿Ð¸ÑÐ°Ð½Ð¾**: ___
- **ÐÐ°Ð¹Ð´ÐµÐ½Ð¾ Ð±Ð°Ð³Ð¾Ð²**: ___
- **ÐŸÐ¾ÐºÑ€Ñ‹Ñ‚Ð¸Ðµ ÐºÐ¾Ð´Ð°**: ___%

---

## ðŸš€ Ð¤ÐÐ—Ð 8: PRODUCTION Ð”Ð•ÐŸÐ›ÐžÐ™ (Ð”Ð½Ð¸ 30-32)

### Ð¦ÐµÐ»ÑŒ
Ð Ð°Ð·Ð²ÐµÑ€Ð½ÑƒÑ‚ÑŒ Ð½Ð° dev.svetu.rs, Ð¿Ñ€Ð¾Ð²ÐµÑÑ‚Ð¸ smoke testing, Ð¿Ð¾Ð´Ð³Ð¾Ñ‚Ð¾Ð²Ð¸Ñ‚ÑŒ Ðº production.

### Ð—Ð°Ð´Ð°Ñ‡Ð¸

#### 8.1 Pre-deployment checklist

```markdown
# PRE-DEPLOYMENT CHECKLIST

## Code Quality
- [ ] âœ… `make format` (backend) - passed
- [ ] âœ… `make lint` (backend) - 0 warnings
- [ ] âœ… `yarn format` (frontend) - passed
- [ ] âœ… `yarn lint` (frontend) - 0 warnings
- [ ] âœ… `go test ./...` - 100% passed
- [ ] âœ… `yarn test` - 100% passed
- [ ] âœ… E2E tests - passed

## Database
- [ ] âœ… Migrations tested (up + down)
- [ ] âœ… Production backup created
- [ ] âœ… Data integrity verified

## Documentation
- [ ] âœ… CLAUDE.md updated (Ð½Ð¾Ð²Ñ‹Ðµ endpoint'Ñ‹)
- [ ] âœ… Swagger regenerated
- [ ] âœ… README updated (ÐµÑÐ»Ð¸ Ð½ÑƒÐ¶Ð½Ð¾)
- [ ] âœ… Migration plan updated (ÑÑ‚Ð¾Ñ‚ Ð´Ð¾ÐºÑƒÐ¼ÐµÐ½Ñ‚)

## Deployment
- [ ] âœ… .env Ð¿ÐµÑ€ÐµÐ¼ÐµÐ½Ð½Ñ‹Ðµ Ð¿Ñ€Ð¾Ð²ÐµÑ€ÐµÐ½Ñ‹
- [ ] âœ… OpenSearch Ð¸Ð½Ð´ÐµÐºÑÑ‹ ÑÐ¾Ð·Ð´Ð°Ð½Ñ‹
- [ ] âœ… MinIO bucket'Ñ‹ Ð³Ð¾Ñ‚Ð¾Ð²Ñ‹
```

#### 8.2 Staging deployment

```bash
#!/bin/bash
# Ð¤Ð°Ð¹Ð»: /data/hostel-booking-system/migration-tools/deploy-staging.sh

set -e

echo "ðŸš€ Deploying to dev.svetu.rs..."

# 1. Commit Ð¸ push
git add -A
git commit -m "feat: C2C/B2C migration complete - ready for staging"
git push origin feature/c2c-b2c-migration

# 2. Ð”Ð°Ð¼Ð¿ Ð»Ð¾ÐºÐ°Ð»ÑŒÐ½Ð¾Ð¹ Ð‘Ð”
echo "ðŸ“¦ Creating database dump..."
PGPASSWORD=mX3g1XGhMRUZEX3l pg_dump \
  -h localhost \
  -U postgres \
  -d svetubd \
  --no-owner \
  --no-acl \
  --column-inserts \
  --inserts \
  -f svetubd_full_dump_$(date +%Y%m%d_%H%M%S).sql

# Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÑŒ Ð¿Ð¾ÑÐ»ÐµÐ´Ð½Ð¸Ð¹ ÑÐ¾Ð·Ð´Ð°Ð½Ð½Ñ‹Ð¹ Ð´Ð°Ð¼Ð¿ Ð´Ð»Ñ Ð·Ð°Ð³Ñ€ÑƒÐ·ÐºÐ¸
DUMP_FILE=$(ls -t svetubd_full_dump_*.sql | head -1)
echo "Using dump file: $DUMP_FILE"

# 3. Ð—Ð°Ð³Ñ€ÑƒÐ·ÐºÐ° Ð½Ð° ÑÐµÑ€Ð²ÐµÑ€
echo "ðŸ“¤ Uploading to server..."
scp $DUMP_FILE svetu@svetu.rs:/tmp/dump_migration.sql

# 4. Ð”ÐµÐ¿Ð»Ð¾Ð¹ Ð½Ð° ÑÐµÑ€Ð²ÐµÑ€Ðµ
ssh svetu@svetu.rs << 'ENDSSH'
set -e

echo "ðŸ”§ Deploying on dev server..."

cd /opt/svetu-dev

# Pull changes
git fetch origin
git checkout feature/c2c-b2c-migration
git pull

# Ð’Ð¾ÑÑÑ‚Ð°Ð½Ð¾Ð²Ð¸Ñ‚ÑŒ Ð‘Ð”
echo "ðŸ—„ï¸  Restoring database..."
docker exec -i svetu-dev_db_1 psql -U svetu_dev_user -d svetu_dev_db << EOF
DROP SCHEMA public CASCADE;
CREATE SCHEMA public;
EOF

docker exec -i svetu-dev_db_1 psql -U svetu_dev_user -d svetu_dev_db < /tmp/dump_migration.sql

# Backend restart
echo "ðŸ”„ Restarting backend..."
cd backend && make dev-restart

# Frontend restart
echo "ðŸŽ¨ Restarting frontend..."
cd ../frontend/svetu && make dev-restart

echo "âœ… Deployment complete!"
ENDSSH

echo "ðŸŽ‰ Staging deployment finished!"
echo "ðŸ”— https://dev.svetu.rs"
```

#### 8.3 Smoke testing

```bash
#!/bin/bash
# Ð¤Ð°Ð¹Ð»: /data/hostel-booking-system/migration-tools/smoke-test.sh

set -e

DEV_API="https://devapi.svetu.rs"
DEV_WEB="https://dev.svetu.rs"

echo "ðŸ”¬ Running smoke tests on dev server..."

# ============================================================================
# API HEALTH CHECK
# ============================================================================

echo "Checking API health..."
HEALTH=$(curl -s "$DEV_API/" | grep -o "Svetu API")
if [ "$HEALTH" != "Svetu API" ]; then
    echo "âŒ API health check failed!"
    exit 1
fi
echo "âœ… API is healthy"

# ============================================================================
# C2C ENDPOINTS
# ============================================================================

echo "Testing C2C endpoints..."

# GET /api/v1/c2c/listings
C2C_LISTINGS=$(curl -s "$DEV_API/api/v1/c2c/listings" | jq -r '.data | length')
echo "C2C listings found: $C2C_LISTINGS"

# GET /api/v1/c2c/categories
C2C_CATEGORIES=$(curl -s "$DEV_API/api/v1/c2c/categories" | jq -r '.data | length')
echo "C2C categories found: $C2C_CATEGORIES"

if [ "$C2C_LISTINGS" -eq 0 ] || [ "$C2C_CATEGORIES" -eq 0 ]; then
    echo "âš ï¸  Warning: C2C data might be missing"
fi

# ============================================================================
# B2C ENDPOINTS
# ============================================================================

echo "Testing B2C endpoints..."

# GET /api/v1/b2c/stores
B2C_STORES=$(curl -s "$DEV_API/api/v1/b2c/stores" | jq -r '.data | length')
echo "B2C stores found: $B2C_STORES"

# GET /api/v1/b2c/products
B2C_PRODUCTS=$(curl -s "$DEV_API/api/v1/b2c/products" | jq -r '.data | length')
echo "B2C products found: $B2C_PRODUCTS"

# ============================================================================
# FRONTEND CHECK
# ============================================================================

echo "Checking frontend pages..."

# C2C page
C2C_STATUS=$(curl -s -o /dev/null -w "%{http_code}" "$DEV_WEB/c2c")
if [ "$C2C_STATUS" -ne 200 ]; then
    echo "âŒ C2C page returned $C2C_STATUS"
    exit 1
fi
echo "âœ… C2C page OK ($C2C_STATUS)"

# B2C page
B2C_STATUS=$(curl -s -o /dev/null -w "%{http_code}" "$DEV_WEB/b2c")
if [ "$B2C_STATUS" -ne 200 ]; then
    echo "âŒ B2C page returned $B2C_STATUS"
    exit 1
fi
echo "âœ… B2C page OK ($B2C_STATUS)"

echo "âœ… All smoke tests passed!"
```

#### 8.4 Ð£Ð´Ð°Ð»ÐµÐ½Ð¸Ðµ ÑÑ‚Ð°Ñ€Ñ‹Ñ… ÑÑƒÑ‰Ð½Ð¾ÑÑ‚ÐµÐ¹

**Ð¢ÐžÐ›Ð¬ÐšÐž ÐŸÐžÐ¡Ð›Ð•** 2-3 Ð´Ð½ÐµÐ¹ ÑƒÑÐ¿ÐµÑˆÐ½Ð¾Ð¹ Ñ€Ð°Ð±Ð¾Ñ‚Ñ‹ Ð½Ð° staging!

**Ð¤Ð°Ð¹Ð»**: `backend/migrations/000175_drop_old_tables.up.sql`

```sql
-- ============================================================================
-- Ð£Ð”ÐÐ›Ð•ÐÐ˜Ð• Ð¡Ð¢ÐÐ Ð«Ð¥ Ð¢ÐÐ‘Ð›Ð˜Ð¦
-- Ð’ÐÐ˜ÐœÐÐÐ˜Ð•: Ð’Ñ‹Ð¿Ð¾Ð»Ð½ÑÑ‚ÑŒ Ð¢ÐžÐ›Ð¬ÐšÐž Ð¿Ð¾ÑÐ»Ðµ ÑƒÑÐ¿ÐµÑˆÐ½Ð¾Ð¹ Ð¿Ñ€Ð¾Ð²ÐµÑ€ÐºÐ¸ Ð¼Ð¸Ð³Ñ€Ð°Ñ†Ð¸Ð¸!
-- ============================================================================

BEGIN;

-- Ð”Ñ€Ð¾Ð¿ ÑÑ‚Ð°Ñ€Ñ‹Ñ… C2C Ñ‚Ð°Ð±Ð»Ð¸Ñ† (Ð±Ñ‹Ð²ÑˆÐ¸Ðµ marketplace_*)
DROP TABLE IF EXISTS marketplace_listing_variants CASCADE;
DROP TABLE IF EXISTS marketplace_orders CASCADE;
DROP TABLE IF EXISTS marketplace_favorites CASCADE;
DROP TABLE IF EXISTS marketplace_messages CASCADE;
DROP TABLE IF EXISTS marketplace_chats CASCADE;
DROP TABLE IF EXISTS marketplace_images CASCADE;
DROP TABLE IF EXISTS marketplace_listings CASCADE;
DROP TABLE IF EXISTS marketplace_categories CASCADE;

-- Ð”Ñ€Ð¾Ð¿ ÑÑ‚Ð°Ñ€Ñ‹Ñ… B2C Ñ‚Ð°Ð±Ð»Ð¸Ñ† (Ð±Ñ‹Ð²ÑˆÐ¸Ðµ storefront_*)
DROP TABLE IF EXISTS storefront_product_variant_images CASCADE;
DROP TABLE IF EXISTS user_storefronts CASCADE;
DROP TABLE IF EXISTS storefront_inventory_movements CASCADE;
DROP TABLE IF EXISTS storefront_delivery_options CASCADE;
DROP TABLE IF EXISTS storefront_payment_methods CASCADE;
DROP TABLE IF EXISTS storefront_staff CASCADE;
DROP TABLE IF EXISTS storefront_hours CASCADE;
DROP TABLE IF EXISTS storefront_favorites CASCADE;
DROP TABLE IF EXISTS storefront_order_items CASCADE;
DROP TABLE IF EXISTS storefront_orders CASCADE;
DROP TABLE IF EXISTS storefront_product_attributes CASCADE;
DROP TABLE IF EXISTS storefront_product_variants CASCADE;
DROP TABLE IF EXISTS storefront_product_images CASCADE;
DROP TABLE IF EXISTS storefront_products CASCADE;
DROP TABLE IF EXISTS storefronts CASCADE;

COMMIT;

-- ============================================================================
-- Verification
-- ============================================================================

DO $$
BEGIN
    RAISE NOTICE 'âœ… Old tables dropped successfully';
END $$;
```

**Ð£Ð´Ð°Ð»ÐµÐ½Ð¸Ðµ ÑÑ‚Ð°Ñ€Ñ‹Ñ… OpenSearch Ð¸Ð½Ð´ÐµÐºÑÐ¾Ð²:**

```bash
# Ð¢ÐžÐ›Ð¬ÐšÐž ÐŸÐžÐ¡Ð›Ð• Ð¿Ñ€Ð¾Ð²ÐµÑ€ÐºÐ¸ Ñ€Ð°Ð±Ð¾Ñ‚Ñ‹ Ð½Ð¾Ð²Ñ‹Ñ… Ð¸Ð½Ð´ÐµÐºÑÐ¾Ð²!
curl -X DELETE "http://localhost:9200/marketplace_listings"
curl -X DELETE "http://localhost:9200/storefront_products"
curl -X DELETE "http://localhost:9200/storefronts"
```

**Ð£Ð´Ð°Ð»ÐµÐ½Ð¸Ðµ ÑÑ‚Ð°Ñ€Ñ‹Ñ… MinIO bucket'Ð¾Ð²:**

```bash
# Ð¢ÐžÐ›Ð¬ÐšÐž ÐŸÐžÐ¡Ð›Ð• Ð¿Ñ€Ð¾Ð²ÐµÑ€ÐºÐ¸ Ð½Ð¾Ð²Ñ‹Ñ… bucket'Ð¾Ð²!
mc rm local/marketplace-images --recursive --force
mc rb local/marketplace-images

mc rm local/storefront-images --recursive --force
mc rb local/storefront-images
```

### ÐšÑ€Ð¸Ñ‚ÐµÑ€Ð¸Ð¸ Ð¿Ñ€Ð¸Ñ‘Ð¼ÐºÐ¸
- [ ] âœ… Pre-deployment checklist: Ð²ÑÐµ Ð¿ÑƒÐ½ÐºÑ‚Ñ‹ âœ…
- [ ] âœ… Staging deployment Ð¿Ñ€Ð¾ÑˆÑ‘Ð» ÑƒÑÐ¿ÐµÑˆÐ½Ð¾
- [ ] âœ… Smoke tests Ð¿Ñ€Ð¾Ñ…Ð¾Ð´ÑÑ‚ (100%)
- [ ] âœ… ÐœÐ¾Ð½Ð¸Ñ‚Ð¾Ñ€Ð¸Ð½Ð³ Ð¿Ð¾ÐºÐ°Ð·Ñ‹Ð²Ð°ÐµÑ‚ Ð½Ð¾Ñ€Ð¼Ð°Ð»ÑŒÐ½ÑƒÑŽ Ñ€Ð°Ð±Ð¾Ñ‚Ñƒ
- [ ] âœ… ÐÐµÑ‚ Ð¾ÑˆÐ¸Ð±Ð¾Ðº Ð² Ð»Ð¾Ð³Ð°Ñ… (backend + frontend)
- [ ] âœ… Ð¡Ñ‚Ð°Ñ€Ñ‹Ðµ ÑÑƒÑ‰Ð½Ð¾ÑÑ‚Ð¸ ÑƒÐ´Ð°Ð»ÐµÐ½Ñ‹ (Ñ‡ÐµÑ€ÐµÐ· 2-3 Ð´Ð½Ñ)

### Ð¤Ð°ÐºÑ‚Ð¸Ñ‡ÐµÑÐºÐ¸Ðµ Ð´Ð°Ð½Ð½Ñ‹Ðµ
- **Ð’Ñ€ÐµÐ¼Ñ**: ___ Ð´Ð½ÐµÐ¹ (Ð¿Ð»Ð°Ð½: 2-3 Ð´Ð½Ñ)
- **ÐŸÑ€Ð¾Ð±Ð»ÐµÐ¼Ñ‹ Ð¿Ñ€Ð¸ Ð´ÐµÐ¿Ð»Ð¾Ðµ**: ___
- **Downtime**: ___ Ð¼Ð¸Ð½ÑƒÑ‚

---

## ðŸŽ¯ Ð˜Ð¢ÐžÐ“ÐžÐ’ÐÐ¯ ÐŸÐ ÐžÐ’Ð•Ð ÐšÐ ÐšÐÐ§Ð•Ð¡Ð¢Ð’Ð

### Production-Ready Checklist

```markdown
# PRODUCTION READINESS ASSESSMENT

## Code Quality (100/100)
- [ ] Backend lint: 0 warnings
- [ ] Frontend lint: 0 warnings
- [ ] Backend tests: 100% pass, â‰¥80% coverage
- [ ] Frontend tests: 100% pass
- [ ] E2E tests: ÐºÑ€Ð¸Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¸Ðµ ÑÑ†ÐµÐ½Ð°Ñ€Ð¸Ð¸ Ð¿Ð¾ÐºÑ€Ñ‹Ñ‚Ñ‹
- [ ] ÐÐµÑ‚ TODO ÐºÐ¾Ð¼Ð¼ÐµÐ½Ñ‚Ð°Ñ€Ð¸ÐµÐ² Ð² ÐºÐ¾Ð´Ðµ
- [ ] ÐÐµÑ‚ console.log/fmt.Println Ð² production ÐºÐ¾Ð´Ðµ
- [ ] Ð’ÑÐµ Ð¾ÑˆÐ¸Ð±ÐºÐ¸ Ð»Ð¾Ð³Ð¸Ñ€ÑƒÑŽÑ‚ÑÑ Ð¿Ñ€Ð°Ð²Ð¸Ð»ÑŒÐ½Ð¾

## Architecture (100/100)
- [ ] ÐÐµÑ‚ Ð´ÑƒÐ±Ð»Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ñ ÐºÐ¾Ð´Ð° (DRY Ð¿Ñ€Ð¸Ð½Ñ†Ð¸Ð¿)
- [ ] Ð£Ð½Ð¸Ð²ÐµÑ€ÑÐ°Ð»ÑŒÐ½Ñ‹Ðµ Ñ„ÑƒÐ½ÐºÑ†Ð¸Ð¸ Ð¿ÐµÑ€ÐµÐ¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÑŽÑ‚ÑÑ
- [ ] Ð§Ñ‘Ñ‚ÐºÐ¾Ðµ Ñ€Ð°Ð·Ð´ÐµÐ»ÐµÐ½Ð¸Ðµ Ð¼Ð¾Ð´ÑƒÐ»ÐµÐ¹ (c2c vs b2c)
- [ ] ÐÐµÑ‚ Ñ†Ð¸ÐºÐ»Ð¸Ñ‡ÐµÑÐºÐ¸Ñ… Ð·Ð°Ð²Ð¸ÑÐ¸Ð¼Ð¾ÑÑ‚ÐµÐ¹
- [ ] Database Ð½Ð¾Ñ€Ð¼Ð°Ð»Ð¸Ð·Ð¾Ð²Ð°Ð½Ð°
- [ ] API endpoints ÑÐ»ÐµÐ´ÑƒÑŽÑ‚ RESTful

## Documentation (100/100)
- [ ] CLAUDE.md Ð¾Ð±Ð½Ð¾Ð²Ð»Ñ‘Ð½
- [ ] Swagger Ð°ÐºÑ‚ÑƒÐ°Ð»ÐµÐ½
- [ ] Ð­Ñ‚Ð¾Ñ‚ Ð¿Ð»Ð°Ð½ Ð°ÐºÑ‚ÑƒÐ°Ð»Ð¸Ð·Ð¸Ñ€Ð¾Ð²Ð°Ð½
- [ ] ÐšÐ¾Ð¼Ð¼ÐµÐ½Ñ‚Ð°Ñ€Ð¸Ð¸ Ð² ÐºÐ¾Ð´Ðµ Ð¿Ð¾Ð½ÑÑ‚Ð½Ñ‹
- [ ] Migration guide Ð½Ð°Ð¿Ð¸ÑÐ°Ð½

## Performance (100/100)
- [ ] Database Ð¸Ð½Ð´ÐµÐºÑÑ‹ Ð¾Ð¿Ñ‚Ð¸Ð¼Ð°Ð»ÑŒÐ½Ñ‹
- [ ] OpenSearch queries Ð±Ñ‹ÑÑ‚Ñ€Ñ‹Ðµ
- [ ] Frontend bundle Ð¾Ð¿Ñ‚Ð¸Ð¼Ð¸Ð·Ð¸Ñ€Ð¾Ð²Ð°Ð½
- [ ] Images compressed
- [ ] ÐÐµÑ‚ N+1 queries

## Security (100/100)
- [ ] JWT Ñ‚Ð¾ÐºÐµÐ½Ñ‹ Ð²Ð°Ð»Ð¸Ð´Ð¸Ñ€ÑƒÑŽÑ‚ÑÑ
- [ ] CORS Ð½Ð°ÑÑ‚Ñ€Ð¾ÐµÐ½ Ð¿Ñ€Ð°Ð²Ð¸Ð»ÑŒÐ½Ð¾
- [ ] SQL injection Ð·Ð°Ñ‰Ð¸Ñ‚Ð° (prepared statements)
- [ ] XSS Ð·Ð°Ñ‰Ð¸Ñ‚Ð°
- [ ] CSRF Ð·Ð°Ñ‰Ð¸Ñ‚Ð° (Ñ‡ÐµÑ€ÐµÐ· BFF proxy)
- [ ] Sensitive data Ð½Ðµ Ð»Ð¾Ð³Ð¸Ñ€ÑƒÐµÑ‚ÑÑ

## Monitoring (100/100)
- [ ] Ð›Ð¾Ð³Ð¸ ÑÑ‚Ñ€ÑƒÐºÑ‚ÑƒÑ€Ð¸Ñ€Ð¾Ð²Ð°Ð½Ñ‹ (JSON)
- [ ] ÐœÐµÑ‚Ñ€Ð¸ÐºÐ¸ ÑÐ¾Ð±Ð¸Ñ€Ð°ÑŽÑ‚ÑÑ
- [ ] Alerts Ð½Ð°ÑÑ‚Ñ€Ð¾ÐµÐ½Ñ‹
- [ ] Health checks Ñ€Ð°Ð±Ð¾Ñ‚Ð°ÑŽÑ‚

**Ð˜Ð¢ÐžÐ“Ðž**: ___/600 points

**Ð¢Ð Ð•Ð‘ÐžÐ’ÐÐÐ˜Ð• Ð”Ð›Ð¯ PRODUCTION**: â‰¥ 580/600 (97%)
```

---

## ðŸ“ˆ ÐœÐ•Ð¢Ð Ð˜ÐšÐ˜ Ð£Ð¡ÐŸÐ•Ð¥Ð

### ÐžÐ¶Ð¸Ð´Ð°ÐµÐ¼Ñ‹Ðµ Ñ€ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚Ñ‹ Ð¼Ð¸Ð³Ñ€Ð°Ñ†Ð¸Ð¸

| ÐœÐµÑ‚Ñ€Ð¸ÐºÐ° | Ð”Ð¾ Ð¼Ð¸Ð³Ñ€Ð°Ñ†Ð¸Ð¸ | ÐŸÐ¾ÑÐ»Ðµ Ð¼Ð¸Ð³Ñ€Ð°Ñ†Ð¸Ð¸ | Ð£Ð»ÑƒÑ‡ÑˆÐµÐ½Ð¸Ðµ |
|---------|-------------|----------------|-----------|
| **Ð¡ÐµÐ¼Ð°Ð½Ñ‚Ð¸Ñ‡ÐµÑÐºÐ°Ñ ÑÑÐ½Ð¾ÑÑ‚ÑŒ** | 3/10 | 10/10 | +233% |
| **Ð¡ÐºÐ¾Ñ€Ð¾ÑÑ‚ÑŒ Ñ€Ð°Ð·Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ¸** | Baseline | +30% | ÐœÐµÐ½ÑŒÑˆÐµ Ð¿ÑƒÑ‚Ð°Ð½Ð¸Ñ†Ñ‹ |
| **Code maintainability** | 6/10 | 9/10 | +50% |
| **Onboarding Ð½Ð¾Ð²Ñ‹Ñ… Ñ€Ð°Ð·Ñ€Ð°Ð±Ð¾Ñ‚Ñ‡Ð¸ÐºÐ¾Ð²** | ~5 Ð´Ð½ÐµÐ¹ | ~2 Ð´Ð½Ñ | -60% |
| **API Ð¿Ð¾Ð½ÑÑ‚Ð½Ð¾ÑÑ‚ÑŒ** | 5/10 | 10/10 | +100% |
| **Ð¢ÐµÑ…Ð½Ð¸Ñ‡ÐµÑÐºÐ¸Ð¹ Ð´Ð¾Ð»Ð³** | Ð’Ñ‹ÑÐ¾ÐºÐ¸Ð¹ | 0 | -100% |

### Ð¢Ñ€ÑƒÐ´Ð¾Ð·Ð°Ñ‚Ñ€Ð°Ñ‚Ñ‹ (Ñ„Ð°ÐºÑ‚Ð¸Ñ‡ÐµÑÐºÐ¸Ðµ vs Ð¿Ð»Ð°Ð½)

| Ð¤Ð°Ð·Ð° | ÐŸÐ»Ð°Ð½ (Ð´Ð½Ð¸) | Ð¤Ð°ÐºÑ‚ (Ð´Ð½Ð¸) | ÐžÑ‚ÐºÐ»Ð¾Ð½ÐµÐ½Ð¸Ðµ |
|------|-----------|-----------|-----------|
| 0. Ð˜Ð½Ð¸Ñ†Ð¸Ð°Ð»Ð¸Ð·Ð°Ñ†Ð¸Ñ | 0.5 | ___ | ___ |
| 1. ÐŸÐ¾Ð´Ð³Ð¾Ñ‚Ð¾Ð²ÐºÐ° | 1.5 | ___ | ___ |
| 2. Ð‘Ð” Ð¼Ð¸Ð³Ñ€Ð°Ñ†Ð¸Ñ | 4.5 | ___ | ___ |
| 3. Backend | 6.0 | ___ | ___ |
| 4. Frontend | 4.5 | ___ | ___ |
| 5. OpenSearch | 2.5 | ___ | ___ |
| 6. MinIO | 1.5 | ___ | ___ |
| 7. Ð¢ÐµÑÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ | 4.0 | ___ | ___ |
| 8. Ð”ÐµÐ¿Ð»Ð¾Ð¹ | 2.5 | ___ | ___ |
| **Ð˜Ð¢ÐžÐ“Ðž** | **27.5** | **___** | **___** |

---

## ðŸ”„ ÐŸÐ ÐžÐ¦Ð•Ð¡Ð¡ ÐÐšÐ¢Ð£ÐÐ›Ð˜Ð—ÐÐ¦Ð˜Ð˜ ÐŸÐ›ÐÐÐ

### âš ï¸ ÐžÐ‘Ð¯Ð—ÐÐ¢Ð•Ð›Ð¬ÐÐž ÐžÐ‘ÐÐžÐ’Ð›Ð¯Ð¢Ð¬ ÐŸÐžÐ¡Ð›Ð• ÐšÐÐ–Ð”ÐžÐ™ Ð¤ÐÐ—Ð«!

1. **Ð¡Ñ‚Ð°Ñ‚ÑƒÑ Ñ„Ð°Ð·Ñ‹**: â¸ï¸ Pending â†’ ðŸš§ In Progress â†’ âœ… Completed
2. **ÐŸÑ€Ð¾Ð³Ñ€ÐµÑÑ**: ÐžÐ±Ð½Ð¾Ð²Ð¸Ñ‚ÑŒ % Ð²Ñ‹Ð¿Ð¾Ð»Ð½ÐµÐ½Ð¸Ñ
3. **ÐšÐ°Ñ‡ÐµÑÑ‚Ð²Ð¾**: Ð”Ð¾Ð±Ð°Ð²Ð¸Ñ‚ÑŒ Ð¾Ñ†ÐµÐ½ÐºÑƒ (0-100)
4. **Ð”Ð°Ñ‚Ñ‹**: Ð—Ð°Ð¿Ð¾Ð»Ð½Ð¸Ñ‚ÑŒ Ñ„Ð°ÐºÑ‚Ð¸Ñ‡ÐµÑÐºÐ¸Ðµ Ð´Ð°Ñ‚Ñ‹ Ð½Ð°Ñ‡Ð°Ð»Ð°/Ð¾ÐºÐ¾Ð½Ñ‡Ð°Ð½Ð¸Ñ
5. **Ð¤Ð°ÐºÑ‚Ð¸Ñ‡ÐµÑÐºÐ¸Ðµ Ð´Ð°Ð½Ð½Ñ‹Ðµ**: Ð—Ð°Ð¿Ð¾Ð»Ð½Ð¸Ñ‚ÑŒ Ð²ÑÐµ Ð¿Ð¾Ð»Ñ "Ð¤Ð°ÐºÑ‚Ð¸Ñ‡ÐµÑÐºÐ¸Ðµ Ð´Ð°Ð½Ð½Ñ‹Ðµ"
6. **ÐŸÑ€Ð¾Ð±Ð»ÐµÐ¼Ñ‹**: Ð—Ð°Ð´Ð¾ÐºÑƒÐ¼ÐµÐ½Ñ‚Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ Ð²ÑÐµ Ð¿Ñ€Ð¾Ð±Ð»ÐµÐ¼Ñ‹ Ð¸ Ñ€ÐµÑˆÐµÐ½Ð¸Ñ
7. **Ð Ð¸ÑÐºÐ¸**: ÐžÐ±Ð½Ð¾Ð²Ð¸Ñ‚ÑŒ ÑÑ‚Ð°Ñ‚ÑƒÑÑ‹ Ñ€Ð¸ÑÐºÐ¾Ð² (Ð½Ð¾Ð²Ñ‹Ðµ/Ð·Ð°ÐºÑ€Ñ‹Ñ‚Ñ‹Ðµ)
8. **ÐœÐµÑ‚Ñ€Ð¸ÐºÐ¸**: ÐžÐ±Ð½Ð¾Ð²Ð¸Ñ‚ÑŒ Ñ‚Ð°Ð±Ð»Ð¸Ñ†Ñƒ Ñ‚Ñ€ÑƒÐ´Ð¾Ð·Ð°Ñ‚Ñ€Ð°Ñ‚

### ÐŸÑ€Ð¸Ð¼ÐµÑ€ Ð¾Ð±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ñ:

```markdown
## Ð¤ÐÐ—Ð 2: ÐœÐ˜Ð“Ð ÐÐ¦Ð˜Ð¯ Ð‘ÐÐ—Ð« Ð”ÐÐÐÐ«Ð¥

**Ð¡Ñ‚Ð°Ñ‚ÑƒÑ**: âœ… Completed
**ÐŸÑ€Ð¾Ð³Ñ€ÐµÑÑ**: 100%
**ÐšÐ°Ñ‡ÐµÑÑ‚Ð²Ð¾**: 95/100 (Ð¾Ñ‚Ð»Ð¸Ñ‡Ð½Ð¾)
**Ð”Ð°Ñ‚Ð° Ð½Ð°Ñ‡Ð°Ð»Ð°**: 2025-10-11
**Ð”Ð°Ñ‚Ð° Ð¾ÐºÐ¾Ð½Ñ‡Ð°Ð½Ð¸Ñ**: 2025-10-15

### Ð¤Ð°ÐºÑ‚Ð¸Ñ‡ÐµÑÐºÐ¸Ðµ Ð´Ð°Ð½Ð½Ñ‹Ðµ
- **Ð’Ñ€ÐµÐ¼Ñ**: 4.2 Ð´Ð½Ñ (Ð¿Ð»Ð°Ð½: 4.5 Ð´Ð½Ñ) âœ… -7% Ð»ÑƒÑ‡ÑˆÐµ Ð¿Ð»Ð°Ð½Ð°
- **ÐœÐ¸Ð³Ñ€Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¾ ÑÑ‚Ñ€Ð¾Ðº**: C2C=1,234, B2C=5,678
- **ÐŸÑ€Ð¾Ð±Ð»ÐµÐ¼Ñ‹**:
  1. Ð¢Ñ€Ð¸Ð³Ð³ÐµÑ€ update_timestamp Ð½Ðµ ÑÐºÐ¾Ð¿Ð¸Ñ€Ð¾Ð²Ð°Ð»ÑÑ - Ð¿Ñ€Ð¸ÑˆÐ»Ð¾ÑÑŒ Ð¿ÐµÑ€ÐµÑÐ¾Ð·Ð´Ð°Ð²Ð°Ñ‚ÑŒ Ð²Ñ€ÑƒÑ‡Ð½ÑƒÑŽ
  2. FK constraint Ð½Ð° b2c_orders ÑÐ»Ð¾Ð¼Ð°Ð»ÑÑ - Ð¸ÑÐ¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¾ Ð² Ð¼Ð¸Ð³Ñ€Ð°Ñ†Ð¸Ð¸ 174
- **Ð ÐµÑˆÐµÐ½Ð¸Ñ**:
  1. Ð”Ð¾Ð±Ð°Ð²Ð»ÐµÐ½ ÑÐºÑ€Ð¸Ð¿Ñ‚ Ð¿Ñ€Ð¾Ð²ÐµÑ€ÐºÐ¸ Ñ‚Ñ€Ð¸Ð³Ð³ÐµÑ€Ð¾Ð²
  2. Ð£Ð»ÑƒÑ‡ÑˆÐµÐ½Ð° Ð²Ð°Ð»Ð¸Ð´Ð°Ñ†Ð¸Ñ FK Ð² Ð¼Ð¸Ð³Ñ€Ð°Ñ†Ð¸Ð¸

### ÐžÐ±Ð½Ð¾Ð²Ð»Ñ‘Ð½Ð½Ñ‹Ðµ Ñ€Ð¸ÑÐºÐ¸
- âŒ ÐŸÐ¾Ñ‚ÐµÑ€Ñ Ð´Ð°Ð½Ð½Ñ‹Ñ… - Ñ€Ð¸ÑÐº Ð·Ð°ÐºÑ€Ñ‹Ñ‚ (Ñ‚Ñ€Ð¾Ð¹Ð½Ð°Ñ Ð¿Ñ€Ð¾Ð²ÐµÑ€ÐºÐ° Ð¿Ñ€Ð¾ÑˆÐ»Ð°)
- âœ… Ð’Ñ€ÐµÐ¼Ñ Ð²Ñ‹Ð¿Ð¾Ð»Ð½ÐµÐ½Ð¸Ñ - Ð² Ð¿Ñ€ÐµÐ´ÐµÐ»Ð°Ñ… Ð¿Ð»Ð°Ð½Ð°
```

---

## ðŸ“ Ð˜Ð¡Ð¢ÐžÐ Ð˜Ð¯ Ð˜Ð—ÐœÐ•ÐÐ•ÐÐ˜Ð™ ÐŸÐ›ÐÐÐ

| Ð”Ð°Ñ‚Ð° | Ð’ÐµÑ€ÑÐ¸Ñ | Ð˜Ð·Ð¼ÐµÐ½ÐµÐ½Ð¸Ñ | ÐÐ²Ñ‚Ð¾Ñ€ |
|------|--------|-----------|-------|
| 2025-10-09 | 1.0 | Ð¡Ð¾Ð·Ð´Ð°Ð½Ð¸Ðµ Ð´ÐµÑ‚Ð°Ð»ÑŒÐ½Ð¾Ð³Ð¾ Ð¿Ð»Ð°Ð½Ð° | Claude Code |
| ___ | 1.1 | ÐžÐ±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ðµ Ð¿Ð¾ÑÐ»Ðµ Ñ„Ð°Ð·Ñ‹ 0 | ___ |
| ___ | 1.2 | ÐžÐ±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ðµ Ð¿Ð¾ÑÐ»Ðµ Ñ„Ð°Ð·Ñ‹ 1 | ___ |
| ___ | 2.0 | Major update Ð¿Ð¾ÑÐ»Ðµ Ð·Ð°Ð²ÐµÑ€ÑˆÐµÐ½Ð¸Ñ Ð¼Ð¸Ð³Ñ€Ð°Ñ†Ð¸Ð¸ | ___ |

---

## ðŸŽ¯ Ð¤Ð˜ÐÐÐ›Ð¬ÐÐ«Ð™ Ð¡Ð¢ÐÐ¢Ð£Ð¡

**Ð”Ð°Ñ‚Ð° Ð·Ð°Ð²ÐµÑ€ÑˆÐµÐ½Ð¸Ñ Ð¼Ð¸Ð³Ñ€Ð°Ñ†Ð¸Ð¸**: ___
**ÐžÐ±Ñ‰Ð¸Ð¹ Ð¿Ñ€Ð¾Ð³Ñ€ÐµÑÑ**: ___% (___/8 Ñ„Ð°Ð·)
**Production-ready score**: ___/600
**Ð“Ð¾Ñ‚Ð¾Ð²Ð½Ð¾ÑÑ‚ÑŒ Ðº production**: â¸ï¸ Pending / âœ… Ready

**Ð¡Ð»ÐµÐ´ÑƒÑŽÑ‰Ð¸Ðµ ÑˆÐ°Ð³Ð¸**:
- [ ] Ð¤Ð¸Ð½Ð°Ð»ÑŒÐ½Ñ‹Ð¹ code review
- [ ] Ð¡Ð¾Ð·Ð´Ð°Ð½Ð¸Ðµ PR Ð² main
- [ ] Production deployment
- [ ] Post-mortem Ð°Ð½Ð°Ð»Ð¸Ð·

---

**ZERO TECHNICAL DEBT ACHIEVED**: â¸ï¸ / âœ…

**ðŸš€ Ð“ÐžÐ¢ÐžÐ’ÐÐžÐ¡Ð¢Ð¬ Ðš PRODUCTION**: â¸ï¸ Pending / âœ… Ready

---

*Ð­Ñ‚Ð¾Ñ‚ Ð¿Ð»Ð°Ð½ ÑÐ²Ð»ÑÐµÑ‚ÑÑ Ð¶Ð¸Ð²Ñ‹Ð¼ Ð´Ð¾ÐºÑƒÐ¼ÐµÐ½Ñ‚Ð¾Ð¼ Ð¸ ÐžÐ‘Ð¯Ð—ÐÐ Ð¾Ð±Ð½Ð¾Ð²Ð»ÑÑ‚ÑŒÑÑ Ð½Ð° ÐºÐ°Ð¶Ð´Ð¾Ð¼ ÑÑ‚Ð°Ð¿Ðµ Ð¼Ð¸Ð³Ñ€Ð°Ñ†Ð¸Ð¸!*
