# üìã –°–ò–°–¢–ï–ú–ê –í–ê–†–ò–ê–ù–¢–û–í –¢–û–í–ê–†–û–í –î–õ–Ø –í–ò–¢–†–ò–ù - –ê–ö–¢–£–ê–õ–¨–ù–û–ï –°–û–°–¢–û–Ø–ù–ò–ï

## ‚úÖ –°–¢–ê–¢–£–° –†–ï–ê–õ–ò–ó–ê–¶–ò–ò

**–û–±—â–∏–π –ø—Ä–æ–≥—Ä–µ—Å—Å:** 95% –∑–∞–≤–µ—Ä—à–µ–Ω–æ  
**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** 30.07.2025  

### üéØ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:
- ‚úÖ **–ü–æ–ª–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤** - —Å–æ–∑–¥–∞–Ω–∏–µ, —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ, —É–¥–∞–ª–µ–Ω–∏–µ
- ‚úÖ **–¶–≤–µ—Ç–æ–≤—ã–µ –ø–ª–∏—Ç–∫–∏** - —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π UI –¥–ª—è –≤—ã–±–æ—Ä–∞ —Ü–≤–µ—Ç–æ–≤ (–∫–∞–∫ –Ω–∞ Avito)
- ‚úÖ **–ö–æ—Ä–∑–∏–Ω–∞ —Å –≤–∞—Ä–∏–∞–Ω—Ç–∞–º–∏** - –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ –≤ –∫–æ—Ä–∑–∏–Ω—É
- ‚úÖ **–ú–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞** - –≤—ã–±–æ—Ä –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –≤ –∫–æ—Ä–∑–∏–Ω—É
- ‚úÖ **Marketplace –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è** - —Ç–æ–≤–∞—Ä—ã –≤–∏—Ç—Ä–∏–Ω –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –≤ –º–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å–µ
- ‚úÖ **–†–µ–∑–µ—Ä–≤–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–æ–≤** - —Å–∏—Å—Ç–µ–º–∞ inventory_reservations
- ‚úÖ **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—Å—Ç–∞—Ç–∫–∞–º–∏** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–æ–¥—Å—á–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞
- ‚úÖ **API endpoints** - –ø–æ–ª–Ω—ã–π –Ω–∞–±–æ—Ä –ø—É–±–ª–∏—á–Ω—ã—Ö –∏ –ø—Ä–∏–≤–∞—Ç–Ω—ã—Ö –º–µ—Ç–æ–¥–æ–≤
- ‚úÖ **–í–∞–ª–∏–¥–∞—Ü–∏—è —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç–∏** - –ø—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–º–±–∏–Ω–∞—Ü–∏–π –∞—Ç—Ä–∏–±—É—Ç–æ–≤
- ‚úÖ **–¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–æ–Ω–Ω–∞—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å** - –≤—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –≤ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è—Ö

## üìä –ê–Ω–∞–ª–∏–∑ —Ç–µ–∫—É—â–µ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å–∏—Å—Ç–µ–º—ã

### üóÑÔ∏è –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

#### –¢–∞–±–ª–∏—Ü–∞: `storefront_product_variants`
–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ: `/data/hostel-booking-system/backend/migrations/000074_create_table_storefront_product_variants.up.sql`

```sql
CREATE TABLE public.storefront_product_variants (
    id integer NOT NULL,
    product_id integer NOT NULL,
    sku character varying(100),
    barcode character varying(100),
    price numeric(15,2),
    compare_at_price numeric(15,2),
    cost_price numeric(15,2),
    stock_quantity integer DEFAULT 0 NOT NULL,
    reserved_quantity INTEGER NOT NULL DEFAULT 0,  -- –¥–æ–±–∞–≤–ª–µ–Ω–æ –≤ –º–∏–≥—Ä–∞—Ü–∏–∏ 000179
    available_quantity INTEGER GENERATED ALWAYS AS (stock_quantity - reserved_quantity) STORED,
    stock_status character varying(20) DEFAULT 'in_stock'::character varying NOT NULL,
    low_stock_threshold integer DEFAULT 5,
    variant_attributes jsonb DEFAULT '{}'::jsonb NOT NULL,
    weight numeric(10,3),
    dimensions jsonb,
    is_active boolean DEFAULT true NOT NULL,
    is_default boolean DEFAULT false NOT NULL,
    view_count integer DEFAULT 0 NOT NULL,
    sold_count integer DEFAULT 0 NOT NULL,
    created_at timestamp with time zone DEFAULT CURRENT_TIMESTAMP NOT NULL,
    updated_at timestamp with time zone DEFAULT CURRENT_TIMESTAMP NOT NULL
);
```

**–í–∞–∂–Ω—ã–µ –∏–Ω–¥–µ–∫—Å—ã:**
- `idx_storefront_product_variants_unique_attributes` - —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç—å –∫–æ–º–±–∏–Ω–∞—Ü–∏–∏ –∞—Ç—Ä–∏–±—É—Ç–æ–≤
- `idx_storefront_product_variants_low_stock` - –ø–æ–∏—Å–∫ —Ç–æ–≤–∞—Ä–æ–≤ —Å –Ω–∏–∑–∫–∏–º–∏ –æ—Å—Ç–∞—Ç–∫–∞–º–∏
- `idx_storefront_product_variants_default_unique` - —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω –≤–∞—Ä–∏–∞–Ω—Ç –º–æ–∂–µ—Ç –±—ã—Ç—å –¥–µ—Ñ–æ–ª—Ç–Ω—ã–º

**–¢—Ä–∏–≥–≥–µ—Ä—ã:**
- `trigger_update_variant_stock_status` - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ stock_status
- `trigger_update_storefront_product_variants_updated_at` - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ updated_at

#### –°–≤—è–∑–∞–Ω–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã:
- `product_variant_attributes` (ID: 2000+) - –≥–ª–æ–±–∞–ª—å–Ω—ã–µ –∞—Ç—Ä–∏–±—É—Ç—ã –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤
- `product_variant_attribute_values` - –≤–æ–∑–º–æ–∂–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –∞—Ç—Ä–∏–±—É—Ç–æ–≤
- `storefront_product_attributes` - –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∞—Ç—Ä–∏–±—É—Ç–æ–≤ –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Ç–æ–≤–∞—Ä–∞
- `inventory_reservations` - —Ä–µ–∑–µ—Ä–≤–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–æ–≤

### üîß Backend —Å—Ç—Ä—É–∫—Ç—É—Ä–∞

#### 1. Handlers (HTTP —Å–ª–æ–π)

**–§–∞–π–ª:** `/data/hostel-booking-system/backend/internal/proj/storefront/handler/variant_handler.go`
- `GetProductVariants(c *fiber.Ctx)` - –ø–æ–ª—É—á–µ–Ω–∏–µ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ —Ç–æ–≤–∞—Ä–∞
- `GetVariantByID(c *fiber.Ctx)` - –ø–æ–ª—É—á–µ–Ω–∏–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –≤–∞—Ä–∏–∞–Ω—Ç–∞
- `CreateVariant(c *fiber.Ctx)` - —Å–æ–∑–¥–∞–Ω–∏–µ –≤–∞—Ä–∏–∞–Ω—Ç–∞
- `UpdateVariant(c *fiber.Ctx)` - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤–∞—Ä–∏–∞–Ω—Ç–∞
- `DeleteVariant(c *fiber.Ctx)` - —É–¥–∞–ª–µ–Ω–∏–µ –≤–∞—Ä–∏–∞–Ω—Ç–∞
- `BulkCreateVariants(c *fiber.Ctx)` - –º–∞—Å—Å–æ–≤–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ
- `GenerateVariants(c *fiber.Ctx)` - –∞–≤—Ç–æ–≥–µ–Ω–µ—Ä–∞—Ü–∏—è –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤
- `ImportVariantsCSV(c *fiber.Ctx)` - –∏–º–ø–æ—Ä—Ç –∏–∑ CSV
- `ExportVariantsCSV(c *fiber.Ctx)` - —ç–∫—Å–ø–æ—Ä—Ç –≤ CSV

**–§–∞–π–ª:** `/data/hostel-booking-system/backend/internal/proj/storefront/handler/public_variant_handler.go`
- –ü—É–±–ª–∏—á–Ω—ã–µ –º–µ—Ç–æ–¥—ã –¥–ª—è –Ω–µ–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

**–§–∞–π–ª:** `/data/hostel-booking-system/backend/internal/proj/storefronts/handler/product_handler.go`
- `CreateProduct(c *fiber.Ctx)` - —Å–æ–∑–¥–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞ (–ù–ï –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –≤–∞—Ä–∏–∞–Ω—Ç—ã!)
- `UpdateProduct(c *fiber.Ctx)` - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞
- `BulkCreateProducts(c *fiber.Ctx)` - –º–∞—Å—Å–æ–≤–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ

#### 2. Services (–±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞)

**–§–∞–π–ª:** `/data/hostel-booking-system/backend/internal/proj/storefront/service/variant_service.go`
- `CreateVariant(ctx, productID, variant)` - —Å–æ–∑–¥–∞–Ω–∏–µ —Å –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π
- `UpdateVariant(ctx, variantID, updates)` - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å –ø—Ä–æ–≤–µ—Ä–∫–∞–º–∏
- `GenerateVariants(ctx, productID, matrix)` - –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–æ–º–±–∏–Ω–∞—Ü–∏–π
- `ValidateVariantUniqueness(ctx, productID, attributes)` - –ø—Ä–æ–≤–µ—Ä–∫–∞ —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç–∏

**–§–∞–π–ª:** `/data/hostel-booking-system/backend/internal/proj/storefronts/service/product_service.go`
- `CreateProduct(ctx, storefrontID, userID, req)` - —Å–æ–∑–¥–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞
- `validateCreateRequest(req)` - –≤–∞–ª–∏–¥–∞—Ü–∏—è –∑–∞–ø—Ä–æ—Å–∞

#### 3. Repository (—Å–ª–æ–π –¥–∞–Ω–Ω—ã—Ö)

**–§–∞–π–ª:** `/data/hostel-booking-system/backend/internal/proj/storefront/repository/variant_repository.go`
- `CreateVariant(ctx, variant)` - SQL –≤—Å—Ç–∞–≤–∫–∞
- `GetVariantsByProductID(ctx, productID)` - –ø–æ–ª—É—á–µ–Ω–∏–µ –≤—Å–µ—Ö –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤
- `UpdateVariantStock(ctx, variantID, quantity)` - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –æ—Å—Ç–∞—Ç–∫–æ–≤
- `BulkCreateVariants(ctx, variants)` - –º–∞—Å—Å–æ–≤–∞—è –≤—Å—Ç–∞–≤–∫–∞

#### 4. Models (—Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö)

**–§–∞–π–ª:** `/data/hostel-booking-system/backend/internal/proj/storefront/types/variant_types.go`
```go
type ProductVariant struct {
    ID                int                    `json:"id" db:"id"`
    ProductID         int                    `json:"product_id" db:"product_id"`
    SKU               *string                `json:"sku,omitempty" db:"sku"`
    Price             *float64               `json:"price,omitempty" db:"price"`
    StockQuantity     int                    `json:"stock_quantity" db:"stock_quantity"`
    ReservedQuantity  int                    `json:"reserved_quantity" db:"reserved_quantity"`
    AvailableQuantity int                    `json:"available_quantity" db:"available_quantity"`
    VariantAttributes map[string]interface{} `json:"variant_attributes" db:"variant_attributes"`
    // ... –¥—Ä—É–≥–∏–µ –ø–æ–ª—è
}

type CreateVariantRequest struct {
    ProductID         int                    `json:"product_id" validate:"required"`
    SKU               *string                `json:"sku,omitempty"`
    Price             *float64               `json:"price,omitempty"`
    StockQuantity     int                    `json:"stock_quantity" validate:"min=0"`
    VariantAttributes map[string]interface{} `json:"variant_attributes" validate:"required"`
    IsDefault         bool                   `json:"is_default"`
}

type GenerateVariantsRequest struct {
    ProductID         int                    `json:"product_id" validate:"required"`
    AttributeMatrix   map[string][]string    `json:"attribute_matrix" validate:"required"`
    PriceModifiers    map[string]float64     `json:"price_modifiers,omitempty"`
    StockQuantities   map[string]int         `json:"stock_quantities,omitempty"`
}
```

**–§–∞–π–ª:** `/data/hostel-booking-system/backend/internal/domain/models/storefront_product.go`
```go
type CreateProductRequest struct {
    Name          string                 `json:"name" validate:"required,min=3,max=255"`
    Description   string                 `json:"description" validate:"required,min=10"`
    Price         float64                `json:"price" validate:"required,min=0"`
    CategoryID    int                    `json:"category_id" validate:"required"`
    StockQuantity int                    `json:"stock_quantity" validate:"min=0"`
    // –ù–ï–¢ –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤!
}
```

#### 5. Routes (–º–∞—Ä—à—Ä—É—Ç—ã)

**–§–∞–π–ª:** `/data/hostel-booking-system/backend/internal/proj/storefronts/module.go`
```go
// –ó–∞—â–∏—â–µ–Ω–Ω—ã–µ –º–∞—Ä—à—Ä—É—Ç—ã –¥–ª—è –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤
variants := protected.Group("/products/:product_id/variants")
variants.Get("/", m.variantHandler.GetProductVariants)
variants.Post("/", m.variantHandler.CreateVariant)
variants.Post("/bulk", m.variantHandler.BulkCreateVariants)
variants.Post("/generate", m.variantHandler.GenerateVariants)

// –ü—É–±–ª–∏—á–Ω—ã–µ –º–∞—Ä—à—Ä—É—Ç—ã
publicVariants := api.Group("/public")
publicVariants.Get("/storefronts/:slug/products/:product_id/variants", m.publicVariantHandler.GetProductVariantsPublic)
```

### üé® Frontend —Å—Ç—Ä—É–∫—Ç—É—Ä–∞

#### 1. Components

**–§–∞–π–ª:** `/data/hostel-booking-system/frontend/svetu/src/components/products/ProductWizard.tsx`
- 7-—à–∞–≥–æ–≤—ã–π wizard –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Ç–æ–≤–∞—Ä–∞
- –®–∞–≥ 5: `VariantsStep` - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤–∞—Ä–∏–∞–Ω—Ç–∞–º–∏

**–§–∞–π–ª:** `/data/hostel-booking-system/frontend/svetu/src/components/products/steps/VariantsStep.tsx`
```typescript
// –°–æ—Å—Ç–æ—è–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞
const [activeMode, setActiveMode] = useState<'none' | 'simple' | 'advanced'>('none');
const [hasVariants, setHasVariants] = useState(false);
const [variants, setVariants] = useState<any[]>([]);

// –ù–ï –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω —Å CreateProductContext!
// –î–∞–Ω–Ω—ã–µ –æ –≤–∞—Ä–∏–∞–Ω—Ç–∞—Ö –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ
```

**–§–∞–π–ª:** `/data/hostel-booking-system/frontend/svetu/src/components/Storefront/ProductVariants/VariantManager.tsx`
- –ü–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π UI –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤–∞—Ä–∏–∞–Ω—Ç–∞–º–∏
- –¢–∞–±–ª–∏—Ü–∞ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ —Å —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ–º
- –ú–∞—Å—Å–æ–≤—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏

**–§–∞–π–ª:** `/data/hostel-booking-system/frontend/svetu/src/components/Storefront/ProductVariants/VariantGenerator.tsx`
- –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ –ø–æ –º–∞—Ç—Ä–∏—Ü–µ –∞—Ç—Ä–∏–±—É—Ç–æ–≤
- –ù–ï –∏–º–µ–µ—Ç –ø–æ–ª–µ–π –¥–ª—è —É–∫–∞–∑–∞–Ω–∏—è stock quantity!

**–§–∞–π–ª:** `/data/hostel-booking-system/frontend/svetu/src/components/Storefront/ProductVariants/AttributeSetup.tsx`
- –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∞—Ç—Ä–∏–±—É—Ç–æ–≤ –¥–ª—è —Ç–æ–≤–∞—Ä–∞
- –í—ã–±–æ—Ä –∏–∑ –≥–ª–æ–±–∞–ª—å–Ω—ã—Ö –∞—Ç—Ä–∏–±—É—Ç–æ–≤ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏

#### 2. Context

**–§–∞–π–ª:** `/data/hostel-booking-system/frontend/svetu/src/contexts/CreateProductContext.tsx`
```typescript
interface ProductFormData {
    // –ë–∞–∑–æ–≤–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
    name: string;
    description: string;
    price: number;
    categoryId: number | null;
    // –ù–ï–¢ –ø–æ–ª–µ–π –¥–ª—è –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤!
}
```

#### 3. Services/API

**–§–∞–π–ª:** `/data/hostel-booking-system/frontend/svetu/src/services/storefrontProducts.ts`
- `createProduct(storefrontSlug, data)` - —Å–æ–∑–¥–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞
- –ù–ï –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –≤–∞—Ä–∏–∞–Ω—Ç—ã –≤ –∑–∞–ø—Ä–æ—Å–µ!

**–§–∞–π–ª:** `/data/hostel-booking-system/frontend/svetu/src/services/productApi.ts`
- –ú–µ—Ç–æ–¥—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –≤–∞—Ä–∏–∞–Ω—Ç–∞–º–∏ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —Ç–æ–≤–∞—Ä–æ–≤
- `getProductVariants(productId)`
- `createVariant(productId, data)`
- `generateVariants(productId, matrix)`

#### 4. Types

**–§–∞–π–ª:** `/data/hostel-booking-system/frontend/svetu/src/types/storefront.ts`
```typescript
interface ProductVariant {
    id: number;
    product_id: number;
    sku?: string;
    price?: number;
    stock_quantity: number;
    reserved_quantity: number;
    available_quantity: number;
    variant_attributes: Record<string, any>;
    is_active: boolean;
    is_default: boolean;
}
```

## üö® –í–´–Ø–í–õ–ï–ù–ù–´–ï –ü–†–û–ë–õ–ï–ú–´

### 1. –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –º–µ–∂–¥—É —Å–æ–∑–¥–∞–Ω–∏–µ–º —Ç–æ–≤–∞—Ä–∞ –∏ –≤–∞—Ä–∏–∞–Ω—Ç–∞–º–∏
- `CreateProductRequest` –ù–ï —Å–æ–¥–µ—Ä–∂–∏—Ç –ø–æ–ª—è –¥–ª—è –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤
- `ProductService.CreateProduct` –ù–ï —Å–æ–∑–¥–∞–µ—Ç –≤–∞—Ä–∏–∞–Ω—Ç—ã
- Frontend `CreateProductContext` –ù–ï —Ö—Ä–∞–Ω–∏—Ç –¥–∞–Ω–Ω—ã–µ –æ –≤–∞—Ä–∏–∞–Ω—Ç–∞—Ö
- `VariantsStep` –ù–ï –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω —Å –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º

### 2. –ù–µ–≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —É–∫–∞–∑–∞—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–ª—è –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏
- `VariantGenerator` –ù–ï –∏–º–µ–µ—Ç –ø–æ–ª–µ–π –¥–ª—è stock quantity
- –ù–µ—Ç UI –¥–ª—è –º–∞—Å—Å–æ–≤–æ–≥–æ —É–∫–∞–∑–∞–Ω–∏—è –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞
- –ü—Ä–∏—Ö–æ–¥–∏—Ç—Å—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–∞–∂–¥—ã–π –≤–∞—Ä–∏–∞–Ω—Ç –æ—Ç–¥–µ–ª—å–Ω–æ –ø–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è

### 3. –†–∞–∑—Ä—ã–≤ –º–µ–∂–¥—É –∞—Ç—Ä–∏–±—É—Ç–∞–º–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –∏ –≤–∞—Ä–∏–∞–Ω—Ç–∞–º–∏
- –ê—Ç—Ä–∏–±—É—Ç—ã –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ (brand, color, storage) –Ω–µ —Å–≤—è–∑–∞–Ω—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å –≤–∞—Ä–∏–∞–Ω—Ç–∞–º–∏
- –ù–µ—Ç –≤–∞–ª–∏–¥–∞—Ü–∏–∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è –∞—Ç—Ä–∏–±—É—Ç–æ–≤ –≤–∞—Ä–∏–∞–Ω—Ç–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ —Ç–æ–≤–∞—Ä–∞

## üõ†Ô∏è –î–ï–¢–ê–õ–¨–ù–´–ô –ü–õ–ê–ù –†–ï–ê–õ–ò–ó–ê–¶–ò–ò

### –≠—Ç–∞–ø 1: –ú–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏—è Backend –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —Ç–æ–≤–∞—Ä–∞

#### 1.1 –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ –º–æ–¥–µ–ª–∏ CreateProductRequest

**–§–∞–π–ª –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è:** `/data/hostel-booking-system/backend/internal/domain/models/storefront_product.go`

```go
// CreateProductRequest - –¥–æ–±–∞–≤–∏—Ç—å –ø–æ–ª—è –¥–ª—è –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤
type CreateProductRequest struct {
    // ... —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –ø–æ–ª—è ...
    
    // –ù–æ–≤—ã–µ –ø–æ–ª—è –¥–ª—è –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤
    HasVariants      bool                      `json:"has_variants"`
    Variants         []CreateVariantInline     `json:"variants,omitempty" validate:"omitempty,dive"`
    VariantSettings  *VariantSettings          `json:"variant_settings,omitempty"`
}

// CreateVariantInline - —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –≤–∞—Ä–∏–∞–Ω—Ç–∞ –≤–º–µ—Å—Ç–µ —Å —Ç–æ–≤–∞—Ä–æ–º
type CreateVariantInline struct {
    SKU               *string                `json:"sku,omitempty"`
    Barcode           *string                `json:"barcode,omitempty"`
    Price             *float64               `json:"price,omitempty"`
    CompareAtPrice    *float64               `json:"compare_at_price,omitempty"`
    CostPrice         *float64               `json:"cost_price,omitempty"`
    StockQuantity     int                    `json:"stock_quantity" validate:"min=0"`
    LowStockThreshold *int                   `json:"low_stock_threshold,omitempty"`
    VariantAttributes map[string]interface{} `json:"variant_attributes" validate:"required"`
    Weight            *float64               `json:"weight,omitempty"`
    Dimensions        map[string]interface{} `json:"dimensions,omitempty"`
    IsDefault         bool                   `json:"is_default"`
}

// VariantSettings - –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤
type VariantSettings struct {
    TrackInventory    bool     `json:"track_inventory"`
    ContinueSelling   bool     `json:"continue_selling"` // –ø—Ä–æ–¥–æ–ª–∂–∞—Ç—å –ø—Ä–æ–¥–∞–∂–∏ –ø—Ä–∏ 0 stock
    RequireShipping   bool     `json:"require_shipping"`
    TaxableProduct    bool     `json:"taxable_product"`
    WeightUnit        string   `json:"weight_unit,omitempty"` // kg, g, lb, oz
    SelectedAttributes []string `json:"selected_attributes"` // –∫–∞–∫–∏–µ –∞—Ç—Ä–∏–±—É—Ç—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è
}
```

#### 1.2 –ú–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏—è ProductService

**–§–∞–π–ª –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è:** `/data/hostel-booking-system/backend/internal/proj/storefronts/service/product_service.go`

```go
// CreateProduct - –¥–æ–±–∞–≤–∏—Ç—å –ø–æ–¥–¥–µ—Ä–∂–∫—É —Å–æ–∑–¥–∞–Ω–∏—è –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤
func (s *ProductService) CreateProduct(ctx context.Context, storefrontID, userID int, req *models.CreateProductRequest) (*models.StorefrontProduct, error) {
    // ... —Å—É—â–µ—Å—Ç–≤—É—é—â–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è ...
    
    // –ù–æ–≤–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è –¥–ª—è –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤
    if req.HasVariants {
        if err := s.validateVariants(req); err != nil {
            return nil, fmt.Errorf("invalid variants: %w", err)
        }
    }
    
    // –ù–∞—á–∏–Ω–∞–µ–º —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é
    tx, err := s.storage.BeginTx(ctx)
    if err != nil {
        return nil, fmt.Errorf("failed to start transaction: %w", err)
    }
    defer tx.Rollback()
    
    // –°–æ–∑–¥–∞–µ–º –æ—Å–Ω–æ–≤–Ω–æ–π —Ç–æ–≤–∞—Ä
    product, err := s.storage.CreateStorefrontProduct(ctx, storefrontID, req)
    if err != nil {
        return nil, err
    }
    
    // –°–æ–∑–¥–∞–µ–º –≤–∞—Ä–∏–∞–Ω—Ç—ã –µ—Å–ª–∏ —É–∫–∞–∑–∞–Ω—ã
    if req.HasVariants && len(req.Variants) > 0 {
        variantRequests := make([]types.CreateVariantRequest, len(req.Variants))
        for i, v := range req.Variants {
            variantRequests[i] = types.CreateVariantRequest{
                ProductID:         product.ID,
                SKU:               v.SKU,
                Barcode:           v.Barcode,
                Price:             v.Price,
                CompareAtPrice:    v.CompareAtPrice,
                CostPrice:         v.CostPrice,
                StockQuantity:     v.StockQuantity,
                LowStockThreshold: v.LowStockThreshold,
                VariantAttributes: v.VariantAttributes,
                Weight:            v.Weight,
                Dimensions:        v.Dimensions,
                IsDefault:         v.IsDefault,
            }
        }
        
        createdVariants, err := s.variantService.BulkCreateVariants(ctx, product.ID, variantRequests)
        if err != nil {
            return nil, fmt.Errorf("failed to create variants: %w", err)
        }
        
        product.Variants = createdVariants
    }
    
    // –ö–æ–º–º–∏—Ç–∏–º —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é
    if err := tx.Commit(); err != nil {
        return nil, fmt.Errorf("failed to commit transaction: %w", err)
    }
    
    // –ò–Ω–¥–µ–∫—Å–∏—Ä—É–µ–º –≤ OpenSearch
    go s.indexProductWithVariants(product)
    
    return product, nil
}

// validateVariants - –≤–∞–ª–∏–¥–∞—Ü–∏—è –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ –ø–µ—Ä–µ–¥ —Å–æ–∑–¥–∞–Ω–∏–µ–º
func (s *ProductService) validateVariants(req *models.CreateProductRequest) error {
    if len(req.Variants) == 0 {
        return errors.New("at least one variant is required when has_variants is true")
    }
    
    // –ü—Ä–æ–≤–µ—Ä—è–µ–º —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç—å –∫–æ–º–±–∏–Ω–∞—Ü–∏–π –∞—Ç—Ä–∏–±—É—Ç–æ–≤
    seen := make(map[string]bool)
    defaultCount := 0
    
    for i, v := range req.Variants {
        // –°–æ–∑–¥–∞–µ–º –∫–ª—é—á –∏–∑ –∞—Ç—Ä–∏–±—É—Ç–æ–≤ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç–∏
        attrKey := generateAttributeKey(v.VariantAttributes)
        if seen[attrKey] {
            return fmt.Errorf("duplicate variant attributes at index %d", i)
        }
        seen[attrKey] = true
        
        // –ü—Ä–æ–≤–µ—Ä—è–µ–º —á—Ç–æ —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω –≤–∞—Ä–∏–∞–Ω—Ç –¥–µ—Ñ–æ–ª—Ç–Ω—ã–π
        if v.IsDefault {
            defaultCount++
        }
        
        // –í–∞–ª–∏–¥–∞—Ü–∏—è SKU –µ—Å–ª–∏ —É–∫–∞–∑–∞–Ω
        if v.SKU != nil && *v.SKU != "" {
            if err := s.validateSKU(*v.SKU); err != nil {
                return fmt.Errorf("invalid SKU at index %d: %w", i, err)
            }
        }
    }
    
    if defaultCount > 1 {
        return errors.New("only one variant can be default")
    }
    
    if defaultCount == 0 && len(req.Variants) > 0 {
        // –î–µ–ª–∞–µ–º –ø–µ—Ä–≤—ã–π –≤–∞—Ä–∏–∞–Ω—Ç –¥–µ—Ñ–æ–ª—Ç–Ω—ã–º
        req.Variants[0].IsDefault = true
    }
    
    return nil
}
```

#### 1.3 –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ —ç–Ω–¥–ø–æ–∏–Ω—Ç–∞ API

**–§–∞–π–ª –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è:** `/data/hostel-booking-system/backend/internal/proj/storefronts/handler/product_handler.go`

–ú–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π `CreateProduct` –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ –∏–ª–∏ —Å–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π –º–µ—Ç–æ–¥ `CreateProductWithVariants`.

### –≠—Ç–∞–ø 2: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è Frontend

#### 2.1 –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ CreateProductContext

**–§–∞–π–ª –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è:** `/data/hostel-booking-system/frontend/svetu/src/contexts/CreateProductContext.tsx`

```typescript
// –†–∞—Å—à–∏—Ä—è–µ–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å ProductFormData
interface ProductFormData {
    // ... —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –ø–æ–ª—è ...
    
    // –ù–æ–≤—ã–µ –ø–æ–ª—è –¥–ª—è –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤
    hasVariants: boolean;
    variants: ProductVariantCreate[];
    variantSettings: {
        trackInventory: boolean;
        continueSelling: boolean;
        selectedAttributes: string[];
    };
}

interface ProductVariantCreate {
    sku?: string;
    price?: number;
    stockQuantity: number;
    variantAttributes: Record<string, any>;
    isDefault: boolean;
}

// –î–æ–±–∞–≤–∏—Ç—å –≤ initialFormData
const initialFormData: ProductFormData = {
    // ... —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –ø–æ–ª—è ...
    hasVariants: false,
    variants: [],
    variantSettings: {
        trackInventory: true,
        continueSelling: false,
        selectedAttributes: [],
    },
};

// –î–æ–±–∞–≤–∏—Ç—å –º–µ—Ç–æ–¥—ã –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤–∞—Ä–∏–∞–Ω—Ç–∞–º–∏
const updateVariants = (variants: ProductVariantCreate[]) => {
    setFormData(prev => ({ ...prev, variants }));
};

const toggleHasVariants = (enabled: boolean) => {
    setFormData(prev => ({ 
        ...prev, 
        hasVariants: enabled,
        variants: enabled ? prev.variants : []
    }));
};
```

#### 2.2 –ú–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏—è VariantsStep

**–§–∞–π–ª –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è:** `/data/hostel-booking-system/frontend/svetu/src/components/products/steps/VariantsStep.tsx`

```typescript
export default function VariantsStep({ onNext, onBack }: VariantsStepProps) {
    const t = useTranslations('storefronts.products');
    const { state, updateFormData } = useCreateProduct();
    
    // –ò—Å–ø–æ–ª—å–∑—É–µ–º –¥–∞–Ω–Ω—ã–µ –∏–∑ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –≤–º–µ—Å—Ç–æ –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è
    const hasVariants = state.formData.hasVariants;
    const variants = state.formData.variants;
    
    const handleVariantToggle = (enabled: boolean) => {
        updateFormData({ hasVariants: enabled });
        if (!enabled) {
            updateFormData({ variants: [] });
        }
    };
    
    const handleVariantsSave = (newVariants: any[]) => {
        // –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ–º –≤–∞—Ä–∏–∞–Ω—Ç—ã –≤ —Ñ–æ—Ä–º–∞—Ç –¥–ª—è API
        const formattedVariants = newVariants.map(v => ({
            sku: v.sku,
            price: v.price,
            stockQuantity: v.stock_quantity || 0,
            variantAttributes: v.variant_attributes,
            isDefault: v.is_default || false,
        }));
        
        updateFormData({ variants: formattedVariants });
    };
    
    // ... –æ—Å—Ç–∞–ª—å–Ω–æ–π –∫–æ–¥ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞
}
```

#### 2.3 –ú–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏—è VariantGenerator –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ stock

**–§–∞–π–ª –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è:** `/data/hostel-booking-system/frontend/svetu/src/components/Storefront/ProductVariants/VariantGenerator.tsx`

```typescript
// –î–æ–±–∞–≤–∏—Ç—å –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞
const [stockSettings, setStockSettings] = useState({
    defaultQuantity: 0,
    useIndividualQuantities: false,
    quantities: {} as Record<string, number>,
});

// –î–æ–±–∞–≤–∏—Ç—å UI –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è stock
<div className="mt-6">
    <h4 className="text-sm font-medium mb-4">Stock Quantities</h4>
    
    <div className="mb-4">
        <label className="flex items-center gap-2">
            <input
                type="checkbox"
                checked={stockSettings.useIndividualQuantities}
                onChange={(e) => setStockSettings(prev => ({
                    ...prev,
                    useIndividualQuantities: e.target.checked
                }))}
                className="checkbox checkbox-sm"
            />
            <span className="text-sm">Set individual quantities for each variant</span>
        </label>
    </div>
    
    {!stockSettings.useIndividualQuantities ? (
        <div className="form-control">
            <label className="label">
                <span className="label-text">Default quantity for all variants</span>
            </label>
            <input
                type="number"
                min="0"
                value={stockSettings.defaultQuantity}
                onChange={(e) => setStockSettings(prev => ({
                    ...prev,
                    defaultQuantity: parseInt(e.target.value) || 0
                }))}
                className="input input-bordered"
            />
        </div>
    ) : (
        <div className="space-y-2 max-h-60 overflow-y-auto">
            {generatedVariants.map((variant, index) => {
                const key = generateVariantKey(variant.variant_attributes);
                return (
                    <div key={index} className="flex items-center gap-4">
                        <span className="text-sm flex-1">
                            {Object.entries(variant.variant_attributes)
                                .map(([k, v]) => `${k}: ${v}`)
                                .join(', ')}
                        </span>
                        <input
                            type="number"
                            min="0"
                            value={stockSettings.quantities[key] || 0}
                            onChange={(e) => setStockSettings(prev => ({
                                ...prev,
                                quantities: {
                                    ...prev.quantities,
                                    [key]: parseInt(e.target.value) || 0
                                }
                            }))}
                            className="input input-bordered input-sm w-24"
                            placeholder="Qty"
                        />
                    </div>
                );
            })}
        </div>
    )}
</div>

// –ú–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å handleGenerate –¥–ª—è –≤–∫–ª—é—á–µ–Ω–∏—è stock
const handleGenerate = () => {
    const variantsWithStock = generatedVariants.map(variant => {
        const key = generateVariantKey(variant.variant_attributes);
        return {
            ...variant,
            stock_quantity: stockSettings.useIndividualQuantities 
                ? (stockSettings.quantities[key] || 0)
                : stockSettings.defaultQuantity
        };
    });
    
    onGenerate(variantsWithStock);
};
```

#### 2.4 –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–∞ —Å–æ–∑–¥–∞–Ω–∏—è —Ç–æ–≤–∞—Ä–∞

**–§–∞–π–ª –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è:** `/data/hostel-booking-system/frontend/svetu/src/services/storefrontProducts.ts`

```typescript
interface CreateProductWithVariantsData extends CreateProductData {
    has_variants: boolean;
    variants?: Array<{
        sku?: string;
        price?: number;
        stock_quantity: number;
        variant_attributes: Record<string, any>;
        is_default: boolean;
    }>;
    variant_settings?: {
        track_inventory: boolean;
        continue_selling: boolean;
        selected_attributes: string[];
    };
}

export const createProductWithVariants = async (
    storefrontSlug: string,
    data: CreateProductWithVariantsData
): Promise<StorefrontProduct> => {
    const response = await apiClient.post(
        `/storefronts/slug/${storefrontSlug}/products`,
        data
    );
    return response.data;
};
```

#### 2.5 –ú–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏—è PreviewStep –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤

**–§–∞–π–ª –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è:** `/data/hostel-booking-system/frontend/svetu/src/components/products/steps/PreviewStep.tsx`

```typescript
// –î–æ–±–∞–≤–∏—Ç—å —Å–µ–∫—Ü–∏—é –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤
{state.formData.hasVariants && state.formData.variants.length > 0 && (
    <div className="mt-6">
        <h3 className="text-lg font-semibold mb-4">Product Variants</h3>
        <div className="overflow-x-auto">
            <table className="table table-sm">
                <thead>
                    <tr>
                        <th>Variant</th>
                        <th>SKU</th>
                        <th>Price</th>
                        <th>Stock</th>
                        <th>Default</th>
                    </tr>
                </thead>
                <tbody>
                    {state.formData.variants.map((variant, index) => (
                        <tr key={index}>
                            <td>
                                {Object.entries(variant.variantAttributes)
                                    .map(([k, v]) => `${k}: ${v}`)
                                    .join(', ')}
                            </td>
                            <td>{variant.sku || '-'}</td>
                            <td>
                                {variant.price 
                                    ? formatPrice(variant.price, state.formData.currency)
                                    : 'Base price'}
                            </td>
                            <td>{variant.stockQuantity}</td>
                            <td>
                                {variant.isDefault && (
                                    <span className="badge badge-primary badge-sm">Default</span>
                                )}
                            </td>
                        </tr>
                    ))}
                </tbody>
            </table>
        </div>
        <div className="text-sm text-base-content/60 mt-2">
            Total variants: {state.formData.variants.length}
        </div>
    </div>
)}
```

### –≠—Ç–∞–ø 3: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –∞—Ç—Ä–∏–±—É—Ç–∞–º–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏

#### 3.1 –°–≤—è–∑—å –∞—Ç—Ä–∏–±—É—Ç–æ–≤ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ —Å –≤–∞—Ä–∏–∞–Ω—Ç–∞–º–∏

**Backend –∏–∑–º–µ–Ω–µ–Ω–∏—è:**

1. –î–æ–±–∞–≤–∏—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è –∞—Ç—Ä–∏–±—É—Ç–æ–≤ –≤–∞—Ä–∏–∞–Ω—Ç–∞ –∞—Ç—Ä–∏–±—É—Ç–∞–º –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
2. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–µ–¥–ª–∞–≥–∞—Ç—å –∞—Ç—Ä–∏–±—É—Ç—ã –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –¥–ª—è –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤

**Frontend –∏–∑–º–µ–Ω–µ–Ω–∏—è:**

1. –í `AttributesStep` —Å–æ—Ö—Ä–∞–Ω—è—Ç—å –≤—ã–±—Ä–∞–Ω–Ω—ã–µ –∞—Ç—Ä–∏–±—É—Ç—ã –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ –≤–∞—Ä–∏–∞–Ω—Ç–∞—Ö
2. –í `VariantGenerator` –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ –∞—Ç—Ä–∏–±—É—Ç—ã –∫–∞—Ç–µ–≥–æ—Ä–∏–∏

### –≠—Ç–∞–ø 4: –°–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –æ—Å—Ç–∞—Ç–∫–∞–º–∏

#### 4.1 Real-time –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è stock

**Backend:**
- WebSocket endpoint –¥–ª—è –ø–æ–¥–ø–∏—Å–∫–∏ –Ω–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è stock
- –°–æ–±—ã—Ç–∏—è –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –æ—Å—Ç–∞—Ç–∫–æ–≤

**Frontend:**
- WebSocket –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –¥–ª—è real-time –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π
- UI –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã –∏–∑–º–µ–Ω–µ–Ω–∏—è –æ—Å—Ç–∞—Ç–∫–æ–≤

#### 4.2 –†–µ–∑–µ—Ä–≤–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–æ–≤

–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é —Ç–∞–±–ª–∏—Ü—É `inventory_reservations`:
- –ü—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –≤ –∫–æ—Ä–∑–∏–Ω—É —Å–æ–∑–¥–∞–≤–∞—Ç—å —Ä–µ–∑–µ—Ä–≤
- TTL –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –æ—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏—è
- –£—á–∏—Ç—ã–≤–∞—Ç—å —Ä–µ–∑–µ—Ä–≤—ã –ø—Ä–∏ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–∏ –¥–æ—Å—Ç—É–ø–Ω–æ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞

## üîÑ –ü–æ—Ä—è–¥–æ–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Ä–∞–±–æ—Ç

### –§–∞–∑–∞ 1: MVP (–∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω–æ)
1. **Backend**: –ú–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å `CreateProductRequest` –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤
2. **Backend**: –û–±–Ω–æ–≤–∏—Ç—å `ProductService.CreateProduct` –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ –≤ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
3. **Frontend**: –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å `VariantsStep` —Å `CreateProductContext`
4. **Frontend**: –î–æ–±–∞–≤–∏—Ç—å –ø–æ–ª—è stock –≤ `VariantGenerator`
5. **Frontend**: –û–±–Ω–æ–≤–∏—Ç—å —Å–µ—Ä–≤–∏—Å —Å–æ–∑–¥–∞–Ω–∏—è —Ç–æ–≤–∞—Ä–∞ –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤
6. **Testing**: E2E —Ç–µ—Å—Ç —Å–æ–∑–¥–∞–Ω–∏—è —Ç–æ–≤–∞—Ä–∞ —Å –≤–∞—Ä–∏–∞–Ω—Ç–∞–º–∏

### –§–∞–∑–∞ 2: –£–ª—É—á—à–µ–Ω–∏—è
1. Bulk –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å –≤–∞—Ä–∏–∞–Ω—Ç–∞–º–∏
2. –ò–º–ø–æ—Ä—Ç/—ç–∫—Å–ø–æ—Ä—Ç CSV —Å –≤–∞—Ä–∏–∞–Ω—Ç–∞–º–∏
3. –í–∞–ª–∏–¥–∞—Ü–∏—è –∞—Ç—Ä–∏–±—É—Ç–æ–≤ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
4. Real-time –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è stock

### –§–∞–∑–∞ 3: –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª
1. Analytics –ø–æ –≤–∞—Ä–∏–∞–Ω—Ç–∞–º
2. A/B —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ü–µ–Ω
3. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Å–∫–∏–¥–∫–∏
4. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –≤–Ω–µ—à–Ω–∏–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏

## üìù –ß–µ–∫-–ª–∏—Å—Ç –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### Backend —Ç–µ—Å—Ç—ã:
- [ ] –°–æ–∑–¥–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞ –±–µ–∑ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ —Ä–∞–Ω—å—à–µ
- [ ] –°–æ–∑–¥–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞ —Å –≤–∞—Ä–∏–∞–Ω—Ç–∞–º–∏ —Å–æ–∑–¥–∞–µ—Ç –≤—Å–µ –∑–∞–ø–∏—Å–∏
- [ ] –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏—è –æ—Ç–∫–∞—Ç—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∏ –æ—à–∏–±–∫–µ
- [ ] –í–∞–ª–∏–¥–∞—Ü–∏—è —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç–∏ –∞—Ç—Ä–∏–±—É—Ç–æ–≤ —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] –¢–æ–ª—å–∫–æ –æ–¥–∏–Ω –≤–∞—Ä–∏–∞–Ω—Ç –º–æ–∂–µ—Ç –±—ã—Ç—å –¥–µ—Ñ–æ–ª—Ç–Ω—ã–º
- [ ] Stock status –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è

### Frontend —Ç–µ—Å—Ç—ã:
- [ ] VariantsStep —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –¥–∞–Ω–Ω—ã–µ –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç
- [ ] –ú–æ–∂–Ω–æ —É–∫–∞–∑–∞—Ç—å stock –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –≤–∞—Ä–∏–∞–Ω—Ç–∞
- [ ] Preview –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –≤—Å–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã
- [ ] –§–æ—Ä–º–∞ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è —Å –≤–∞—Ä–∏–∞–Ω—Ç–∞–º–∏
- [ ] –û—à–∏–±–∫–∏ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

### E2E —Ç–µ—Å—Ç—ã:
- [ ] –ü–æ–ª–Ω—ã–π flow —Å–æ–∑–¥–∞–Ω–∏—è —Ç–æ–≤–∞—Ä–∞ —Å –≤–∞—Ä–∏–∞–Ω—Ç–∞–º–∏
- [ ] –í–∞—Ä–∏–∞–Ω—Ç—ã –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –≤ –∫–∞—Ç–∞–ª–æ–≥–µ
- [ ] –ü–æ–∫—É–ø–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –≤—ã–±—Ä–∞—Ç—å –≤–∞—Ä–∏–∞–Ω—Ç
- [ ] Stock –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —É–º–µ–Ω—å—à–∞–µ—Ç—Å—è –ø—Ä–∏ –∑–∞–∫–∞–∑–µ

## üöÄ –ö–æ–º–∞–Ω–¥—ã –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

### Backend:
```bash
# –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤
cd backend && go test ./internal/proj/storefronts/...

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–∏–Ω—Ç–µ—Ä–∞
make lint

# –ì–µ–Ω–µ—Ä–∞—Ü–∏—è Swagger –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏
make generate-swagger
```

### Frontend:
```bash
# –ó–∞–ø—É—Å–∫ dev —Å–µ—Ä–≤–µ—Ä–∞
cd frontend/svetu && yarn dev -p 3001

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∏–ø–æ–≤
yarn tsc --noEmit

# –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤
yarn test
```

### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:
```bash
# –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–π
cd backend && ./migrator up

# –û—Ç–∫–∞—Ç –º–∏–≥—Ä–∞—Ü–∏–π
./migrator down

# –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –ë–î
psql "postgres://postgres:password@localhost:5432/svetubd?sslmode=disable"
```

## üìä –ú–µ—Ç—Ä–∏–∫–∏ —É—Å–ø–µ—Ö–∞

1. **–í—Ä–µ–º—è —Å–æ–∑–¥–∞–Ω–∏—è —Ç–æ–≤–∞—Ä–∞ —Å –≤–∞—Ä–∏–∞–Ω—Ç–∞–º–∏** < 30 —Å–µ–∫—É–Ω–¥
2. **–ö–æ–Ω–≤–µ—Ä—Å–∏—è –≤ –ø–æ–∫—É–ø–∫—É** —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç—Å—è –Ω–∞ 15% –¥–ª—è —Ç–æ–≤–∞—Ä–æ–≤ —Å –≤–∞—Ä–∏–∞–Ω—Ç–∞–º–∏
3. **–û—à–∏–±–∫–∏ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏** < 1%
4. **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å API** < 200ms –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Ç–æ–≤–∞—Ä–∞ —Å 10 –≤–∞—Ä–∏–∞–Ω—Ç–∞–º–∏

## üîó –°–≤—è–∑–∞–Ω–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- `/data/hostel-booking-system/PRODUCT_VARIANTS_DETAILED_TECHNICAL_SPEC.md` - —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è
- `/data/hostel-booking-system/backend/docs/swagger.json` - API –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- `/data/hostel-booking-system/frontend/svetu/README.md` - Frontend –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

---

**–ê–≤—Ç–æ—Ä:** Claude Assistant  
**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è:** 30.07.2025  
**–í–µ—Ä—Å–∏—è:** 1.0