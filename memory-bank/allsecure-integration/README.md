# AllSecure Mock Implementation - –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ

## üéØ –û–±–∑–æ—Ä

–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –ø–æ–ª–Ω–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è mock —Å–∏—Å—Ç–µ–º–∞ –ø–ª–∞—Ç–µ–∂–µ–π AllSecure –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –±–µ–∑ —Ä–µ–∞–ª—å–Ω—ã—Ö credentials.

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
- `src/config/payment.ts` - –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–ª–∞—Ç–µ–∂–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã
- `src/types/payment.ts` - TypeScript –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã
- `.env` - –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è `NEXT_PUBLIC_PAYMENT_MODE=mock`

### –°–µ—Ä–≤–∏—Å—ã
- `src/services/payment/mockAllSecureService.ts` - Mock —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è
- `src/services/payment/paymentServiceFactory.ts` - Factory –¥–ª—è —Å–µ—Ä–≤–∏—Å–æ–≤
- `src/hooks/useAllSecurePayment.ts` - React hook –¥–ª—è –ø–ª–∞—Ç–µ–∂–µ–π

### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
- `src/app/[locale]/payment/mock/` - Mock —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –ø–ª–∞—Ç–µ–∂–∞
- `src/app/[locale]/payment/success/` - –°—Ç—Ä–∞–Ω–∏—Ü–∞ —É—Å–ø–µ—à–Ω–æ–≥–æ –ø–ª–∞—Ç–µ–∂–∞
- `src/app/[locale]/payment/error/` - –°—Ç—Ä–∞–Ω–∏—Ü–∞ –æ—à–∏–±–∫–∏ –ø–ª–∞—Ç–µ–∂–∞
- `src/app/[locale]/payment/process/[id]/` - –û–±—Ä–∞–±–æ—Ç–∫–∞ –ø–ª–∞—Ç–µ–∂–∞
- `src/app/[locale]/payment/test/` - –°—Ç—Ä–∞–Ω–∏—Ü–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- `src/components/payment/PaymentProcessing.tsx` - –ö–æ–º–ø–æ–Ω–µ–Ω—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∏

### –£—Ç–∏–ª–∏—Ç—ã
- `src/utils/mockDataGenerator.ts` - –ì–µ–Ω–µ—Ä–∞—Ü–∏—è mock –¥–∞–Ω–Ω—ã—Ö

## üöÄ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### 1. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–ª–∞—Ç–µ–∂–µ–π

–ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ `/payment/test` –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤:

- **–°—É–º–º—ã**: –ø—Ä–µ–¥—É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –∏–ª–∏ –∫–∞—Å—Ç–æ–º–Ω—ã–µ
- **–¢–µ—Å—Ç–æ–≤—ã–µ –∫–∞—Ä—Ç—ã**: 
  - `4111111111111111` - –≤—Å–µ–≥–¥–∞ —É—Å–ø–µ—à–Ω–æ
  - `4000000000000002` - –≤—Å–µ–≥–¥–∞ –æ—Ç–∫–ª–æ–Ω–µ–Ω–æ
  - `4000000000003220` - —Ç—Ä–µ–±—É–µ—Ç 3D Secure
  - `4000000000000077` - —Ç–∞–π–º-–∞—É—Ç

### 2. –°–æ–∑–¥–∞–Ω–∏–µ –ø–ª–∞—Ç–µ–∂–∞ –≤ –∫–æ–¥–µ

```typescript
import { useAllSecurePayment } from '@/hooks/useAllSecurePayment';

const { createPayment, isProcessing, error } = useAllSecurePayment();

const handlePayment = async () => {
  await createPayment({
    listingId: 'listing_123',
    amount: 5000, // –≤ –∫–æ–ø–µ–π–∫–∞—Ö (50 RSD)
    currency: 'RSD',
    buyerInfo: {
      name: 'John Doe',
      email: 'john@example.com',
      phone: '+381601234567',
      address: 'Belgrade, Serbia'
    }
  });
};
```

### 3. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

–í `src/config/payment.ts`:

```typescript
export const paymentConfig: PaymentConfig = {
  mode: 'mock', // 'mock' | 'sandbox' | 'production'
  mock: {
    enabled: true,
    config: {
      successRate: 0.8,        // 80% —É—Å–ø–µ—à–Ω—ã—Ö –ø–ª–∞—Ç–µ–∂–µ–π
      require3DSRate: 0.3,     // 30% —Ç—Ä–µ–±—É—é—Ç 3D Secure
      apiDelay: 1500,          // –ó–∞–¥–µ—Ä–∂–∫–∞ API (–º—Å)
      webhookDelay: 3000       // –ó–∞–¥–µ—Ä–∂–∫–∞ webhook (–º—Å)
    },
    // ... —Ç–µ—Å—Ç–æ–≤—ã–µ –∫–∞—Ä—Ç—ã
  }
};
```

## üîß –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ Mock —Å–∏—Å—Ç–µ–º—ã

### ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏

1. **–ü–æ–ª–Ω—ã–π Payment Flow**
   - –°–æ–∑–¥–∞–Ω–∏–µ –ø–ª–∞—Ç–µ–∂–∞
   - –≠–º—É–ª—è—Ü–∏—è AllSecure –≤–∏–¥–∂–µ—Ç–∞
   - 3D Secure –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
   - –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

2. **–†–∞–∑–ª–∏—á–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏**
   - –£—Å–ø–µ—à–Ω—ã–µ –ø–ª–∞—Ç–µ–∂–∏
   - –û—Ç–∫–ª–æ–Ω–µ–Ω–Ω—ã–µ –ø–ª–∞—Ç–µ–∂–∏  
   - 3D Secure —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è
   - –¢–∞–π–º-–∞—É—Ç—ã –∏ –æ—à–∏–±–∫–∏

3. **–í–∏–∑—É–∞–ª—å–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã**
   - –°—Ç—Ä–∞–Ω–∏—Ü–∞ –æ–ø–ª–∞—Ç—ã –≤ —Å—Ç–∏–ª–µ AllSecure
   - –ê–Ω–∏–º–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å—Ç–∞—Ç—É—Å—ã
   - Responsive –¥–∏–∑–∞–π–Ω
   - Debug –ø–∞–Ω–µ–ª—å (–≤ dev —Ä–µ–∂–∏–º–µ)

4. **State Management**
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ redirects
   - –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –º–µ–∂–¥—É —Å—Ç—Ä–∞–Ω–∏—Ü–∞–º–∏
   - Polling —Å—Ç–∞—Ç—É—Å–∞ –ø–ª–∞—Ç–µ–∂–∞
   - –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

### üé® UI/UX –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

- **Mockup Browser** –¥–ª—è —ç–º—É–ª—è—Ü–∏–∏ AllSecure
- **–¢–µ—Å—Ç–æ–≤—ã–µ –∫–∞—Ä—Ç—ã** —Å –±—ã—Å—Ç—Ä—ã–º –∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ–º
- **3D Secure** —Å–∏–º—É–ª—è—Ü–∏—è —Å –±–∞–Ω–∫–æ–≤—Å–∫–∏–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º
- **–ê–Ω–∏–º–∞—Ü–∏–∏** –∏ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã –ø—Ä–æ–≥—Ä–µ—Å—Å–∞
- **Debug –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è** –≤ dev —Ä–µ–∂–∏–º–µ

## üîÑ –ü–µ—Ä–µ—Ö–æ–¥ –Ω–∞ Production

–ö–æ–≥–¥–∞ –ø–æ–ª—É—á–∏—Ç–µ credentials AllSecure:

1. –°–æ–∑–¥–∞–π—Ç–µ `AllSecureService` –∫–ª–∞—Å—Å
2. –û–±–Ω–æ–≤–∏—Ç–µ `NEXT_PUBLIC_PAYMENT_MODE=production`
3. –î–æ–±–∞–≤—å—Ç–µ credentials –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
4. –í—Å–µ –æ—Å—Ç–∞–ª—å–Ω–æ–µ –æ—Å—Ç–∞–Ω–µ—Ç—Å—è –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π!

## üìä –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### –¢–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è —Ñ–æ—Ä–º:
- **–ò–º—è –Ω–∞ –∫–∞—Ä—Ç–µ**: –ª—é–±–æ–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, TEST USER)
- **–°—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è**: –ª—é–±–∞—è –±—É–¥—É—â–∞—è –¥–∞—Ç–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, 12/25)
- **CVV**: –ª—é–±—ã–µ 3-4 —Ü–∏—Ñ—Ä—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä, 123)
- **3D Secure –∫–æ–¥**: `123` –¥–ª—è —É—Å–ø–µ—à–Ω–æ–π –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏

### –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ–≤–µ–¥–µ–Ω–∏—è:
- `successRate`: –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å —É—Å–ø–µ—à–Ω–æ–≥–æ –ø–ª–∞—Ç–µ–∂–∞ (0-1)
- `require3DSRate`: –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å 3D Secure (0-1)
- `apiDelay`: –∑–∞–¥–µ—Ä–∂–∫–∞ API –≤ –º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥–∞—Ö
- `webhookDelay`: –∑–∞–¥–µ—Ä–∂–∫–∞ webhook –≤ –º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥–∞—Ö

## üêõ Debug –∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞

### Debug —Ä–µ–∂–∏–º –≤–∫–ª—é—á–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤ development:
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –¥–µ—Ç–∞–ª—å–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø–ª–∞—Ç–µ–∂–µ
- –õ–æ–≥–∏—Ä—É–µ—Ç –≤—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –≤ –∫–æ–Ω—Å–æ–ª—å
- –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ –¥–∞–Ω–Ω—ã–µ

### –ü–æ–ª–µ–∑–Ω—ã–µ URL –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:
- `/payment/test` - —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- `/payment/mock?id=PAYMENT_ID` - –ø—Ä—è–º–æ–π –¥–æ—Å—Ç—É–ø –∫ mock –ø–ª–∞—Ç–µ–∂—É
- `/payment/success?id=PAYMENT_ID` - —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —É—Å–ø–µ—Ö–∞
- `/payment/error?reason=declined` - —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –æ—à–∏–±–∫–∏

## üéØ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –≤ checkout –ø—Ä–æ—Ü–µ—Å—Å
2. –î–æ–±–∞–≤–∏—Ç—å webhook endpoints –Ω–∞ backend
3. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
4. –°–æ–∑–¥–∞—Ç—å –∞–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–ª–∞—Ç–µ–∂–∞–º–∏
5. –î–æ–±–∞–≤–∏—Ç—å –∞–Ω–∞–ª–∏—Ç–∏–∫—É –∏ –æ—Ç—á–µ—Ç—ã

–°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é –∏ –ª–µ–≥–∫–æ –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ—Ç—Å—è –¥–ª—è production –æ–∫—Ä—É–∂–µ–Ω–∏—è!