# üéØ –§–∞–∑–∞ 2: –ò–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω—ã–π —Ç–µ–∫—Å—Ç–æ–≤—ã–π –ø–æ–∏—Å–∫ - –ó–ê–í–ï–†–®–ï–ù–ê

**–î–∞—Ç–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è**: 2025-01-06  
**–°—Ç–∞—Ç—É—Å**: ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∞

## üìã –ß—Ç–æ –±—ã–ª–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ:

### 1. **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö (PostgreSQL)**
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω—ã —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è `pg_trgm` –∏ `unaccent` –¥–ª—è –Ω–µ—á–µ—Ç–∫–æ–≥–æ –ø–æ–∏—Å–∫–∞
- ‚úÖ –°–æ–∑–¥–∞–Ω—ã –∏–Ω–¥–µ–∫—Å—ã –¥–ª—è —Ç—Ä–∏–≥—Ä–∞–º–º–Ω–æ–≥–æ –ø–æ–∏—Å–∫–∞ –ø–æ –ø–æ–ª—è–º title –∏ description
- ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ —Ç–∞–±–ª–∏—Ü–∞ —Å–∏–Ω–æ–Ω–∏–º–æ–≤ —Å –ø—Ä–µ–¥—É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏ –¥–ª—è 3 —è–∑—ã–∫–æ–≤
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω—ã —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è –ø–æ–∏—Å–∫–æ–≤—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
- ‚úÖ –°–æ–∑–¥–∞–Ω–∞ —Å–∏—Å—Ç–µ–º–∞ –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ –ø–æ–∏—Å–∫–æ–≤—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤

### 2. **Backend (Go)**
- ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω —Å–µ—Ä–≤–∏—Å —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤ —Å–∏–Ω–æ–Ω–∏–º–∞–º–∏
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –Ω–µ—á–µ—Ç–∫–æ–≥–æ –ø–æ–∏—Å–∫–∞ –≤ OpenSearch
- ‚úÖ –°–æ–∑–¥–∞–Ω—ã –Ω–æ–≤—ã–µ API endpoints:
  - `/api/v1/marketplace/search?fuzzy=true` - –æ—Å–Ω–æ–≤–Ω–æ–π –ø–æ–∏—Å–∫ —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π fuzzy
  - `/api/v1/marketplace/test-fuzzy-search` - —Ç–µ—Å—Ç–æ–≤—ã–π endpoint
  - `/api/v1/marketplace/fuzzy-search` - —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π –Ω–µ—á–µ—Ç–∫–∏–π –ø–æ–∏—Å–∫
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–∞ Swagger –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

### 3. **Frontend (React/Next.js)**  
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω —á–µ–∫–±–æ–∫—Å –¥–ª—è –≤–∫–ª—é—á–µ–Ω–∏—è/–≤—ã–∫–ª—é—á–µ–Ω–∏—è –Ω–µ—á–µ—Ç–∫–æ–≥–æ –ø–æ–∏—Å–∫–∞
- ‚úÖ –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –Ω–µ—á–µ—Ç–∫–∏–π –ø–æ–∏—Å–∫ –≤–∫–ª—é—á–µ–Ω
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω—ã –ø–µ—Ä–µ–≤–æ–¥—ã –¥–ª—è UI —ç–ª–µ–º–µ–Ω—Ç–æ–≤ (ru/en)
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ fuzzy –≤ URL

## üß™ –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:

### –£—Å–ø–µ—à–Ω—ã–µ –∫–µ–π—Å—ã:
- ‚úÖ –ü–æ–∏—Å–∫ "–∫–≤–æ—Ä—Ç–∏—Ä–∞" ‚Üí –Ω–∞—Ö–æ–¥–∏—Ç "–∫–≤–∞—Ä—Ç–∏—Ä–∞" 
- ‚úÖ UI –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –æ–ø—Ü–∏—é –Ω–µ—á–µ—Ç–∫–æ–≥–æ –ø–æ–∏—Å–∫–∞
- ‚úÖ –°–æ—Å—Ç–æ—è–Ω–∏–µ fuzzy —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ URL

### –û–±–Ω–∞—Ä—É–∂–µ–Ω–Ω—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:
- ‚ö†Ô∏è –ü–æ–∏—Å–∫ "–º–∞—à—ã–Ω–∞" –Ω–µ –¥–∞–ª —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ - –≤–æ–∑–º–æ–∂–Ω–æ, –≤ –±–∞–∑–µ –Ω–µ—Ç –æ–±—ä—è–≤–ª–µ–Ω–∏–π —Å –º–∞—à–∏–Ω–∞–º–∏
- ‚ÑπÔ∏è –ü—Ä–∏ –≤—ã–∫–ª—é—á–µ–Ω–Ω–æ–º fuzzy –ø–æ–∏—Å–∫ "–∫–≤–æ—Ä—Ç–∏—Ä–∞" –≤—Å–µ —Ä–∞–≤–Ω–æ –Ω–∞—Ö–æ–¥–∏—Ç –∫–≤–∞—Ä—Ç–∏—Ä—É - —Ç—Ä–µ–±—É–µ—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–≥–æ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è

## üìÅ –ò–∑–º–µ–Ω–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:

### –ú–∏–≥—Ä–∞—Ü–∏–∏:
- `backend/migrations/000084_add_text_search_extensions.up.sql`
- `backend/migrations/000084_add_text_search_extensions.down.sql`
- `backend/migrations/000085_create_search_synonyms.up.sql`
- `backend/migrations/000085_create_search_synonyms.down.sql`
- `backend/migrations/000086_add_category_search_indexes.up.sql`
- `backend/migrations/000086_add_category_search_indexes.down.sql`

### Backend:
- `backend/internal/proj/marketplace/service/search_query_expansion.go`
- `backend/internal/storage/postgres/fuzzy_search.go`
- `backend/internal/storage/postgres/database_fuzzy_search.go`
- `backend/internal/proj/marketplace/handler/fuzzy_search.go`
- `backend/internal/domain/search/types.go`
- `backend/internal/storage/storage.go`
- `backend/internal/proj/marketplace/storage/opensearch/repository.go`
- `backend/internal/proj/marketplace/handler/search.go`
- `backend/internal/proj/marketplace/handler/handler.go`

### Frontend:
- `frontend/svetu/src/components/SearchBar.tsx`
- `frontend/svetu/src/app/[locale]/search/page.tsx`
- `frontend/svetu/src/app/[locale]/page.tsx`
- `frontend/svetu/src/types/search.ts`
- `frontend/svetu/src/messages/ru.json`
- `frontend/svetu/src/messages/en.json`

## üí° –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –¥–ª—è –¥–∞–ª—å–Ω–µ–π—à–µ–≥–æ —É–ª—É—á—à–µ–Ω–∏—è:

1. **–î–æ–±–∞–≤–∏—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ**: –°–æ–∑–¥–∞—Ç—å –æ–±—ä—è–≤–ª–µ–Ω–∏—è —Å –º–∞—à–∏–Ω–∞–º–∏ –¥–ª—è –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
2. **–ù–∞—Å—Ç—Ä–æ–∏—Ç—å –≤–µ—Å–∞**: –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ø–æ—Ä–æ–≥–∏ —Å—Ö–æ–∂–µ—Å—Ç–∏ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤ –∑–∞–ø—Ä–æ—Å–æ–≤
3. **–†–∞—Å—à–∏—Ä–∏—Ç—å —Å–∏–Ω–æ–Ω–∏–º—ã**: –î–æ–±–∞–≤–∏—Ç—å –±–æ–ª—å—à–µ —Å–∏–Ω–æ–Ω–∏–º–æ–≤ –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ä–µ–∞–ª—å–Ω—ã—Ö –ø–æ–∏—Å–∫–æ–≤—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
4. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥**: –ù–∞—Å—Ç—Ä–æ–∏—Ç—å —Å–±–æ—Ä –º–µ—Ç—Ä–∏–∫ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –Ω–µ—á–µ—Ç–∫–æ–≥–æ –ø–æ–∏—Å–∫–∞

## üöÄ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:

–ü–µ—Ä–µ—Ö–æ–¥ –∫ **–§–∞–∑–µ 3: –ü–æ–≤–µ–¥–µ–Ω—á–µ—Å–∫–∞—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è** —Å–æ–≥–ª–∞—Å–Ω–æ –ø–ª–∞–Ω—É –≤ `memory-bank/updated-search-improvement-plan.md`