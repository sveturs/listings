# Исправление выбора вариантов товара при добавлении в корзину

## Дата: 2025-07-30

## Проблема
При добавлении товара с вариантами в корзину со страницы маркетплейса не открывалось модальное окно выбора варианта. Товар добавлялся напрямую без возможности выбрать нужный вариант.

## Решение

### Изменения в `/src/app/[locale]/marketplace/[id]/page.tsx`:

1. **Добавлен импорт VariantSelectionModal**
```typescript
import VariantSelectionModal from '@/components/cart/VariantSelectionModal';
```

2. **Добавлено состояние для модального окна**
```typescript
const [showVariantModal, setShowVariantModal] = useState(false);
```

3. **Добавлена функция обработки клика по кнопке**
```typescript
const handleAddToCartClick = () => {
  if (hasVariants) {
    setShowVariantModal(true);
  }
};
```

4. **Заменена логика кнопки добавления в корзину**
Вместо прямого использования `AddToCartButton` для товаров с вариантами:
- Для товаров с вариантами показывается обычная кнопка, которая открывает модальное окно
- Для товаров без вариантов используется `AddToCartButton` как и раньше

5. **Добавлен компонент VariantSelectionModal**
В конце компонента добавлено модальное окно для выбора вариантов

## Результат
Теперь при клике на кнопку "Добавить в корзину" для товара с вариантами:
1. Открывается модальное окно выбора варианта
2. Пользователь может выбрать нужный вариант (цвет, размер и т.д.)
3. После выбора варианта товар добавляется в корзину с правильным вариантом

## Протестировано
- Товар ID 89 с вариантами теперь корректно открывает модальное окно выбора
- Товары без вариантов по-прежнему добавляются напрямую
- Код прошел проверку линтером и форматирование