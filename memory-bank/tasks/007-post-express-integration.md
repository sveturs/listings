# –ó–∞–¥–∞—á–∞: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Post Express

## –°—Ç–∞—Ç—É—Å: –û—Å–Ω–æ–≤–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞ ‚úÖ 

**üìä –û–±—â–∏–π –ø—Ä–æ–≥—Ä–µ—Å—Å: üéØ 80% –∑–∞–≤–µ—Ä—à–µ–Ω–æ**

### ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–æ (15.08.2025)

#### 1. –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –°–æ–∑–¥–∞–Ω–∞ –º–∏–≥—Ä–∞—Ü–∏—è `000239_add_post_express_integration.up.sql`
  - –¢–∞–±–ª–∏—Ü—ã: `post_express_settings`, `post_express_locations`, `post_express_offices`, `post_express_rates`, `post_express_shipments`, `post_express_api_logs`, `post_express_tracking_events`
  - –î–æ–±–∞–≤–ª–µ–Ω—ã –ø–æ–ª—è –¥–æ—Å—Ç–∞–≤–∫–∏ –≤ `marketplace_orders` –∏ `storefront_orders`
  - –°–æ–∑–¥–∞–Ω—ã —Ç—Ä–∏–≥–≥–µ—Ä—ã –∏ —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏

- ‚úÖ –°–æ–∑–¥–∞–Ω–∞ –º–∏–≥—Ä–∞—Ü–∏—è `000240_add_warehouse_and_pickup_system.up.sql`
  - –¢–∞–±–ª–∏—Ü—ã: `warehouses`, `warehouse_inventory`, `warehouse_movements`, `warehouse_pickup_orders`, `storefront_fbs_settings`, `warehouse_invoices`
  - –î–æ–±–∞–≤–ª–µ–Ω –≥–ª–∞–≤–Ω—ã–π —Å–∫–ª–∞–¥ –≤ –ù–æ–≤–∏ –°–∞–¥
  - –§—É–Ω–∫—Ü–∏–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∫–æ–¥–æ–≤ —Å–∞–º–æ–≤—ã–≤–æ–∑–∞

- ‚úÖ –ú–∏–≥—Ä–∞—Ü–∏–∏ —É—Å–ø–µ—à–Ω–æ –ø—Ä–∏–º–µ–Ω–µ–Ω—ã –∫ –ë–î

#### 2. Backend —Å—Ç—Ä—É–∫—Ç—É—Ä–∞
- ‚úÖ –°–æ–∑–¥–∞–Ω –º–æ–¥—É–ª—å `/backend/internal/proj/postexpress/`
- ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã –º–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö (`models/models.go`)
  - –í—Å–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å Post Express API
  - –ú–æ–¥–µ–ª–∏ —Å–∫–ª–∞–¥—Å–∫–æ–π —Å–∏—Å—Ç–µ–º—ã
  - Request/Response —Å—Ç—Ä—É–∫—Ç—É—Ä—ã
- ‚úÖ –û–ø—Ä–µ–¥–µ–ª–µ–Ω—ã –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã —Å–µ—Ä–≤–∏—Å–æ–≤ (`service/interface.go`)
  - Service –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Å –ø–æ–ª–Ω—ã–º –Ω–∞–±–æ—Ä–æ–º –º–µ—Ç–æ–¥–æ–≤
  - WSPClient –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å API
  - –°—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–ª—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –∏ —Ñ–∏–ª—å—Ç—Ä–æ–≤

### ‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–æ (15.08.2025 - –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ)

#### 3. Backend —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è
- ‚úÖ WSP API –∫–ª–∏–µ–Ω—Ç (`service/client.go`) - –ø–æ–ª–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è —Å retry –ª–æ–≥–∏–∫–æ–π
- ‚úÖ –û—Å–Ω–æ–≤–Ω–æ–π —Å–µ—Ä–≤–∏—Å (`service/service.go`) - –≤—Å–µ –º–µ—Ç–æ–¥—ã –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
- ‚úÖ Repository –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ë–î (`storage/postgres/repository.go`) - CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏
- ‚úÖ HTTP handlers (`handler/handler.go`) - –ø–æ–ª–Ω—ã–π REST API —Å Swagger –∞–Ω–Ω–æ—Ç–∞—Ü–∏—è–º–∏
- ‚úÖ –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã –∏ –º–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö
- [ ] –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –º–∞—Ä—à—Ä—É—Ç–æ–≤ –≤ –æ—Å–Ω–æ–≤–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏
- [ ] Swagger –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è (–∞–≤—Ç–æ–≥–µ–Ω–µ—Ä–∞—Ü–∏—è)

### üìã –ü—Ä–µ–¥—Å—Ç–æ–∏—Ç –≤—ã–ø–æ–ª–Ω–∏—Ç—å

#### 4. API Endpoints ‚úÖ
- ‚úÖ POST `/api/v1/postexpress/calculate-rate` - —Ä–∞—Å—á–µ—Ç —Å—Ç–æ–∏–º–æ—Å—Ç–∏
- ‚úÖ GET `/api/v1/postexpress/locations/search` - –ø–æ–∏—Å–∫ –Ω–∞—Å–µ–ª–µ–Ω–Ω—ã—Ö –ø—É–Ω–∫—Ç–æ–≤
- ‚úÖ GET `/api/v1/postexpress/offices` - —Å–ø–∏—Å–æ–∫ –æ—Ç–¥–µ–ª–µ–Ω–∏–π
- ‚úÖ POST `/api/v1/postexpress/shipments` - —Å–æ–∑–¥–∞–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∏—è
- ‚úÖ GET `/api/v1/postexpress/shipments/{id}` - –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∏–∏
- ‚úÖ GET `/api/v1/postexpress/track/{tracking}` - –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ
- ‚úÖ GET `/api/v1/postexpress/shipments/{id}/label` - –ø–æ–ª—É—á–µ–Ω–∏–µ —ç—Ç–∏–∫–µ—Ç–∫–∏
- ‚úÖ POST `/api/v1/postexpress/shipments/{id}/cancel` - –æ—Ç–º–µ–Ω–∞ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∏—è
- ‚úÖ GET `/api/v1/postexpress/settings` - –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
- ‚úÖ PUT `/api/v1/postexpress/settings` - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫
- ‚úÖ GET `/api/v1/postexpress/shipments` - —Å–ø–∏—Å–æ–∫ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∏–π —Å —Ñ–∏–ª—å—Ç—Ä–∞–º–∏
- ‚úÖ PUT `/api/v1/postexpress/shipments/{id}/status` - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞
- ‚úÖ POST `/api/v1/postexpress/track/sync` - —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –≤—Å–µ—Ö –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∏–π

#### 5. –°–∫–ª–∞–¥ –∏ —Å–∞–º–æ–≤—ã–≤–æ–∑ ‚úÖ
- ‚úÖ GET `/api/v1/postexpress/warehouse` - —Å–ø–∏—Å–æ–∫ —Å–∫–ª–∞–¥–æ–≤
- ‚úÖ GET `/api/v1/postexpress/warehouse/{code}` - –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–∫–ª–∞–¥–µ
- ‚úÖ POST `/api/v1/postexpress/warehouse/pickup-orders` - —Å–æ–∑–¥–∞–Ω–∏–µ –∑–∞–∫–∞–∑–∞ –Ω–∞ —Å–∞–º–æ–≤—ã–≤–æ–∑
- ‚úÖ GET `/api/v1/postexpress/warehouse/pickup-orders/{id}` - –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∑–∞–∫–∞–∑–µ
- ‚úÖ GET `/api/v1/postexpress/warehouse/pickup-orders/code/{code}` - –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –ø–æ –∫–æ–¥—É
- ‚úÖ POST `/api/v1/postexpress/warehouse/pickup-orders/{id}/confirm` - –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –≤—ã–¥–∞—á–∏
- ‚úÖ POST `/api/v1/postexpress/warehouse/pickup-orders/{id}/cancel` - –æ—Ç–º–µ–Ω–∞ –∑–∞–∫–∞–∑–∞

#### 6. Frontend –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã ‚úÖ
- ‚úÖ `PostExpressDeliverySelector` - –≤—ã–±–æ—Ä —Å–ø–æ—Å–æ–±–∞ –¥–æ—Å—Ç–∞–≤–∫–∏ (–∫—É—Ä—å–µ—Ä/–æ—Ç–¥–µ–ª–µ–Ω–∏–µ/—Å–∫–ª–∞–¥)
- ‚úÖ `PostExpressAddressForm` - —Ñ–æ—Ä–º–∞ –∞–¥—Ä–µ—Å–∞ –¥–æ—Å—Ç–∞–≤–∫–∏ —Å –ø–æ–∏—Å–∫–æ–º –≥–æ—Ä–æ–¥–æ–≤
- ‚úÖ `PostExpressRateCalculator` - –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä —Å—Ç–æ–∏–º–æ—Å—Ç–∏ —Å –¥–µ—Ç–∞–ª–∏–∑–∞—Ü–∏–µ–π
- ‚úÖ `PostExpressOfficeSelector` - –≤—ã–±–æ—Ä –æ—Ç–¥–µ–ª–µ–Ω–∏—è —Å –∫–∞—Ä—Ç–æ–π –∏ —Ñ–∏–ª—å—Ç—Ä–∞–º–∏
- ‚úÖ `PostExpressTracker` - –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –ø–æ—Å—ã–ª–∫–∏ —Å –∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ–º
- ‚úÖ `PostExpressPickupCode` - –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∫–æ–¥–∞ —Å–∞–º–æ–≤—ã–≤–æ–∑–∞ —Å QR
- ‚úÖ `PostExpressDeliveryFlow` - –æ–±—ä–µ–¥–∏–Ω—è—é—â–∏–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –ø—Ä–æ—Ü–µ—Å—Å–∞ –¥–æ—Å—Ç–∞–≤–∫–∏
- ‚úÖ –ü—Ä–∏–º–µ—Ä —Å—Ç—Ä–∞–Ω–∏—Ü–∞ `/examples/delivery-postexpress` –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏

#### 7. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ checkout
- [ ] –î–æ–±–∞–≤–∏—Ç—å —à–∞–≥ –≤—ã–±–æ—Ä–∞ –¥–æ—Å—Ç–∞–≤–∫–∏ –≤ –ø—Ä–æ—Ü–µ—Å—Å –∑–∞–∫–∞–∑–∞
- [ ] –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∞–¥—Ä–µ—Å–∞ –¥–æ—Å—Ç–∞–≤–∫–∏
- [ ] –†–∞—Å—á–µ—Ç –æ–±—â–µ–π —Å—Ç–æ–∏–º–æ—Å—Ç–∏ —Å –¥–æ—Å—Ç–∞–≤–∫–æ–π
- [ ] –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–æ–¥–∞ —Å–∞–º–æ–≤—ã–≤–æ–∑–∞

#### 8. –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å
- [ ] –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∏–π
- [ ] –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞–º–∏
- [ ] –ü–µ—á–∞—Ç—å —ç—Ç–∏–∫–µ—Ç–æ–∫
- [ ] –ú–∞—Å—Å–æ–≤–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞
- [ ] –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –¥–æ—Å—Ç–∞–≤–æ–∫

#### 9. –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
- [ ] SMS –ø—Ä–∏ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ –∫ —Å–∞–º–æ–≤—ã–≤–æ–∑—É
- [ ] Email —Å —Ç—Ä–µ–∫–∏–Ω–≥-–Ω–æ–º–µ—Ä–æ–º
- [ ] Push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ —Å—Ç–∞—Ç—É—Å–µ –¥–æ—Å—Ç–∞–≤–∫–∏

#### 10. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- [ ] Unit —Ç–µ—Å—Ç—ã –¥–ª—è —Å–µ—Ä–≤–∏—Å–æ–≤
- [ ] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã API
- [ ] E2E —Ç–µ—Å—Ç—ã checkout —Å –¥–æ—Å—Ç–∞–≤–∫–æ–π
- [ ] –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ sandbox Post Express

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (.env)
```bash
# Post Express API
POST_EXPRESS_API_USERNAME=SVE_TU_API
POST_EXPRESS_API_PASSWORD=<encrypted>
POST_EXPRESS_API_ENDPOINT=https://wsp.postexpress.rs/api/Transakcija
POST_EXPRESS_TEST_MODE=true

# Warehouse
WAREHOUSE_DEFAULT_CODE=NS-MAIN-01
WAREHOUSE_PICKUP_EXPIRY_DAYS=7
```

### –ö–ª—é—á–µ–≤—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
- WSP Web API –æ—Ç Post Express
- QR –∫–æ–¥ –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä –¥–ª—è —Å–∞–º–æ–≤—ã–≤–æ–∑–∞
- SMS/Email —Å–µ—Ä–≤–∏—Å—ã –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

## –†–∏—Å–∫–∏ –∏ –ø—Ä–æ–±–ª–µ–º—ã
- ‚ö†Ô∏è –ù–µ–æ–±—Ö–æ–¥–∏–º—ã —Ä–µ–∞–ª—å–Ω—ã–µ —É—á–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –æ—Ç Post Express
- ‚ö†Ô∏è –¢—Ä–µ–±—É–µ—Ç—Å—è —Ç–µ—Å—Ç–æ–≤—ã–π –¥–æ—Å—Ç—É–ø –∫ sandbox API
- ‚ö†Ô∏è –ù—É–∂–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ –∫–æ–¥–∞–º –æ—à–∏–±–æ–∫ WSP API

## –ö–æ–Ω—Ç–∞–∫—Ç—ã
- Post Express: commercial@postexpress.rs
- –ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–π –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–æ—Ä: –±—É–¥–µ—Ç –Ω–∞–∑–Ω–∞—á–µ–Ω –ø–æ—Å–ª–µ –ø–æ–¥–ø–∏—Å–∞–Ω–∏—è –¥–æ–≥–æ–≤–æ—Ä–∞