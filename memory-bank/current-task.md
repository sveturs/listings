# –ö–æ–Ω—Ç–µ–∫—Å—Ç —Å–µ—Å—Å–∏–∏: –°–∫—Ä—ã—Ç–∏–µ –∫–Ω–æ–ø–∫–∏ "–ö—É–ø–∏—Ç—å —Å–µ–π—á–∞—Å" –¥–ª—è —á–∞—Å—Ç–Ω—ã—Ö –æ–±—ä—è–≤–ª–µ–Ω–∏–π

## –°—Ç–∞—Ç—É—Å: ‚úÖ –ü–æ–ª–Ω–æ—Å—Ç—å—é –∑–∞–≤–µ—Ä—à–µ–Ω–æ

### –ó–∞–¥–∞—á–∞:
–ù–∞ –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ, —Å—Ç—Ä–∞–Ω–∏—Ü–µ –ø–æ–∏—Å–∫–∞ –∏ –≤ –±–ª–æ–∫–µ –ø–æ—Ö–æ–∂–∏—Ö –æ–±—ä—è–≤–ª–µ–Ω–∏–π –∫–Ω–æ–ø–∫–∞ "–ö—É–ø–∏—Ç—å —Å–µ–π—á–∞—Å" –¥–æ–ª–∂–Ω–∞ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å—Å—è —Ç–æ–ª—å–∫–æ –¥–ª—è –æ–±—ä—è–≤–ª–µ–Ω–∏–π —Å –≤–∏—Ç—Ä–∏–Ω. –î–ª—è —á–∞—Å—Ç–Ω—ã—Ö –æ–±—ä—è–≤–ª–µ–Ω–∏–π ("–∏–∑ —Ä—É–∫ –≤ —Ä—É–∫–∏") –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å —Ç–æ–ª—å–∫–æ –∫–Ω–æ–ø–∫–∞ —á–∞—Ç–∞.

### –ß—Ç–æ –±—ã–ª–æ —Å–¥–µ–ª–∞–Ω–æ:

1. **–û–±–Ω–æ–≤–ª–µ–Ω MarketplaceCard.tsx**:
   - –î–æ–±–∞–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `isOnlinePurchaseAvailable()` –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ç–∏–ø–∞ –æ–±—ä—è–≤–ª–µ–Ω–∏—è
   - –ö–Ω–æ–ø–∫–∞ "üí≥ –ö—É–ø–∏—Ç—å" —Ç–µ–ø–µ—Ä—å –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ `item.product_type === 'storefront' && item.storefront_id`
   - –ò–∑–º–µ–Ω–µ–Ω–∏—è –ø—Ä–∏–º–µ–Ω–µ–Ω—ã –∫–∞–∫ –¥–ª—è grid, —Ç–∞–∫ –∏ –¥–ª—è list —Ä–µ–∂–∏–º–æ–≤ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞

2. **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω MarketplaceList.tsx**:
   - –í —Ñ—É–Ω–∫—Ü–∏–∏ `convertToMarketplaceItem()` –¥–æ–±–∞–≤–ª–µ–Ω–æ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –º–∞–ø–ø–∏–Ω–≥ –ø–æ–ª–µ–π:
     - `product_type: unifiedItem.product_type` 
     - `storefront_id: unifiedItem.storefront?.id`
   - –≠—Ç–æ –∏—Å–ø—Ä–∞–≤–∏–ª–æ –ø—Ä–æ–±–ª–µ–º—É, –∫–æ–≥–¥–∞ –Ω–∞ –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ –ª–æ–≥–∏–∫–∞ –Ω–µ —Ä–∞–±–æ—Ç–∞–ª–∞

3. **–û–±–Ω–æ–≤–ª–µ–Ω SimilarListings.tsx**:
   - –ö–æ–º–ø–æ–Ω–µ–Ω—Ç –¥–æ–ø–æ–ª–Ω–µ–Ω –ª–æ–≥–∏–∫–æ–π –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –∫–Ω–æ–ø–æ–∫ –¥–µ–π—Å—Ç–≤–∏–π
   - –î–æ–±–∞–≤–ª–µ–Ω—ã —Ñ—É–Ω–∫—Ü–∏–∏ `handleBuyClick()`, `handleChatClick()` –∏ `isOnlinePurchaseAvailable()`
   - –ö–Ω–æ–ø–∫–∏ "üí≥ –ö—É–ø–∏—Ç—å" –∏ "üí¨ –ß–∞—Ç" —Ç–µ–ø–µ—Ä—å –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è –≤ –ø–æ—Ö–æ–∂–∏—Ö –æ–±—ä—è–≤–ª–µ–Ω–∏—è—Ö
   - –†–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ –≤ Grid, —Ç–∞–∫ –∏ –≤ List —Ä–µ–∂–∏–º–∞—Ö –ø—Ä–æ—Å–º–æ—Ç—Ä–∞
   - **–í–ê–ñ–ù–û–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï**: –õ–æ–≥–∏–∫–∞ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –ø–æ–∫—É–ø–∫–∏ –∏–∑–º–µ–Ω–µ–Ω–∞ —Å `listing.product_type === 'storefront' && listing.storefront_id` –Ω–∞ `listing.storefront_id != null && listing.storefront_id > 0`, —Ç–∞–∫ –∫–∞–∫ backend –Ω–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø–æ–ª–µ `product_type`

### –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏:

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö:**
- `MarketplaceItem.product_type?: 'marketplace' | 'storefront'` (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ)
- `MarketplaceItem.storefront_id?: number` (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ)
- –û–±—ä—è–≤–ª–µ–Ω–∏—è —Å –≤–∏—Ç—Ä–∏–Ω: –∏–º–µ—é—Ç `storefront_id > 0`
- –ß–∞—Å—Ç–Ω—ã–µ –æ–±—ä—è–≤–ª–µ–Ω–∏—è: `storefront_id` —Ä–∞–≤–Ω–æ `null` –∏–ª–∏ `undefined`

**–ó–∞—Ç—Ä–æ–Ω—É—Ç—ã–µ —Ñ–∞–π–ª—ã:**
- `/src/components/MarketplaceCard.tsx` - –æ—Å–Ω–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞ –∫–Ω–æ–ø–æ–∫
- `/src/components/marketplace/MarketplaceList.tsx` - –º–∞–ø–ø–∏–Ω–≥ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã
- `/src/components/marketplace/listing/SimilarListings.tsx` - –∫–Ω–æ–ø–∫–∏ –≤ –ø–æ—Ö–æ–∂–∏—Ö –æ–±—ä—è–≤–ª–µ–Ω–∏—è—Ö

### –†–µ–∑—É–ª—å—Ç–∞—Ç:
- ‚úÖ –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞: –∫–Ω–æ–ø–∫–∞ "–ö—É–ø–∏—Ç—å" —Ç–æ–ª—å–∫–æ –¥–ª—è –≤–∏—Ç—Ä–∏–Ω
- ‚úÖ –°—Ç—Ä–∞–Ω–∏—Ü–∞ –ø–æ–∏—Å–∫–∞: –∫–Ω–æ–ø–∫–∞ "–ö—É–ø–∏—Ç—å" —Ç–æ–ª—å–∫–æ –¥–ª—è –≤–∏—Ç—Ä–∏–Ω  
- ‚úÖ –ü–æ—Ö–æ–∂–∏–µ –æ–±—ä—è–≤–ª–µ–Ω–∏—è: –∫–Ω–æ–ø–∫–∏ "–ö—É–ø–∏—Ç—å" (–¥–ª—è –≤–∏—Ç—Ä–∏–Ω) –∏ "–ß–∞—Ç" (–¥–ª—è –≤—Å–µ—Ö)
- ‚úÖ Grid –∏ List —Ä–µ–∂–∏–º—ã: –ª–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ –æ–±–æ–∏—Ö
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∏ –∫–∞—á–µ—Å—Ç–≤–∞ –∫–æ–¥–∞ –ø—Ä–æ–π–¥–µ–Ω—ã (format, lint, build)

### –ì–æ—Ç–æ–≤–æ –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é:
–ò–∑–º–µ–Ω–µ–Ω–∏—è –≥–æ—Ç–æ–≤—ã –∫ —Ñ–∏–Ω–∞–ª—å–Ω–æ–º—É —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é –∏ –º–æ–≥—É—Ç –±—ã—Ç—å –∑–∞–∫–æ–º–º–∏—á–µ–Ω—ã –≤ –≤–µ—Ç–∫–µ feature/dev-20250705-082520.

## –ö–æ–Ω—Ç—Ä–æ–ª—å–Ω—ã–π —Å–ø–∏—Å–æ–∫: (05.07.2025)
- ‚úÖ –ù–∞–π—Ç–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç SimilarListings.tsx
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ –∫–Ω–æ–ø–∫—É "üí≥ –ö—É–ø–∏—Ç—å" –¥–ª—è –æ–±—ä—è–≤–ª–µ–Ω–∏–π —Å –≤–∏—Ç—Ä–∏–Ω 
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ –∫–Ω–æ–ø–∫—É "üí¨ –ß–∞—Ç" –¥–ª—è –≤—Å–µ—Ö –æ–±—ä—è–≤–ª–µ–Ω–∏–π
- ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç –≤ Grid –∏ List —Ä–µ–∂–∏–º–∞—Ö
- ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –ø–æ–∫—É–ø–∫–∏ (—É–±—Ä–∞–Ω–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –æ—Ç –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ –ø–æ–ª—è product_type)
- ‚úÖ –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ, –ª–∏–Ω—Ç–∏–Ω–≥, —Å–±–æ—Ä–∫–∞ - —É—Å–ø–µ—à–Ω–æ