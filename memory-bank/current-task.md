# –¢–µ–∫—É—â–∞—è –∑–∞–¥–∞—á–∞: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Ä–µ–∞–ª—å–Ω—ã—Ö –∏–∑–æ—Ö—Ä–æ–Ω —Å Mapbox API

## –°—Ç–∞—Ç—É—Å: ‚úÖ –ü–û–õ–ù–û–°–¢–¨–Æ –ó–ê–í–ï–†–®–ï–ù–û

### üéØ –û—Å–Ω–æ–≤–Ω—ã–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è:
1. ‚úÖ **–†–µ–∞–ª—å–Ω—ã–µ –∏–∑–æ—Ö—Ä–æ–Ω—ã** - –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω Mapbox Isochrone API
2. ‚úÖ **–£—á–µ—Ç –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏–π** - –∏–∑–æ—Ö—Ä–æ–Ω—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ–±—Ö–æ–¥—è—Ç —Ä–µ–∫–∏, –¥–æ—Ä–æ–≥–∏, –∑–¥–∞–Ω–∏—è
3. ‚úÖ **–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –º–∞—Ä–∫–µ—Ä–æ–≤** - –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –æ–±—ä—è–≤–ª–µ–Ω–∏—è –≤ –∑–æ–Ω–µ –ø–µ—à–µ–π –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏
4. ‚úÖ **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è drag** - –∏–∑–æ—Ö—Ä–æ–Ω –ø–µ—Ä–µ—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ –æ—Ç–ø—É—Å–∫–∞–Ω–∏—è –º–∞—Ä–∫–µ—Ä–∞
5. ‚úÖ **–ü–ª–∞–≤–Ω–∞—è –∞–Ω–∏–º–∞—Ü–∏—è** - —É–±—Ä–∞–Ω–æ —á–µ—Ä–Ω–æ–µ –º–∏–≥–∞–Ω–∏–µ, –¥–æ–±–∞–≤–ª–µ–Ω—ã –ø–µ—Ä–µ—Ö–æ–¥—ã
6. ‚úÖ **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –≤—Ä–µ–º–µ–Ω–∏** - –≤—ã–±–æ—Ä –≤—Ä–µ–º–µ–Ω–∏ —Ö–æ–¥—å–±—ã 5, 10, 15, 20, 30 –º–∏–Ω—É—Ç

### üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —É–ª—É—á—à–µ–Ω–∏—è:

#### API –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è:
- **Mapbox Isochrone API** —Å —É—á–µ—Ç–æ–º —Ä–µ–∞–ª—å–Ω–æ–π –¥–æ—Ä–æ–∂–Ω–æ–π —Å–µ—Ç–∏
- **Fallback —Å–∏—Å—Ç–µ–º–∞** –Ω–∞ –ª–æ–∫–∞–ª—å–Ω—É—é –≥–µ–Ω–µ—Ä–∞—Ü–∏—é –ø—Ä–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ API
- **–ì–µ–æ–º–µ—Ç—Ä–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞** —Ç–æ—á–µ–∫ –≤ –ø–æ–ª–∏–≥–æ–Ω–µ —á–µ—Ä–µ–∑ `@turf/boolean-point-in-polygon`

#### UX —É–ª—É—á—à–µ–Ω–∏—è:
- **Drag optimization**: –∏–∑–æ—Ö—Ä–æ–Ω –Ω–µ –º–µ—Ä—Ü–∞–µ—Ç –ø—Ä–∏ –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏–∏ –º–∞—Ä–∫–µ—Ä–∞
- **Smooth transitions**: –ø–ª–∞–≤–Ω–∞—è —Å–º–µ–Ω–∞ –∏–∑–æ—Ö—Ä–æ–Ω–æ–≤ –±–µ–∑ —á–µ—Ä–Ω–æ–≥–æ –º–∏–≥–∞–Ω–∏—è
- **Loading indicators**: –Ω–µ–Ω–∞–≤—è–∑—á–∏–≤—ã–π –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –≤ —É–≥–ª—É –∫–∞—Ä—Ç—ã
- **Visual feedback**: —Ä–∞–∑–Ω—ã–µ —Ü–≤–µ—Ç–∞ –¥–ª—è —Ä–∞–¥–∏—É—Å–∞ (—Å–∏–Ω–∏–π) –∏ –∏–∑–æ—Ö—Ä–æ–Ω–∞ (–∑–µ–ª–µ–Ω—ã–π)

#### Performance:
- **Debounced updates**: –∏–∑–æ—Ö—Ä–æ–Ω –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø—Ä–∏ dragEnd
- **State management**: –ø—Ä–∞–≤–∏–ª—å–Ω–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –º–µ–∂–¥—É –∫–∞—Ä—Ç–æ–π –∏ —Ñ–∏–ª—å—Ç—Ä–∞–º–∏
- **Memory efficiency**: —Å—Ç–∞—Ä—ã–π –∏–∑–æ—Ö—Ä–æ–Ω –∑–∞–º–µ–Ω—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏ –Ω–æ–≤–æ–≥–æ

### üìÅ –ö–ª—é—á–µ–≤—ã–µ —Ñ–∞–π–ª—ã –∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è:

**–ù–æ–≤—ã–µ –º–æ–¥—É–ª–∏:**
- `/frontend/svetu/src/components/GIS/utils/mapboxIsochrone.ts` - API –º–æ–¥—É–ª—å –¥–ª—è –∏–∑–æ—Ö—Ä–æ–Ω
  - `getMapboxIsochrone()` - –æ—Å–Ω–æ–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è API
  - `isPointInIsochrone()` - –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ç–æ—á–∫–∏ –≤ –ø–æ–ª–∏–≥–æ–Ω–µ
  - `checkMapboxIsochroneAvailability()` - –ø—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ API

**–û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:**
- `/frontend/svetu/src/components/GIS/Map/InteractiveMap.tsx`
  - –°—Ç—Ä–æ–∫–∏ 285-302: drag optimization —Å isDragging state
  - –°—Ç—Ä–æ–∫–∏ 307-362: –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –∏–∑–æ—Ö—Ä–æ–Ω
  - –°—Ç—Ä–æ–∫–∏ 435-453: –ø–ª–∞–≤–Ω—ã–µ –ø–µ—Ä–µ—Ö–æ–¥—ã –¥–ª—è —Å–ª–æ–µ–≤
  - –°—Ç—Ä–æ–∫–∏ 594-618: —É–ª—É—á—à–µ–Ω–Ω—ã–µ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã –∑–∞–≥—Ä—É–∑–∫–∏

- `/frontend/svetu/src/app/[locale]/map/page.tsx`
  - –°—Ç—Ä–æ–∫–∏ 16, 120-121: –∏–º–ø–æ—Ä—Ç –∏ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∏–∑–æ—Ö—Ä–æ–Ω–∞
  - –°—Ç—Ä–æ–∫–∏ 409-428: —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –º–∞—Ä–∫–µ—Ä–æ–≤ –ø–æ –∏–∑–æ—Ö—Ä–æ–Ω—É
  - –°—Ç—Ä–æ–∫–∞ 655: –ø–µ—Ä–µ–¥–∞—á–∞ onIsochroneChange callback

- `/frontend/svetu/src/components/GIS/utils/isochrone.ts`
  - –°—Ç—Ä–æ–∫–∏ 132-137: –¥–æ–±–∞–≤–ª–µ–Ω–∞ generateLocalIsochrone –¥–ª—è fallback

**–ö–æ–Ω—Ç—Ä–æ–ª—ã:**
- `/frontend/svetu/src/components/GIS/Map/WalkingAccessibilityControl.tsx`
  - –£–∂–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –≤—Ä–µ–º–µ–Ω–∏ —Ö–æ–¥—å–±—ã

### üåü –†–µ–∑—É–ª—å—Ç–∞—Ç:
–ü–æ–ª–Ω–æ—Å—Ç—å—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –∏–∑–æ—Ö—Ä–æ–Ω, –∫–æ—Ç–æ—Ä–∞—è:
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç **—Ä–µ–∞–ª—å–Ω—ã–µ –∑–æ–Ω—ã –ø–µ—à–µ–π –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏** —Å —É—á–µ—Ç–æ–º –î—É–Ω–∞—è –∏ –¥—Ä—É–≥–∏—Ö –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏–π
- **–§–∏–ª—å—Ç—Ä—É–µ—Ç –æ–±—ä—è–≤–ª–µ–Ω–∏—è** —Ç–æ–ª—å–∫–æ –≤ –ø—Ä–µ–¥–µ–ª–∞—Ö –∏–∑–æ—Ö—Ä–æ–Ω–∞
- –†–∞–±–æ—Ç–∞–µ—Ç **–ø–ª–∞–≤–Ω–æ –∏ –±—ã—Å—Ç—Ä–æ** –±–µ–∑ –º–∏–≥–∞–Ω–∏—è —ç–∫—Ä–∞–Ω–∞
- –ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç **–≥–∏–±–∫–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏** –≤—Ä–µ–º–µ–Ω–∏ —Ö–æ–¥—å–±—ã
- –ò–º–µ–µ—Ç **–Ω–∞–¥–µ–∂–Ω—É—é fallback —Å–∏—Å—Ç–µ–º—É** –ø—Ä–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ API

### üìã –ü—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã–µ –∫–µ–π—Å—ã:
‚úÖ –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –º–µ–∂–¥—É —Ä–∞–¥–∏—É—Å–æ–º –∏ –ø–µ—à–µ—Ö–æ–¥–Ω—ã–º —Ä–µ–∂–∏–º–æ–º  
‚úÖ –ò–∑–º–µ–Ω–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ —Ö–æ–¥—å–±—ã (5-30 –º–∏–Ω—É—Ç)  
‚úÖ –ü–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏–µ –º–∞—Ä–∫–µ—Ä–∞ –ø–æ–∑–∏—Ü–∏–∏ –±–µ–∑ –º–µ—Ä—Ü–∞–Ω–∏—è  
‚úÖ –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –º–∞—Ä–∫–µ—Ä–æ–≤ —Ç–æ–ª—å–∫–æ –≤ –∑–æ–Ω–µ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏  
‚úÖ –£—á–µ—Ç –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏–π (—Ä–µ–∫–∏, –¥–æ—Ä–æ–≥–∏)  
‚úÖ Fallback –Ω–∞ –ª–æ–∫–∞–ª—å–Ω—É—é –≥–µ–Ω–µ—Ä–∞—Ü–∏—é –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö API  
‚úÖ –ü–ª–∞–≤–Ω–∞—è –∞–Ω–∏–º–∞—Ü–∏—è –±–µ–∑ —á–µ—Ä–Ω–æ–≥–æ –º–∏–≥–∞–Ω–∏—è

–ó–∞–¥–∞—á–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é –≤—ã–ø–æ–ª–Ω–µ–Ω–∞ –∏ –≥–æ—Ç–æ–≤–∞ –∫ –ø—Ä–æ–¥–∞–∫—à–Ω—É!