# –ü–∞—Å–ø–æ—Ä—Ç –±–∏–∑–Ω–µ—Å-–ø—Ä–æ—Ü–µ—Å—Å–∞: –ò—Å—Ç–æ—Ä–∏—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π

## üéØ –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ –ø—Ä–æ—Ü–µ—Å—Å–∞

–û–±–µ—Å–ø–µ—á–µ–Ω–∏–µ –ø–æ–ª–Ω–æ–π –ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç–∏ –∏ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –∏—Å—Ç–æ—Ä–∏–∏ –≤—Å–µ—Ö —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –Ω–∞ –ø–ª–∞—Ç—Ñ–æ—Ä–º–µ Sve Tu —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é –¥–µ—Ç–∞–ª—å–Ω–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞, —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏, —ç–∫—Å–ø–æ—Ä—Ç–∞ –¥–∞–Ω–Ω—ã—Ö –∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã—Ö –æ—Ç—á–µ—Ç–æ–≤ –¥–ª—è –Ω–∞–ª–æ–≥–æ–≤–æ–≥–æ —É—á–µ—Ç–∞.

## üîÑ –°—Ö–µ–º–∞ –ø—Ä–æ—Ü–µ—Å—Å–∞

### 1. **–ó–∞–ø–∏—Å—å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π**
```mermaid
graph LR
    A[–§–∏–Ω–∞–Ω—Å–æ–≤–∞—è –æ–ø–µ—Ä–∞—Ü–∏—è] --> B[–°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–ø–∏—Å–∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏]
    B --> C[–í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö]
    C --> D[–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö]
    D --> E[–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –ë–î]
    E --> F[–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∞–≥—Ä–µ–≥–∞—Ç–æ–≤]
    F --> G[–£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è]
    G --> H[–ò–Ω–¥–µ–∫—Å–∞—Ü–∏—è –¥–ª—è –ø–æ–∏—Å–∫–∞]
```

### 2. **–ü–æ–ª—É—á–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–∏**
```mermaid
graph TD
    A[–ó–∞–ø—Ä–æ—Å –∏—Å—Ç–æ—Ä–∏–∏] --> B[–ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞]
    B --> C[–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ —Ñ–∏–ª—å—Ç—Ä–æ–≤]
    C --> D[–°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö]
    D --> E[–ü–∞–≥–∏–Ω–∞—Ü–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤]
    E --> F[–î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Å–≤—è–∑–∞–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö]
    F --> G[–§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç–≤–µ—Ç–∞]
    G --> H[–ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏]
```

### 3. **–≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö**
```mermaid
graph TD
    A[–ó–∞–ø—Ä–æ—Å —ç–∫—Å–ø–æ—Ä—Ç–∞] --> B[–í—ã–±–æ—Ä —Ñ–æ—Ä–º–∞—Ç–∞]
    B --> C{–†–∞–∑–º–µ—Ä –¥–∞–Ω–Ω—ã—Ö}
    C -->|–ú–∞–ª—ã–π| D[–°–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π —ç–∫—Å–ø–æ—Ä—Ç]
    C -->|–ë–æ–ª—å—à–æ–π| E[–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –∑–∞–¥–∞—á–∞]
    D --> F[–ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ñ–∞–π–ª–∞]
    E --> G[–£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏]
    F --> H[–°–∫–∞—á–∏–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–∞]
    G --> H
    H --> I[–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —ç–∫—Å–ø–æ—Ä—Ç–∞]
```

### 4. **–ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –∏ –æ—Ç—á–µ—Ç—ã**
```mermaid
graph LR
    A[–î–∞–Ω–Ω—ã–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π] --> B[–ê–≥—Ä–µ–≥–∞—Ü–∏—è –ø–æ –ø–µ—Ä–∏–æ–¥–∞–º]
    B --> C[–†–∞—Å—á–µ—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏]
    C --> D[–°–æ–∑–¥–∞–Ω–∏–µ —á–∞—Ä—Ç–æ–≤]
    D --> E[–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç—á–µ—Ç–æ–≤]
    E --> F[–≠–∫—Å–ø–æ—Ä—Ç –¥–ª—è –±—É—Ö–≥–∞–ª—Ç–µ—Ä–∏–∏]
    F --> G[–ù–∞–ª–æ–≥–æ–≤–∞—è –æ—Ç—á–µ—Ç–Ω–æ—Å—Ç—å]
```

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

### **Frontend –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã**
- **TransactionHistory** - –æ—Å–Ω–æ–≤–Ω–æ–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –∏—Å—Ç–æ—Ä–∏–∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π
- **TransactionFilters** - –ø–∞–Ω–µ–ª—å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –∏ –ø–æ–∏—Å–∫–∞
- **TransactionCard** - –∫–∞—Ä—Ç–æ—á–∫–∞ –æ—Ç–¥–µ–ª—å–Ω–æ–π —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
- **TransactionDetails** - –¥–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
- **ExportButton** - –∫–Ω–æ–ø–∫–∞ —ç–∫—Å–ø–æ—Ä—Ç–∞ –¥–∞–Ω–Ω—ã—Ö
- **TransactionChart** - –≥—Ä–∞—Ñ–∏–∫–∏ –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–∞
- **DateRangePicker** - –≤—ã–±–æ—Ä –ø–µ—Ä–∏–æ–¥–∞ –≤—Ä–µ–º–µ–Ω–∏

### **Backend —Å–µ—Ä–≤–∏—Å—ã**
- **TransactionHistoryService** - –æ—Å–Ω–æ–≤–Ω–æ–π —Å–µ—Ä–≤–∏—Å –∏—Å—Ç–æ—Ä–∏–∏
- **TransactionExportService** - —Å–µ—Ä–≤–∏—Å —ç–∫—Å–ø–æ—Ä—Ç–∞ –¥–∞–Ω–Ω—ã—Ö
- **TransactionAnalyticsService** - –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π
- **TransactionSearchService** - –ø–æ–∏—Å–∫ –∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è
- **ReportGeneratorService** - –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç—á–µ—Ç–æ–≤
- **TaxReportService** - –Ω–∞–ª–æ–≥–æ–≤—ã–µ –æ—Ç—á–µ—Ç—ã

### **–ë–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö**
- **transaction_history** - –æ—Å–Ω–æ–≤–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ –≤—Å–µ—Ö —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π
- **transaction_metadata** - –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π
- **transaction_categories** - –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –æ–ø–µ—Ä–∞—Ü–∏–π
- **export_requests** - –∑–∞–ø—Ä–æ—Å—ã –Ω–∞ —ç–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö
- **user_analytics** - –∞–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- **tax_reports** - —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –Ω–∞–ª–æ–≥–æ–≤—ã–µ –æ—Ç—á–µ—Ç—ã

## üîó –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

### **TransactionHistoryService - –æ—Å–Ω–æ–≤–Ω–æ–π —Å–µ—Ä–≤–∏—Å**
```go
type TransactionHistoryService struct {
    repository    TransactionRepositoryInterface
    export        ExportServiceInterface
    analytics     AnalyticsServiceInterface
    notification  NotificationServiceInterface
    cache         CacheInterface
    logger        logger.Logger
    config        *TransactionConfig
}

type TransactionConfig struct {
    MaxPageSize          int           // 100
    DefaultPageSize      int           // 20
    MaxExportRecords     int           // 10000
    CacheTimeout         time.Duration // 5 –º–∏–Ω—É—Ç
    AsyncExportThreshold int           // 1000 –∑–∞–ø–∏—Å–µ–π
    RetentionPeriod      time.Duration // 7 –ª–µ—Ç
}

// –û—Å–Ω–æ–≤–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
type TransactionRecord struct {
    ID                int64                  `json:"id"`
    UserID            int                    `json:"user_id"`
    Type              string                 `json:"type"` // deposit, withdrawal, payment, refund, commission
    Category          string                 `json:"category"`
    Amount            decimal.Decimal        `json:"amount"`
    Currency          string                 `json:"currency"`
    Description       string                 `json:"description"`
    Status            string                 `json:"status"`
    Reference         string                 `json:"reference"`
    RelatedEntityType string                 `json:"related_entity_type"` // listing, escrow, withdrawal
    RelatedEntityID   *int64                 `json:"related_entity_id"`
    Metadata          map[string]interface{} `json:"metadata"`
    CreatedAt         time.Time              `json:"created_at"`
    UpdatedAt         time.Time              `json:"updated_at"`
    
    // –°–≤—è–∑–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
    RelatedListing    *models.MarketplaceListing `json:"related_listing,omitempty"`
    RelatedEscrow     *models.EscrowAccount      `json:"related_escrow,omitempty"`
    CounterpartyUser  *models.User               `json:"counterparty_user,omitempty"`
}

// –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–ø–∏—Å–∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
func (s *TransactionHistoryService) CreateTransactionRecord(ctx context.Context, req CreateTransactionRequest) (*TransactionRecord, error) {
    // 1. –í–∞–ª–∏–¥–∞—Ü–∏—è –∑–∞–ø—Ä–æ—Å–∞
    if err := s.validateTransactionRequest(req); err != nil {
        return nil, fmt.Errorf("validation failed: %w", err)
    }

    // 2. –°–æ–∑–¥–∞–Ω–∏–µ –æ—Å–Ω–æ–≤–Ω–æ–π –∑–∞–ø–∏—Å–∏
    transaction := &TransactionRecord{
        UserID:            req.UserID,
        Type:              req.Type,
        Category:          req.Category,
        Amount:            req.Amount,
        Currency:          req.Currency,
        Description:       req.Description,
        Status:            req.Status,
        Reference:         req.Reference,
        RelatedEntityType: req.RelatedEntityType,
        RelatedEntityID:   req.RelatedEntityID,
        Metadata:          req.Metadata,
        CreatedAt:         time.Now(),
        UpdatedAt:         time.Now(),
    }

    // 3. –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö
    err := s.repository.CreateTransaction(ctx, transaction)
    if err != nil {
        return nil, fmt.Errorf("failed to create transaction: %w", err)
    }

    // 4. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∞–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
    go s.updateUserAnalytics(context.Background(), req.UserID, transaction)

    // 5. –ò–Ω–¥–µ–∫—Å–∞—Ü–∏—è –¥–ª—è –ø–æ–∏—Å–∫–∞
    go s.indexTransactionForSearch(context.Background(), transaction)

    // 6. –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
    if req.SendNotification {
        go s.sendTransactionNotification(context.Background(), transaction)
    }

    return transaction, nil
}

// –ü–æ–ª—É—á–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π —Å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π
func (s *TransactionHistoryService) GetUserTransactionHistory(ctx context.Context, req GetHistoryRequest) (*TransactionHistoryResponse, error) {
    // 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞
    if err := s.checkAccessPermissions(ctx, req.UserID, req.RequestedBy); err != nil {
        return nil, fmt.Errorf("access denied: %w", err)
    }

    // 2. –ü–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ —Ñ–∏–ª—å—Ç—Ä–æ–≤
    filters := s.buildFilters(req)

    // 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–µ—à–∞
    cacheKey := s.generateCacheKey(req)
    if cached, err := s.cache.Get(ctx, cacheKey); err == nil {
        var response TransactionHistoryResponse
        if err := json.Unmarshal(cached, &response); err == nil {
            return &response, nil
        }
    }

    // 4. –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –∏–∑ –±–∞–∑—ã
    transactions, total, err := s.repository.GetTransactionsWithFilters(ctx, filters, req.Pagination)
    if err != nil {
        return nil, fmt.Errorf("failed to get transactions: %w", err)
    }

    // 5. –ó–∞–≥—Ä—É–∑–∫–∞ —Å–≤—è–∑–∞–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
    err = s.loadRelatedData(ctx, transactions)
    if err != nil {
        s.logger.Warn("Failed to load related data", "error", err)
    }

    // 6. –†–∞—Å—á–µ—Ç –∞–≥—Ä–µ–≥–∞—Ç–æ–≤ –¥–ª—è –ø–µ—Ä–∏–æ–¥–∞
    aggregates, err := s.calculatePeriodAggregates(ctx, req.UserID, filters.DateFrom, filters.DateTo)
    if err != nil {
        s.logger.Warn("Failed to calculate aggregates", "error", err)
    }

    response := &TransactionHistoryResponse{
        Transactions: transactions,
        Pagination: PaginationResponse{
            Page:        req.Pagination.Page,
            PageSize:    req.Pagination.PageSize,
            Total:       total,
            TotalPages:  (total + req.Pagination.PageSize - 1) / req.Pagination.PageSize,
        },
        Aggregates:   aggregates,
        Filters:      req.Filters,
    }

    // 7. –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
    responseData, _ := json.Marshal(response)
    s.cache.Set(ctx, cacheKey, responseData, s.config.CacheTimeout)

    return response, nil
}

// –ü–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ —Ñ–∏–ª—å—Ç—Ä–æ–≤
func (s *TransactionHistoryService) buildFilters(req GetHistoryRequest) TransactionFilters {
    filters := TransactionFilters{
        UserID:   req.UserID,
        DateFrom: req.Filters.DateFrom,
        DateTo:   req.Filters.DateTo,
    }

    // –§–∏–ª—å—Ç—Ä –ø–æ —Ç–∏–ø–∞–º —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π
    if len(req.Filters.Types) > 0 {
        filters.Types = req.Filters.Types
    }

    // –§–∏–ª—å—Ç—Ä –ø–æ —Å—Ç–∞—Ç—É—Å–∞–º
    if len(req.Filters.Statuses) > 0 {
        filters.Statuses = req.Filters.Statuses
    }

    // –§–∏–ª—å—Ç—Ä –ø–æ —Å—É–º–º–µ
    if req.Filters.MinAmount != nil {
        filters.MinAmount = req.Filters.MinAmount
    }
    if req.Filters.MaxAmount != nil {
        filters.MaxAmount = req.Filters.MaxAmount
    }

    // –§–∏–ª—å—Ç—Ä –ø–æ –≤–∞–ª—é—Ç–∞–º
    if len(req.Filters.Currencies) > 0 {
        filters.Currencies = req.Filters.Currencies
    }

    // –¢–µ–∫—Å—Ç–æ–≤—ã–π –ø–æ–∏—Å–∫
    if req.Filters.SearchQuery != "" {
        filters.SearchQuery = req.Filters.SearchQuery
    }

    // –§–∏–ª—å—Ç—Ä –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º
    if len(req.Filters.Categories) > 0 {
        filters.Categories = req.Filters.Categories
    }

    return filters
}

// –ó–∞–≥—Ä—É–∑–∫–∞ —Å–≤—è–∑–∞–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
func (s *TransactionHistoryService) loadRelatedData(ctx context.Context, transactions []*TransactionRecord) error {
    // –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –ø–æ —Ç–∏–ø–∞–º —Å–≤—è–∑–∞–Ω–Ω—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤
    listingIDs := make([]int64, 0)
    escrowIDs := make([]int64, 0)
    userIDs := make([]int, 0)

    for _, tx := range transactions {
        if tx.RelatedEntityID != nil {
            switch tx.RelatedEntityType {
            case "listing":
                listingIDs = append(listingIDs, *tx.RelatedEntityID)
            case "escrow":
                escrowIDs = append(escrowIDs, *tx.RelatedEntityID)
            }
        }

        // –ü–æ–ª—É—á–µ–Ω–∏–µ –∫–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç–æ–≤ –∏–∑ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö
        if counterpartyID, exists := tx.Metadata["counterparty_user_id"]; exists {
            if id, ok := counterpartyID.(float64); ok {
                userIDs = append(userIDs, int(id))
            }
        }
    }

    // –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –æ–±—ä—è–≤–ª–µ–Ω–∏–π
    var listings map[int64]*models.MarketplaceListing
    if len(listingIDs) > 0 {
        listingsSlice, err := s.repository.GetListingsByIDs(ctx, listingIDs)
        if err != nil {
            return fmt.Errorf("failed to load listings: %w", err)
        }
        listings = make(map[int64]*models.MarketplaceListing)
        for _, listing := range listingsSlice {
            listings[listing.ID] = listing
        }
    }

    // –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö —ç—Å–∫—Ä–æ—É
    var escrows map[int64]*models.EscrowAccount
    if len(escrowIDs) > 0 {
        escrowsSlice, err := s.repository.GetEscrowsByIDs(ctx, escrowIDs)
        if err != nil {
            return fmt.Errorf("failed to load escrows: %w", err)
        }
        escrows = make(map[int64]*models.EscrowAccount)
        for _, escrow := range escrowsSlice {
            escrows[escrow.ID] = escrow
        }
    }

    // –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
    var users map[int]*models.User
    if len(userIDs) > 0 {
        usersSlice, err := s.repository.GetUsersByIDs(ctx, userIDs)
        if err != nil {
            return fmt.Errorf("failed to load users: %w", err)
        }
        users = make(map[int]*models.User)
        for _, user := range usersSlice {
            users[user.ID] = user
        }
    }

    // –ü—Ä–∏–≤—è–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –∫ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è–º
    for _, tx := range transactions {
        if tx.RelatedEntityID != nil {
            switch tx.RelatedEntityType {
            case "listing":
                if listing, exists := listings[*tx.RelatedEntityID]; exists {
                    tx.RelatedListing = listing
                }
            case "escrow":
                if escrow, exists := escrows[*tx.RelatedEntityID]; exists {
                    tx.RelatedEscrow = escrow
                }
            }
        }

        // –ü—Ä–∏–≤—è–∑–∫–∞ –∫–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç–æ–≤
        if counterpartyID, exists := tx.Metadata["counterparty_user_id"]; exists {
            if id, ok := counterpartyID.(float64); ok {
                if user, exists := users[int(id)]; exists {
                    tx.CounterpartyUser = user
                }
            }
        }
    }

    return nil
}
```

### **TransactionExportService - —ç–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö**
```go
// –≠–∫—Å–ø–æ—Ä—Ç –∏—Å—Ç–æ—Ä–∏–∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π
func (s *TransactionExportService) ExportTransactionHistory(ctx context.Context, req ExportRequest) (*ExportResult, error) {
    // 1. –í–∞–ª–∏–¥–∞—Ü–∏—è –∑–∞–ø—Ä–æ—Å–∞
    if err := s.validateExportRequest(req); err != nil {
        return nil, fmt.Errorf("validation failed: %w", err)
    }

    // 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–∏–º–∏—Ç–æ–≤ —ç–∫—Å–ø–æ—Ä—Ç–∞
    count, err := s.repository.CountTransactions(ctx, s.buildFiltersFromExportRequest(req))
    if err != nil {
        return nil, fmt.Errorf("failed to count transactions: %w", err)
    }

    if count > s.config.MaxExportRecords {
        return nil, fmt.Errorf("export.tooManyRecords: %d (max %d)", count, s.config.MaxExportRecords)
    }

    // 3. –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –º–µ—Ç–æ–¥–∞ —ç–∫—Å–ø–æ—Ä—Ç–∞
    if count > s.config.AsyncExportThreshold {
        return s.createAsyncExport(ctx, req, count)
    } else {
        return s.createSyncExport(ctx, req, count)
    }
}

// –°–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π —ç–∫—Å–ø–æ—Ä—Ç
func (s *TransactionExportService) createSyncExport(ctx context.Context, req ExportRequest, count int) (*ExportResult, error) {
    // 1. –ü–æ–ª—É—á–µ–Ω–∏–µ –≤—Å–µ—Ö –¥–∞–Ω–Ω—ã—Ö
    filters := s.buildFiltersFromExportRequest(req)
    transactions, _, err := s.repository.GetTransactionsWithFilters(ctx, filters, PaginationRequest{
        Page:     1,
        PageSize: count,
    })
    if err != nil {
        return nil, fmt.Errorf("failed to get transactions: %w", err)
    }

    // 2. –ó–∞–≥—Ä—É–∑–∫–∞ —Å–≤—è–∑–∞–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
    err = s.loadRelatedDataForExport(ctx, transactions)
    if err != nil {
        s.logger.Warn("Failed to load related data for export", "error", err)
    }

    // 3. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ñ–∞–π–ª–∞
    var fileData []byte
    var filename string
    var contentType string

    switch req.Format {
    case "csv":
        fileData, err = s.generateCSV(transactions)
        filename = fmt.Sprintf("transactions_%s_%s.csv", 
            req.DateFrom.Format("2006-01-02"), 
            req.DateTo.Format("2006-01-02"))
        contentType = "text/csv"
    case "xlsx":
        fileData, err = s.generateExcel(transactions)
        filename = fmt.Sprintf("transactions_%s_%s.xlsx", 
            req.DateFrom.Format("2006-01-02"), 
            req.DateTo.Format("2006-01-02"))
        contentType = "application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"
    case "pdf":
        fileData, err = s.generatePDF(transactions, req)
        filename = fmt.Sprintf("transactions_%s_%s.pdf", 
            req.DateFrom.Format("2006-01-02"), 
            req.DateTo.Format("2006-01-02"))
        contentType = "application/pdf"
    default:
        return nil, errors.New("export.unsupportedFormat")
    }

    if err != nil {
        return nil, fmt.Errorf("failed to generate file: %w", err)
    }

    // 4. –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ñ–∞–π–ª–∞ –≤–æ –≤—Ä–µ–º–µ–Ω–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ
    fileURL, err := s.storage.SaveTempFile(filename, fileData, contentType)
    if err != nil {
        return nil, fmt.Errorf("failed to save file: %w", err)
    }

    // 5. –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —ç–∫—Å–ø–æ—Ä—Ç–∞
    s.logExport(ctx, req.UserID, req.Format, count, "completed")

    return &ExportResult{
        Status:       "completed",
        DownloadURL:  fileURL,
        Filename:     filename,
        RecordCount:  count,
        ExpiresAt:    time.Now().Add(24 * time.Hour), // –§–∞–π–ª –¥–æ—Å—Ç—É–ø–µ–Ω 24 —á–∞—Å–∞
    }, nil
}

// –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π —ç–∫—Å–ø–æ—Ä—Ç
func (s *TransactionExportService) createAsyncExport(ctx context.Context, req ExportRequest, count int) (*ExportResult, error) {
    // 1. –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏ —ç–∫—Å–ø–æ—Ä—Ç–∞
    exportJob := &models.ExportRequest{
        UserID:      req.UserID,
        Format:      req.Format,
        Filters:     req.Filters,
        Status:      "queued",
        RecordCount: count,
        CreatedAt:   time.Now(),
    }

    err := s.repository.CreateExportRequest(ctx, exportJob)
    if err != nil {
        return nil, fmt.Errorf("failed to create export request: %w", err)
    }

    // 2. –ü–æ—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤ –æ—á–µ—Ä–µ–¥—å
    err = s.queue.Enqueue(ctx, ExportJob{
        ExportID: exportJob.ID,
        UserID:   req.UserID,
        Format:   req.Format,
        Filters:  req.Filters,
    })
    if err != nil {
        s.repository.UpdateExportStatus(ctx, exportJob.ID, "failed")
        return nil, fmt.Errorf("failed to enqueue export job: %w", err)
    }

    return &ExportResult{
        ExportID:    exportJob.ID,
        Status:      "queued",
        RecordCount: count,
        EstimatedTime: s.estimateExportTime(count, req.Format),
    }, nil
}

// –ì–µ–Ω–µ—Ä–∞—Ü–∏—è CSV —Ñ–∞–π–ª–∞
func (s *TransactionExportService) generateCSV(transactions []*TransactionRecord) ([]byte, error) {
    var buf bytes.Buffer
    writer := csv.NewWriter(&buf)

    // –ó–∞–≥–æ–ª–æ–≤–∫–∏
    headers := []string{
        "ID", "Date", "Type", "Category", "Amount", "Currency", 
        "Description", "Status", "Reference", "Counterparty",
        "Related Item", "Fee", "Balance After",
    }
    writer.Write(headers)

    // –î–∞–Ω–Ω—ã–µ
    for _, tx := range transactions {
        var counterparty, relatedItem, fee, balanceAfter string

        if tx.CounterpartyUser != nil {
            counterparty = tx.CounterpartyUser.Name
        }

        if tx.RelatedListing != nil {
            relatedItem = tx.RelatedListing.Title
        }

        if feeVal, exists := tx.Metadata["fee"]; exists {
            fee = fmt.Sprintf("%v", feeVal)
        }

        if balanceVal, exists := tx.Metadata["balance_after"]; exists {
            balanceAfter = fmt.Sprintf("%v", balanceVal)
        }

        record := []string{
            fmt.Sprintf("%d", tx.ID),
            tx.CreatedAt.Format("2006-01-02 15:04:05"),
            tx.Type,
            tx.Category,
            tx.Amount.String(),
            tx.Currency,
            tx.Description,
            tx.Status,
            tx.Reference,
            counterparty,
            relatedItem,
            fee,
            balanceAfter,
        }
        writer.Write(record)
    }

    writer.Flush()
    if err := writer.Error(); err != nil {
        return nil, fmt.Errorf("CSV generation error: %w", err)
    }

    return buf.Bytes(), nil
}

// –ì–µ–Ω–µ—Ä–∞—Ü–∏—è Excel —Ñ–∞–π–ª–∞
func (s *TransactionExportService) generateExcel(transactions []*TransactionRecord) ([]byte, error) {
    file := excelize.NewFile()
    
    // –°–æ–∑–¥–∞–Ω–∏–µ –ª–∏—Å—Ç–∞
    sheetName := "Transactions"
    file.NewSheet(sheetName)
    
    // –°—Ç–∏–ª–∏–∑–∞—Ü–∏—è –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤
    headerStyle, _ := file.NewStyle(&excelize.Style{
        Font: &excelize.Font{Bold: true},
        Fill: &excelize.Fill{Type: "pattern", Color: []string{"E8F4FD"}, Pattern: 1},
    })

    // –ó–∞–≥–æ–ª–æ–≤–∫–∏
    headers := []string{
        "ID", "–î–∞—Ç–∞", "–¢–∏–ø", "–ö–∞—Ç–µ–≥–æ—Ä–∏—è", "–°—É–º–º–∞", "–í–∞–ª—é—Ç–∞", 
        "–û–ø–∏—Å–∞–Ω–∏–µ", "–°—Ç–∞—Ç—É—Å", "–†–µ—Ñ–µ—Ä–µ–Ω—Å", "–ö–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç",
        "–°–≤—è–∑–∞–Ω–Ω—ã–π —Ç–æ–≤–∞—Ä", "–ö–æ–º–∏—Å—Å–∏—è", "–ë–∞–ª–∞–Ω—Å –ø–æ—Å–ª–µ",
    }

    for i, header := range headers {
        cell := fmt.Sprintf("%s1", string(rune('A'+i)))
        file.SetCellValue(sheetName, cell, header)
        file.SetCellStyle(sheetName, cell, cell, headerStyle)
    }

    // –î–∞–Ω–Ω—ã–µ
    for row, tx := range transactions {
        rowNum := row + 2
        
        file.SetCellValue(sheetName, fmt.Sprintf("A%d", rowNum), tx.ID)
        file.SetCellValue(sheetName, fmt.Sprintf("B%d", rowNum), tx.CreatedAt.Format("2006-01-02 15:04:05"))
        file.SetCellValue(sheetName, fmt.Sprintf("C%d", rowNum), tx.Type)
        file.SetCellValue(sheetName, fmt.Sprintf("D%d", rowNum), tx.Category)
        file.SetCellValue(sheetName, fmt.Sprintf("E%d", rowNum), tx.Amount.InexactFloat64())
        file.SetCellValue(sheetName, fmt.Sprintf("F%d", rowNum), tx.Currency)
        file.SetCellValue(sheetName, fmt.Sprintf("G%d", rowNum), tx.Description)
        file.SetCellValue(sheetName, fmt.Sprintf("H%d", rowNum), tx.Status)
        file.SetCellValue(sheetName, fmt.Sprintf("I%d", rowNum), tx.Reference)
        
        if tx.CounterpartyUser != nil {
            file.SetCellValue(sheetName, fmt.Sprintf("J%d", rowNum), tx.CounterpartyUser.Name)
        }
        
        if tx.RelatedListing != nil {
            file.SetCellValue(sheetName, fmt.Sprintf("K%d", rowNum), tx.RelatedListing.Title)
        }
        
        if fee, exists := tx.Metadata["fee"]; exists {
            file.SetCellValue(sheetName, fmt.Sprintf("L%d", rowNum), fee)
        }
        
        if balance, exists := tx.Metadata["balance_after"]; exists {
            file.SetCellValue(sheetName, fmt.Sprintf("M%d", rowNum), balance)
        }
    }

    // –ê–≤—Ç–æ–ø–æ–¥–±–æ—Ä —à–∏—Ä–∏–Ω—ã –∫–æ–ª–æ–Ω–æ–∫
    for i := 0; i < len(headers); i++ {
        col := string(rune('A' + i))
        file.SetColWidth(sheetName, col, col, 15)
    }

    // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –±—É—Ñ–µ—Ä
    var buf bytes.Buffer
    if err := file.Write(&buf); err != nil {
        return nil, fmt.Errorf("Excel generation error: %w", err)
    }

    return buf.Bytes(), nil
}
```

### **Frontend –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è**
```typescript
// Hook –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –∏—Å—Ç–æ—Ä–∏–µ–π —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π
export const useTransactionHistory = () => {
  const [historyState, setHistoryState] = useState<HistoryState>({
    transactions: [],
    pagination: null,
    aggregates: null,
    loading: false,
    error: null,
    filters: {
      dateFrom: null,
      dateTo: null,
      types: [],
      statuses: [],
      searchQuery: '',
    },
  });

  const fetchHistory = async (page: number = 1, filters?: TransactionFilters) => {
    setHistoryState(prev => ({ ...prev, loading: true, error: null }));

    try {
      const params = new URLSearchParams({
        page: page.toString(),
        page_size: '20',
      });

      if (filters) {
        if (filters.dateFrom) params.append('date_from', filters.dateFrom.toISOString());
        if (filters.dateTo) params.append('date_to', filters.dateTo.toISOString());
        if (filters.types.length > 0) params.append('types', filters.types.join(','));
        if (filters.statuses.length > 0) params.append('statuses', filters.statuses.join(','));
        if (filters.searchQuery) params.append('search', filters.searchQuery);
        if (filters.minAmount) params.append('min_amount', filters.minAmount.toString());
        if (filters.maxAmount) params.append('max_amount', filters.maxAmount.toString());
        if (filters.currencies.length > 0) params.append('currencies', filters.currencies.join(','));
      }

      const response = await fetch(`/api/v1/transactions/history?${params}`);
      const result = await response.json();

      if (!result.success) {
        throw new Error(result.error || 'Failed to fetch transaction history');
      }

      setHistoryState(prev => ({
        ...prev,
        loading: false,
        transactions: result.data.transactions,
        pagination: result.data.pagination,
        aggregates: result.data.aggregates,
        filters: filters || prev.filters,
      }));

    } catch (error) {
      setHistoryState(prev => ({ 
        ...prev, 
        loading: false, 
        error: error.message 
      }));
    }
  };

  const exportHistory = async (format: 'csv' | 'xlsx' | 'pdf', filters?: TransactionFilters) => {
    try {
      const exportData = {
        format,
        filters: filters || historyState.filters,
      };

      const response = await fetch('/api/v1/transactions/export', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(exportData),
      });

      const result = await response.json();

      if (!result.success) {
        throw new Error(result.error || 'Export failed');
      }

      if (result.data.status === 'completed') {
        // –°–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π —ç–∫—Å–ø–æ—Ä—Ç - —Å—Ä–∞–∑—É —Å–∫–∞—á–∏–≤–∞–µ–º
        window.open(result.data.download_url, '_blank');
        toast.success('–§–∞–π–ª –≥–æ—Ç–æ–≤ –∫ —Å–∫–∞—á–∏–≤–∞–Ω–∏—é!');
      } else if (result.data.status === 'queued') {
        // –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π —ç–∫—Å–ø–æ—Ä—Ç - –ø–æ–∫–∞–∑—ã–≤–∞–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
        toast.info(`–≠–∫—Å–ø–æ—Ä—Ç –∑–∞–ø—É—â–µ–Ω. –û–∂–∏–¥–∞–µ–º–æ–µ –≤—Ä–µ–º—è: ${result.data.estimated_time}`);
        // –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å polling –∏–ª–∏ WebSocket –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –ø—Ä–æ–≥—Ä–µ—Å—Å–∞
      }

      return result.data;

    } catch (error) {
      toast.error(`–û—à–∏–±–∫–∞ —ç–∫—Å–ø–æ—Ä—Ç–∞: ${error.message}`);
      throw error;
    }
  };

  const searchTransactions = async (query: string) => {
    const filters = { ...historyState.filters, searchQuery: query };
    await fetchHistory(1, filters);
  };

  return {
    historyState,
    fetchHistory,
    exportHistory,
    searchTransactions,
    setFilters: (filters: TransactionFilters) => fetchHistory(1, filters),
  };
};

// –ö–æ–º–ø–æ–Ω–µ–Ω—Ç –∏—Å—Ç–æ—Ä–∏–∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π
export const TransactionHistory: React.FC = () => {
  const { historyState, fetchHistory, exportHistory, searchTransactions } = useTransactionHistory();
  const [showFilters, setShowFilters] = useState(false);

  useEffect(() => {
    fetchHistory();
  }, []);

  const handlePageChange = (page: number) => {
    fetchHistory(page, historyState.filters);
  };

  const handleExport = async (format: 'csv' | 'xlsx' | 'pdf') => {
    await exportHistory(format, historyState.filters);
  };

  if (historyState.loading && historyState.transactions.length === 0) {
    return (
      <div className="flex justify-center items-center h-64">
        <div className="loading loading-spinner loading-lg"></div>
      </div>
    );
  }

  return (
    <div className="space-y-6">
      {/* –ó–∞–≥–æ–ª–æ–≤–æ–∫ –∏ –¥–µ–π—Å—Ç–≤–∏—è */}
      <div className="flex justify-between items-center">
        <h2 className="text-2xl font-bold">–ò—Å—Ç–æ—Ä–∏—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π</h2>
        
        <div className="flex gap-2">
          <button 
            className="btn btn-outline btn-sm"
            onClick={() => setShowFilters(!showFilters)}
          >
            üîç –§–∏–ª—å—Ç—Ä—ã
          </button>
          
          <div className="dropdown dropdown-end">
            <label tabIndex={0} className="btn btn-outline btn-sm">
              üì• –≠–∫—Å–ø–æ—Ä—Ç
            </label>
            <ul tabIndex={0} className="dropdown-content menu p-2 shadow bg-base-100 rounded-box w-52">
              <li><a onClick={() => handleExport('csv')}>üìÑ CSV</a></li>
              <li><a onClick={() => handleExport('xlsx')}>üìä Excel</a></li>
              <li><a onClick={() => handleExport('pdf')}>üìë PDF</a></li>
            </ul>
          </div>
        </div>
      </div>

      {/* –ê–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ */}
      {historyState.aggregates && (
        <div className="grid grid-cols-1 md:grid-cols-4 gap-4">
          <div className="stat bg-base-200 rounded-lg">
            <div className="stat-title">–û–±—â–∏–π –ø—Ä–∏—Ö–æ–¥</div>
            <div className="stat-value text-success">
              +{historyState.aggregates.total_income.toFixed(2)} RSD
            </div>
          </div>
          <div className="stat bg-base-200 rounded-lg">
            <div className="stat-title">–û–±—â–∏–π —Ä–∞—Å—Ö–æ–¥</div>
            <div className="stat-value text-error">
              -{historyState.aggregates.total_expense.toFixed(2)} RSD
            </div>
          </div>
          <div className="stat bg-base-200 rounded-lg">
            <div className="stat-title">–ë–∞–ª–∞–Ω—Å</div>
            <div className={`stat-value ${historyState.aggregates.net_balance >= 0 ? 'text-success' : 'text-error'}`}>
              {historyState.aggregates.net_balance.toFixed(2)} RSD
            </div>
          </div>
          <div className="stat bg-base-200 rounded-lg">
            <div className="stat-title">–¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–π</div>
            <div className="stat-value">{historyState.aggregates.transaction_count}</div>
          </div>
        </div>
      )}

      {/* –§–∏–ª—å—Ç—Ä—ã */}
      {showFilters && (
        <TransactionFilters 
          filters={historyState.filters}
          onFiltersChange={(filters) => fetchHistory(1, filters)}
          onSearch={searchTransactions}
        />
      )}

      {/* –°–ø–∏—Å–æ–∫ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π */}
      <div className="space-y-3">
        {historyState.transactions.map((transaction) => (
          <TransactionCard 
            key={transaction.id} 
            transaction={transaction} 
          />
        ))}
      </div>

      {/* –ü–∞–≥–∏–Ω–∞—Ü–∏—è */}
      {historyState.pagination && historyState.pagination.total_pages > 1 && (
        <div className="flex justify-center">
          <div className="btn-group">
            <button 
              className="btn btn-sm"
              disabled={historyState.pagination.page <= 1}
              onClick={() => handlePageChange(historyState.pagination.page - 1)}
            >
              ¬´
            </button>
            
            {Array.from({ length: Math.min(5, historyState.pagination.total_pages) }, (_, i) => {
              const page = i + 1;
              return (
                <button
                  key={page}
                  className={`btn btn-sm ${page === historyState.pagination.page ? 'btn-active' : ''}`}
                  onClick={() => handlePageChange(page)}
                >
                  {page}
                </button>
              );
            })}
            
            <button 
              className="btn btn-sm"
              disabled={historyState.pagination.page >= historyState.pagination.total_pages}
              onClick={() => handlePageChange(historyState.pagination.page + 1)}
            >
              ¬ª
            </button>
          </div>
        </div>
      )}

      {/* –°–æ—Å—Ç–æ—è–Ω–∏–µ –∑–∞–≥—Ä—É–∑–∫–∏ */}
      {historyState.loading && (
        <div className="flex justify-center">
          <div className="loading loading-spinner"></div>
        </div>
      )}

      {/* –û—à–∏–±–∫–∏ */}
      {historyState.error && (
        <div className="alert alert-error">
          <span>–û—à–∏–±–∫–∞: {historyState.error}</span>
        </div>
      )}

      {/* –ü—É—Å—Ç–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ */}
      {!historyState.loading && historyState.transactions.length === 0 && (
        <div className="text-center py-12">
          <p className="text-lg text-base-content/60">–¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã</p>
          <p className="text-sm text-base-content/40">
            –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∏–∑–º–µ–Ω–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä—ã –∏–ª–∏ –ø–µ—Ä–∏–æ–¥ –ø–æ–∏—Å–∫–∞
          </p>
        </div>
      )}
    </div>
  );
};

// –ö–æ–º–ø–æ–Ω–µ–Ω—Ç –∫–∞—Ä—Ç–æ—á–∫–∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
export const TransactionCard: React.FC<{ transaction: TransactionRecord }> = ({ transaction }) => {
  const getTransactionIcon = () => {
    switch (transaction.type) {
      case 'deposit': return 'üí≥';
      case 'withdrawal': return 'üí∏';
      case 'payment': return 'üõí';
      case 'refund': return '‚Ü©Ô∏è';
      case 'commission': return 'üí∞';
      default: return 'üí±';
    }
  };

  const getStatusColor = () => {
    switch (transaction.status) {
      case 'completed': return 'text-success';
      case 'pending': return 'text-warning';
      case 'failed': return 'text-error';
      default: return 'text-base-content';
    }
  };

  const getAmountColor = () => {
    return transaction.amount >= 0 ? 'text-success' : 'text-error';
  };

  return (
    <div className="card bg-base-100 shadow-sm hover:shadow-md transition-shadow">
      <div className="card-body p-4">
        <div className="flex items-center justify-between">
          <div className="flex items-center gap-3">
            <span className="text-2xl">{getTransactionIcon()}</span>
            <div>
              <h3 className="font-medium">{transaction.description}</h3>
              <div className="text-sm text-base-content/60">
                {format(new Date(transaction.created_at), 'dd.MM.yyyy HH:mm')}
                {transaction.reference && (
                  <span className="ml-2">‚Ä¢ {transaction.reference}</span>
                )}
              </div>
            </div>
          </div>

          <div className="text-right">
            <div className={`font-bold text-lg ${getAmountColor()}`}>
              {transaction.amount >= 0 ? '+' : ''}{transaction.amount.toFixed(2)} {transaction.currency}
            </div>
            <div className={`text-sm ${getStatusColor()}`}>
              {transaction.status}
            </div>
          </div>
        </div>

        {/* –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è */}
        {(transaction.related_listing || transaction.counterparty_user) && (
          <div className="mt-3 pt-3 border-t border-base-300">
            <div className="text-sm text-base-content/60">
              {transaction.related_listing && (
                <div>–¢–æ–≤–∞—Ä: {transaction.related_listing.title}</div>
              )}
              {transaction.counterparty_user && (
                <div>–ö–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç: {transaction.counterparty_user.name}</div>
              )}
            </div>
          </div>
        )}
      </div>
    </div>
  );
};
```

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ –≤–∞–ª–∏–¥–∞—Ü–∏—è

### **–ö–æ–Ω—Ç—Ä–æ–ª—å –¥–æ—Å—Ç—É–ø–∞**
```go
// –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞ –∫ –∏—Å—Ç–æ—Ä–∏–∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π
func (s *TransactionHistoryService) checkAccessPermissions(ctx context.Context, userID int, requestedBy int) error {
    // –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –≤–∏–¥–µ—Ç—å —Ç–æ–ª—å–∫–æ —Å–≤–æ–∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
    if userID != requestedBy {
        // –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω—ã—Ö –ø—Ä–∞–≤
        isAdmin, err := s.authService.HasAdminRole(ctx, requestedBy)
        if err != nil {
            return fmt.Errorf("failed to check admin role: %w", err)
        }
        
        if !isAdmin {
            return errors.New("access.denied")
        }
        
        // –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–æ—Å—Ç—É–ø–∞ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ –∫ —á—É–∂–∏–º –¥–∞–Ω–Ω—ã–º
        s.logger.Warn("Admin access to user transactions", 
            "admin_id", requestedBy, 
            "target_user_id", userID)
    }
    
    return nil
}

// –ê–Ω–æ–Ω–∏–º–∏–∑–∞—Ü–∏—è —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –≤ —ç–∫—Å–ø–æ—Ä—Ç–µ
func (s *TransactionExportService) anonymizeTransactionData(transaction *TransactionRecord) {
    // –£–¥–∞–ª–µ–Ω–∏–µ —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã—Ö –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö
    sensitiveKeys := []string{
        "card_last_four",
        "bank_account",
        "ip_address",
        "user_agent",
        "device_fingerprint",
    }
    
    for _, key := range sensitiveKeys {
        delete(transaction.Metadata, key)
    }
    
    // –ú–∞—Å–∫–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∫–≤–∏–∑–∏—Ç–æ–≤ –≤ –æ–ø–∏—Å–∞–Ω–∏–∏
    if strings.Contains(transaction.Description, "IBAN") {
        transaction.Description = maskIBAN(transaction.Description)
    }
}
```

### **–ê—É–¥–∏—Ç –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ**
```go
// –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–π —Å –∏—Å—Ç–æ—Ä–∏–µ–π —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π
func (s *TransactionHistoryService) logHistoryAccess(ctx context.Context, userID int, action string, filters interface{}) {
    auditLog := &models.AuditLog{
        UserID:     userID,
        Action:     action,
        Resource:   "transaction_history",
        Details: map[string]interface{}{
            "filters":   filters,
            "timestamp": time.Now().UTC(),
            "ip_address": getClientIP(ctx),
            "user_agent": getUserAgent(ctx),
        },
        CreatedAt: time.Now(),
    }
    
    if err := s.auditRepo.CreateAuditLog(ctx, auditLog); err != nil {
        s.logger.Error("Failed to create audit log", "error", err)
    }
}

// –û–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –ø–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω–æ–π –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
func (s *TransactionHistoryService) detectSuspiciousActivity(ctx context.Context, userID int) error {
    // –ü—Ä–æ–≤–µ—Ä–∫–∞ —á–∞—Å—Ç–æ—Ç—ã –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ –∏—Å—Ç–æ—Ä–∏–∏
    recentRequests, err := s.repository.CountHistoryRequests(ctx, userID, time.Hour)
    if err != nil {
        return err
    }
    
    if recentRequests > 100 { // –ë–æ–ª–µ–µ 100 –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ —á–∞—Å
        s.logger.Warn("Suspicious history access pattern", 
            "user_id", userID, 
            "requests_per_hour", recentRequests)
        
        // –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –≤—Ä–µ–º–µ–Ω–Ω—É—é –±–ª–æ–∫–∏—Ä–æ–≤–∫—É –∏–ª–∏ –∫–∞–ø—á—É
        return errors.New("history.tooManyRequests")
    }
    
    return nil
}
```

## üìä –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –∏ –º–µ—Ç—Ä–∏–∫–∏

### **–ü—Ä–æ–¥–≤–∏–Ω—É—Ç–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞**
```go
// –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã—Ö –∏–Ω—Å–∞–π—Ç–æ–≤
type FinancialInsights struct {
    SpendingPatterns     []SpendingPattern     `json:"spending_patterns"`
    IncomeAnalysis       IncomeAnalysis        `json:"income_analysis"`
    CategoryBreakdown    []CategoryAmount      `json:"category_breakdown"`
    MonthlyTrends        []MonthlyTrend        `json:"monthly_trends"`
    Recommendations     []Recommendation      `json:"recommendations"`
}

func (s *TransactionAnalyticsService) GenerateFinancialInsights(ctx context.Context, userID int, period time.Duration) (*FinancialInsights, error) {
    since := time.Now().Add(-period)
    
    // –ê–Ω–∞–ª–∏–∑ –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤ —Ç—Ä–∞—Ç
    spendingPatterns, err := s.analyzeSpendingPatterns(ctx, userID, since)
    if err != nil {
        return nil, err
    }
    
    // –ê–Ω–∞–ª–∏–∑ –¥–æ—Ö–æ–¥–æ–≤
    incomeAnalysis, err := s.analyzeIncome(ctx, userID, since)
    if err != nil {
        return nil, err
    }
    
    // –†–∞–∑–±–∏–≤–∫–∞ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º
    categoryBreakdown, err := s.getCategoryBreakdown(ctx, userID, since)
    if err != nil {
        return nil, err
    }
    
    // –ú–µ—Å—è—á–Ω—ã–µ —Ç—Ä–µ–Ω–¥—ã
    monthlyTrends, err := s.getMonthlyTrends(ctx, userID, since)
    if err != nil {
        return nil, err
    }
    
    // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π
    recommendations := s.generateRecommendations(spendingPatterns, incomeAnalysis, categoryBreakdown)
    
    return &FinancialInsights{
        SpendingPatterns:  spendingPatterns,
        IncomeAnalysis:    incomeAnalysis,
        CategoryBreakdown: categoryBreakdown,
        MonthlyTrends:     monthlyTrends,
        Recommendations:   recommendations,
    }, nil
}

// –ê–Ω–∞–ª–∏–∑ –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤ —Ç—Ä–∞—Ç
func (s *TransactionAnalyticsService) analyzeSpendingPatterns(ctx context.Context, userID int, since time.Time) ([]SpendingPattern, error) {
    patterns := make([]SpendingPattern, 0)
    
    // –ê–Ω–∞–ª–∏–∑ –ø–æ –¥–Ω—è–º –Ω–µ–¥–µ–ª–∏
    weekdaySpending, err := s.repository.GetSpendingByWeekday(ctx, userID, since)
    if err != nil {
        return nil, err
    }
    
    // –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Å–∞–º–æ–≥–æ –∞–∫—Ç–∏–≤–Ω–æ–≥–æ –¥–Ω—è
    maxDay, maxAmount := "", decimal.Zero
    for day, amount := range weekdaySpending {
        if amount.GreaterThan(maxAmount) {
            maxDay, maxAmount = day, amount
        }
    }
    
    if maxDay != "" {
        patterns = append(patterns, SpendingPattern{
            Type:        "peak_day",
            Description: fmt.Sprintf("–ë–æ–ª—å—à–µ –≤—Å–µ–≥–æ —Ç—Ä–∞—Ç–∏—Ç–µ –≤ %s", maxDay),
            Amount:      maxAmount,
            Confidence:  0.8,
        })
    }
    
    // –ê–Ω–∞–ª–∏–∑ –ø–æ –≤—Ä–µ–º–µ–Ω–∏ —Å—É—Ç–æ–∫
    hourlySpending, err := s.repository.GetSpendingByHour(ctx, userID, since)
    if err != nil {
        return nil, err
    }
    
    peakHour := s.findPeakSpendingHour(hourlySpending)
    if peakHour != -1 {
        patterns = append(patterns, SpendingPattern{
            Type:        "peak_hour",
            Description: fmt.Sprintf("–ü–∏–∫ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –≤ %d:00", peakHour),
            Confidence:  0.7,
        })
    }
    
    return patterns, nil
}

// –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π
func (s *TransactionAnalyticsService) generateRecommendations(
    patterns []SpendingPattern, 
    income IncomeAnalysis, 
    categories []CategoryAmount,
) []Recommendation {
    recommendations := make([]Recommendation, 0)
    
    // –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è –ø–æ —ç–∫–æ–Ω–æ–º–∏–∏
    if income.MonthlyAverage.GreaterThan(decimal.Zero) {
        totalSpending := decimal.Zero
        for _, cat := range categories {
            if cat.Type == "expense" {
                totalSpending = totalSpending.Add(cat.Amount)
            }
        }
        
        spendingRatio := totalSpending.Div(income.MonthlyAverage)
        if spendingRatio.GreaterThan(decimal.NewFromFloat(0.8)) {
            recommendations = append(recommendations, Recommendation{
                Type:        "savings",
                Title:       "–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º —Å–æ–∫—Ä–∞—Ç–∏—Ç—å —Ä–∞—Å—Ö–æ–¥—ã",
                Description: "–í–∞—à–∏ —Ä–∞—Å—Ö–æ–¥—ã —Å–æ—Å—Ç–∞–≤–ª—è—é—Ç –±–æ–ª–µ–µ 80% –¥–æ—Ö–æ–¥–∞. –†–∞—Å—Å–º–æ—Ç—Ä–∏—Ç–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —ç–∫–æ–Ω–æ–º–∏–∏.",
                Priority:    "high",
                Action:      "review_spending",
            })
        }
    }
    
    // –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º
    for _, cat := range categories {
        if cat.Type == "expense" && cat.Amount.GreaterThan(decimal.NewFromFloat(1000)) {
            recommendations = append(recommendations, Recommendation{
                Type:        "category_optimization",
                Title:       fmt.Sprintf("–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Ä–∞—Å—Ö–æ–¥–æ–≤: %s", cat.Category),
                Description: fmt.Sprintf("–ë–æ–ª—å—à–∏–µ —Ç—Ä–∞—Ç—ã –≤ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ %s (%.2f RSD)", cat.Category, cat.Amount.InexactFloat64()),
                Priority:    "medium",
                Action:      "analyze_category",
            })
        }
    }
    
    return recommendations
}
```

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### **Unit —Ç–µ—Å—Ç—ã**
```go
func TestTransactionHistoryService_GetUserTransactionHistory(t *testing.T) {
    tests := []struct {
        name           string
        request        GetHistoryRequest
        mockSetup      func(*MockTransactionRepository)
        expectedResult *TransactionHistoryResponse
        expectedError  string
    }{
        {
            name: "successful_history_retrieval",
            request: GetHistoryRequest{
                UserID:      1,
                RequestedBy: 1,
                Pagination: PaginationRequest{Page: 1, PageSize: 20},
                Filters:    TransactionFiltersRequest{},
            },
            mockSetup: func(repo *MockTransactionRepository) {
                transactions := []*TransactionRecord{
                    {
                        ID:          1,
                        UserID:      1,
                        Type:        "deposit",
                        Amount:      decimal.NewFromFloat(100.00),
                        Currency:    "RSD",
                        Status:      "completed",
                        CreatedAt:   time.Now(),
                    },
                }
                repo.EXPECT().GetTransactionsWithFilters(gomock.Any(), gomock.Any(), gomock.Any()).
                    Return(transactions, 1, nil)
                repo.EXPECT().GetSpendingByWeekday(gomock.Any(), 1, gomock.Any()).
                    Return(map[string]decimal.Decimal{"Monday": decimal.NewFromFloat(100)}, nil)
            },
            expectedResult: &TransactionHistoryResponse{
                Transactions: []*TransactionRecord{
                    {
                        ID:       1,
                        UserID:   1,
                        Type:     "deposit",
                        Amount:   decimal.NewFromFloat(100.00),
                        Currency: "RSD",
                        Status:   "completed",
                    },
                },
                Pagination: PaginationResponse{
                    Page:       1,
                    PageSize:   20,
                    Total:      1,
                    TotalPages: 1,
                },
            },
        },
        {
            name: "access_denied_for_other_user",
            request: GetHistoryRequest{
                UserID:      1,
                RequestedBy: 2, // –î—Ä—É–≥–æ–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
            },
            expectedError: "access.denied",
        },
    }

    for _, tt := range tests {
        t.Run(tt.name, func(t *testing.T) {
            // Test implementation
        })
    }
}
```

### **Integration —Ç–µ—Å—Ç—ã**
```typescript
describe('Transaction History Integration', () => {
  it('should fetch and display transaction history', async () => {
    const user = await createTestUser();
    await createTestTransactions(user.id, 5);
    await loginUser(user.email);

    await page.goto('/transactions');

    // –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π
    await expect(page.locator('[data-testid="transaction-card"]')).toHaveCount(5);

    // –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–≥—Ä–µ–≥–∞—Ç–æ–≤
    await expect(page.locator('[data-testid="total-income"]')).toBeVisible();
    await expect(page.locator('[data-testid="total-expense"]')).toBeVisible();
  });

  it('should export transaction history successfully', async () => {
    const user = await createTestUser();
    await createTestTransactions(user.id, 10);
    await loginUser(user.email);

    await page.goto('/transactions');

    // –ò–Ω–∏—Ü–∏–∞—Ü–∏—è —ç–∫—Å–ø–æ—Ä—Ç–∞
    await page.click('[data-testid="export-button"]');
    await page.click('[data-testid="export-csv"]');

    // –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Å–ø–µ—à–Ω–æ–≥–æ —ç–∫—Å–ø–æ—Ä—Ç–∞
    await expect(page.locator('.toast-success')).toBeVisible();
  });

  it('should filter transactions correctly', async () => {
    const user = await createTestUser();
    await createTestTransactions(user.id, 20);
    await loginUser(user.email);

    await page.goto('/transactions');

    // –û—Ç–∫—Ä—ã—Ç–∏–µ —Ñ–∏–ª—å—Ç—Ä–æ–≤
    await page.click('[data-testid="filters-button"]');

    // –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ —Ñ–∏–ª—å—Ç—Ä–∞ –ø–æ —Ç–∏–ø—É
    await page.selectOption('[name="types"]', 'deposit');
    await page.click('[data-testid="apply-filters"]');

    // –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏
    const transactions = await page.locator('[data-testid="transaction-card"]').all();
    for (const transaction of transactions) {
      const type = await transaction.locator('[data-testid="transaction-type"]').textContent();
      expect(type).toContain('deposit');
    }
  });
});
```

## üìà –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –∞–ª–µ—Ä—Ç—ã

### **–ú–µ—Ç—Ä–∏–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏**
```yaml
# transaction-history-alerts.yml
groups:
  - name: transaction_history_alerts
    rules:
      - alert: SlowHistoryQueries
        expr: histogram_quantile(0.95, transaction_history_query_duration_seconds) > 2
        for: 5m
        labels:
          severity: warning
        annotations:
          summary: "Transaction history queries are slow"
          description: "95th percentile query time is {{ $value }}s"
      
      - alert: HighExportVolume
        expr: rate(transaction_exports_total[1h]) > 50
        for: 10m
        labels:
          severity: warning
        annotations:
          summary: "High transaction export volume"
          description: "{{ $value }} exports per hour"
      
      - alert: FailedExports
        expr: rate(transaction_exports_failed_total[1h]) > 5
        for: 5m
        labels:
          severity: critical
        annotations:
          summary: "Transaction exports are failing"
          description: "{{ $value }} failed exports per hour"
```

---

## üìã –ö–æ–Ω—Ç—Ä–æ–ª—å–Ω–∞—è –∫–∞—Ä—Ç–∞ –ø—Ä–æ—Ü–µ—Å—Å–∞

### ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
- [x] –ü–æ–ª–Ω–∞—è –∏—Å—Ç–æ—Ä–∏—è –≤—Å–µ—Ö —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
- [x] –ü—Ä–æ–¥–≤–∏–Ω—É—Ç–∞—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –∏ –ø–æ–∏—Å–∫
- [x] –≠–∫—Å–ø–æ—Ä—Ç –≤ –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã (CSV, Excel, PDF)
- [x] –ê–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ –∏ –∏–Ω—Å–∞–π—Ç—ã
- [x] Real-time –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∏—Å—Ç–æ—Ä–∏–∏
- [x] –°–≤—è–∑—ã–≤–∞–Ω–∏–µ —Å –æ–±—ä—è–≤–ª–µ–Ω–∏—è–º–∏ –∏ –∫–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç–∞–º–∏
- [x] –ë–µ–∑–æ–ø–∞—Å–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å –¥–æ—Å—Ç—É–ø–∞
- [x] –ê—É–¥–∏—Ç –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–π
- [x] –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã —Å –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ–º

### üîÑ –ü—Ä–æ—Ü–µ—Å—Å—ã –Ω–∞ –¥–æ—Ä–∞–±–æ—Ç–∫–µ
- [ ] Machine Learning –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ —Ñ–∏–Ω–∞–Ω—Å–æ–≤–æ–≥–æ –ø–æ–≤–µ–¥–µ–Ω–∏—è
- [ ] –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∫–∞—Ç–µ–≥–æ—Ä–∏–∑–∞—Ü–∏—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π
- [ ] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –Ω–∞–ª–æ–≥–æ–≤—ã–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏
- [ ] –ü—Ä–µ–¥–∏–∫—Ç–∏–≤–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ —Ä–∞—Å—Ö–æ–¥–æ–≤
- [ ] –ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã–µ —Å–æ–≤–µ—Ç—ã

### üìä –ú–µ—Ç—Ä–∏–∫–∏ —É—Å–ø–µ—Ö–∞
- **–í—Ä–µ–º—è –∑–∞–≥—Ä—É–∑–∫–∏ –∏—Å—Ç–æ—Ä–∏–∏**: < 2 —Å–µ–∫—É–Ω–¥—ã
- **–¢–æ—á–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö**: 100%
- **–î–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å —ç–∫—Å–ø–æ—Ä—Ç–∞**: > 99%
- **–£–¥–æ–≤–ª–µ—Ç–≤–æ—Ä–µ–Ω–Ω–æ—Å—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π**: > 4.7/5
- **–°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –Ω–æ—Ä–º–∞–º**: 100% GDPR compliance