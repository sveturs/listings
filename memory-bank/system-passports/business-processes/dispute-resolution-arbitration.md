# –ü–∞—Å–ø–æ—Ä—Ç –±–∏–∑–Ω–µ—Å-–ø—Ä–æ—Ü–µ—Å—Å–∞: –†–∞–∑—Ä–µ—à–µ–Ω–∏–µ —Å–ø–æ—Ä–æ–≤ –∏ –∞—Ä–±–∏—Ç—Ä–∞–∂

## üìã –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ
- **–ù–∞–∑–≤–∞–Ω–∏–µ**: –†–∞–∑—Ä–µ—à–µ–Ω–∏–µ —Å–ø–æ—Ä–æ–≤ –∏ –∞—Ä–±–∏—Ç—Ä–∞–∂
- **–†–æ–ª—å**: –£—Ä–µ–≥—É–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ –º–µ–∂–¥—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã
- **–¢–∏–ø**: –ë–∏–∑–Ω–µ—Å-–ø—Ä–æ—Ü–µ—Å—Å
- **–°—Ç–∞—Ç—É—Å**: –ê–∫—Ç–∏–≤–Ω—ã–π
- **–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è –ø–∞—Å–ø–æ—Ä—Ç–∞**: 2025-06-29

## üéØ –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ
–ü—Ä–æ—Ü–µ—Å—Å –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç —Å–ø—Ä–∞–≤–µ–¥–ª–∏–≤–æ–µ –∏ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ —Å–ø–æ—Ä–æ–≤ –º–µ–∂–¥—É –ø–æ–∫—É–ø–∞—Ç–µ–ª—è–º–∏ –∏ –ø—Ä–æ–¥–∞–≤—Ü–∞–º–∏, –≤–∫–ª—é—á–∞—è –ø—Ä–æ–±–ª–µ–º—ã —Å –∫–∞—á–µ—Å—Ç–≤–æ–º —Ç–æ–≤–∞—Ä–æ–≤, –Ω–µ–≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ–º –æ–±—è–∑–∞—Ç–µ–ª—å—Å—Ç–≤, –º–æ—à–µ–Ω–Ω–∏—á–µ—Å—Ç–≤–æ–º –∏ –¥—Ä—É–≥–∏–º–∏ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–Ω—ã–º–∏ —Å–∏—Ç—É–∞—Ü–∏—è–º–∏. –°–∏—Å—Ç–µ–º–∞ –∞—Ä–±–∏—Ç—Ä–∞–∂–∞ –∑–∞—â–∏—â–∞–µ—Ç –∏–Ω—Ç–µ—Ä–µ—Å—ã –≤—Å–µ—Ö —Å—Ç–æ—Ä–æ–Ω –∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –¥–æ–≤–µ—Ä–∏–µ –∫ –ø–ª–∞—Ç—Ñ–æ—Ä–º–µ.

## üîÑ –û–±—â–∞—è —Å—Ö–µ–º–∞ –ø—Ä–æ—Ü–µ—Å—Å–∞

```mermaid
graph TD
    A[–í–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã] --> B{–¢–∏–ø –ø—Ä–æ–±–ª–µ–º—ã}
    
    B -->|–ù–µ –ø–æ–ª—É—á–µ–Ω —Ç–æ–≤–∞—Ä| C[–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞]
    B -->|–ö–∞—á–µ—Å—Ç–≤–æ —Ç–æ–≤–∞—Ä–∞| D[–û—Ç–∫—Ä—ã—Ç–∏–µ –¥–∏—Å–ø—É—Ç–∞]
    B -->|–ú–æ—à–µ–Ω–Ω–∏—á–µ—Å—Ç–≤–æ| E[–≠–∫—Å—Ç—Ä–µ–Ω–Ω–∞—è —ç—Å–∫–∞–ª–∞—Ü–∏—è]
    B -->|–û—Ç–∑—ã–≤/—Ä–µ–π—Ç–∏–Ω–≥| F[–ü—Ä–æ—Ü–µ–¥—É—Ä–∞ –æ—Å–ø–∞—Ä–∏–≤–∞–Ω–∏—è]
    
    C --> G{–ï—Å—Ç—å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–∫–∏?}
    G -->|–î–∞| H[–û–∂–∏–¥–∞–Ω–∏–µ –¥–æ—Å—Ç–∞–≤–∫–∏ + 3 –¥–Ω—è]
    G -->|–ù–µ—Ç| I[–ó–∞–ø—Ä–æ—Å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è —É –ø—Ä–æ–¥–∞–≤—Ü–∞]
    
    D --> J[–°–æ–∑–¥–∞–Ω–∏–µ –¥–∏—Å–ø—É—Ç–∞]
    E --> K[–ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –∞–∫–∫–∞—É–Ω—Ç–∞]
    F --> L[–ü—Ä–æ–≤–µ—Ä–∫–∞ –æ–±–æ—Å–Ω–æ–≤–∞–Ω–Ω–æ—Å—Ç–∏]
    
    H --> M{–¢–æ–≤–∞—Ä –ø–æ–ª—É—á–µ–Ω?}
    M -->|–î–∞| N[–ó–∞–∫—Ä—ã—Ç–∏–µ –¥–∏—Å–ø—É—Ç–∞]
    M -->|–ù–µ—Ç| O[–≠—Å–∫–∞–ª–∞—Ü–∏—è –∫ –∞—Ä–±–∏—Ç—Ä—É]
    
    I --> P{–ü—Ä–æ–¥–∞–≤–µ—Ü –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–∏–ª –¥–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤–∞?}
    P -->|–î–∞| Q[–ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤]
    P -->|–ù–µ—Ç| R[–í–æ–∑–≤—Ä–∞—Ç —Å—Ä–µ–¥—Å—Ç–≤ –ø–æ–∫—É–ø–∞—Ç–µ–ª—é]
    
    J --> S[–ü–µ—Ä–µ–≥–æ–≤–æ—Ä—ã –º–µ–∂–¥—É —Å—Ç–æ—Ä–æ–Ω–∞–º–∏]
    S --> T{–î–æ—Å—Ç–∏–≥–Ω—É—Ç–æ —Å–æ–≥–ª–∞—à–µ–Ω–∏–µ?}
    T -->|–î–∞| U[–ò—Å–ø–æ–ª–Ω–µ–Ω–∏–µ —Å–æ–≥–ª–∞—à–µ–Ω–∏—è]
    T -->|–ù–µ—Ç| V[–ü—Ä–∏–≤–ª–µ—á–µ–Ω–∏–µ –∞—Ä–±–∏—Ç—Ä–∞]
    
    O --> W[–ê—Ä–±–∏—Ç—Ä–∞–∂–Ω–æ–µ —Ä–∞–∑–±–∏—Ä–∞—Ç–µ–ª—å—Å—Ç–≤–æ]
    V --> W
    K --> W
    
    W --> X[–°–±–æ—Ä –¥–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤]
    X --> Y[–ê–Ω–∞–ª–∏–∑ —Å–∏—Ç—É–∞—Ü–∏–∏]
    Y --> Z[–í—ã–Ω–µ—Å–µ–Ω–∏–µ —Ä–µ—à–µ–Ω–∏—è]
    
    Z --> AA{–†–µ—à–µ–Ω–∏–µ –∞—Ä–±–∏—Ç—Ä–∞}
    AA -->|–í –ø–æ–ª—å–∑—É –ø–æ–∫—É–ø–∞—Ç–µ–ª—è| AB[–í–æ–∑–≤—Ä–∞—Ç —Å—Ä–µ–¥—Å—Ç–≤]
    AA -->|–í –ø–æ–ª—å–∑—É –ø—Ä–æ–¥–∞–≤—Ü–∞| AC[–û—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏–µ –ø–ª–∞—Ç–µ–∂–∞]
    AA -->|–ö–æ–º–ø—Ä–æ–º–∏—Å—Å| AD[–ß–∞—Å—Ç–∏—á–Ω—ã–π –≤–æ–∑–≤—Ä–∞—Ç]
    AA -->|–ù–∞—Ä—É—à–µ–Ω–∏–µ –ø—Ä–∞–≤–∏–ª| AE[–°–∞–Ω–∫—Ü–∏–∏ –∫ –Ω–∞—Ä—É—à–∏—Ç–µ–ª—é]
```

## üìê –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

### Frontend –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
1. **DisputeCenter** (`/frontend/svetu/src/components/disputes/DisputeCenter.tsx`)
   - –¶–µ–Ω—Ç—Ä —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–ø–æ—Ä–∞–º–∏ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
   - –°–ø–∏—Å–æ–∫ –∞–∫—Ç–∏–≤–Ω—ã—Ö –∏ –∑–∞–∫—Ä—ã—Ç—ã—Ö –¥–∏—Å–ø—É—Ç–æ–≤
   - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è —Å–ø–æ—Ä–æ–≤

2. **DisputeForm** (`/frontend/svetu/src/components/disputes/DisputeForm.tsx`)
   - –§–æ—Ä–º–∞ —Å–æ–∑–¥–∞–Ω–∏—è –¥–∏—Å–ø—É—Ç–∞ —Å –∫–∞—Ç–µ–≥–æ—Ä–∏–∑–∞—Ü–∏–µ–π
   - –ó–∞–≥—Ä—É–∑–∫–∞ –¥–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤ (—Ñ–æ—Ç–æ, –≤–∏–¥–µ–æ, –¥–æ–∫—É–º–µ–Ω—Ç—ã)
   - –í—ã–±–æ—Ä –∂–µ–ª–∞–µ–º–æ–≥–æ —Ä–µ—à–µ–Ω–∏—è

3. **DisputeChat** (`/frontend/svetu/src/components/disputes/DisputeChat.tsx`)
   - –°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π —á–∞—Ç –¥–ª—è –æ–±—â–µ–Ω–∏—è –≤ —Ä–∞–º–∫–∞—Ö –¥–∏—Å–ø—É—Ç–∞
   - –£—á–∞—Å—Ç–Ω–∏–∫–∏: –ø–æ–∫—É–ø–∞—Ç–µ–ª—å, –ø—Ä–æ–¥–∞–≤–µ—Ü, –∞—Ä–±–∏—Ç—Ä
   - –ò—Å—Ç–æ—Ä–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π –∏ —Ä–µ—à–µ–Ω–∏–π

4. **EvidenceUploader** (`/frontend/svetu/src/components/disputes/EvidenceUploader.tsx`)
   - –ó–∞–≥—Ä—É–∑–∫–∞ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤–∞–º–∏
   - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤
   - –í—Ä–µ–º–µ–Ω–Ω—ã–µ –º–µ—Ç–∫–∏ –∏ –ø–æ–¥–ø–∏—Å–∏

5. **ArbitrationPanel** (`/frontend/svetu/src/components/disputes/ArbitrationPanel.tsx`)
   - –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∞—Ä–±–∏—Ç—Ä–∞ –¥–ª—è —Ä–∞—Å—Å–º–æ—Ç—Ä–µ–Ω–∏—è –¥–µ–ª
   - –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –∞–Ω–∞–ª–∏–∑–∞ –¥–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤
   - –®–∞–±–ª–æ–Ω—ã —Ä–µ—à–µ–Ω–∏–π

### Backend –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
1. **Dispute Service** (`/backend/internal/proj/disputes/service/`)
   - –°–æ–∑–¥–∞–Ω–∏–µ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–∏—Å–ø—É—Ç–∞–º–∏
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∫–∞—Ç–µ–≥–æ—Ä–∏–∑–∞—Ü–∏—è
   - –†–∞—Å—á–µ—Ç –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–≤

2. **Arbitration Engine** (`/backend/internal/proj/disputes/arbitration/`)
   - –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ –∞—Ä–±–∏—Ç—Ä–æ–≤
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–∞ –∏–Ω—Ç–µ—Ä–µ—Å–æ–≤
   - SLA –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

3. **Evidence Manager** (`/backend/internal/proj/disputes/evidence/`)
   - –•—Ä–∞–Ω–µ–Ω–∏–µ –∏ –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è –¥–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤
   - –¶–µ–ø–æ—á–∫–∞ custody –¥–ª—è –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
   - Watermarking –∏ –∑–∞—â–∏—Ç–∞ –æ—Ç –ø–æ–¥–¥–µ–ª–æ–∫

4. **Resolution Executor** (`/backend/internal/proj/disputes/resolution/`)
   - –ò—Å–ø–æ–ª–Ω–µ–Ω–∏–µ —Ä–µ—à–µ–Ω–∏–π –∞—Ä–±–∏—Ç—Ä–∞–∂–∞
   - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –ø–ª–∞—Ç–µ–∂–Ω–æ–π —Å–∏—Å—Ç–µ–º–æ–π
   - –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ —Å–∞–Ω–∫—Ü–∏–π

### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
```sql
-- –û—Å–Ω–æ–≤–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ –¥–∏—Å–ø—É—Ç–æ–≤
CREATE TABLE disputes (
    id SERIAL PRIMARY KEY,
    order_id INT REFERENCES marketplace_orders(id),
    buyer_id INT REFERENCES users(id),
    seller_id INT REFERENCES users(id),
    type VARCHAR(50), -- not_received, quality_issue, fraud, other
    status VARCHAR(50), -- open, negotiating, escalated, resolved, closed
    priority INT DEFAULT 5, -- 1-10, –≥–¥–µ 10 - –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π
    created_at TIMESTAMP DEFAULT NOW(),
    escalated_at TIMESTAMP,
    resolved_at TIMESTAMP,
    resolution_type VARCHAR(50), -- refund, release, partial_refund, rejected
    resolution_amount DECIMAL(10,2),
    arbitrator_id INT REFERENCES admin_users(id),
    buyer_satisfaction INT, -- 1-5 —Ä–µ–π—Ç–∏–Ω–≥ —Ä–µ—à–µ–Ω–∏—è
    seller_satisfaction INT
);

-- –î–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤–∞
CREATE TABLE dispute_evidence (
    id SERIAL PRIMARY KEY,
    dispute_id INT REFERENCES disputes(id),
    uploaded_by INT REFERENCES users(id),
    type VARCHAR(50), -- photo, video, document, screenshot
    file_url TEXT,
    description TEXT,
    verified BOOLEAN DEFAULT false,
    hash VARCHAR(64), -- SHA-256 –¥–ª—è –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏
    created_at TIMESTAMP DEFAULT NOW()
);

-- –ò—Å—Ç–æ—Ä–∏—è –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–π
CREATE TABLE dispute_messages (
    id SERIAL PRIMARY KEY,
    dispute_id INT REFERENCES disputes(id),
    sender_id INT REFERENCES users(id),
    sender_role VARCHAR(20), -- buyer, seller, arbitrator, system
    message TEXT,
    is_decision BOOLEAN DEFAULT false,
    created_at TIMESTAMP DEFAULT NOW()
);

-- –®–∞–±–ª–æ–Ω—ã —Ä–µ—à–µ–Ω–∏–π
CREATE TABLE resolution_templates (
    id SERIAL PRIMARY KEY,
    type VARCHAR(50),
    title VARCHAR(200),
    description TEXT,
    buyer_compensation_percent INT, -- 0-100
    seller_penalty_percent INT, -- 0-100
    auto_apply_conditions JSONB
);
```

## üîß –î–µ—Ç–∞–ª—å–Ω—ã–π flow –ø—Ä–æ—Ü–µ—Å—Å–∞

### 1. –°–æ–∑–¥–∞–Ω–∏–µ –¥–∏—Å–ø—É—Ç–∞
```typescript
// DisputeForm.tsx
const createDispute = async (disputeData: DisputeFormData) => {
  try {
    // –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π
    const daysSinceOrder = daysSince(order.created_at);
    if (daysSinceOrder > 30) {
      throw new Error('Dispute period expired (30 days)');
    }
    
    // –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –¥–∏—Å–ø—É—Ç—ã
    const existingDispute = await checkExistingDispute(order.id);
    if (existingDispute) {
      router.push(`/disputes/${existingDispute.id}`);
      return;
    }
    
    // –°–æ–∑–¥–∞–Ω–∏–µ –¥–∏—Å–ø—É—Ç–∞
    const dispute = await api.post('/api/v1/disputes', {
      order_id: order.id,
      type: disputeData.type,
      description: disputeData.description,
      desired_resolution: disputeData.desiredResolution,
      evidence_ids: disputeData.uploadedEvidence,
    });
    
    // –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –ø—Ä–æ–¥–∞–≤—Ü–∞
    await api.post('/api/v1/notifications/send', {
      user_id: order.seller_id,
      type: 'dispute_opened',
      data: { dispute_id: dispute.data.id },
    });
    
    // –ü—Ä–∏–æ—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤—ã–ø–ª–∞—Ç—ã –ø—Ä–æ–¥–∞–≤—Ü—É
    if (order.payment_status === 'escrow') {
      await api.post(`/api/v1/payments/escrow/${order.escrow_id}/freeze`);
    }
    
    router.push(`/disputes/${dispute.data.id}`);
  } catch (error) {
    handleError(error);
  }
};
```

### 2. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∫–∞—Ç–µ–≥–æ—Ä–∏–∑–∞—Ü–∏—è –∏ –ø—Ä–∏–æ—Ä–∏—Ç–∏–∑–∞—Ü–∏—è
```go
// dispute_service.go
func (s *Service) CategorizeAndPrioritize(dispute *models.Dispute) error {
    priority := 5 // –±–∞–∑–æ–≤—ã–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç
    
    // –ê–Ω–∞–ª–∏–∑ —Ç–∏–ø–∞ –ø—Ä–æ–±–ª–µ–º—ã
    switch dispute.Type {
    case "fraud":
        priority = 10
        dispute.AutoEscalate = true
    case "not_received":
        if dispute.Order.Amount > 1000 {
            priority = 8
        }
    case "quality_issue":
        // –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏—Å—Ç–æ—Ä–∏–∏ –ø—Ä–æ–¥–∞–≤—Ü–∞
        sellerStats, _ := s.GetSellerDisputeStats(dispute.SellerID)
        if sellerStats.DisputeRate > 0.1 { // > 10% —Å–ø–æ—Ä–æ–≤
            priority = 7
        }
    }
    
    // –£—á–µ—Ç –∏—Å—Ç–æ—Ä–∏–∏ –ø–æ–∫—É–ø–∞—Ç–µ–ª—è
    buyerStats, _ := s.GetBuyerDisputeStats(dispute.BuyerID)
    if buyerStats.FalseDisputeRate > 0.3 {
        priority -= 2 // –ø–æ–Ω–∏–∂–µ–Ω–∏–µ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞ –¥–ª—è –Ω–µ–¥–æ–±—Ä–æ—Å–æ–≤–µ—Å—Ç–Ω—ã—Ö
    }
    
    // –£—á–µ—Ç —Å—É–º–º—ã —Å–¥–µ–ª–∫–∏
    if dispute.Order.Amount > 5000 {
        priority += 2
    }
    
    dispute.Priority = priority
    
    // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —ç—Å–∫–∞–ª–∞—Ü–∏—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö —Å–ª—É—á–∞–µ–≤
    if priority >= 9 {
        return s.EscalateToArbitrator(dispute)
    }
    
    return s.db.Save(dispute).Error
}
```

### 3. –§–∞–∑–∞ –ø–µ—Ä–µ–≥–æ–≤–æ—Ä–æ–≤
```go
// negotiation_handler.go
func (h *Handler) HandleNegotiationMessage(c *fiber.Ctx) error {
    var msg DisputeMessage
    if err := c.BodyParser(&msg); err != nil {
        return err
    }
    
    dispute, err := h.service.GetDispute(msg.DisputeID)
    if err != nil {
        return err
    }
    
    // –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞
    userID := c.Locals("userID").(int)
    if userID != dispute.BuyerID && userID != dispute.SellerID {
        return fiber.ErrForbidden
    }
    
    // –ê–Ω–∞–ª–∏–∑ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è
    if msg.Type == "settlement_offer" {
        offer := ParseSettlementOffer(msg.Content)
        
        // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø—Ä–∏–Ω—è—Ç–∏–µ —Ä–∞–∑—É–º–Ω—ã—Ö –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π
        if s.IsReasonableOffer(offer, dispute) {
            msg.Metadata = map[string]interface{}{
                "auto_accept_eligible": true,
                "expires_at": time.Now().Add(48 * time.Hour),
            }
        }
    }
    
    // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è
    if err := h.service.SaveMessage(&msg); err != nil {
        return err
    }
    
    // Real-time —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ WebSocket
    h.wsHub.SendToUser(dispute.GetOtherParty(userID), msg)
    
    // –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∞–π–º-–∞—É—Ç–∞ –ø–µ—Ä–µ–≥–æ–≤–æ—Ä–æ–≤ (72 —á–∞—Å–∞)
    if time.Since(dispute.CreatedAt) > 72*time.Hour && dispute.Status == "negotiating" {
        go h.service.AutoEscalate(dispute.ID)
    }
    
    return c.JSON(fiber.Map{"success": true})
}
```

### 4. –°–±–æ—Ä –∏ –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è –¥–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤
```go
// evidence_manager.go
func (m *EvidenceManager) VerifyEvidence(evidence *models.DisputeEvidence) error {
    // –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ö–µ—à–∞ —Ñ–∞–π–ª–∞
    fileHash, err := m.calculateFileHash(evidence.FileURL)
    if err != nil {
        return err
    }
    
    if evidence.Hash != "" && evidence.Hash != fileHash {
        evidence.Verified = false
        evidence.VerificationNotes = "File hash mismatch - possible tampering"
        return errors.New("evidence tampering detected")
    }
    
    evidence.Hash = fileHash
    
    // –ê–Ω–∞–ª–∏–∑ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
    if evidence.Type == "photo" {
        metadata, err := m.extractImageMetadata(evidence.FileURL)
        if err == nil {
            // –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–∞—Ç—ã —Å—ä–µ–º–∫–∏
            if metadata.DateTime.Before(evidence.Dispute.Order.CreatedAt) {
                evidence.VerificationNotes = "Photo taken before order date"
                evidence.Verified = false
            } else {
                evidence.Metadata = metadata
                evidence.Verified = true
            }
        }
    }
    
    // OCR –¥–ª—è –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
    if evidence.Type == "document" {
        text, err := m.performOCR(evidence.FileURL)
        if err == nil {
            evidence.ExtractedText = text
            // –ü–æ–∏—Å–∫ –∫–ª—é—á–µ–≤–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏
            evidence.Verified = m.validateDocumentContent(text, evidence.Dispute)
        }
    }
    
    return m.db.Save(evidence).Error
}
```

### 5. –ê—Ä–±–∏—Ç—Ä–∞–∂–Ω–æ–µ —Ä–∞–∑–±–∏—Ä–∞—Ç–µ–ª—å—Å—Ç–≤–æ
```go
// arbitration_engine.go
func (e *ArbitrationEngine) AssignArbitrator(dispute *models.Dispute) (*models.AdminUser, error) {
    // –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –∞—Ä–±–∏—Ç—Ä–æ–≤
    var arbitrators []models.AdminUser
    err := e.db.Where("role = ? AND is_active = ?", "arbitrator", true).
        Find(&arbitrators).Error
    if err != nil {
        return nil, err
    }
    
    // –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –∫–æ–Ω—Ñ–ª–∏–∫—Ç—É –∏–Ω—Ç–µ—Ä–µ—Å–æ–≤
    eligible := []models.AdminUser{}
    for _, arb := range arbitrators {
        if !e.hasConflictOfInterest(arb.ID, dispute) {
            eligible = append(eligible, arb)
        }
    }
    
    // –í—ã–±–æ—Ä –ø–æ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω–æ—Å—Ç–∏ –∏ —ç–∫—Å–ø–µ—Ä—Ç–∏–∑–µ
    var selected *models.AdminUser
    minLoad := int(^uint(0) >> 1) // MaxInt
    
    for _, arb := range eligible {
        load := e.getArbitratorLoad(arb.ID)
        expertise := e.getExpertiseScore(arb.ID, dispute.Type)
        
        // Weighted score: –º–µ–Ω—å—à–µ –∑–∞–≥—Ä—É–∑–∫–∞ + –±–æ–ª—å—à–µ —ç–∫—Å–ø–µ—Ä—Ç–∏–∑–∞
        score := load - expertise*10
        
        if score < minLoad {
            minLoad = score
            selected = &arb
        }
    }
    
    // –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ –∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
    dispute.ArbitratorID = &selected.ID
    dispute.Status = "escalated"
    dispute.EscalatedAt = timePtr(time.Now())
    
    // SLA: 24 —á–∞—Å–∞ –Ω–∞ –ø–µ—Ä–≤—ã–π –æ—Ç–≤–µ—Ç
    e.scheduleSLACheck(dispute.ID, 24*time.Hour)
    
    return selected, e.db.Save(dispute).Error
}
```

### 6. –ê–Ω–∞–ª–∏–∑ –∏ –≤—ã–Ω–µ—Å–µ–Ω–∏–µ —Ä–µ—à–µ–Ω–∏—è
```go
// arbitration_decision.go
func (e *ArbitrationEngine) AnalyzeCase(disputeID int) (*DecisionRecommendation, error) {
    dispute, _ := e.getDisputeWithFullContext(disputeID)
    
    recommendation := &DecisionRecommendation{
        DisputeID: disputeID,
        Factors: []DecisionFactor{},
    }
    
    // –ê–Ω–∞–ª–∏–∑ –¥–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤
    evidenceScore := e.analyzeEvidence(dispute.Evidence)
    recommendation.Factors = append(recommendation.Factors, DecisionFactor{
        Name: "Evidence Strength",
        BuyerScore: evidenceScore.BuyerEvidence,
        SellerScore: evidenceScore.SellerEvidence,
        Weight: 0.4,
    })
    
    // –ò—Å—Ç–æ—Ä–∏—è –ø–æ–≤–µ–¥–µ–Ω–∏—è —Å—Ç–æ—Ä–æ–Ω
    behaviorScore := e.analyzeBehaviorHistory(dispute.BuyerID, dispute.SellerID)
    recommendation.Factors = append(recommendation.Factors, DecisionFactor{
        Name: "Historical Behavior",
        BuyerScore: behaviorScore.BuyerReliability,
        SellerScore: behaviorScore.SellerReliability,
        Weight: 0.2,
    })
    
    // –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –ø—Ä–∞–≤–∏–ª–∞–º –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã
    policyScore := e.analyzePolicyCompliance(dispute)
    recommendation.Factors = append(recommendation.Factors, DecisionFactor{
        Name: "Policy Compliance",
        BuyerScore: policyScore.BuyerCompliance,
        SellerScore: policyScore.SellerCompliance,
        Weight: 0.3,
    })
    
    // –ö–æ–º–º—É–Ω–∏–∫–∞—Ü–∏—è –∏ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ –∫–æ–º–ø—Ä–æ–º–∏—Å—Å—É
    communicationScore := e.analyzeCommunication(dispute.Messages)
    recommendation.Factors = append(recommendation.Factors, DecisionFactor{
        Name: "Communication Quality",
        BuyerScore: communicationScore.BuyerScore,
        SellerScore: communicationScore.SellerScore,
        Weight: 0.1,
    })
    
    // –†–∞—Å—á–µ—Ç –∏—Ç–æ–≥–æ–≤–æ–π —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏
    totalBuyerScore := 0.0
    totalSellerScore := 0.0
    
    for _, factor := range recommendation.Factors {
        totalBuyerScore += factor.BuyerScore * factor.Weight
        totalSellerScore += factor.SellerScore * factor.Weight
    }
    
    // –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º–æ–≥–æ —Ä–µ—à–µ–Ω–∏—è
    if totalBuyerScore > totalSellerScore + 0.2 {
        recommendation.Decision = "full_refund"
        recommendation.Confidence = totalBuyerScore
    } else if totalSellerScore > totalBuyerScore + 0.2 {
        recommendation.Decision = "release_payment"
        recommendation.Confidence = totalSellerScore
    } else {
        recommendation.Decision = "partial_refund"
        recommendation.RefundPercent = int(totalBuyerScore * 100)
        recommendation.Confidence = 1.0 - math.Abs(totalBuyerScore-totalSellerScore)
    }
    
    recommendation.Reasoning = e.generateReasoning(recommendation)
    
    return recommendation, nil
}
```

### 7. –ò—Å–ø–æ–ª–Ω–µ–Ω–∏–µ —Ä–µ—à–µ–Ω–∏—è
```go
// resolution_executor.go
func (e *ResolutionExecutor) ExecuteDecision(decision *models.ArbitrationDecision) error {
    tx := e.db.Begin()
    defer tx.Rollback()
    
    dispute, err := e.getDispute(decision.DisputeID)
    if err != nil {
        return err
    }
    
    switch decision.Type {
    case "full_refund":
        // –í–æ–∑–≤—Ä–∞—Ç –ø–æ–ª–Ω–æ–π —Å—É–º–º—ã –ø–æ–∫—É–ø–∞—Ç–µ–ª—é
        if err := e.paymentService.RefundEscrow(dispute.Order.EscrowID, dispute.BuyerID, dispute.Order.Amount); err != nil {
            return err
        }
        
        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ä–µ–ø—É—Ç–∞—Ü–∏–∏ –ø—Ä–æ–¥–∞–≤—Ü–∞
        e.reputationService.AddDisputeLoss(dispute.SellerID, "full_refund")
        
    case "partial_refund":
        // –ß–∞—Å—Ç–∏—á–Ω—ã–π –≤–æ–∑–≤—Ä–∞—Ç
        refundAmount := dispute.Order.Amount * decimal.NewFromFloat(float64(decision.RefundPercent) / 100)
        releaseAmount := dispute.Order.Amount.Sub(refundAmount)
        
        if err := e.paymentService.SplitEscrow(dispute.Order.EscrowID, map[int]decimal.Decimal{
            dispute.BuyerID: refundAmount,
            dispute.SellerID: releaseAmount,
        }); err != nil {
            return err
        }
        
    case "release_payment":
        // –û—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏–µ –ø–ª–∞—Ç–µ–∂–∞ –ø—Ä–æ–¥–∞–≤—Ü—É
        if err := e.paymentService.ReleaseEscrow(dispute.Order.EscrowID, dispute.SellerID); err != nil {
            return err
        }
        
        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ä–µ–ø—É—Ç–∞—Ü–∏–∏ –ø–æ–∫—É–ø–∞—Ç–µ–ª—è
        e.reputationService.AddDisputeLoss(dispute.BuyerID, "payment_released")
        
    case "both_penalized":
        // –†–µ–¥–∫–∏–π —Å–ª—É—á–∞–π - –æ–±–µ —Å—Ç–æ—Ä–æ–Ω—ã –Ω–∞—Ä—É—à–∏–ª–∏ –ø—Ä–∞–≤–∏–ª–∞
        // –°—Ä–µ–¥—Å—Ç–≤–∞ –∏–¥—É—Ç –≤ —Ñ–æ–Ω–¥ –∫–æ–º–ø–µ–Ω—Å–∞—Ü–∏–π –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã
        if err := e.paymentService.TransferToPlatformFund(dispute.Order.EscrowID); err != nil {
            return err
        }
        
        // –°–∞–Ω–∫—Ü–∏–∏ –∫ –æ–±–µ–∏–º —Å—Ç–æ—Ä–æ–Ω–∞–º
        e.sanctionService.ApplySanction(dispute.BuyerID, decision.BuyerSanction)
        e.sanctionService.ApplySanction(dispute.SellerID, decision.SellerSanction)
    }
    
    // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ –¥–∏—Å–ø—É—Ç–∞
    dispute.Status = "resolved"
    dispute.ResolvedAt = timePtr(time.Now())
    dispute.ResolutionType = decision.Type
    dispute.ResolutionAmount = decision.RefundAmount
    
    if err := tx.Save(dispute).Error; err != nil {
        return err
    }
    
    // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ä–µ—à–µ–Ω–∏—è
    decision.ExecutedAt = timePtr(time.Now())
    if err := tx.Save(decision).Error; err != nil {
        return err
    }
    
    // –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è —Å—Ç–æ—Ä–æ–Ω–∞–º
    e.notifyParties(dispute, decision)
    
    // –ó–∞–ø—Ä–æ—Å –æ–±—Ä–∞—Ç–Ω–æ–π —Å–≤—è–∑–∏ (—á–µ—Ä–µ–∑ 24 —á–∞—Å–∞)
    e.scheduleFeedbackRequest(dispute.ID, 24*time.Hour)
    
    return tx.Commit().Error
}
```

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ –≤–∞–ª–∏–¥–∞—Ü–∏—è

### –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ –∑–ª–æ—É–ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–π
1. **–õ–∏–º–∏—Ç—ã –Ω–∞ –¥–∏—Å–ø—É—Ç—ã** - –Ω–µ –±–æ–ª–µ–µ 3 –∞–∫—Ç–∏–≤–Ω—ã—Ö –Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
2. **–í—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è** - 30 –¥–Ω–µ–π —Å –º–æ–º–µ–Ω—Ç–∞ —Å–¥–µ–ª–∫–∏
3. **–î–µ–ø–æ–∑–∏—Ç –∑–∞ –∞–ø–µ–ª–ª—è—Ü–∏—é** - –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è —Å–ø–∞–º–∞
4. **–ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ —Å–µ—Ä–∏–π–Ω—ã—Ö –Ω–∞—Ä—É—à–∏—Ç–µ–ª–µ–π** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–∏—Å—Ç–µ–º–∞

### –ó–∞—â–∏—Ç–∞ –¥–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤
```go
// –¶–∏—Ñ—Ä–æ–≤–∞—è –ø–æ–¥–ø–∏—Å—å –¥–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤
func (m *EvidenceManager) SignEvidence(evidence *models.DisputeEvidence) error {
    // –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–¥–ø–∏—Å–∏
    signature := m.cryptoService.Sign([]byte(evidence.Hash + evidence.UploadedAt.String()))
    evidence.DigitalSignature = signature
    
    // Blockchain anchoring –¥–ª—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö —Å–ª—É—á–∞–µ–≤
    if evidence.Dispute.Priority >= 8 {
        txHash, err := m.blockchainService.AnchorHash(evidence.Hash)
        if err == nil {
            evidence.BlockchainTxHash = txHash
        }
    }
    
    return nil
}
```

### –ö–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç—å
1. **–ê–Ω–æ–Ω–∏–º–∏–∑–∞—Ü–∏—è –¥–ª—è –∞—Ä–±–∏—Ç—Ä–æ–≤** - –Ω–µ –≤–∏–¥—è—Ç –ª–∏—á–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
2. **–®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö** - –ø–ª–∞—Ç–µ–∂–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
3. **–†–∞–∑–¥–µ–ª—å–Ω—ã–π –¥–æ—Å—Ç—É–ø** - –∫–∞–∂–¥–∞—è —Å—Ç–æ—Ä–æ–Ω–∞ –≤–∏–¥–∏—Ç —Ç–æ–ª—å–∫–æ —Å–≤–æ–∏ –¥–∞–Ω–Ω—ã–µ

## üìä –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –∏ –º–µ—Ç—Ä–∏–∫–∏

### KPI —Å–∏—Å—Ç–µ–º—ã –∞—Ä–±–∏—Ç—Ä–∞–∂–∞
```sql
-- –î–∞—à–±–æ—Ä–¥ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
WITH dispute_stats AS (
    SELECT 
        DATE_TRUNC('month', created_at) as month,
        COUNT(*) as total_disputes,
        COUNT(CASE WHEN status = 'resolved' THEN 1 END) as resolved,
        COUNT(CASE WHEN resolution_type = 'full_refund' THEN 1 END) as buyer_wins,
        COUNT(CASE WHEN resolution_type = 'release_payment' THEN 1 END) as seller_wins,
        COUNT(CASE WHEN resolution_type = 'partial_refund' THEN 1 END) as compromises,
        AVG(EXTRACT(EPOCH FROM (resolved_at - created_at))/3600) as avg_resolution_hours,
        AVG(buyer_satisfaction) as avg_buyer_satisfaction,
        AVG(seller_satisfaction) as avg_seller_satisfaction
    FROM disputes
    WHERE created_at >= CURRENT_DATE - INTERVAL '12 months'
    GROUP BY DATE_TRUNC('month', created_at)
)
SELECT 
    month,
    total_disputes,
    resolved::float / NULLIF(total_disputes, 0) * 100 as resolution_rate,
    buyer_wins::float / NULLIF(resolved, 0) * 100 as buyer_win_rate,
    seller_wins::float / NULLIF(resolved, 0) * 100 as seller_win_rate,
    compromises::float / NULLIF(resolved, 0) * 100 as compromise_rate,
    avg_resolution_hours,
    avg_buyer_satisfaction,
    avg_seller_satisfaction,
    (avg_buyer_satisfaction + avg_seller_satisfaction) / 2 as overall_satisfaction
FROM dispute_stats
ORDER BY month DESC;
```

### –ú–µ—Ç—Ä–∏–∫–∏ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
- **–°–∫–æ—Ä–æ—Å—Ç—å —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è**: —Å—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è –¥–æ —Ä–µ—à–µ–Ω–∏—è (—Ü–µ–ª—å < 48 —á–∞—Å–æ–≤)
- **–£–¥–æ–≤–ª–µ—Ç–≤–æ—Ä–µ–Ω–Ω–æ—Å—Ç—å —Ä–µ—à–µ–Ω–∏–µ–º**: —Å—Ä–µ–¥–Ω–∏–π —Ä–µ–π—Ç–∏–Ω–≥ > 4.0/5.0
- **–ü—Ä–æ—Ü–µ–Ω—Ç —ç—Å–∫–∞–ª–∞—Ü–∏–π**: < 20% –¥–∏—Å–ø—É—Ç–æ–≤ —Ç—Ä–µ–±—É—é—Ç –∞—Ä–±–∏—Ç—Ä–∞
- **–ü–æ–≤—Ç–æ—Ä–Ω—ã–µ –¥–∏—Å–ø—É—Ç—ã**: < 5% –ø–æ—Å–ª–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è

## ‚ö° –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è

### –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è —Ä—É—Ç–∏–Ω–Ω—ã—Ö –∫–µ–π—Å–æ–≤
```go
// –ü—Ä–∞–≤–∏–ª–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è
type AutoResolutionRule struct {
    Condition string
    Action    string
    Template  string
}

var autoRules = []AutoResolutionRule{
    {
        Condition: "type = 'not_received' AND days_since_order > 30 AND tracking_provided = false",
        Action:    "full_refund",
        Template:  "auto_refund_no_tracking",
    },
    {
        Condition: "type = 'duplicate_charge' AND payment_proof_valid = true",
        Action:    "full_refund", 
        Template:  "auto_refund_duplicate",
    },
}

func (s *Service) CheckAutoResolution(dispute *models.Dispute) bool {
    for _, rule := range autoRules {
        if s.evaluateRule(rule.Condition, dispute) {
            s.autoResolve(dispute, rule.Action, rule.Template)
            return true
        }
    }
    return false
}
```

### –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ —á–∞—Å—Ç—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
```go
// Redis –∫–µ—à –¥–ª—è –∏—Å—Ç–æ—Ä–∏–∏ –ø–æ–≤–µ–¥–µ–Ω–∏—è
func (s *Service) GetUserDisputeHistory(userID int) (*UserDisputeStats, error) {
    cacheKey := fmt.Sprintf("dispute:stats:user:%d", userID)
    
    // –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–µ—à–∞
    var stats UserDisputeStats
    if err := s.redis.Get(cacheKey, &stats); err == nil {
        return &stats, nil
    }
    
    // –ó–∞–≥—Ä—É–∑–∫–∞ –∏–∑ –ë–î
    stats = s.calculateUserStats(userID)
    
    // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –∫–µ—à –Ω–∞ 1 —á–∞—Å
    s.redis.Set(cacheKey, stats, time.Hour)
    
    return &stats, nil
}
```

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### Unit —Ç–µ—Å—Ç—ã
```go
func TestArbitrationScoring(t *testing.T) {
    engine := NewArbitrationEngine()
    
    testCases := []struct {
        name     string
        evidence EvidenceSet
        expected string
    }{
        {
            name: "Clear buyer case",
            evidence: EvidenceSet{
                BuyerEvidence: []Evidence{
                    {Type: "photo", Verified: true, Score: 0.9},
                    {Type: "payment_proof", Verified: true, Score: 1.0},
                },
                SellerEvidence: []Evidence{},
            },
            expected: "full_refund",
        },
        {
            name: "Balanced case",
            evidence: EvidenceSet{
                BuyerEvidence: []Evidence{
                    {Type: "claim", Verified: true, Score: 0.6},
                },
                SellerEvidence: []Evidence{
                    {Type: "shipping_proof", Verified: true, Score: 0.7},
                },
            },
            expected: "partial_refund",
        },
    }
    
    for _, tc := range testCases {
        t.Run(tc.name, func(t *testing.T) {
            result := engine.ScoreEvidence(tc.evidence)
            assert.Equal(t, tc.expected, result.RecommendedAction)
        })
    }
}
```

### Integration —Ç–µ—Å—Ç—ã
```typescript
// cypress/e2e/dispute-flow.cy.ts
describe('Dispute Resolution Flow', () => {
  it('should create and resolve dispute successfully', () => {
    // –°–æ–∑–¥–∞–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –∑–∞–∫–∞–∑–∞
    cy.createTestOrder().then(order => {
      cy.login(order.buyer);
      cy.visit(`/orders/${order.id}`);
      
      // –û—Ç–∫—Ä—ã—Ç–∏–µ –¥–∏—Å–ø—É—Ç–∞
      cy.contains('Report Problem').click();
      cy.get('[data-testid="dispute-type"]').select('not_received');
      cy.get('[data-testid="dispute-description"]').type('Item never arrived');
      cy.get('[data-testid="submit-dispute"]').click();
      
      // –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è
      cy.contains('Dispute opened successfully');
      cy.url().should('include', '/disputes/');
      
      // –ü–µ—Ä–µ–≥–æ–≤–æ—Ä—ã
      cy.get('[data-testid="dispute-chat"]').type('Please help resolve this');
      cy.get('[data-testid="send-message"]').click();
      
      // –≠—Å–∫–∞–ª–∞—Ü–∏—è
      cy.wait(3000); // –°–∏–º—É–ª—è—Ü–∏—è —Ç–∞–π–º-–∞—É—Ç–∞
      cy.contains('Escalate to Arbitrator').click();
      
      // –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞
      cy.contains('Status: Under Review');
    });
  });
});
```

## üåç –õ–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è –∏ –∫—É–ª—å—Ç—É—Ä–Ω—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

### –†–µ–≥–∏–æ–Ω–∞–ª—å–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞
```go
type RegionalDisputeRules struct {
    Country           string
    ConsumerProtectionDays int  // –°—Ä–æ–∫ –∑–∞—â–∏—Ç—ã –ø–æ–∫—É–ø–∞—Ç–µ–ª—è
    RequiredEvidence  []string  // –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –¥–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤–∞
    PreferredResolution string  // –ü—Ä–µ–¥–ø–æ—á—Ç–∏—Ç–µ–ª—å–Ω—ã–π —Ç–∏–ø —Ä–µ—à–µ–Ω–∏—è
}

var serbianRules = RegionalDisputeRules{
    Country: "RS",
    ConsumerProtectionDays: 14, // EU —Å—Ç–∞–Ω–¥–∞—Ä—Ç
    RequiredEvidence: []string{"fiscal_receipt", "delivery_note"},
    PreferredResolution: "mediation_first",
}
```

### –ú—É–ª—å—Ç–∏—è–∑—ã—á–Ω—ã–µ —à–∞–±–ª–æ–Ω—ã
- –†–µ—à–µ–Ω–∏—è –Ω–∞ —Å–µ—Ä–±—Å–∫–æ–º –∏ –∞–Ω–≥–ª–∏–π—Å–∫–æ–º
- –£—á–µ—Ç –º–µ—Å—Ç–Ω—ã—Ö –ø—Ä–∞–∑–¥–Ω–∏–∫–æ–≤ –≤ SLA
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –º–µ—Å—Ç–Ω—ã–º–∏ —Å–ª—É–∂–±–∞–º–∏ –¥–æ—Å—Ç–∞–≤–∫–∏

## ‚ö†Ô∏è –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

1. **–ù–µ—Ç –æ—Ñ–ª–∞–π–Ω –∞—Ä–±–∏—Ç—Ä–∞–∂–∞** - —Ç–æ–ª—å–∫–æ –æ–Ω–ª–∞–π–Ω —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ
2. **–õ–∏–º–∏—Ç –¥–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤** - –º–∞–∫—Å–∏–º—É–º 10 —Ñ–∞–π–ª–æ–≤ –ø–æ 50MB
3. **–°—Ä–æ–∫ –¥–∞–≤–Ω–æ—Å—Ç–∏** - 30 –¥–Ω–µ–π –ø–æ—Å–ª–µ —Å–¥–µ–ª–∫–∏
4. **–ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Å—É–º–º–∞** - –¥–∏—Å–ø—É—Ç—ã –æ—Ç 500 –¥–∏–Ω–∞—Ä

## üîÑ –°–≤—è–∑–∞–Ω–Ω—ã–µ –ø—Ä–æ—Ü–µ—Å—Å—ã

1. **[Escrow –ø–ª–∞—Ç–µ–∂–∏](escrow-payments-guarantees.md)** - –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ —Å—Ä–µ–¥—Å—Ç–≤ –ø—Ä–∏ –¥–∏—Å–ø—É—Ç–µ
2. **[–†–∞–±–æ—Ç–∞ —Å –æ—Ç–∑—ã–≤–∞–º–∏](reviews-ratings-process.md)** - –≤–ª–∏—è–Ω–∏–µ –Ω–∞ —Ä–µ–π—Ç–∏–Ω–≥
3. **[–ú–æ–¥–µ—Ä–∞—Ü–∏—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞](content-moderation.md)** - –ø—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤
4. **[–ö–æ–º–º—É–Ω–∏–∫–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π](user-communication.md)** - —á–∞—Ç –≤ –¥–∏—Å–ø—É—Ç–∞—Ö

## üìà –ë—É–¥—É—â–∏–µ —É–ª—É—á—à–µ–Ω–∏—è

1. **AI-–º–µ–¥–∏–∞—Ç–æ—Ä** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –∫–æ–º–ø—Ä–æ–º–∏—Å—Å–æ–≤
2. **–í–∏–¥–µ–æ-–∞—Ä–±–∏—Ç—Ä–∞–∂** - –æ–Ω–ª–∞–π–Ω —Å–ª—É—à–∞–Ω–∏—è –¥–ª—è —Å–ª–æ–∂–Ω—ã—Ö –∫–µ–π—Å–æ–≤
3. **–ü—Ä–µ–≤–µ–Ω—Ç–∏–≤–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞** - –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–µ –¥–∏—Å–ø—É—Ç–æ–≤
4. **–°—Ç—Ä–∞—Ö–æ–≤–∞–Ω–∏–µ —Å–¥–µ–ª–æ–∫** - –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è –∑–∞—â–∏—Ç–∞
5. **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å—É–¥–∞–º–∏** - –¥–ª—è –∫—Ä—É–ø–Ω—ã—Ö —Å–ø–æ—Ä–æ–≤