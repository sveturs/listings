# Паспорт компонента: StorefrontActions

## Метаданные
- **Путь**: `/frontend/svetu/src/components/storefronts/public/StorefrontActions.tsx`
- **Роль**: Панель действий для взаимодействия с витриной
- **Тип**: Интерактивный компонент с модальным окном
- **Размер**: 194 строки

## Назначение
Предоставляет контекстно-зависимые действия для витрины магазина. Для владельцев показывает управленческие функции, для посетителей - возможности взаимодействия. Также отображает способы оплаты и доставки.

## Props
```typescript
interface StorefrontActionsProps {
  storefront: Storefront;  // Данные витрины
  isOwner: boolean;        // Является ли пользователь владельцем
}
```

## Зависимости
### Внешние
- `next/navigation` - навигация
- `next-intl` - локализация
- `react` - хук useState

### Внутренние
- `@/contexts/AuthContext` - контекст авторизации
- `@/types/storefront` - типы данных

## Управление состоянием
### Локальное состояние
- `isFollowing` - статус подписки на магазин
- `shareOpen` - состояние модального окна share

### Внешние данные
- `user` - текущий пользователь из AuthContext
- `locale` - текущая локаль

## Бизнес-логика
1. **Разделение по ролям**:
   - Владелец видит: Dashboard, Analytics
   - Посетитель видит: Contact, Follow
   - Общее: Share

2. **Контакт с магазином**:
   - Требует авторизации
   - Перенаправляет в чат с storefront_id

3. **Подписка на магазин**:
   - Требует авторизации
   - TODO: API интеграция не реализована

4. **Поделиться**:
   - Копирование текущего URL в буфер обмена
   - Модальное окно с полем для копирования

5. **Способы оплаты**:
   - cash - Наличные
   - card - Карта
   - bank_transfer - Банковский перевод
   - cod - Наложенный платеж

6. **Опции доставки**:
   - Название службы доставки
   - Базовая стоимость в RSD

## UI структура
```
<>
  <div className="card"> // Основная карточка
    └── <div className="card-body">
        ├── <h3> // "Действия"
        ├── <div> // Кнопки действий
        │   ├── Для владельца:
        │   │   ├── Dashboard (primary)
        │   │   └── Analytics (outline)
        │   └── Для посетителя:
        │       ├── Contact (primary)
        │       └── Follow (outline/accent)
        ├── Share button (ghost)
        ├── Payment Methods (если есть)
        │   └── badges для каждого метода
        └── Delivery Options (если есть)
            └── список с ценами
  
  {shareOpen && <Modal>} // Модальное окно share
    ├── Заголовок
    ├── Input с URL
    ├── Кнопка копирования
    └── Кнопка закрытия
</>
```

## Примеры использования
```typescript
// На публичной странице витрины
<StorefrontActions 
  storefront={storefrontData}
  isOwner={user?.id === storefrontData.user_id}
/>

// В боковой панели
<aside>
  <StorefrontActions storefront={store} isOwner={false} />
</aside>
```

## Известные особенности
### Позитивные
- Контекстно-зависимое отображение действий
- Защита действий авторизацией
- Интуитивные иконки для каждого действия
- Отображение принимаемых способов оплаты и доставки

### Технический долг
- TODO: API для подписки не реализовано
- TODO: Toast уведомление при копировании не показывается
- Жестко закодированная валюта RSD для доставки
- Нет обработки ошибок при копировании в буфер

### Возможные улучшения
- Реализовать API для подписки на магазины
- Добавить toast уведомления
- Добавить социальный sharing (Facebook, Twitter)
- Показывать количество подписчиков
- Добавить QR код для мобильного sharing
- Сделать валюту доставки настраиваемой