# –ü–∞—Å–ø–æ—Ä—Ç –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞: LoginModal

## üìã –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ
- **–ü—É—Ç—å**: `/frontend/svetu/src/components/LoginModal.tsx`
- **–†–æ–ª—å**: –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è –≤—Ö–æ–¥–∞ –∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
- **–¢–∏–ø**: Client Component
- **–†–∞–∑–º–µ—Ä**: 400 —Å—Ç—Ä–æ–∫

## üéØ –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ
–£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–æ–µ –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ —Å –¥–≤—É–º—è —Ä–µ–∂–∏–º–∞–º–∏:
- –í—Ö–æ–¥ –ø–æ email/–ø–∞—Ä–æ–ª—é –∏–ª–∏ —á–µ—Ä–µ–∑ Google OAuth
- –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- Real-time –≤–∞–ª–∏–¥–∞—Ü–∏—è –ø–æ–ª–µ–π
- –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–µ—Ä–≤–µ—Ä–Ω—ã—Ö –æ—à–∏–±–æ–∫ —Å –º–∞–ø–ø–∏–Ω–≥–æ–º

## üîß –°—Ç—Ä—É–∫—Ç—É—Ä–∞ Props
```typescript
interface LoginModalProps {
  isOpen: boolean;           // –°–æ—Å—Ç–æ—è–Ω–∏–µ –≤–∏–¥–∏–º–æ—Å—Ç–∏
  onClose: () => void;       // Callback –∑–∞–∫—Ä—ã—Ç–∏—è
  initialMode?: FormMode;    // 'login' | 'register'
}
```

## üîó –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∏ —Å–≤—è–∑–∏

### –•—É–∫–∏:
- `useAuthForm` - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º —Ñ–æ—Ä–º—ã
- `useFormValidation` - –≤–∞–ª–∏–¥–∞—Ü–∏—è –ø–æ–ª–µ–π
- `useDebounce` - –æ—Ç–ª–æ–∂–µ–Ω–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è
- `useAuth` - –∫–æ–Ω—Ç–µ–∫—Å—Ç –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏

### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:
- `LoginForm` - —Ñ–æ—Ä–º–∞ –≤—Ö–æ–¥–∞
- `RegisterForm` - —Ñ–æ—Ä–º–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏

### –°–µ—Ä–≤–∏—Å—ã:
- `AuthService` - API –≤—ã–∑–æ–≤—ã
- `VALIDATION_MESSAGES` - –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã –æ—à–∏–±–æ–∫

## üìä –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º

### Form State (—á–µ—Ä–µ–∑ useAuthForm):
```typescript
{
  mode: FormMode;              // 'login' | 'register'
  formData: FormData;          // –î–∞–Ω–Ω—ã–µ —Ñ–æ—Ä–º—ã
  errors: Record<string, string>; // –û—à–∏–±–∫–∏ –ø–æ–ª–µ–π
  isLoading: boolean;          // –ó–∞–≥—Ä—É–∑–∫–∞
  successMessage: string;      // –°–æ–æ–±—â–µ–Ω–∏–µ —É—Å–ø–µ—Ö–∞
}
```

### Debounced –∑–Ω–∞—á–µ–Ω–∏—è:
- Email - 500ms
- Password - 500ms  
- Name - 500ms
- ConfirmPassword - 500ms
- Phone - 500ms

## üõ°Ô∏è –í–∞–ª–∏–¥–∞—Ü–∏—è

### Real-time –≤–∞–ª–∏–¥–∞—Ü–∏—è:
1. –ò—Å–ø–æ–ª—å–∑—É–µ—Ç debounced –∑–Ω–∞—á–µ–Ω–∏—è
2. –í–∞–ª–∏–¥–∏—Ä—É–µ—Ç —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ –≤–≤–æ–¥–∞
3. –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –æ—à–∏–±–∫–∏ –±–µ–∑ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –≤–≤–æ–¥–∞

### –ú–∞–ø–ø–∏–Ω–≥ —Å–µ—Ä–≤–µ—Ä–Ω—ã—Ö –æ—à–∏–±–æ–∫:
```typescript
const errorMap = {
  'users.register.error.email_exists': EMAIL_EXISTS,
  'users.login.error.invalid_credentials': INVALID_CREDENTIALS,
  'users.errors.tooManyAttempts': TOO_MANY_ATTEMPTS,
  // –∏ –¥—Ä—É–≥–∏–µ...
}
```

## üîÑ –ü—Ä–æ—Ü–µ—Å—Å—ã

### 1. –ü—Ä–æ—Ü–µ—Å—Å –≤—Ö–æ–¥–∞:
```typescript
1. –í–∞–ª–∏–¥–∞—Ü–∏—è —Ñ–æ—Ä–º—ã
2. AuthService.login(email, password)
3. updateUser() —Å –¥–∞–Ω–Ω—ã–º–∏ –æ—Ç–≤–µ—Ç–∞
4. refreshSession() –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è UI
5. –ó–∞–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª–∞ —á–µ—Ä–µ–∑ 100ms
```

### 2. –ü—Ä–æ—Ü–µ—Å—Å —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏:
```typescript
1. –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Å–µ—Ö –ø–æ–ª–µ–π
2. AuthService.register(data)
3. updateUser() —Å –Ω–æ–≤—ã–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º
4. –ü–æ–∫–∞–∑ —É—Å–ø–µ—à–Ω–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è
5. refreshSession() –∏ –∑–∞–∫—Ä—ã—Ç–∏–µ —á–µ—Ä–µ–∑ 1.5s
```

### 3. Google OAuth:
```typescript
AuthService.loginWithGoogle()
// –†–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ Google ‚Üí callback ‚Üí –∞–≤—Ç–æ–∑–∞–∫—Ä—ã—Ç–∏–µ
```

## ‚ö° –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

### 1. Memoization:
- `useCallback` –¥–ª—è –≤—Å–µ—Ö handlers
- `useMemo` –¥–ª—è fieldsToValidate –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

### 2. Debouncing:
- –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –ª–∏—à–Ω–∏–µ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –ø—Ä–∏ –≤–≤–æ–¥–µ
- 500ms –∑–∞–¥–µ—Ä–∂–∫–∞ –¥–ª—è –≤—Å–µ—Ö –ø–æ–ª–µ–π

### 3. Conditional rendering:
- –ù–µ —Ä–µ–Ω–¥–µ—Ä–∏—Ç—Å—è –µ—Å–ª–∏ `!isOpen`
- Lazy loading —Ñ–æ—Ä–º

## üé® UI/UX –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

### –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ:
- DaisyUI modal –∫–ª–∞—Å—Å—ã
- –ó–∞–∫—Ä—ã—Ç–∏–µ –ø–æ –∫–ª–∏–∫—É –Ω–∞ backdrop
- –ó–∞–∫—Ä—ã—Ç–∏–µ –ø–æ Escape
- –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –∑–∞–∫—Ä—ã—Ç–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ

### –°–æ—Å—Ç–æ—è–Ω–∏—è:
- Loading –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –Ω–∞ –∫–Ω–æ–ø–∫–∞—Ö
- Disabled —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø—Ä–∏ –Ω–µ–≤–∞–ª–∏–¥–Ω–æ–π —Ñ–æ—Ä–º–µ
- Success —Å–æ–æ–±—â–µ–Ω–∏—è —Å –∞–≤—Ç–æ–∑–∞–∫—Ä—ã—Ç–∏–µ–º

## üåç –ò–Ω—Ç–µ—Ä–Ω–∞—Ü–∏–æ–Ω–∞–ª–∏–∑–∞—Ü–∏—è
```typescript
const t = useTranslations('auth');
```

–ö–ª—é—á–∏:
- `auth.loginForm.*`
- `auth.registerForm.*`
- `auth.common.close`

## üìù –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –í Header:
```tsx
const [showLogin, setShowLogin] = useState(false);

<LoginModal 
  isOpen={showLogin}
  onClose={() => setShowLogin(false)}
  initialMode="login"
/>
```

### –° –ø—Ä–µ–¥—É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–º —Ä–µ–∂–∏–º–æ–º:
```tsx
<LoginModal 
  isOpen={true}
  onClose={handleClose}
  initialMode="register"
/>
```

## ‚ö†Ô∏è –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

1. **–¢–∞–π–º–∞—É—Ç—ã –ø–æ—Å–ª–µ —É—Å–ø–µ—Ö–∞**:
   - 100ms –¥–ª—è login (—É—Å—Ç–∞–Ω–æ–≤–∫–∞ cookies)
   - 1500ms –¥–ª—è register (–ø–æ–∫–∞–∑ —Å–æ–æ–±—â–µ–Ω–∏—è)

2. **Provider hardcoded**:
   - Email –ª–æ–≥–∏–Ω –≤—Å–µ–≥–¥–∞ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç `provider: 'email'`

3. **Error mapping**:
   - –°–µ—Ä–≤–µ—Ä–Ω—ã–µ –æ—à–∏–±–∫–∏ –º–∞–ø–ø—è—Ç—Å—è –Ω–∞ –∫–ª–∏–µ–Ω—Ç—Å–∫–∏–µ –∫–ª—é—á–∏

4. **Escape handling**:
   - –ó–∞–∫—Ä—ã—Ç–∏–µ –ø–æ Escape –æ—Ç–∫–ª—é—á–µ–Ω–æ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ

## üîÑ –°–≤—è–∑–∞–Ω–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
- `AuthButton` - –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –º–æ–¥–∞–ª
- `LoginForm` - —Ñ–æ—Ä–º–∞ –≤—Ö–æ–¥–∞
- `RegisterForm` - —Ñ–æ—Ä–º–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
- `AuthContext` - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è