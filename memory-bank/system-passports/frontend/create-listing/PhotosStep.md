# PhotosStep.tsx

## –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ
- **–ü—É—Ç—å**: `frontend/svetu/src/components/create-listing/steps/PhotosStep.tsx`
- **–†–æ–ª—å**: UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –∑–∞–≥—Ä—É–∑–∫–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
- **–¢–∏–ø**: Step –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –º–∞—Å—Ç–µ—Ä–∞ —Å–æ–∑–¥–∞–Ω–∏—è –æ–±—ä—è–≤–ª–µ–Ω–∏—è
- **–†–∞–∑–º–µ—Ä**: 306 —Å—Ç—Ä–æ–∫

## –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ
–ß–µ—Ç–≤–µ—Ä—Ç—ã–π —à–∞–≥ –º–∞—Å—Ç–µ—Ä–∞ —Å–æ–∑–¥–∞–Ω–∏—è –æ–±—ä—è–≤–ª–µ–Ω–∏—è. –û–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –∑–∞–≥—Ä—É–∑–∫—É –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—è–º–∏ —Ç–æ–≤–∞—Ä–∞ —Å drag&drop, preview, –≤—ã–±–æ—Ä–æ–º –≥–ª–∞–≤–Ω–æ–≥–æ —Ñ–æ—Ç–æ –∏ –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π —Ñ–∞–π–ª–æ–≤.

## Props —Å—Ç—Ä—É–∫—Ç—É—Ä–∞
```typescript
interface PhotosStepProps {
  onNext: () => void;   // –ü–µ—Ä–µ—Ö–æ–¥ –∫ —Å–ª–µ–¥—É—é—â–µ–º—É —à–∞–≥—É
  onBack: () => void;   // –í–æ–∑–≤—Ä–∞—Ç –∫ –ø—Ä–µ–¥—ã–¥—É—â–µ–º—É —à–∞–≥—É
}
```

## –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
### –í–Ω–µ—à–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
- `react` - —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∏ refs
- `next-intl` - –∏–Ω—Ç–µ—Ä–Ω–∞—Ü–∏–æ–Ω–∞–ª–∏–∑–∞—Ü–∏—è
- `next/image` - –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è

### –í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
- `@/contexts/CreateListingContext` - –∫–æ–Ω—Ç–µ–∫—Å—Ç —Å–æ–∑–¥–∞–Ω–∏—è –æ–±—ä—è–≤–ª–µ–Ω–∏—è
- `@/utils/toast` - —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é

## –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º
### –õ–æ–∫–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
```typescript
const [photos, setPhotos] = useState<string[]>();        // Base64 —Å—Ç—Ä–æ–∫–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
const [mainPhotoIndex, setMainPhotoIndex] = useState(0); // –ò–Ω–¥–µ–∫—Å –≥–ª–∞–≤–Ω–æ–≥–æ —Ñ–æ—Ç–æ
const [uploading, setUploading] = useState(false);       // –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≥—Ä—É–∑–∫–∏
const [dragOver, setDragOver] = useState(false);         // –°–æ—Å—Ç–æ—è–Ω–∏–µ drag&drop
const fileInputRef = useRef<HTMLInputElement>(null);     // Ref –¥–ª—è —Å–∫—Ä—ã—Ç–æ–≥–æ input
```

### –í–∞–ª–∏–¥–∞—Ü–∏—è —Ñ–∞–π–ª–æ–≤
- **–ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä**: 10MB –Ω–∞ —Ñ–∞–π–ª
- **–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ñ–∞–π–ª–æ–≤**: –¥–æ 8 —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π
- **–¢–∏–ø—ã —Ñ–∞–π–ª–æ–≤**: –≤—Å–µ image/* —Ñ–æ—Ä–º–∞—Ç—ã
- **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫**: toast —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –¥–ª—è –ø—Ä–µ–≤—ã—à–µ–Ω–∏—è –ª–∏–º–∏—Ç–æ–≤

## –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
### –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–æ–≤
1. **Multiple sources**: drag&drop –∏–ª–∏ click selection
2. **Batch processing**: –æ–±—Ä–∞–±–æ—Ç–∫–∞ –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤
3. **FileReader API**: –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –≤ base64 –¥–ª—è preview
4. **Size validation**: –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–∑–º–µ—Ä–∞ –∫–∞–∂–¥–æ–≥–æ —Ñ–∞–π–ª–∞
5. **Auto sync**: –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≥–∞–ª–µ—Ä–µ–µ–π
- **–ì–ª–∞–≤–Ω–æ–µ —Ñ–æ—Ç–æ**: –≤—ã–±–æ—Ä –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –¥–ª—è –æ–±—ä—è–≤–ª–µ–Ω–∏—è
- **–£–¥–∞–ª–µ–Ω–∏–µ —Ñ–æ—Ç–æ**: —Å –ø–µ—Ä–µ—Å—á–µ—Ç–æ–º –∏–Ω–¥–µ–∫—Å–∞ –≥–ª–∞–≤–Ω–æ–≥–æ —Ñ–æ—Ç–æ
- **–ê–¥–∞–ø—Ç–∏–≤–Ω–∞—è —Å–µ—Ç–∫–∞**: 2-3 –∫–æ–ª–æ–Ω–∫–∏ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —ç–∫—Ä–∞–Ω–∞

### TODO –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
```typescript
// TODO: –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –∑–∞–≥—Ä—É–∑–∫—É –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π —á–µ—Ä–µ–∑ MinIO
// –í–†–ï–ú–ï–ù–ù–û–ï –†–ï–®–ï–ù–ò–ï: –õ–æ–∫–∞–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
// –°–º. TODO #19: –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –∑–∞–≥—Ä—É–∑–∫—É –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π —á–µ—Ä–µ–∑ MinIO
```

## UI —Å—Ç—Ä—É–∫—Ç—É—Ä–∞
### –ó–æ–Ω–∞ –∑–∞–≥—Ä—É–∑–∫–∏ (Drop Zone)
- **Visual feedback**: –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Å—Ç–∏–ª–µ–π –ø—Ä–∏ drag over
- **Progress indicator**: loading spinner –ø—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ
- **Multiple triggers**: click –∏ drag&drop
- **Disabled state**: –ø—Ä–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–∏ –ª–∏–º–∏—Ç–∞ –∏–ª–∏ –≤–æ –≤—Ä–µ–º—è –∑–∞–≥—Ä—É–∑–∫–∏

### –ì–∞–ª–µ—Ä–µ—è —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π
- **Grid layout**: –∞–¥–∞–ø—Ç–∏–≤–Ω–∞—è —Å–µ—Ç–∫–∞ 2-3 –∫–æ–ª–æ–Ω–∫–∏
- **Hover overlays**: –∫–Ω–æ–ø–∫–∏ –¥–µ–π—Å—Ç–≤–∏–π –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏
- **Main photo indicator**: badge –Ω–∞ –≥–ª–∞–≤–Ω–æ–º —Ñ–æ—Ç–æ
- **Image optimization**: Next.js Image –∫–æ–º–ø–æ–Ω–µ–Ω—Ç

### –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã
- **Set as main**: –∫–Ω–æ–ø–∫–∞ ‚≠ê –¥–ª—è –≤—ã–±–æ—Ä–∞ –≥–ª–∞–≤–Ω–æ–≥–æ —Ñ–æ—Ç–æ
- **Remove photo**: –∫–Ω–æ–ø–∫–∞ üóëÔ∏è –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è
- **Visual states**: border highlights –¥–ª—è main photo

## –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
```tsx
// –í –º–∞—Å—Ç–µ—Ä–µ —Å–æ–∑–¥–∞–Ω–∏—è –æ–±—ä—è–≤–ª–µ–Ω–∏—è
<PhotosStep
  onNext={() => setCurrentStep(4)}
  onBack={() => setCurrentStep(2)}
/>

// –ü–æ–ª—É—á–µ–Ω–∏–µ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö —Ñ–æ—Ç–æ
const { state } = useCreateListing();
console.log(state.images);        // string[] - base64 –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
console.log(state.mainImageIndex); // number - –∏–Ω–¥–µ–∫—Å –≥–ª–∞–≤–Ω–æ–≥–æ —Ñ–æ—Ç–æ
```

## –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏
### –ü–æ–∑–∏—Ç–∏–≤–Ω—ã–µ
- ‚úÖ Drag & drop –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –¥–ª—è —É–¥–æ–±—Å—Ç–≤–∞ –∑–∞–≥—Ä—É–∑–∫–∏
- ‚úÖ Real-time preview –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è —Ä–∞–∑–º–µ—Ä–∞ –∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Ñ–∞–π–ª–æ–≤
- ‚úÖ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≥–ª–∞–≤–Ω—ã–º —Ñ–æ—Ç–æ —Å visual feedback
- ‚úÖ –ê–¥–∞–ø—Ç–∏–≤–Ω–∞—è –≥–∞–ª–µ—Ä–µ—è –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —ç–∫—Ä–∞–Ω–æ–≤
- ‚úÖ –†–µ–≥–∏–æ–Ω–∞–ª—å–Ω—ã–µ —Å–æ–≤–µ—Ç—ã –¥–ª—è –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö —Ñ–æ—Ç–æ
- ‚úÖ Toast —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö

### –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π –¥–æ–ª–≥
- ‚ö†Ô∏è –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ base64 –≤–º–µ—Å—Ç–æ MinIO blob storage
- ‚ö†Ô∏è –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç compression –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
- ‚ö†Ô∏è –ù–µ—Ç –ø–æ–¥–¥–µ—Ä–∂–∫–∏ progress bars –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏
- ‚ö†Ô∏è –≠–º–æ–¥–∑–∏ –∏–∫–æ–Ω–∫–∏ –≤–º–µ—Å—Ç–æ SVG (‚≠ê, üóëÔ∏è)
- ‚ö†Ô∏è –•–∞—Ä–¥–∫–æ–¥–Ω—ã–µ —Ä–∞–∑–º–µ—Ä—ã –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π (200x128)

### –ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è
- –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å —Å MinIO –¥–ª—è real storage
- –î–æ–±–∞–≤–∏—Ç—å client-side image compression
- –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å crop/resize functionality
- –î–æ–±–∞–≤–∏—Ç—å EXIF data removal –¥–ª—è privacy
- –£–ª—É—á—à–∏—Ç—å accessibility (keyboard navigation)
- –î–æ–±–∞–≤–∏—Ç—å batch operations (select multiple, mass delete)
- –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å drag & drop reordering –≥–∞–ª–µ—Ä–µ–∏