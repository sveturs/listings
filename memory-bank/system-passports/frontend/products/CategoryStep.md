# ะะฐัะฟะพัั ะบะพะผะฟะพะฝะตะฝัะฐ: CategoryStep

## ะะตัะฐะดะฐะฝะฝัะต
- **ะััั**: `frontend/svetu/src/components/products/steps/CategoryStep.tsx`
- **ะะพะปั**: ะจะฐะณ ะฒัะฑะพัะฐ ะบะฐัะตะณะพัะธะธ ัะพะฒะฐัะฐ
- **ะขะธะฟ**: Selection Component
- **ะะฐะทะผะตั**: 424 ัััะพะบะธ

## ะะฐะทะฝะฐัะตะฝะธะต
ะะตัะฒัะน ัะฐะณ ะฒ wizard'ะต ัะพะทะดะฐะฝะธั ัะพะฒะฐัะฐ. ะะฑะตัะฟะตัะธะฒะฐะตั ะธะตัะฐััะธัะตัะบัั ะฝะฐะฒะธะณะฐัะธั ะฟะพ ะดะตัะตะฒั ะบะฐัะตะณะพัะธะน ั ะฒะพะทะผะพะถะฝะพัััั ะฒัะฑะพัะฐ ะบะพะฝะตัะฝะพะน ะบะฐัะตะณะพัะธะธ ะดะปั ัะพะฒะฐัะฐ.

## Props ััััะบัััะฐ
```typescript
interface CategoryStepProps {
  onNext: () => void;  // ะะตัะตัะพะด ะบ ัะปะตะดัััะตะผั ัะฐะณั
}
```

## ะะฐะฒะธัะธะผะพััะธ
- **ะะธะฑะปะธะพัะตะบะธ**: React, next-intl
- **ะะพะฝัะตะบัั**: `CreateProductContext` - ัะฟัะฐะฒะปะตะฝะธะต ัะพััะพัะฝะธะตะผ
- **API**: `apiClient` - ะทะฐะณััะทะบะฐ ะบะฐัะตะณะพัะธะน
- **ะฃัะธะปะธัั**: `toast` - ัะฒะตะดะพะผะปะตะฝะธั
- **ะขะธะฟั**: `MarketplaceCategory` ะธะท generated API types

## ะฃะฟัะฐะฒะปะตะฝะธะต ัะพััะพัะฝะธะตะผ

### ะะพะบะฐะปัะฝะพะต ัะพััะพัะฝะธะต
```typescript
const [allCategories, setAllCategories] = useState<MarketplaceCategory[]>([]);
const [loading, setLoading] = useState(true);
const [selectedCategory, setSelectedCategory] = useState<MarketplaceCategory | null>(
  state.category || null
);
const [currentParentId, setCurrentParentId] = useState<number | null>(null);
const [breadcrumbs, setBreadcrumbs] = useState<MarketplaceCategory[]>([]);
```

### ะะฐะณััะทะบะฐ ะบะฐัะตะณะพัะธะน
- ะะฐะฟัะพั ะบ `/api/v1/marketplace/category-tree`
- ะคะปะฐััะตะฝะธะฝะณ ะดัะตะฒะพะฒะธะดะฝะพะน ััััะบัััั
- Fallback ะฝะฐ ัะตััะพะฒัะต ะบะฐัะตะณะพัะธะธ ะฟัะธ ะพัะธะฑะบะต

## ะะธะทะฝะตั-ะปะพะณะธะบะฐ

### ะะฐะฒะธะณะฐัะธั ะฟะพ ะธะตัะฐััะธะธ
```typescript
const navigateToCategory = (category: MarketplaceCategory) => {
  if (category.id && hasChildren(category.id)) {
    // ะััั ะฟะพะดะบะฐัะตะณะพัะธะธ - ัะณะปัะฑะปัะตะผัั
    setCurrentParentId(category.id);
    setBreadcrumbs([...breadcrumbs, category]);
  } else {
    // ะะพะฝะตัะฝะฐั ะบะฐัะตะณะพัะธั - ะฒัะฑะธัะฐะตะผ
    setSelectedCategory(category);
    setCategory(category);
    clearError('category');
  }
};
```

### ะะฑัะฐะฑะพัะบะฐ ะดัะฑะปะธะบะฐัะพะฒ
```typescript
const seenIds = new Set<number>();
categories.forEach((cat) => {
  if (seenIds.has(cat.id)) {
    console.warn(`Duplicate category ID found: ${cat.id}`);
    return;
  }
  seenIds.add(cat.id);
  // ...
});
```

### ะคะธะปัััะฐัะธั ะบะฐัะตะณะพัะธะน
- ะะพัะฝะตะฒัะต: `!cat.parent_id`
- ะะพะดะบะฐัะตะณะพัะธะธ: `cat.parent_id === currentParentId`

## UI ััััะบัััะฐ

### ะฅะปะตะฑะฝัะต ะบัะพัะบะธ
```
ะัะต ะบะฐัะตะณะพัะธะธ โบ ะญะปะตะบััะพะฝะธะบะฐ โบ ะกะผะฐัััะพะฝั
```

### ะกะตัะบะฐ ะบะฐัะตะณะพัะธะน
```
โโโโโโโโโโโโโโโ โโโโโโโโโโโโโโโ โโโโโโโโโโโโโโโ
โ ๐ฆ          โ โ ๐          โ โ ๐          โ
โ ะญะปะตะบััะพะฝะธะบะฐ โ โ ะะดะตะถะดะฐ      โ โ ะะพะผ ะธ ัะฐะด   โ
โ 125 ัะพะฒะฐัะพะฒ โ โ 89 ัะพะฒะฐัะพะฒ  โ โ 45 ัะพะฒะฐัะพะฒ  โ
โ ะะพะดะบะฐัะตะณะพัะธะธโ โ ะะพะดะบะฐัะตะณะพัะธะธโ โ             โ
โโโโโโโโโโโโโโโ โโโโโโโโโโโโโโโ โโโโโโโโโโโโโโโ
```

### ะะธะทัะฐะปัะฝัะต ัะพััะพัะฝะธั
- **ะะฑััะฝะฐั ะบะฐัะตะณะพัะธั**: border-base-300
- **ะก ะฟะพะดะบะฐัะตะณะพัะธัะผะธ**: ัััะตะปะบะฐ ะฒะฟัะฐะฒะพ
- **ะัะฑัะฐะฝะฝะฐั**: border-primary, ะณะฐะปะพัะบะฐ
- **ะัะธ ะฝะฐะฒะตะดะตะฝะธะธ**: border-primary/50, ัะตะฝั

### ะะดะฐะฟัะธะฒะฝะพััั
- ะะพะฑะธะปัะฝะฐั: 1 ะบะพะปะพะฝะบะฐ, ะบะพะผะฟะฐะบัะฝัะต ะบะฐััะพัะบะธ
- ะะปะฐะฝัะตั: 2 ะบะพะปะพะฝะบะธ (sm:grid-cols-2)
- ะะตัะบัะพะฟ: 3 ะบะพะปะพะฝะบะธ (lg:grid-cols-3)

## ะัะธะผะตัั ะธัะฟะพะปัะทะพะฒะฐะฝะธั

### ะ ProductWizard
```tsx
case 0:
  return <CategoryStep onNext={nextStep} />;
```

### ะะฑัะฐะฑะพัะบะฐ ะฒัะฑะพัะฐ
```tsx
const handleNext = () => {
  if (!selectedCategory) {
    setError('category', t('storefronts.products.categoryRequired'));
    return;
  }
  onNext();
};
```

## ะะทะฒะตััะฝัะต ะพัะพะฑะตะฝะฝะพััะธ

### ะะพะทะธัะธะฒะฝัะต
- โ ะะฝััะธัะธะฒะฝะฐั ะธะตัะฐััะธัะตัะบะฐั ะฝะฐะฒะธะณะฐัะธั
- โ ะะธะทัะฐะปัะฝะฐั ะธะฝะดะธะบะฐัะธั ะฟะพะดะบะฐัะตะณะพัะธะน
- โ ะฅะปะตะฑะฝัะต ะบัะพัะบะธ ะดะปั ะพัะธะตะฝัะฐัะธะธ
- โ Fallback ะฝะฐ ัะตััะพะฒัะต ะดะฐะฝะฝัะต
- โ ะะดะฐะฟัะธะฒะฝัะน ะดะธะทะฐะนะฝ ะดะปั ะฒัะตั ัะบัะฐะฝะพะฒ

### ะขะตัะฝะธัะตัะบะธะน ะดะพะปะณ
- โ๏ธ ะะตั ะฟะพะธัะบะฐ ะฟะพ ะบะฐัะตะณะพัะธัะผ
- โ๏ธ ะััััััะฒัะตั ะบะตัะธัะพะฒะฐะฝะธะต ะทะฐะณััะถะตะฝะฝัั ะบะฐัะตะณะพัะธะน
- โ๏ธ ะะตััะบะพ ะทะฐะบะพะดะธัะพะฒะฐะฝะฝัะต ัะตััะพะฒัะต ะบะฐัะตะณะพัะธะธ
- โ๏ธ ะะตั ะธะฝะดะธะบะฐัะธะธ ะฟััััั ะบะฐัะตะณะพัะธะน

### ะะพะทะผะพะถะฝัะต ัะปัััะตะฝะธั
- ๐ก ะะพะธัะบ ั ะฐะฒัะพะดะพะฟะพะปะฝะตะฝะธะตะผ
- ๐ก ะะทะฑัะฐะฝะฝัะต/ะฟะพะฟัะปััะฝัะต ะบะฐัะตะณะพัะธะธ
- ๐ก ะัะตะดะฟัะพัะผะพัั ัะพะฒะฐัะพะฒ ะฒ ะบะฐัะตะณะพัะธะธ
- ๐ก ะะฝะพะถะตััะฒะตะฝะฝัะน ะฒัะฑะพั ะดะปั ะบัะพัั-ะปะธััะธะฝะณะฐ
- ๐ก ะะตะบะพะผะตะฝะดะฐัะธะธ ะบะฐัะตะณะพัะธะน ะฝะฐ ะพัะฝะพะฒะต ะฝะฐะทะฒะฐะฝะธั