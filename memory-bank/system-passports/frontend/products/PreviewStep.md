# –ü–∞—Å–ø–æ—Ä—Ç –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞: PreviewStep

## –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ
- **–ü—É—Ç—å**: `frontend/svetu/src/components/products/steps/PreviewStep.tsx`
- **–†–æ–ª—å**: –§–∏–Ω–∞–ª—å–Ω—ã–π —à–∞–≥ - –ø—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä –∏ –ø—É–±–ª–∏–∫–∞—Ü–∏—è —Ç–æ–≤–∞—Ä–∞
- **–¢–∏–ø**: Preview & Submit Component
- **–†–∞–∑–º–µ—Ä**: 395 —Å—Ç—Ä–æ–∫

## –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ
–ü–æ—Å–ª–µ–¥–Ω–∏–π —à–∞–≥ –≤ wizard'–µ —Å–æ–∑–¥–∞–Ω–∏—è —Ç–æ–≤–∞—Ä–∞. –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø–æ–ª–Ω—ã–π –ø—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä —Ç–æ–≤–∞—Ä–∞ –ø–µ—Ä–µ–¥ –ø—É–±–ª–∏–∫–∞—Ü–∏–µ–π –∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —Ñ–∏–Ω–∞–ª—å–Ω—É—é –æ—Ç–ø—Ä–∞–≤–∫—É –¥–∞–Ω–Ω—ã—Ö –Ω–∞ —Å–µ—Ä–≤–µ—Ä.

## Props —Å—Ç—Ä—É–∫—Ç—É—Ä–∞
```typescript
interface PreviewStepProps {
  onBack: () => void;      // –í–æ–∑–≤—Ä–∞—Ç –∫ –ø—Ä–µ–¥—ã–¥—É—â–µ–º—É —à–∞–≥—É
  storefrontSlug: string;  // –°–ª–∞–≥ –≤–∏—Ç—Ä–∏–Ω—ã –¥–ª—è API –∑–∞–ø—Ä–æ—Å–æ–≤
}
```

## –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
- **–ë–∏–±–ª–∏–æ—Ç–µ–∫–∏**: React, Next.js (router), next-intl
- **–ö–æ–Ω—Ç–µ–∫—Å—Ç**: `CreateProductContext` - –≤—Å–µ –¥–∞–Ω–Ω—ã–µ —Ç–æ–≤–∞—Ä–∞
- **API**: `apiClient` - –æ—Ç–ø—Ä–∞–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö
- **–£—Ç–∏–ª–∏—Ç—ã**: 
  - `toast` - —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
  - `getTranslatedAttribute` - –ø–µ—Ä–µ–≤–æ–¥ –∞—Ç—Ä–∏–±—É—Ç–æ–≤
- **–¢–∏–ø—ã**: `CategoryAttribute` –∏–∑ generated API types

## –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º

### –õ–æ–∫–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
```typescript
const [submitting, setSubmitting] = useState(false);
const [categoryAttributes, setCategoryAttributes] = useState<CategoryAttribute[]>([]);
```

### –ó–∞–≥—Ä—É–∑–∫–∞ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö –∞—Ç—Ä–∏–±—É—Ç–æ–≤
```typescript
useEffect(() => {
  const loadAttributes = async () => {
    if (!state.category) return;
    
    const response = await apiClient.get(
      `/api/v1/marketplace/categories/${state.category.id}/attributes`
    );
    
    if (response.data) {
      setCategoryAttributes(response.data);
    }
  };
  
  loadAttributes();
}, [state.category]);
```

## –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞

### –°–æ–∑–¥–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞
```typescript
const handleSubmit = async () => {
  setSubmitting(true);
  
  // –°–æ–∑–¥–∞–µ–º —Ç–æ–≤–∞—Ä
  const productResponse = await apiClient.post(
    `/api/v1/storefronts/slug/${storefrontSlug}/products`,
    state.productData
  );
  
  if (productResponse.data) {
    // TODO: –ó–∞–≥—Ä—É–∑–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
    toast.success(t('storefronts.products.productCreated'));
    router.push(`/${locale}/storefronts/${storefrontSlug}/products`);
  }
};
```

### –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
```typescript
// –¶–µ–Ω–∞ —Å –≤–∞–ª—é—Ç–æ–π
const formatPrice = (price: number, currency: string) => {
  return new Intl.NumberFormat('en-US', {
    style: 'currency',
    currency: currency,
  }).format(price);
};

// –ê—Ç—Ä–∏–±—É—Ç—ã —Å —É—á–µ—Ç–æ–º —Ç–∏–ø–∞
const renderAttributeValue = (value: any, attribute?: CategoryAttribute) => {
  if (Array.isArray(value)) return value.join(', ');
  if (typeof value === 'boolean') return value ? '–î–∞' : '–ù–µ—Ç';
  if (typeof value === 'number' && attribute?.options?.unit) {
    return `${value} ${attribute.options.unit}`;
  }
  return String(value || '');
};
```

## UI —Å—Ç—Ä—É–∫—Ç—É—Ä–∞

### Layout - –¥–≤–µ –∫–æ–ª–æ–Ω–∫–∏

#### –õ–µ–≤–∞—è –∫–æ–ª–æ–Ω–∫–∞ - –í–∏–∑—É–∞–ª—å–Ω–∞—è —á–∞—Å—Ç—å
1. **–ì–∞–ª–µ—Ä–µ—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π**
   - –ì–ª–∞–≤–Ω–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ (–±–æ–ª—å—à–æ–µ)
   - –°–µ—Ç–∫–∞ –º–∏–Ω–∏–∞—Ç—é—Ä (–¥–æ 4 + —Å—á–µ—Ç—á–∏–∫)
   - URL.createObjectURL –¥–ª—è –ø—Ä–µ–≤—å—é

2. **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞**
   - –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π
   - –ö–∞—Ç–µ–≥–æ—Ä–∏—è —Ç–æ–≤–∞—Ä–∞

#### –ü—Ä–∞–≤–∞—è –∫–æ–ª–æ–Ω–∫–∞ - –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
1. **–û—Å–Ω–æ–≤–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ**
   - –ù–∞–∑–≤–∞–Ω–∏–µ –∏ –∫–∞—Ç–µ–≥–æ—Ä–∏—è
   - –û–ø–∏—Å–∞–Ω–∏–µ
   - –¶–µ–Ω–∞ –∏ –Ω–∞–ª–∏—á–∏–µ
   - SKU, —à—Ç—Ä–∏—Ö-–∫–æ–¥, —Å—Ç–∞—Ç—É—Å

2. **–°–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏**
   - –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π —Å–ø–∏—Å–æ–∫ –∞—Ç—Ä–∏–±—É—Ç–æ–≤
   - –ü–µ—Ä–µ–≤–µ–¥–µ–Ω–Ω—ã–µ –Ω–∞–∑–≤–∞–Ω–∏—è –∏ –∑–Ω–∞—á–µ–Ω–∏—è
   - –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ —Ç–∏–ø—É

### –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏
```
üéâ –¢–æ–≤–∞—Ä –≥–æ—Ç–æ–≤ –∫ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏!
–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤—Å–µ –¥–∞–Ω–Ω—ã–µ –∏ –Ω–∞–∂–º–∏—Ç–µ "–û–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å"
```

## –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –í ProductWizard
```tsx
case 4:
  return (
    <PreviewStep 
      onBack={prevStep} 
      storefrontSlug={storefrontSlug} 
    />
  );
```

### –û–±—Ä–∞–±–æ—Ç–∫–∞ —É—Å–ø–µ—à–Ω–æ–π –ø—É–±–ª–∏–∫–∞—Ü–∏–∏
```tsx
try {
  const response = await apiClient.post(...);
  toast.success('–¢–æ–≤–∞—Ä —É—Å–ø–µ—à–Ω–æ —Å–æ–∑–¥–∞–Ω');
  router.push(`/storefronts/${slug}/products`);
} catch (error) {
  toast.error(error.message);
}
```

## –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

### –ü–æ–∑–∏—Ç–∏–≤–Ω—ã–µ
- ‚úÖ –ü–æ–ª–Ω—ã–π –ø—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä –∫–∞–∫ –±—É–¥–µ—Ç –≤—ã–≥–ª—è–¥–µ—Ç—å —Ç–æ–≤–∞—Ä
- ‚úÖ –ò–Ω—Ç–µ—Ä–Ω–∞—Ü–∏–æ–Ω–∞–ª–∏–∑–∞—Ü–∏—è —Ü–µ–Ω —á–µ—Ä–µ–∑ Intl.NumberFormat
- ‚úÖ –£–º–Ω–æ–µ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∞—Ç—Ä–∏–±—É—Ç–æ–≤ –ø–æ —Ç–∏–ø—É
- ‚úÖ –í–∏–∑—É–∞–ª—å–Ω–æ–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ —Å –ø–æ–Ω—è—Ç–Ω—ã–º–∏ —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏

### –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π –¥–æ–ª–≥
- ‚ö†Ô∏è TODO: –ó–∞–≥—Ä—É–∑–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞
- ‚ö†Ô∏è –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —á–µ—Ä–Ω–æ–≤–∏–∫–∞
- ‚ö†Ô∏è –ù–µ—Ç –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ–≥–æ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –Ω–∞ –º–æ–±–∏–ª—å–Ω–æ–º
- ‚ö†Ô∏è URL.createObjectURL –º–æ–∂–µ—Ç —É—Ç–µ—á—å –ø–∞–º—è—Ç—å

### –í–æ–∑–º–æ–∂–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è
- üí° –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∑–∞–≥—Ä—É–∑–∫—É –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –Ω–∞ S3/MinIO
- üí° –î–æ–±–∞–≤–∏—Ç—å —Ñ—É–Ω–∫—Ü–∏—é —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —á–µ—Ä–Ω–æ–≤–∏–∫–∞
- üí° –ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä –≤ —Ä–∞–∑–Ω—ã—Ö —Ä–µ–∂–∏–º–∞—Ö (–∫–∞—Ä—Ç–æ—á–∫–∞/—Å–ø–∏—Å–æ–∫)
- üí° –ü—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä –∑–∞–≥—Ä—É–∑–∫–∏ —Å —ç—Ç–∞–ø–∞–º–∏
- üí° –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ø—Ä—è–º–æ –∏–∑ –ø—Ä–µ–≤—å—é