# –ü–∞—Å–ø–æ—Ä—Ç –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞: ImageGallery (Marketplace)

## üìã –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ
- **–ü—É—Ç—å**: `/frontend/svetu/src/components/marketplace/listing/ImageGallery.tsx`
- **–†–æ–ª—å**: –ì–∞–ª–µ—Ä–µ—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π —Ç–æ–≤–∞—Ä–∞ —Å zoom –∏ lightbox
- **–¢–∏–ø**: Client Component
- **–†–∞–∑–º–µ—Ä**: 449 —Å—Ç—Ä–æ–∫

## üéØ –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ
–ü—Ä–æ–¥–≤–∏–Ω—É—Ç–∞—è –≥–∞–ª–µ—Ä–µ—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –¥–ª—è –¥–µ—Ç–∞–ª—å–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã —Ç–æ–≤–∞—Ä–∞ —Å —Ñ—É–Ω–∫—Ü–∏—è–º–∏:
- –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –º–µ–∂–¥—É –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è–º–∏
- Zoom –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏ (desktop)
- –ü–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω—ã–π –ø—Ä–æ—Å–º–æ—Ç—Ä (lightbox)
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –≤–∏–¥–µ–æ-–ø—Ä–µ–≤—å—é
- –ö–ª–∞–≤–∏–∞—Ç—É—Ä–Ω–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è

## üîß –°—Ç—Ä—É–∫—Ç—É—Ä–∞ Props
```typescript
interface ImageGalleryProps {
  images: Array<{
    id: number;
    public_url: string;
    is_video?: boolean;
  }>;
  title: string;  // –î–ª—è alt —Ç–µ–∫—Å—Ç–∞
}
```

## üîó –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∏ —Å–≤—è–∑–∏

### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:
- `Image` (Next.js) - –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
- `config` - –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ URL –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π

### –•—É–∫–∏:
- `useTranslations` - –∏–Ω—Ç–µ—Ä–Ω–∞—Ü–∏–æ–Ω–∞–ª–∏–∑–∞—Ü–∏—è
- `useState`, `useRef`, `useEffect`, `useCallback`

## üìä –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º

### –õ–æ–∫–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ:
```typescript
selectedIndex: number              // –¢–µ–∫—É—â–µ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ
showLightbox: boolean             // –ü–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω—ã–π —Ä–µ–∂–∏–º
isZoomed: boolean                 // –ê–∫—Ç–∏–≤–µ–Ω –ª–∏ zoom
zoomPosition: {x: number, y: number}  // –ü–æ–∑–∏—Ü–∏—è zoom
imageNaturalDimensions: {         // –†–∞–∑–º–µ—Ä—ã –æ—Ä–∏–≥–∏–Ω–∞–ª–∞
  width: number,
  height: number
}
```

## üîß –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏

### navigateImage:
```typescript
navigateImage(direction: number)
```
- –¶–∏–∫–ª–∏—á–µ—Å–∫–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è
- -1 = –Ω–∞–∑–∞–¥, 1 = –≤–ø–µ—Ä–µ–¥
- –í–æ–∑–≤—Ä–∞—Ç –∫ –Ω–∞—á–∞–ª—É/–∫–æ–Ω—Ü—É

### handleMouseMove:
- –í—ã—á–∏—Å–ª—è–µ—Ç –ø–æ–∑–∏—Ü–∏—é –∫—É—Ä—Å–æ—Ä–∞ –Ω–∞–¥ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º
- –£—á–∏—Ç—ã–≤–∞–µ—Ç aspect ratio –∏ object-fit
- –ê–∫—Ç–∏–≤–∏—Ä—É–µ—Ç zoom —Ç–æ–ª—å–∫–æ –Ω–∞–¥ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º

### renderImage:
- –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤:
  - Placeholder (id === 0)
  - –í–∏–¥–µ–æ (is_video === true)
  - –û–±—ã—á–Ω—ã–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
- –†–∞–∑–Ω—ã–µ —Å—Ç–∏–ª–∏ –¥–ª—è main/thumbnail

## üé® UI —Å—Ç—Ä—É–∫—Ç—É—Ä–∞

### –û—Å–Ω–æ–≤–Ω–æ–π –≤–∏–¥:
```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ    [1/5]                ‚îÇ <- –°—á–µ—Ç—á–∏–∫
‚îÇ  ‚óÄ [–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ] ‚ñ∂     ‚îÇ <- –ù–∞–≤–∏–≥–∞—Ü–∏—è
‚îÇ    üîç Click to zoom     ‚îÇ <- –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä
‚îÇ    [Zoom preview]       ‚îÇ <- –ü—Ä–µ–≤—å—é (desktop)
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ [‚óè][‚óã][‚óã][‚óã][‚óã]        ‚îÇ <- –ú–∏–Ω–∏–∞—Ç—é—Ä—ã
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### Lightbox:
```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ         [X]             ‚îÇ <- –ó–∞–∫—Ä—ã—Ç—å
‚îÇ                         ‚îÇ
‚îÇ  ‚óÄ  [–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ]  ‚ñ∂   ‚îÇ <- –ü–æ–ª–Ω—ã–π —ç–∫—Ä–∞–Ω
‚îÇ                         ‚îÇ
‚îÇ    [‚óè][‚óã][‚óã][‚óã][‚óã]     ‚îÇ <- –ú–∏–Ω–∏–∞—Ç—é—Ä—ã –≤–Ω–∏–∑—É
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

## ‚ö° –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### 1. Zoom —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:
- –†–∞—Å—á–µ—Ç –ø–æ–∑–∏—Ü–∏–∏ —Å —É—á–µ—Ç–æ–º object-fit
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ä–∞–∑–Ω—ã—Ö aspect ratio
- 700% —É–≤–µ–ª–∏—á–µ–Ω–∏–µ
- –¢–æ–ª—å–∫–æ –Ω–∞ desktop (hidden lg:block)

### 2. –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π:
```typescript
sizes={isMain 
  ? '(max-width: 768px) 100vw, 66vw'
  : '(max-width: 640px) 80px, 80px'}
priority={isMain && selectedIndex === 0}
```

### 3. –ö–ª–∞–≤–∏–∞—Ç—É—Ä–Ω–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è:
- `Escape` - –∑–∞–∫—Ä—ã—Ç—å lightbox
- `ArrowLeft` - –ø—Ä–µ–¥—ã–¥—É—â–µ–µ
- `ArrowRight` - —Å–ª–µ–¥—É—é—â–µ–µ

### 4. –û–±—Ä–∞–±–æ—Ç–∫–∞ –≤–∏–¥–µ–æ:
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∏–∫–æ–Ω–∫—É play
- –ù–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç zoom
- –°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π overlay –≤ –º–∏–Ω–∏–∞—Ç—é—Ä–∞—Ö

## üåç –ò–Ω—Ç–µ—Ä–Ω–∞—Ü–∏–æ–Ω–∞–ª–∏–∑–∞—Ü–∏—è

–ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –∫–ª—é—á–∏:
- `marketplace.imageGallery.clickToZoom`

## üé® –°—Ç–∏–ª–∏–∑–∞—Ü–∏—è
- Aspect ratio 4:3 –¥–ª—è –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
- DaisyUI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã (btn, backdrop-blur)
- Tailwind scrollbar –¥–ª—è –º–∏–Ω–∏–∞—Ç—é—Ä
- Transitions –¥–ª—è hover —ç—Ñ—Ñ–µ–∫—Ç–æ–≤

## ‚ö†Ô∏è –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

1. **Placeholder –æ–±—Ä–∞–±–æ—Ç–∫–∞**:
   - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `<img>` –≤–º–µ—Å—Ç–æ Next/Image
   - –ü—É—Ç—å `/placeholder-listing.jpg`
   - ESLint disable –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π

2. **Zoom —Ç–æ–ª—å–∫–æ –Ω–∞ desktop**:
   - –°–∫—Ä—ã—Ç –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö (hidden lg:block)
   - –¢—Ä–µ–±—É–µ—Ç —Ç–æ—á–Ω—ã—Ö —Ä–∞—Å—á–µ—Ç–æ–≤ –ø–æ–∑–∏—Ü–∏–∏

3. **Aspect ratio —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω**:
   - 4:3 –¥–ª—è –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
   - –ú–æ–∂–µ—Ç –æ–±—Ä–µ–∑–∞—Ç—å —à–∏—Ä–æ–∫–∏–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è

4. **Video preview**:
   - –¢–æ–ª—å–∫–æ –∏–∫–æ–Ω–∫–∞, –±–µ–∑ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è
   - TODO: –¥–æ–±–∞–≤–∏—Ç—å video player

## üìù –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

```tsx
<ImageGallery
  images={[
    { id: 1, public_url: '/listings/123/1.jpg' },
    { id: 2, public_url: '/listings/123/2.jpg' },
    { id: 3, public_url: '/listings/123/video.mp4', is_video: true }
  ]}
  title="iPhone 13 Pro"
/>
```

## üîÑ –°–≤—è–∑–∞–Ω–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
- `ListingDetailPage` - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –≥–∞–ª–µ—Ä–µ—é
- `config.buildImageUrl` - –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ URL
- –ü–æ—Ö–æ–∂–∏–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –≤ `reviews/ImageGallery`