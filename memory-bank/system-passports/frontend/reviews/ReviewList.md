# ะะฐัะฟะพัั ะบะพะผะฟะพะฝะตะฝัะฐ: ReviewList

## ๐ ะะตัะฐะดะฐะฝะฝัะต
- **ะััั**: `/frontend/svetu/src/components/reviews/ReviewList.tsx`
- **ะะพะปั**: UI Component - Review Display & Management
- **ะขะธะฟ**: React Client Component
- **ะะฐะทะผะตั**: 715 ัััะพะบ

## ๐ฏ ะะฐะทะฝะฐัะตะฝะธะต
ะะพะผะฟะพะฝะตะฝั ะดะปั ะพัะพะฑัะฐะถะตะฝะธั ัะฟะธัะบะฐ ะพัะทัะฒะพะฒ ั ััะฝะบัะธัะผะธ ัะธะปัััะฐัะธะธ, ัะพััะธัะพะฒะบะธ, ะฟะฐะณะธะฝะฐัะธะธ ะธ ะฒะทะฐะธะผะพะดะตะนััะฒะธั. ะะพะดะดะตัะถะธะฒะฐะตั ะณะพะปะพัะพะฒะฐะฝะธะต ะทะฐ ะพัะทัะฒั, ะฟะพะดัะฒะตัะถะดะตะฝะธะต ะฟัะพะดะฐะฒัะพะผ, ัะฟะพั ะธ ะฟัะพัะผะพัั ะธะทะพะฑัะฐะถะตะฝะธะน ะฒ ะณะฐะปะตัะตะต.

## ๐ง Props ััััะบัััะฐ

```typescript
interface ReviewListProps {
  reviews: Review[];                    // ะะฐััะธะฒ ะพัะทัะฒะพะฒ ะดะปั ะพัะพะฑัะฐะถะตะฝะธั
  totalPages: number;                   // ะะฑัะตะต ะบะพะปะธัะตััะฒะพ ัััะฐะฝะธั
  currentPage: number;                  // ะขะตะบััะฐั ัััะฐะฝะธัะฐ
  onPageChange: (page: number) => void; // ะะฑัะฐะฑะพััะธะบ ัะผะตะฝั ัััะฐะฝะธัั
  onSortChange: (sortBy: string) => void; // ะะฑัะฐะฑะพััะธะบ ัะผะตะฝั ัะพััะธัะพะฒะบะธ
  onFilterChange: (filters: Partial<ReviewsFilter>) => void; // ะคะธะปัััะฐัะธั
  currentUserId?: number;               // ID ัะตะบััะตะณะพ ะฟะพะปัะทะพะฒะฐัะตะปั
  sellerId?: number;                    // ID ะฟัะพะดะฐะฒัะฐ (ะดะปั ะพัะพะฑัั ะฟัะฐะฒ)
}
```

## ๐ ะะฐะฒะธัะธะผะพััะธ

### ะะฝะตัะฝะธะต ะฑะธะฑะปะธะพัะตะบะธ
- React (useState)
- Next.js (Image)
- next-intl (useLocale, useTranslations)
- date-fns (formatDistanceToNow)
- date-fns/locale (ru, enUS)

### ะะฝัััะตะฝะฝะธะต ะทะฐะฒะธัะธะผะพััะธ
- `./RatingDisplay` - ะบะพะผะฟะพะฝะตะฝั ะพัะพะฑัะฐะถะตะฝะธั ัะตะนัะธะฝะณะฐ
- `./ImageGallery` - ะณะฐะปะตัะตั ะธะทะพะฑัะฐะถะตะฝะธะน
- `@/hooks/useReviews` - ััะบะธ ะดะปั ัะฐะฑะพัั ั ะพัะทัะฒะฐะผะธ
- `@/types/review` - ัะธะฟั ะพัะทัะฒะพะฒ

## ๐ ะฃะฟัะฐะฒะปะตะฝะธะต ัะพััะพัะฝะธะตะผ

### ะะพะบะฐะปัะฝะพะต ัะพััะพัะฝะธะต (useState)
```typescript
const [selectedRating, setSelectedRating] = useState<number | null>(null);
const [showOnlyWithPhotos, setShowOnlyWithPhotos] = useState(false);
const [showOnlyVerified, setShowOnlyVerified] = useState(false);
const [disputeReviewId, setDisputeReviewId] = useState<number | null>(null);
const [disputeReason, setDisputeReason] = useState('');

// ะกะพััะพัะฝะธะต ะณะฐะปะตัะตะธ ะธะทะพะฑัะฐะถะตะฝะธะน
const [galleryImages, setGalleryImages] = useState<string[]>([]);
const [galleryInitialIndex, setGalleryInitialIndex] = useState(0);
const [isGalleryOpen, setIsGalleryOpen] = useState(false);
```

### ะััะฐัะธะธ (React Query)
```typescript
const voteReviewMutation = useVoteReview();        // ะะพะปะพัะพะฒะฐะฝะธะต ะทะฐ ะพัะทัะฒ
const confirmReviewMutation = useConfirmReview();  // ะะพะดัะฒะตัะถะดะตะฝะธะต ะพัะทัะฒะฐ
const disputeReviewMutation = useDisputeReview();  // ะกะฟะพั ะฟะพ ะพัะทัะฒั
```

## ๐งฉ ะะธะทะฝะตั-ะปะพะณะธะบะฐ

### ะคะธะปัััะฐัะธั ะธ ัะพััะธัะพะฒะบะฐ
```typescript
// ะคะธะปััั ะฟะพ ัะตะนัะธะฝะณั
const handleRatingFilter = (rating: number | null) => {
  if (rating === null) {
    onFilterChange({ min_rating: undefined, max_rating: undefined });
  } else {
    onFilterChange({ min_rating: rating, max_rating: rating });
  }
};
```

### ะะทะฐะธะผะพะดะตะนััะฒะธะต ั ะพัะทัะฒะฐะผะธ
```typescript
// ะะพะปะพัะพะฒะฐะฝะธะต (ะฟะพะปะตะทะฝะพ/ะฝะต ะฟะพะปะตะทะฝะพ)
const handleVote = async (reviewId: number, voteType: 'helpful' | 'not_helpful') => {
  await voteReviewMutation.mutateAsync({ reviewId, voteType });
};

// ะะพะดัะฒะตัะถะดะตะฝะธะต ะฟัะพะดะฐะฒัะพะผ
const handleConfirm = async (reviewId: number) => {
  await confirmReviewMutation.mutateAsync({ reviewId });
};

// ะกะฟะพั ะฟะพ ะพัะทัะฒั
const handleDispute = async () => {
  await disputeReviewMutation.mutateAsync({
    reviewId: disputeReviewId,
    reason: disputeReason,
  });
};
```

### ะฃะฟัะฐะฒะปะตะฝะธะต ะณะฐะปะตัะตะตะน
```typescript
const openImageGallery = (images: string[], initialIndex: number = 0) => {
  setGalleryImages(images);
  setGalleryInitialIndex(initialIndex);
  setIsGalleryOpen(true);
};
```

## ๐จ UI ััััะบัััะฐ

### ะัะฝะพะฒะฝะฐั ััััะบัััะฐ
```
โโ ะคะธะปัััั โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ [ะกะพััะธัะพะฒะบะฐ] [ะะตะนัะธะฝะณ] [ะงะตะบะฑะพะบัั]           โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โโ ะัะทัะฒ 1 โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ [ะะฒะฐัะฐั] [ะะผั] [ะะฐัะฐ]         [ะะตะนัะธะฝะณ] [โโโ] โ
โ ะะพะผะผะตะฝัะฐัะธะน ัะตะบัั...                          โ
โ [โ ะะปััั] ะะพะปะพะถะธัะตะปัะฝัะต ััะพัะพะฝั              โ
โ [โ ะะธะฝััั] ะััะธัะฐัะตะปัะฝัะต ััะพัะพะฝั             โ
โ [ะคะพัะพ] [ะคะพัะพ] [ะคะพัะพ]                         โ
โ โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ  โ
โ [๐ 12] [๐ 2]  [ะะพะดัะฒะตัะดะธัั] [ะกะฟะพั]        โ
โ โโ ะัะฒะตั ะฟัะพะดะฐะฒัะฐ                            โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โโ ะะฐะณะธะฝะฐัะธั โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ          [โ] [1] [2] [3] [โ]                  โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

### ะะฐะฝะตะปั ัะธะปัััะพะฒ
- **ะกะพััะธัะพะฒะบะฐ**: ะะพ ะดะฐัะต, ัะตะนัะธะฝะณั, ะฟะพะปะตะทะฝะพััะธ
- **ะคะธะปััั ะฟะพ ัะตะนัะธะฝะณั**: ะะฝะพะฟะบะธ 1-5 ะทะฒัะทะด + "ะัะต"
- **ะงะตะบะฑะพะบัั**: ะก ัะพัะพ, ะฟัะพะฒะตัะตะฝะฝัะต ะฟะพะบัะฟะบะธ

### ะะฐััะพัะบะฐ ะพัะทัะฒะฐ

#### ะะฐะณะพะปะพะฒะพะบ
- ะะฒะฐัะฐั ะฟะพะปัะทะพะฒะฐัะตะปั (ะธะปะธ ะทะฐะณะปััะบะฐ ั ะธะฝะธัะธะฐะปะพะผ)
- ะะผั ะฟะพะปัะทะพะฒะฐัะตะปั
- ะะฐัะฐ ัะพะทะดะฐะฝะธั (ะพัะฝะพัะธัะตะปัะฝะฐั, ัะตัะตะท date-fns)
- ะะตะนัะธะฝะณ (ะทะฒัะทะดั)
- ะะฝะฐัะบะธ ััะฐัััะฐ (ะฟัะพะฒะตัะตะฝะฝะฐั ะฟะพะบัะฟะบะฐ, ะฟะพะดัะฒะตัะถะดัะฝ ะฟัะพะดะฐะฒัะพะผ)

#### ะะพะฝัะตะฝั
- ะัะฝะพะฒะฝะพะน ะบะพะผะผะตะฝัะฐัะธะน
- ะะปััั (ั ะทะตะปัะฝะพะน ะธะบะพะฝะบะพะน)
- ะะธะฝััั (ั ะถัะปัะพะน ะธะบะพะฝะบะพะน)
- ะคะพัะพะณัะฐัะธะธ (ะผะธะฝะธะฐัััั 80x80px)

#### ะะตะนััะฒะธั
- ะะฝะพะฟะบะธ ะณะพะปะพัะพะฒะฐะฝะธั (ะฟะพะปะตะทะฝะพ/ะฝะต ะฟะพะปะตะทะฝะพ)
- ะะพะดัะฒะตัะถะดะตะฝะธะต ะฟัะพะดะฐะฒัะพะผ (ัะพะปัะบะพ ะดะปั ะฟัะพะดะฐะฒัะฐ)
- ะกะฟะพั (ะดะปั ะฟัะพะดะฐะฒัะฐ ะธ ะฐะฒัะพัะฐ ะพัะทัะฒะฐ)

#### ะัะฒะตั ะฟัะพะดะฐะฒัะฐ
- ะัะพะฑัะฐะถะฐะตััั ะฟะพะด ะพัะฝะพะฒะฝัะผ ะพัะทัะฒะพะผ
- ะกัะธะปะธะทะพะฒะฐะฝ ะบะฐะบ ัะธัะฐัะฐ ั ะพััััะฟะพะผ ะธ ัะพะฝะพะผ

## ๐ง ะคัะฝะบัะธะพะฝะฐะปัะฝัะต ะฒะพะทะผะพะถะฝะพััะธ

### ะะพะบะฐะปะธะทะฐัะธั
```typescript
const locale = useLocale();              // ะขะตะบััะฐั ะปะพะบะฐะปั
const t = useTranslations('reviews.list'); // ะะตัะตะฒะพะดั
const dateLocale = locale === 'ru' ? ru : enUS; // ะะพะบะฐะปั ะดะปั ะดะฐั
```

### ะะฝะธะผะฐัะธะธ
- ะะปะฐะฒะฝะพะต ะฟะพัะฒะปะตะฝะธะต ะบะฐััะพัะตะบ ะพัะทัะฒะพะฒ (`animate-in fade-in-50 slide-in-from-bottom-2`)
- ะะฐะดะตัะถะบะฐ ะฐะฝะธะผะฐัะธะธ ะดะปั ะบะฐะถะดะพะณะพ ัะปะตะผะตะฝัะฐ (`animationDelay: ${index * 50}ms`)
- ะะตัะตัะพะดั ะฟัะธ ะฝะฐะฒะตะดะตะฝะธะธ

### ะะดะฐะฟัะธะฒะฝะพััั
- ะัะฟะพะปัะทัะตั CSS Grid ะดะปั ัะฐะทะผะตัะตะฝะธั ัะพัะพะณัะฐัะธะน
- ะะดะฐะฟัะธะฒะฝัะต ะพััััะฟั (p-4 lg:p-6)
- ะะพะฑะธะปัะฝะฐั ะพะฟัะธะผะธะทะฐัะธั ัะปะตะผะตะฝัะพะฒ ัะฟัะฐะฒะปะตะฝะธั

## ๐ญ ะะพะดะฐะปัะฝัะต ะพะบะฝะฐ

### ะะพะดะฐะปัะฝะพะต ะพะบะฝะพ ัะฟะพัะฐ
```typescript
// ะกัััะบัััะฐ ะผะพะดะฐะปัะฝะพะณะพ ะพะบะฝะฐ
{disputeReviewId && (
  <div className="modal modal-open">
    <div className="modal-box max-w-md">
      <h3>{t('disputeReview')}</h3>
      <textarea 
        value={disputeReason}
        placeholder={t('disputePlaceholder')}
      />
      <div className="flex gap-3 justify-end">
        <button onClick={handleCancel}>Cancel</button>
        <button onClick={handleDispute}>Submit</button>
      </div>
    </div>
  </div>
)}
```

## ๐จ ะะพะผะฟะพะฝะตะฝัั ะธะฝัะตะณัะฐัะธะธ

### ImageGallery
```typescript
<ImageGallery
  images={galleryImages}
  initialIndex={galleryInitialIndex}
  isOpen={isGalleryOpen}
  onClose={closeImageGallery}
/>
```

### RatingDisplay
```typescript
<RatingDisplay
  rating={review.rating}
  size="sm"
  showValue={false}
/>
```

## ๐ก ะัะธะผะตัั ะธัะฟะพะปัะทะพะฒะฐะฝะธั

```typescript
// ะะฐะทะพะฒะพะต ะธัะฟะพะปัะทะพะฒะฐะฝะธะต
<ReviewList
  reviews={reviews}
  totalPages={5}
  currentPage={1}
  onPageChange={(page) => setCurrentPage(page)}
  onSortChange={(sort) => setSortBy(sort)}
  onFilterChange={(filters) => setFilters(filters)}
/>

// ะก ะฟัะฐะฒะฐะผะธ ะฟะพะปัะทะพะฒะฐัะตะปั
<ReviewList
  reviews={reviews}
  totalPages={3}
  currentPage={2}
  onPageChange={handlePageChange}
  onSortChange={handleSortChange}
  onFilterChange={handleFilterChange}
  currentUserId={user?.id}
  sellerId={listing.seller_id}
/>
```

## โ๏ธ ะะทะฒะตััะฝัะต ะพัะพะฑะตะฝะฝะพััะธ

### ะัะฐะฒะฐ ะดะพัััะฟะฐ
- **ะัะพะดะฐะฒะตั** ะผะพะถะตั ะฟะพะดัะฒะตัะถะดะฐัั ะพัะทัะฒั ะธ ัะพะทะดะฐะฒะฐัั ัะฟะพัั
- **ะะฒัะพั ะพัะทัะฒะฐ** ะผะพะถะตั ัะพะทะดะฐะฒะฐัั ัะฟะพัั
- **ะะฑััะฝัะต ะฟะพะปัะทะพะฒะฐัะตะปะธ** ะผะพะณัั ะณะพะปะพัะพะฒะฐัั ะทะฐ ะฟะพะปะตะทะฝะพััั

### ะะณัะฐะฝะธัะตะฝะธั ัะธะปัััะพะฒ
- ะคะธะปัััั "ะก ัะพัะพ" ะธ "ะัะพะฒะตัะตะฝะฝัะต" ะฟะพะบะฐ ะฝะต ัะตะฐะปะธะทะพะฒะฐะฝั ะฝะฐ ะฑัะบะตะฝะดะต
- ะฃะบะฐะทะฐะฝั ะบะฐะบ ะทะฐะณะปััะบะธ ั ะบะพะผะผะตะฝัะฐัะธัะผะธ

### ะัะพะธะทะฒะพะดะธัะตะปัะฝะพััั
- ะะตะฝะดะตัะธั ะฒัะต ะพัะทัะฒั ััะฐะทั (ะฝะตั ะฒะธัััะฐะปะธะทะฐัะธะธ)
- ะะฝะธะผะฐัะธะธ ะผะพะณัั ะฒะปะธััั ะฝะฐ ะฟัะพะธะทะฒะพะดะธัะตะปัะฝะพััั ะฟัะธ ะฑะพะปััะพะผ ะบะพะปะธัะตััะฒะต ะพัะทัะฒะพะฒ
- Debug ะปะพะณะธัะพะฒะฐะฝะธะต ะฒะบะปััะตะฝะพ ะฒ ะฟัะพะดะฐะบัะตะฝะต

### ะะตะทะพะฟะฐัะฝะพััั
- ะะตั ะฒะฐะปะธะดะฐัะธะธ ะฟัะฐะฒ ะฝะฐ ะฑัะบะตะฝะดะต ะฟะตัะตะด ะฟะพะบะฐะทะพะผ ะบะฝะพะฟะพะบ
- ะะพะปะฐะณะฐะตััั ะฝะฐ ะฟัะพะฒะตัะบะธ ะฒ API

### UX ะพัะพะฑะตะฝะฝะพััะธ
- ะะฐะณะธะฝะฐัะธั ะพะณัะฐะฝะธัะตะฝะฐ 5 ะบะฝะพะฟะบะฐะผะธ ะดะปั ัะดะพะฑััะฒะฐ
- ะะธะฝะธะฐัััั ัะพัะพะณัะฐัะธะน ะบะปะธะบะฐะฑะตะปัะฝั ะดะปั ะพัะบัััะธั ะณะฐะปะตัะตะธ
- ะะฝะดะธะบะฐัะพัั ะทะฐะณััะทะบะธ ะดะปั ะฒัะตั ะฐัะธะฝััะพะฝะฝัั ะพะฟะตัะฐัะธะน

### ะัะปััะธัะทััะฝะพััั
- ะะพะดะดะตัะถะบะฐ ะฟะตัะตะฒะพะดะพะฒ ัะตัะตะท next-intl
- ะะพะบะฐะปะธะทะฐัะธั ะดะฐั ัะตัะตะท date-fns
- ะะพะดะดะตัะถะบะฐ ะฟะตัะตะฒะพะดะพะฒ ะบะพะฝัะตะฝัะฐ ะพัะทัะฒะพะฒ