# –ü–∞—Å–ø–æ—Ä—Ç –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞: ReviewForm

## üìã –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ
- **–ü—É—Ç—å**: `/frontend/svetu/src/components/reviews/ReviewForm.tsx`
- **–†–æ–ª—å**: UI Component - Review Creation Form
- **–¢–∏–ø**: React Client Component
- **–†–∞–∑–º–µ—Ä**: 594 —Å—Ç—Ä–æ–∫–∏

## üéØ –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ
–ö–æ–º–ø–ª–µ–∫—Å–Ω–∞—è —Ñ–æ—Ä–º–∞ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –æ—Ç–∑—ã–≤–æ–≤ —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π —Ä–µ–π—Ç–∏–Ω–≥–∞, —Ç–µ–∫—Å—Ç–æ–≤–æ–≥–æ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è, –ø–ª—é—Å–æ–≤/–º–∏–Ω—É—Å–æ–≤, –∑–∞–≥—Ä—É–∑–∫–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –∏ –¥–≤—É—Ö—ç—Ç–∞–ø–Ω–æ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–∞ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏. –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç legacy –∏ –Ω–æ–≤—ã–π API.

## üîß Props —Å—Ç—Ä—É–∫—Ç—É—Ä–∞

```typescript
interface ReviewFormProps {
  entityType: 'listing' | 'user' | 'storefront';  // –¢–∏–ø —Å—É—â–Ω–æ—Å—Ç–∏
  entityId: number;                               // ID —Å—É—â–Ω–æ—Å—Ç–∏
  storefrontId?: number;                          // ID –≤–∏—Ç—Ä–∏–Ω—ã (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
  
  onSuccess?: () => void;                         // Callback —É—Å–ø–µ—à–Ω–æ–π –æ—Ç–ø—Ä–∞–≤–∫–∏
  onCancel: () => void;                          // Callback –æ—Ç–º–µ–Ω—ã
  
  // Legacy –ø–æ–¥–¥–µ—Ä–∂–∫–∞
  legacyOnSubmit?: (data: {
    rating: number;
    comment: string;
    pros?: string;
    cons?: string;
    photos?: string[];
  }) => Promise<void>;
}
```

## üîó –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

### –í–Ω–µ—à–Ω–∏–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏
- `next/image` - –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
- `next-intl` - –∏–Ω—Ç–µ—Ä–Ω–∞—Ü–∏–æ–Ω–∞–ª–∏–∑–∞—Ü–∏—è

### –í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
- `RatingInput` - –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –≤—ã–±–æ—Ä–∞ —Ä–µ–π—Ç–∏–Ω–≥–∞
- `@/hooks/useReviews` - —Ö—É–∫–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å API
- `@/types/review` - —Ç–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö

### –•—É–∫–∏
- `useCreateDraftReview` - —Å–æ–∑–¥–∞–Ω–∏–µ —á–µ—Ä–Ω–æ–≤–∏–∫–∞
- `useUploadReviewPhotosToReview` - –∑–∞–≥—Ä—É–∑–∫–∞ —Ñ–æ—Ç–æ –∫ –æ—Ç–∑—ã–≤—É
- `usePublishReview` - –ø—É–±–ª–∏–∫–∞—Ü–∏—è –æ—Ç–∑—ã–≤–∞
- `useUploadReviewPhotos` - legacy –∑–∞–≥—Ä—É–∑–∫–∞ —Ñ–æ—Ç–æ

## üîÑ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º

### –§–æ—Ä–º–∞ –¥–∞–Ω–Ω—ã—Ö
```typescript
rating: number           // –†–µ–π—Ç–∏–Ω–≥ (1-5)
comment: string         // –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π
pros: string           // –ü–ª—é—Å—ã (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
cons: string           // –ú–∏–Ω—É—Å—ã (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
photos: File[]         // –ó–∞–≥—Ä—É–∂–∞–µ–º—ã–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
```

### UI —Å–æ—Å—Ç–æ—è–Ω–∏–µ
```typescript
errors: Record<string, string>     // –û—à–∏–±–∫–∏ –≤–∞–ª–∏–¥–∞—Ü–∏–∏
dragActive: boolean               // –ê–∫—Ç–∏–≤–Ω–æ–µ –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏–µ
currentStep: 'form' | 'uploading' | 'publishing'  // –®–∞–≥ –ø—Ä–æ—Ü–µ—Å—Å–∞
```

## üß© –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞

### –í–∞–ª–∏–¥–∞—Ü–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
- –î–æ–ø—É—Å—Ç–∏–º—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã: JPEG, PNG, WebP
- –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞: 5MB
- –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ: 5 —Ñ–∞–π–ª–æ–≤

### –í–∞–ª–∏–¥–∞—Ü–∏—è —Ñ–æ—Ä–º—ã
```typescript
- rating: –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ (–Ω–µ 0)
- comment: –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ, –º–∏–Ω–∏–º—É–º 10 —Å–∏–º–≤–æ–ª–æ–≤
- pros/cons: –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –º–∞–∫—Å–∏–º—É–º 300 —Å–∏–º–≤–æ–ª–æ–≤
- comment: –º–∞–∫—Å–∏–º—É–º 500 —Å–∏–º–≤–æ–ª–æ–≤
```

### –î–≤—É—Ö—ç—Ç–∞–ø–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å –ø—É–±–ª–∏–∫–∞—Ü–∏–∏
1. **–°–æ–∑–¥–∞–Ω–∏–µ —á–µ—Ä–Ω–æ–≤–∏–∫–∞** - —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –æ—Ç–∑—ã–≤–∞
2. **–ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–æ—Ç–æ** - –µ—Å–ª–∏ –µ—Å—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
3. **–ü—É–±–ª–∏–∫–∞—Ü–∏—è** - –∞–∫—Ç–∏–≤–∞—Ü–∏—è –æ—Ç–∑—ã–≤–∞

### Legacy –ø–æ–¥–¥–µ—Ä–∂–∫–∞
- –û–¥–Ω–æ—ç—Ç–∞–ø–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å —á–µ—Ä–µ–∑ `legacyOnSubmit`
- –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–æ—Ç–æ —á–µ—Ä–µ–∑ —Å—Ç–∞—Ä—ã–π API
- –û—Ç–ª–∞–¥–æ—á–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –∏ –∞–ª–µ—Ä—Ç—ã

## üé® UI —Å—Ç—Ä—É–∫—Ç—É—Ä–∞

### –û—Å–Ω–æ–≤–Ω—ã–µ —Å–µ–∫—Ü–∏–∏

1. **–ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –ø—Ä–æ–≥—Ä–µ—Å—Å–∞** (—Ç–æ–ª—å–∫–æ –Ω–æ–≤—ã–π API)
   - –ü–æ—à–∞–≥–æ–≤—ã–π –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä
   - –ê–Ω–∏–º–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å–ø–∏–Ω–Ω–µ—Ä—ã
   - –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ –º–µ—Ç–∫–∏

2. **–†–µ–π—Ç–∏–Ω–≥** (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ –ø–æ–ª–µ)
   - –ö–æ–º–ø–æ–Ω–µ–Ω—Ç RatingInput —Ä–∞–∑–º–µ—Ä–∞ lg
   - –ö—Ä–∞—Å–Ω–∞—è –∑–≤—ë–∑–¥–æ—á–∫–∞ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
   - –ê–Ω–∏–º–∞—Ü–∏—è fade-in

3. **–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π** (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ –ø–æ–ª–µ)
   - Textarea —Å –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–π –≤—ã—Å–æ—Ç–æ–π 120px
   - –°—á—ë—Ç—á–∏–∫ —Å–∏–º–≤–æ–ª–æ–≤ (500 max)
   - –í–∞–ª–∏–¥–∞—Ü–∏—è –º–∏–Ω–∏–º—É–º 10 —Å–∏–º–≤–æ–ª–æ–≤

4. **–ü–ª—é—Å—ã –∏ –º–∏–Ω—É—Å—ã** (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
   - –î–≤—É—Ö–∫–æ–ª–æ–Ω–æ—á–Ω–∞—è —Å–µ—Ç–∫–∞ –Ω–∞ desktop
   - –ò–∫–æ–Ω–∫–∏ —Å —Ü–≤–µ—Ç–æ–≤–æ–π –∫–æ–¥–∏—Ä–æ–≤–∫–æ–π
   - Success (–∑–µ–ª—ë–Ω—ã–π) –¥–ª—è –ø–ª—é—Å–æ–≤
   - Warning (–∂—ë–ª—Ç—ã–π) –¥–ª—è –º–∏–Ω—É—Å–æ–≤

5. **–ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π**
   - Drag & drop –æ–±–ª–∞—Å—Ç—å
   - –ü—Ä–µ–≤—å—é –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
   - –ö–Ω–æ–ø–∫–∏ —É–¥–∞–ª–µ–Ω–∏—è —Å hover —ç—Ñ—Ñ–µ–∫—Ç–æ–º
   - –°—á—ë—Ç—á–∏–∫ —Ñ–∞–π–ª–æ–≤ (0/5)

6. **–ö–Ω–æ–ø–∫–∏ –¥–µ–π—Å—Ç–≤–∏–π**
   - –û—Ç–ø—Ä–∞–≤–∏—Ç—å (—Å loading —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º)
   - –û—Ç–º–µ–Ω–∞

### –ê–Ω–∏–º–∞—Ü–∏–∏
- –ü–æ—ç—Ç–∞–ø–Ω—ã–µ fade-in –∞–Ω–∏–º–∞—Ü–∏–∏ —Å –∑–∞–¥–µ—Ä–∂–∫–∞–º–∏
- Zoom-in –¥–ª—è –ø—Ä–µ–≤—å—é –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
- Hover —ç—Ñ—Ñ–µ–∫—Ç—ã –¥–ª—è –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤

## üí° –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

```typescript
// –ë–∞–∑–æ–≤–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –¥–ª—è —Ç–æ–≤–∞—Ä–∞
<ReviewForm
  entityType="listing"
  entityId={123}
  onSuccess={() => router.push('/reviews')}
  onCancel={() => setShowForm(false)}
/>

// –î–ª—è –≤–∏—Ç—Ä–∏–Ω—ã —Å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–º ID
<ReviewForm
  entityType="storefront"
  entityId={456}
  storefrontId={789}
  onSuccess={handleReviewSuccess}
  onCancel={handleCancel}
/>

// Legacy —Ä–µ–∂–∏–º
<ReviewForm
  entityType="user"
  entityId={111}
  onCancel={handleCancel}
  legacyOnSubmit={async (data) => {
    await api.createReview(data);
    toast.success('–û—Ç–∑—ã–≤ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω!');
  }}
/>

// –í –º–æ–¥–∞–ª—å–Ω–æ–º –æ–∫–Ω–µ
function ReviewModal({ isOpen, listing, onClose }) {
  return (
    <Modal isOpen={isOpen} onClose={onClose}>
      <ReviewForm
        entityType="listing"
        entityId={listing.id}
        onSuccess={() => {
          toast.success('–°–ø–∞—Å–∏–±–æ –∑–∞ –æ—Ç–∑—ã–≤!');
          onClose();
        }}
        onCancel={onClose}
      />
    </Modal>
  );
}
```

## ‚ö†Ô∏è –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

### –õ–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è
- –ü–æ–ª–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ i18n —á–µ—Ä–µ–∑ `reviews.form`
- –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ –∫–ª—é—á–∏ –¥–ª—è –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ –∏ –æ—à–∏–±–æ–∫

### –§–∞–π–ª–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `URL.createObjectURL` –¥–ª—è –ø—Ä–µ–≤—å—é
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞ File objects
- Drag & drop —Å preventDefault

### Legacy —Ä–µ–∂–∏–º
- **–û—Ç–ª–∞–¥–æ—á–Ω—ã–µ –∞–ª–µ—Ä—Ç—ã** –≤ production –∫–æ–¥–µ
- Console.log —Å–æ–æ–±—â–µ–Ω–∏—è –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏
- –†–∞–∑–Ω—ã–µ –ø—É—Ç–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ API

### –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
- –ù–µ—Ç –º–µ–º–æ–∏–∑–∞—Ü–∏–∏ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ —Å–æ–±—ã—Ç–∏–π
- –ß–∞—Å—Ç—ã–µ –ø–µ—Ä–µ—Ä–µ–Ω–¥–µ—Ä—ã –ø—Ä–∏ –≤–≤–æ–¥–µ —Ç–µ–∫—Å—Ç–∞
- –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤ –≤ –∫–∞–∂–¥–æ–º —Ä–µ–Ω–¥–µ—Ä–µ

### –î–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å
- aria-label –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç
- –¢–æ–ª—å–∫–æ –≤–∏–∑—É–∞–ª—å–Ω–∞—è –∏–Ω–¥–∏–∫–∞—Ü–∏—è –æ—à–∏–±–æ–∫
- –ù–µ—Ç –∫–ª–∞–≤–∏–∞—Ç—É—Ä–Ω–æ–π –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ –¥–ª—è drag & drop

### –°—Ç–∏–ª–∏–∑–∞—Ü–∏—è
- DaisyUI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∏ —Ü–≤–µ—Ç–∞
- Tailwind –∞–Ω–∏–º–∞—Ü–∏–∏ –∏ –ø–µ—Ä–µ—Ö–æ–¥—ã
- Responsive —Å–µ—Ç–∫–∏ –∏ –∫–æ–º–ø–æ–Ω–æ–≤–∫–∏

### –ö–ª—é—á–∏ –ø–µ—Ä–µ–≤–æ–¥–æ–≤
```
reviews.form.rating.label/error
reviews.form.comment.label/placeholder/error/tooShort
reviews.form.pros.label/placeholder
reviews.form.cons.label/placeholder
reviews.form.photos.label/dragText/fileTypes/maxFiles/limitReached
reviews.form.progress.creating/uploading/publishing
reviews.form.submit/cancel
```