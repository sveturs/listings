# –ü–∞—Å–ø–æ—Ä—Ç –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞: ChatLayout

## üìã –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ
- **–ü—É—Ç—å**: `/frontend/svetu/src/components/Chat/ChatLayout.tsx`
- **–†–æ–ª—å**: –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ —á–∞—Ç-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
- **–¢–∏–ø**: Client Component
- **–†–∞–∑–º–µ—Ä**: 116 —Å—Ç—Ä–æ–∫

## üéØ –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ
–ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π layout –¥–ª—è —á–∞—Ç–∞, –∫–æ—Ç–æ—Ä—ã–π:
- –£–ø—Ä–∞–≤–ª—è–µ—Ç –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º —Å–ø–∏—Å–∫–∞ —á–∞—Ç–æ–≤ –∏ –æ–∫–Ω–∞ –ø–µ—Ä–µ–ø–∏—Å–∫–∏
- –†–µ–∞–ª–∏–∑—É–µ—Ç responsive –ø–æ–≤–µ–¥–µ–Ω–∏–µ –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö –∏ –¥–µ—Å–∫—Ç–æ–ø —É—Å—Ç—Ä–æ–π—Å—Ç–≤
- –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –º–µ–∂–¥—É —á–∞—Ç–∞–º–∏
- –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Å–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤—ã—Ö —á–∞—Ç–æ–≤ —á–µ—Ä–µ–∑ URL –ø–∞—Ä–∞–º–µ—Ç—Ä—ã

## üîß –°—Ç—Ä—É–∫—Ç—É—Ä–∞ Props
```typescript
interface ChatLayoutProps {
  initialListingId?: number;   // ID —Ç–æ–≤–∞—Ä–∞ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –Ω–æ–≤–æ–≥–æ —á–∞—Ç–∞
  initialSellerId?: number;    // ID –ø—Ä–æ–¥–∞–≤—Ü–∞ –¥–ª—è –Ω–æ–≤–æ–≥–æ —á–∞—Ç–∞
  initialContactId?: number;   // ID –∫–æ–Ω—Ç–∞–∫—Ç–∞ –¥–ª—è –ø—Ä—è–º–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è
}
```

## üîó –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∏ —Å–≤—è–∑–∏

### –í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:
- `@/hooks/useChat` - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–µ–∫—É—â–∏–º —á–∞—Ç–æ–º
- `@/types/chat` - —Ç–∏–ø—ã –¥–ª—è —á–∞—Ç–æ–≤ (MarketplaceChat)
- `./ChatList` - –∫–æ–º–ø–æ–Ω–µ–Ω—Ç —Å–ø–∏—Å–∫–∞ —á–∞—Ç–æ–≤
- `./ChatWindow` - –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –æ–∫–Ω–∞ —á–∞—Ç–∞

### –í–Ω–µ—à–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:
- `next-intl` - –∏–Ω—Ç–µ—Ä–Ω–∞—Ü–∏–æ–Ω–∞–ª–∏–∑–∞—Ü–∏—è
- React hooks: `useState`, `useEffect`

### –ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ API/Hooks:
```typescript
const { 
  currentChat,      // –¢–µ–∫—É—â–∏–π –≤—ã–±—Ä–∞–Ω–Ω—ã–π —á–∞—Ç
  setCurrentChat    // –§—É–Ω–∫—Ü–∏—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ —Ç–µ–∫—É—â–µ–≥–æ —á–∞—Ç–∞
} = useChat();
```

## üß† –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º

### –õ–æ–∫–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ:
```typescript
const [isMobileListOpen, setIsMobileListOpen] = useState(true);  // –ü–æ–∫–∞–∑ —Å–ø–∏—Å–∫–∞ –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö
const [isMobile, setIsMobile] = useState(false);                 // –§–ª–∞–≥ –º–æ–±–∏–ª—å–Ω–æ–≥–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
```

### –≠—Ñ—Ñ–µ–∫—Ç—ã:
- –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –º–æ–±–∏–ª—å–Ω–æ–≥–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ –ø—Ä–∏ –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ –∏ —Ä–µ—Å–∞–π–∑–µ
- –ü–æ—Ä–æ–≥: window.innerWidth < 768px (md breakpoint)

## üíº –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞

### 1. –ê–¥–∞–ø—Ç–∏–≤–Ω–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ:
- **Desktop (‚â•768px)**: 
  - –°–ø–∏—Å–æ–∫ —á–∞—Ç–æ–≤ –≤—Å–µ–≥–¥–∞ –≤–∏–¥–∏–º (1/3 –∏–ª–∏ 1/4 —à–∏—Ä–∏–Ω—ã)
  - –û–∫–Ω–æ —á–∞—Ç–∞ –∑–∞–Ω–∏–º–∞–µ—Ç –æ—Å—Ç–∞–≤—à–µ–µ—Å—è –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ
- **Mobile (<768px)**:
  - –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –ª–∏–±–æ —Å–ø–∏—Å–æ–∫, –ª–∏–±–æ —á–∞—Ç
  - –ö–Ω–æ–ø–∫–∞ "–ù–∞–∑–∞–¥" –≤ –æ–∫–Ω–µ —á–∞—Ç–∞ –¥–ª—è –≤–æ–∑–≤—Ä–∞—Ç–∞ –∫ —Å–ø–∏—Å–∫—É

### 2. –í—ã–±–æ—Ä —á–∞—Ç–∞:
- –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç —Ç–µ–∫—É—â–∏–π —á–∞—Ç —á–µ—Ä–µ–∑ Redux
- –ù–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö —Å–∫—Ä—ã–≤–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –ø–æ—Å–ª–µ –≤—ã–±–æ—Ä–∞
- –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–µ —á–∞—Ç—ã (id === 0) –¥–ª—è –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤

### 3. –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –Ω–æ–≤—ã—Ö —á–∞—Ç–æ–≤:
- –ß–µ—Ä–µ–∑ —Ç–æ–≤–∞—Ä: initialListingId + initialSellerId
- –ü—Ä—è–º–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ: initialContactId
- –ü–µ—Ä–µ–¥–∞—á–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –≤ ChatWindow –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è

### 4. –ü—É—Å—Ç–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ:
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∏–∫–æ–Ω–∫—É –∏ —Å–æ–æ–±—â–µ–Ω–∏–µ "–í—ã–±–µ—Ä–∏—Ç–µ —á–∞—Ç"
- –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –∫–æ–≥–¥–∞ –Ω–µ—Ç —Ç–µ–∫—É—â–µ–≥–æ —á–∞—Ç–∞ –∏ initial –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤

## üé® UI —Å—Ç—Ä—É–∫—Ç—É—Ä–∞

### –û—Å–Ω–æ–≤–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞:
```
<div className="flex h-full bg-base-200 rounded-lg overflow-hidden">
  ‚îú‚îÄ‚îÄ –ë–æ–∫–æ–≤–∞—è –ø–∞–Ω–µ–ª—å (ChatList)
  ‚îÇ   ‚îî‚îÄ‚îÄ w-full md:w-1/3 lg:w-1/4
  ‚îî‚îÄ‚îÄ –û—Å–Ω–æ–≤–Ω–∞—è –æ–±–ª–∞—Å—Ç—å (ChatWindow –∏–ª–∏ –ø—É—Å—Ç–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ)
      ‚îî‚îÄ‚îÄ flex-1
</div>
```

### Responsive –∫–ª–∞—Å—Å—ã:
- –°–ø–∏—Å–æ–∫: `hidden md:block` (—Å–∫—Ä—ã—Ç –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö –∫–æ–≥–¥–∞ —á–∞—Ç –æ—Ç–∫—Ä—ã—Ç)
- –ß–∞—Ç: `hidden md:flex` (—Å–∫—Ä—ã—Ç –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö –∫–æ–≥–¥–∞ –ø–æ–∫–∞–∑–∞–Ω —Å–ø–∏—Å–æ–∫)
- –®–∏—Ä–∏–Ω–∞ —Å–ø–∏—Å–∫–∞: –ø–æ–ª–Ω–∞—è –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö, 1/3 –Ω–∞ md, 1/4 –Ω–∞ lg

### –°—Ç–∏–ª–∏–∑–∞—Ü–∏—è:
- –§–æ–Ω: bg-base-200
- –ì—Ä–∞–Ω–∏—Ü–∞ –º–µ–∂–¥—É –ø–∞–Ω–µ–ª—è–º–∏: border-r border-base-300
- –°–∫—Ä—É–≥–ª–µ–Ω–∏–µ: rounded-lg
- Overflow: hidden –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–≥–æ —Å–∫—Ä—É–≥–ª–µ–Ω–∏—è

## üîÑ –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

```tsx
// –ë–∞–∑–æ–≤–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
<ChatLayout />

// –° –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ –¥–ª—è –Ω–æ–≤–æ–≥–æ —á–∞—Ç–∞ —Å —Ç–æ–≤–∞—Ä–æ–º
<ChatLayout 
  initialListingId={123}
  initialSellerId={456}
/>

// –î–ª—è –ø—Ä—è–º–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è –∫–æ–Ω—Ç–∞–∫—Ç—É
<ChatLayout 
  initialContactId={789}
/>
```

## üêõ –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

1. **Resize listener**: –ê–∫—Ç–∏–≤–µ–Ω –≤—Å—ë –≤—Ä–µ–º—è –∂–∏–∑–Ω–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞

2. **Mobile detection**: –ò—Å–ø–æ–ª—å–∑—É–µ—Ç window.innerWidth –Ω–∞–ø—Ä—è–º—É—é

3. **–í–∏—Ä—Ç—É–∞–ª—å–Ω—ã–µ —á–∞—Ç—ã**: –°–ø–µ—Ü–∏–∞–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –¥–ª—è —á–∞—Ç–æ–≤ —Å id === 0

4. **Min-width**: –ò—Å–ø–æ–ª—å–∑—É–µ—Ç min-w-0 –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è overflow

5. **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**: 
   - –ù–µ—Ç debounce –¥–ª—è resize —Å–æ–±—ã—Ç–∏—è
   - –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã ChatList –∏ ChatWindow –≤—Å–µ–≥–¥–∞ –≤ DOM (—É—Å–ª–æ–≤–Ω–æ–µ —Å–∫—Ä—ã—Ç–∏–µ —á–µ—Ä–µ–∑ CSS)