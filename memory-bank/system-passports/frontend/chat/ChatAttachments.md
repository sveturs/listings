# –ü–∞—Å–ø–æ—Ä—Ç –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞: ChatAttachments

## üìã –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ
- **–ü—É—Ç—å**: `/frontend/svetu/src/components/Chat/ChatAttachments.tsx`
- **–†–æ–ª—å**: –ö–æ–º–ø–æ–Ω–µ–Ω—Ç –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤–ª–æ–∂–µ–Ω–∏–π –≤ —Å–æ–æ–±—â–µ–Ω–∏—è—Ö —á–∞—Ç–∞
- **–¢–∏–ø**: Client Component
- **–†–∞–∑–º–µ—Ä**: 208 —Å—Ç—Ä–æ–∫

## üéØ –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ
–£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Ñ–∞–π–ª–æ–≤—ã—Ö –≤–ª–æ–∂–µ–Ω–∏–π –≤ —á–∞—Ç–µ:
- –ü—Ä–µ–≤—å—é –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é –ø–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω–æ–≥–æ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞
- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –∏ –≤–∏–¥–µ–æ —Å –∏–∫–æ–Ω–∫–∞–º–∏
- –°–∫–∞—á–∏–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–æ–≤
- –£–¥–∞–ª–µ–Ω–∏–µ –≤–ª–æ–∂–µ–Ω–∏–π (–¥–ª—è —Å–≤–æ–∏—Ö —Å–æ–æ–±—â–µ–Ω–∏–π)
- –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π –¥–∏–∑–∞–π–Ω –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤

## üîß –°—Ç—Ä—É–∫—Ç—É—Ä–∞ Props
```typescript
interface ChatAttachmentsProps {
  attachments: ChatAttachment[];      // –ú–∞—Å—Å–∏–≤ –≤–ª–æ–∂–µ–Ω–∏–π
  onDelete?: (attachmentId: number) => void;  // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ —É–¥–∞–ª–µ–Ω–∏—è
  canDelete?: boolean;                // –ú–æ–∂–Ω–æ –ª–∏ —É–¥–∞–ª—è—Ç—å –≤–ª–æ–∂–µ–Ω–∏—è
  hasTextBelow?: boolean;             // –ï—Å—Ç—å –ª–∏ —Ç–µ–∫—Å—Ç –ø–æ–¥ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º
}
```

## üîó –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∏ —Å–≤—è–∑–∏

### –í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:
- `@/types/chat` - —Ç–∏–ø—ã –¥–ª—è –≤–ª–æ–∂–µ–Ω–∏–π (ChatAttachment)
- `@/config` - –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–ª—è –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è URL

### –í–Ω–µ—à–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:
- `next/image` - –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
- `react-icons/fa` - –∏–∫–æ–Ω–∫–∏ (FaFile, FaVideo, FaDownload, FaTrash, FaExpand)
- `next-intl` - –∏–Ω—Ç–µ—Ä–Ω–∞—Ü–∏–æ–Ω–∞–ª–∏–∑–∞—Ü–∏—è
- React hooks: `useState`

## üß† –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º

### –õ–æ–∫–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ:
```typescript
const [selectedImage, setSelectedImage] = useState<string | null>(null);  // URL –¥–ª—è –ø–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω–æ–≥–æ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞
```

## üíº –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞

### 1. –ü–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ URL –¥–ª—è –≤–ª–æ–∂–µ–Ω–∏–π:
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–µ—Ñ–∏–∫—Å–∞ `/chat-files/`
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ configManager.buildImageUrl –¥–ª—è –ø–æ–ª–Ω–æ–≥–æ URL
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏

### 2. –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞ —Ñ–∞–π–ª–∞:
- –ë–∞–π—Ç—ã ‚Üí KB ‚Üí MB ‚Üí GB
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤—ã–±–æ—Ä –µ–¥–∏–Ω–∏—Ü—ã –∏–∑–º–µ—Ä–µ–Ω–∏—è
- –¢–æ—á–Ω–æ—Å—Ç—å –¥–æ 2 –∑–Ω–∞–∫–æ–≤ –ø–æ—Å–ª–µ –∑–∞–ø—è—Ç–æ–π

### 3. –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç–∏–ø–∞ —Ñ–∞–π–ª–∞:
- `image` - –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø—Ä–µ–≤—å—é
- `video` - –∏–∫–æ–Ω–∫–∞ FaVideo (—Ñ–∏–æ–ª–µ—Ç–æ–≤–∞—è)
- `document` - –∏–∫–æ–Ω–∫–∞ FaFile (—Å–∏–Ω—è—è)
- –û—Å—Ç–∞–ª—å–Ω—ã–µ - —Å–µ—Ä–∞—è –∏–∫–æ–Ω–∫–∞ FaFile

### 4. –£–¥–∞–ª–µ–Ω–∏–µ –≤–ª–æ–∂–µ–Ω–∏–π:
- –ó–∞–ø—Ä–æ—Å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è —á–µ—Ä–µ–∑ window.confirm
- –í—ã–∑–æ–≤ –∫–æ–ª–±—ç–∫–∞ onDelete —Å ID –≤–ª–æ–∂–µ–Ω–∏—è

### 5. –ü–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω—ã–π –ø—Ä–æ—Å–º–æ—Ç—Ä:
- –¢–æ–ª—å–∫–æ –¥–ª—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Å –∑–∞—Ç–µ–º–Ω—ë–Ω–Ω—ã–º —Ñ–æ–Ω–æ–º
- –ó–∞–∫—Ä—ã—Ç–∏–µ –ø–æ –∫–ª–∏–∫—É –Ω–∞ —Ñ–æ–Ω –∏–ª–∏ –∫–Ω–æ–ø–∫—É

## üé® UI —Å—Ç—Ä—É–∫—Ç—É—Ä–∞

### –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä:
- –û–¥–Ω–æ –≤–ª–æ–∂–µ–Ω–∏–µ: `inline-block`
- –ù–µ—Å–∫–æ–ª—å–∫–æ: `flex flex-col sm:flex-row sm:flex-wrap gap-2`

### –ö–∞—Ä—Ç–æ—á–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è (192x192px):
1. **–ü—Ä–µ–≤—å—é**:
   - –†–∞–∑–º–µ—Ä: w-48 h-48
   - –ì—Ä–∞–Ω–∏—Ü–∞: border-2 border-base-300/50
   - –°–∫—Ä—É–≥–ª–µ–Ω–∏–µ: rounded-lg (–∏–ª–∏ rounded-t-lg –µ—Å–ª–∏ –µ—Å—Ç—å —Ç–µ–∫—Å—Ç —Å–Ω–∏–∑—É)
   - Object-fit: cover

2. **–ü–∞–Ω–µ–ª—å –¥–µ–π—Å—Ç–≤–∏–π** (–ø–æ—è–≤–ª—è–µ—Ç—Å—è –ø—Ä–∏ hover/touch):
   - Desktop: opacity-0 group-hover:opacity-100
   - Mobile: opacity-0 active:opacity-100
   - –ö–Ω–æ–ø–∫–∏: —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—å, —Å–∫–∞—á–∞—Ç—å, —É–¥–∞–ª–∏—Ç—å
   - –§–æ–Ω: –±–µ–ª—ã–π/—Ç—ë–º–Ω—ã–π —Å blur —ç—Ñ—Ñ–µ–∫—Ç–æ–º

### –ö–∞—Ä—Ç–æ—á–∫–∞ —Ñ–∞–π–ª–∞:
- –†–∞–∑–º–µ—Ä: w-full sm:w-48 h-48
- –¶–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç —Å –∏–∫–æ–Ω–∫–æ–π
- –ù–∞–∑–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–∞ (truncate)
- –†–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞
- –ö–Ω–æ–ø–∫–∏ –¥–µ–π—Å—Ç–≤–∏–π –≤–Ω–∏–∑—É

### –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ:
- –ü–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω–æ–µ: fixed inset-0 z-50
- –§–æ–Ω: bg-black bg-opacity-90
- –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä: 1200x800
- Object-fit: contain

## üîÑ –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

```tsx
// –í –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–µ MessageItem
<ChatAttachments
  attachments={message.attachments}
  onDelete={isOwn ? handleDeleteAttachment : undefined}
  canDelete={isOwn}
  hasTextBelow={true}
/>

// –ü—Ä–æ—Å—Ç–æ–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –±–µ–∑ —É–¥–∞–ª–µ–Ω–∏—è
<ChatAttachments
  attachments={attachments}
/>
```

## üêõ –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

1. **–û—Ç–ª–∞–¥–æ—á–Ω—ã–µ –ª–æ–≥–∏**: console.log –¥–ª—è URL –≤–ª–æ–∂–µ–Ω–∏–π

2. **Unoptimized images**: –î–ª—è –ª–æ–∫–∞–ª—å–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤ `/chat-files/`

3. **Window.confirm**: –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –±—Ä–∞—É–∑–µ—Ä–Ω—ã–π –¥–∏–∞–ª–æ–≥ –¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è

4. **Responsive**: –û—Ç–¥–µ–ª—å–Ω–∞—è —Ä–∞–∑–º–µ—Ç–∫–∞ –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤

5. **Sizes**: –§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ä–∞–∑–º–µ—Ä 192px –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π

6. **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**: 
   - –ù–µ—Ç –º–µ–º–æ–∏–∑–∞—Ü–∏–∏ —Ñ—É–Ω–∫—Ü–∏–π
   - –°–æ–∑–¥–∞–Ω–∏–µ URL –Ω–∞ –∫–∞–∂–¥—ã–π —Ä–µ–Ω–¥–µ—Ä