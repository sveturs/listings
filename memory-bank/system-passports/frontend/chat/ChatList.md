# –ü–∞—Å–ø–æ—Ä—Ç –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞: ChatList

## üìã –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ
- **–ü—É—Ç—å**: `/frontend/svetu/src/components/Chat/ChatList.tsx`
- **–†–æ–ª—å**: –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç —Å–ø–∏—Å–∫–∞ —á–∞—Ç–æ–≤ –∏ –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤
- **–¢–∏–ø**: Client Component
- **–†–∞–∑–º–µ—Ä**: 513 —Å—Ç—Ä–æ–∫

## üéØ –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ
–û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –∞–∫—Ç–∏–≤–Ω—ã—Ö —á–∞—Ç–æ–≤ –∏ –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é:
- –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –º–µ–∂–¥—É –≤–∫–ª–∞–¥–∫–∞–º–∏ "–ß–∞—Ç—ã" –∏ "–ö–æ–Ω—Ç–∞–∫—Ç—ã"
- –ü–æ–∏—Å–∫–∞ –ø–æ —á–∞—Ç–∞–º –∏ –∫–æ–Ω—Ç–∞–∫—Ç–∞–º
- –ë–µ—Å–∫–æ–Ω–µ—á–Ω–æ–π –ø—Ä–æ–∫—Ä—É—Ç–∫–∏ –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ —á–∞—Ç–æ–≤
- –°–æ–∑–¥–∞–Ω–∏—è –ø—Ä—è–º—ã—Ö —á–∞—Ç–æ–≤ —Å –∫–æ–Ω—Ç–∞–∫—Ç–∞–º–∏
- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –æ–Ω–ª–∞–π–Ω-—Å—Ç–∞—Ç—É—Å–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- –ò–Ω–¥–∏–∫–∞—Ü–∏–∏ –Ω–µ–ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π

## üîß –°—Ç—Ä—É–∫—Ç—É—Ä–∞ Props
```typescript
interface ChatListProps {
  onChatSelect: (chat: MarketplaceChat) => void;  // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –≤—ã–±–æ—Ä–∞ —á–∞—Ç–∞
}
```

## üîó –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∏ —Å–≤—è–∑–∏

### –í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:
- `@/hooks/useChat` - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —á–∞—Ç–∞–º–∏ –∏ —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏
- `@/contexts/AuthContext` - –∫–æ–Ω—Ç–µ–∫—Å—Ç –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
- `@/types/chat` - —Ç–∏–ø—ã –¥–ª—è —á–∞—Ç–æ–≤ (MarketplaceChat)
- `@/types/contacts` - —Ç–∏–ø—ã –¥–ª—è –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤ (UserContact)
- `@/services/contacts` - —Å–µ—Ä–≤–∏—Å –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –∫–æ–Ω—Ç–∞–∫—Ç–∞–º–∏
- `@/config` - –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–ª—è –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è URL –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π

### –í–Ω–µ—à–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:
- `next-intl` - –∏–Ω—Ç–µ—Ä–Ω–∞—Ü–∏–æ–Ω–∞–ª–∏–∑–∞—Ü–∏—è (useTranslations, useLocale)
- `next/image` - –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
- React hooks: `useState`, `useEffect`, `useRef`, `useCallback`

### –ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ API/Hooks:
```typescript
const {
  chats,              // –°–ø–∏—Å–æ–∫ —á–∞—Ç–æ–≤
  currentChat,        // –¢–µ–∫—É—â–∏–π –∞–∫—Ç–∏–≤–Ω—ã–π —á–∞—Ç
  isLoading,         // –°–æ—Å—Ç–æ—è–Ω–∏–µ –∑–∞–≥—Ä—É–∑–∫–∏
  hasMoreChats,      // –ï—Å—Ç—å –ª–∏ –µ—â–µ —á–∞—Ç—ã –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏
  loadChats,         // –§—É–Ω–∫—Ü–∏—è –∑–∞–≥—Ä—É–∑–∫–∏ —á–∞—Ç–æ–≤
  onlineUsers,       // –°–ø–∏—Å–æ–∫ –æ–Ω–ª–∞–π–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
} = useChat();

const { user, isAuthenticated } = useAuth();
```

## üß† –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º

### –õ–æ–∫–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ:
```typescript
const [searchQuery, setSearchQuery] = useState('');  // –ü–æ–∏—Å–∫–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å
const [activeTab, setActiveTab] = useState<'chats' | 'contacts'>('chats');  // –ê–∫—Ç–∏–≤–Ω–∞—è –≤–∫–ª–∞–¥–∫–∞
const [contacts, setContacts] = useState<UserContact[]>([]);  // –°–ø–∏—Å–æ–∫ –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤
const [contactsLoading, setContactsLoading] = useState(false);  // –ó–∞–≥—Ä—É–∑–∫–∞ –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤
const loadMoreRef = useRef<HTMLDivElement>(null);  // Ref –¥–ª—è infinite scroll
```

### Redux —Å–æ—Å—Ç–æ—è–Ω–∏–µ (—á–µ—Ä–µ–∑ useChat):
- –°–ø–∏—Å–æ–∫ —á–∞—Ç–æ–≤
- –¢–µ–∫—É—â–∏–π –∞–∫—Ç–∏–≤–Ω—ã–π —á–∞—Ç
- –û–Ω–ª–∞–π–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏
- –°–æ—Å—Ç–æ—è–Ω–∏–µ –∑–∞–≥—Ä—É–∑–∫–∏ –∏ –ø–∞–≥–∏–Ω–∞—Ü–∏–∏

## üíº –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞

### 1. –ó–∞–≥—Ä—É–∑–∫–∞ —á–∞—Ç–æ–≤ –ø—Ä–∏ –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏:
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –ó–∞–≥—Ä—É–∂–∞–µ—Ç –ø–µ—Ä–≤—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É —á–∞—Ç–æ–≤ –µ—Å–ª–∏ —Å–ø–∏—Å–æ–∫ –ø—É—Å—Ç

### 2. –ó–∞–≥—Ä—É–∑–∫–∞ –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤:
- –ó–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –ø—Ä–∏ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–∏ –Ω–∞ –≤–∫–ª–∞–¥–∫—É –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤
- –û–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è –æ—à–∏–±–∫–∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ (—Ç–∏—Ö–æ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –ø—É—Å—Ç–æ–π –º–∞—Å—Å–∏–≤)

### 3. –ë–µ—Å–∫–æ–Ω–µ—á–Ω–∞—è –ø—Ä–æ–∫—Ä—É—Ç–∫–∞:
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç IntersectionObserver
- –ó–∞–≥—Ä—É–∂–∞–µ—Ç —Å–ª–µ–¥—É—é—â—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É –ø—Ä–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–∏ –∫–æ–Ω—Ü–∞ —Å–ø–∏—Å–∫–∞
- –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç –Ω–æ–º–µ—Ä —Å—Ç—Ä–∞–Ω–∏—Ü—ã: `chats.length / 20 + 1`

### 4. –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –∏ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞:
- –ü–æ–∏—Å–∫ –ø–æ –∏–º–µ–Ω–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –Ω–∞–∑–≤–∞–Ω–∏—é —Ç–æ–≤–∞—Ä–∞, –ø–æ—Å–ª–µ–¥–Ω–µ–º—É —Å–æ–æ–±—â–µ–Ω–∏—é
- –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ –¥–∞—Ç–µ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è (–Ω–æ–≤—ã–µ —Å–≤–µ—Ä—Ö—É)

### 5. –û–±—Ä–∞–±–æ—Ç–∫–∞ –ø—Ä—è–º—ã—Ö —á–∞—Ç–æ–≤:
- –°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ –º–∞—Ä–∫–µ—Ä—ã: `__DIRECT_MESSAGE__`, `__DELETED_LISTING__`
- –°–æ–∑–¥–∞–Ω–∏–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ —á–∞—Ç–∞ –¥–ª—è –∫–æ–Ω—Ç–∞–∫—Ç–∞ –µ—Å–ª–∏ —á–∞—Ç –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç

### 6. –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ü–µ–Ω—ã:
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç Intl.NumberFormat —Å –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏–µ–π
- –í–∞–ª—é—Ç–∞: RSD (—Å–µ—Ä–±—Å–∫–∏–π –¥–∏–Ω–∞—Ä)
- –ë–µ–∑ –¥—Ä–æ–±–Ω–æ–π —á–∞—Å—Ç–∏

## üé® UI —Å—Ç—Ä—É–∫—Ç—É—Ä–∞

### –û—Å–Ω–æ–≤–Ω—ã–µ —Å–µ–∫—Ü–∏–∏:
1. **–ó–∞–≥–æ–ª–æ–≤–æ–∫ –∏ –ø–æ–∏—Å–∫** (p-4):
   - –ü–æ–ª–µ –ø–æ–∏—Å–∫–∞ —Å –∏–∫–æ–Ω–∫–æ–π
   - –ö–Ω–æ–ø–∫–∏ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –≤–∫–ª–∞–¥–æ–∫ (–ß–∞—Ç—ã/–ö–æ–Ω—Ç–∞–∫—Ç—ã)

2. **–°–ø–∏—Å–æ–∫ —ç–ª–µ–º–µ–Ω—Ç–æ–≤** (flex-1 overflow-y-auto):
   - –ö–∞—Ä—Ç–æ—á–∫–∏ —á–∞—Ç–æ–≤ —Å –∞–≤–∞—Ç–∞—Ä–æ–º —Ç–æ–≤–∞—Ä–∞
   - –ö–∞—Ä—Ç–æ—á–∫–∏ –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤ —Å –∏–Ω–∏—Ü–∏–∞–ª–∞–º–∏
   - –°–æ—Å—Ç–æ—è–Ω–∏—è –∑–∞–≥—Ä—É–∑–∫–∏ –∏ –ø—É—Å—Ç—ã–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è

### –ö–∞—Ä—Ç–æ—á–∫–∞ —á–∞—Ç–∞ —Å–æ–¥–µ—Ä–∂–∏—Ç:
- –ê–≤–∞—Ç–∞—Ä —Ç–æ–≤–∞—Ä–∞ (56x56) —Å –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–º –Ω–µ–ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã—Ö
- –ù–∞–∑–≤–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞/—á–∞—Ç–∞
- –ò–º—è —Å–æ–±–µ—Å–µ–¥–Ω–∏–∫–∞
- –¶–µ–Ω–∞ —Ç–æ–≤–∞—Ä–∞ (–µ—Å–ª–∏ –ø—Ä–∏–º–µ–Ω–∏–º–æ)
- –ü–æ—Å–ª–µ–¥–Ω–µ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ —Å –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–º –æ—Ç–ø—Ä–∞–≤–∫–∏
- –û–Ω–ª–∞–π–Ω —Å—Ç–∞—Ç—É—Å

### –ö–∞—Ä—Ç–æ—á–∫–∞ –∫–æ–Ω—Ç–∞–∫—Ç–∞ —Å–æ–¥–µ—Ä–∂–∏—Ç:
- –ê–≤–∞—Ç–∞—Ä —Å –∏–Ω–∏—Ü–∏–∞–ª–∞–º–∏ (–≥—Ä–∞–¥–∏–µ–Ω—Ç–Ω—ã–π —Ñ–æ–Ω)
- –ò–º—è –∫–æ–Ω—Ç–∞–∫—Ç–∞
- Email
- –ó–∞–º–µ—Ç–∫–∏ (–µ—Å–ª–∏ –µ—Å—Ç—å)
- –û–Ω–ª–∞–π–Ω —Å—Ç–∞—Ç—É—Å

## üîÑ –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

```tsx
// –í —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–æ–º –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–µ
const [selectedChat, setSelectedChat] = useState<MarketplaceChat | null>(null);

<ChatList 
  onChatSelect={(chat) => {
    setSelectedChat(chat);
    // –û—Ç–∫—Ä—ã—Ç—å –æ–∫–Ω–æ —á–∞—Ç–∞
  }}
/>
```

## üêõ –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

1. **–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è**: –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –¥–ª—è –Ω–µ–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

2. **–û—Ç–ª–∞–¥–æ—á–Ω—ã–µ –ª–æ–≥–∏**: –ü—Ä–∏—Å—É—Ç—Å—Ç–≤—É—é—Ç console.log –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏ –∞–≤–∞—Ç–∞—Ä–æ–≤ —á–∞—Ç–æ–≤

3. **–ñ–µ—Å—Ç–∫–∞—è –ø–∞–≥–∏–Ω–∞—Ü–∏—è**: –†–∞–∑–º–µ—Ä —Å—Ç—Ä–∞–Ω–∏—Ü—ã –∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω –Ω–∞ 20 —ç–ª–µ–º–µ–Ω—Ç–æ–≤

4. **–í—Ä–µ–º–µ–Ω–Ω—ã–π ID**: –î–ª—è –Ω–æ–≤—ã—Ö –ø—Ä—è–º—ã—Ö —á–∞—Ç–æ–≤ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `id: 0`

5. **–°—Ç–∏–ª–∏–∑–∞—Ü–∏—è**: 
   - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç DaisyUI –∫–ª–∞—Å—Å—ã (card, btn, input, badge)
   - –ê–∫—Ç–∏–≤–Ω—ã–π —á–∞—Ç –≤—ã–¥–µ–ª—è–µ—Ç—Å—è —Å–∏–Ω–∏–º –∫–æ–ª—å—Ü–æ–º
   - –ì—Ä–∞–¥–∏–µ–Ω—Ç–Ω—ã–µ –∞–≤–∞—Ç–∞—Ä—ã –¥–ª—è –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤

6. **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**: 
   - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç useCallback –¥–ª—è loadContacts
   - –û—Ç–∫–ª—é—á–∞–µ—Ç IntersectionObserver –ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏