# –ü–ê–°–ü–û–†–¢ –¢–ê–ë–õ–ò–¶–´: payment_gateways

## üìã –û—Å–Ω–æ–≤–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

**–ù–∞–∑–≤–∞–Ω–∏–µ**: payment_gateways  
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø–ª–∞—Ç–µ–∂–Ω—ã—Ö —à–ª—é–∑–æ–≤  
**–¢–∏–ø**: –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞  
**–ö—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç—å**: –í—ã—Å–æ–∫–∞—è (–æ–±—Ä–∞–±–æ—Ç–∫–∞ –ø–ª–∞—Ç–µ–∂–µ–π)

## üèóÔ∏è –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–∞–±–ª–∏—Ü—ã

### –ü–æ–ª—è

| –ü–æ–ª–µ | –¢–∏–ø | –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|-----|-------------|----------|
| `id` | SERIAL | PRIMARY KEY | –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä —à–ª—é–∑–∞ |
| `name` | VARCHAR(100) | NOT NULL | –ù–∞–∑–≤–∞–Ω–∏–µ —à–ª—é–∑–∞ ('allsecure') |
| `is_active` | BOOLEAN | DEFAULT true | –ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å —à–ª—é–∑–∞ |
| `config` | JSONB | NOT NULL | API credentials, endpoints |
| `created_at` | TIMESTAMP WITH TIME ZONE | DEFAULT NOW() | –î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è |
| `updated_at` | TIMESTAMP WITH TIME ZONE | DEFAULT NOW() | –î–∞—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è |

### –ò–Ω–¥–µ–∫—Å—ã

–ë–∞–∑–æ–≤—ã–µ –∏–Ω–¥–µ–∫—Å—ã:
- PRIMARY KEY –Ω–∞ `id`

## üîó –°–≤—è–∑–∏ —Å –¥—Ä—É–≥–∏–º–∏ —Ç–∞–±–ª–∏—Ü–∞–º–∏

### –ò—Å—Ö–æ–¥—è—â–∏–µ —Å–≤—è–∑–∏ (foreign keys –∏–∑ –¥—Ä—É–≥–∏—Ö —Ç–∞–±–ª–∏—Ü)

- **payment_transactions.gateway_id** ‚Üí payment_gateways.id
- **merchant_payouts.gateway_id** ‚Üí payment_gateways.id

### –ö–∞—Å–∫–∞–¥–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è

–ù–µ—Ç —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã—Ö –∫–∞—Å–∫–∞–¥–Ω—ã—Ö –¥–µ–π—Å—Ç–≤–∏–π.

## üíº –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞

### –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ
–•—Ä–∞–Ω–∏—Ç –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –≤–Ω–µ—à–Ω–∏—Ö –ø–ª–∞—Ç–µ–∂–Ω—ã—Ö —à–ª—é–∑–æ–≤ –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –ø–ª–∞—Ç–µ–∂–µ–π –Ω–∞ –ø–ª–∞—Ç—Ñ–æ—Ä–º–µ.

### –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏
- –í –Ω–∞—Å—Ç–æ—è—â–µ–µ –≤—Ä–µ–º—è –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è —à–ª—é–∑ AllSecure
- –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ JSONB –¥–ª—è –≥–∏–±–∫–æ—Å—Ç–∏
- –®–ª—é–∑—ã –º–æ–≥—É—Ç –±—ã—Ç—å –≤—Ä–µ–º–µ–Ω–Ω–æ –¥–µ–∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω—ã

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —à–ª—é–∑–∞ (JSONB config)
```json
{
  "base_url": "https://asxgw.com",
  "sandbox_mode": true,
  "supported_currencies": ["RSD", "EUR", "USD"],
  "marketplace_commission_rate": 0.05,
  "escrow_release_days": 7
}
```

## üìä Go –º–æ–¥–µ–ª—å

**–§–∞–π–ª**: `/backend/internal/domain/models/payment_gateway.go`

```go
type PaymentGateway struct {
    ID        int                    `json:"id" db:"id"`
    Name      string                 `json:"name" db:"name"`
    IsActive  bool                   `json:"is_active" db:"is_active"`
    Config    map[string]interface{} `json:"config" db:"config"`
    CreatedAt time.Time              `json:"created_at" db:"created_at"`
    UpdatedAt time.Time              `json:"updated_at" db:"updated_at"`
}
```

## üîß API –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è

### Endpoints –∏—Å–ø–æ–ª—å–∑—É—é—â–∏–µ —Ç–∞–±–ª–∏—Ü—É
- –ü–ª–∞—Ç–µ–∂–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ (—Å–æ–∑–¥–∞–Ω–∏–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π)
- –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —à–ª—é–∑–æ–≤ (–∞–¥–º–∏–Ω–∫–∞)

## üìà –•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

### –û–±—ä–µ–º –¥–∞–Ω–Ω—ã—Ö
- **–û–∂–∏–¥–∞–µ–º—ã–π —Ä–∞–∑–º–µ—Ä**: –û—á–µ–Ω—å –º–∞–ª–µ–Ω—å–∫–∏–π (–Ω–µ—Å–∫–æ–ª—å–∫–æ –∑–∞–ø–∏—Å–µ–π)
- **–¢–∏–ø –Ω–∞–≥—Ä—É–∑–∫–∏**: –ß—Ç–µ–Ω–∏–µ >> –ó–∞–ø–∏—Å—å
- **–†–æ—Å—Ç –¥–∞–Ω–Ω—ã—Ö**: –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏ –Ω–µ —Ä–∞—Å—Ç–µ—Ç

### –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
- –ß–∞—Å—Ç—ã–µ —á—Ç–µ–Ω–∏—è –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –ø–ª–∞—Ç–µ–∂–µ–π
- –†–µ–¥–∫–∏–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
- –ö—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç—å –¥–ª—è –≤—Å–µ—Ö –ø–ª–∞—Ç–µ–∂–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π

## üõ°Ô∏è –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ –≤–∞–ª–∏–¥–∞—Ü–∏—è

### –ö—Ä–∏—Ç–∏—á–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
- **API credentials** –≤ config (—á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ)
- **Endpoint URLs** –ø–ª–∞—Ç–µ–∂–Ω—ã—Ö —Å–∏—Å—Ç–µ–º

### –ü—Ä–æ–≤–µ—Ä–∫–∏ —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç–∏
- name NOT NULL
- config NOT NULL (–Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—É—Å—Ç—ã–º)

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
- –®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –≤ config
- –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–∞ –∫ —Ç–∞–±–ª–∏—Ü–µ (—Ç–æ–ª—å–∫–æ –¥–ª—è –ø–ª–∞—Ç–µ–∂–Ω—ã—Ö —Å–µ—Ä–≤–∏—Å–æ–≤)
- –ê—É–¥–∏—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

## üöÄ –ú–∏–≥—Ä–∞—Ü–∏–∏

**–°–æ–∑–¥–∞–Ω–∞ –≤ –º–∏–≥—Ä–∞—Ü–∏–∏**: `000061_create_allsecure_payment_tables.up.sql`

### –ü–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞
```sql
INSERT INTO payment_gateways (name, is_active, config) VALUES (
    'allsecure',
    false, -- –∏–∑–Ω–∞—á–∞–ª—å–Ω–æ –Ω–µ–∞–∫—Ç–∏–≤–µ–Ω
    '{
        "base_url": "https://asxgw.com",
        "sandbox_mode": true,
        "supported_currencies": ["RSD", "EUR", "USD"],
        "marketplace_commission_rate": 0.05,
        "escrow_release_days": 7
    }'::jsonb
);
```

## üìù –ü—Ä–∏–º–µ—á–∞–Ω–∏—è –∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### –õ—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏
1. **–ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏**: –í—Å–µ–≥–¥–∞ –ø—Ä–æ–≤–µ—Ä—è—Ç—å is_active –ø–µ—Ä–µ–¥ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º —à–ª—é–∑–∞
2. **–í–∞–ª–∏–¥–∞—Ü–∏—è config**: –ü—Ä–æ–≤–µ—Ä—è—Ç—å –Ω–∞–ª–∏—á–∏–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö –ø–æ–ª–µ–π –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
3. **–í–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ**: –†–∞—Å—Å–º–æ—Ç—Ä–µ—Ç—å –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤–µ—Ä—Å–∏–∏ API –≤ config

### –ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è
- –î–æ–±–∞–≤–∏—Ç—å –ø–æ–ª–µ `version` –¥–ª—è –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è API
- –î–æ–±–∞–≤–∏—Ç—å `max_transaction_amount` –≤ config
- –†–∞—Å—Å–º–æ—Ç—Ä–µ—Ç—å –æ—Ç–¥–µ–ª—å–Ω—É—é —Ç–∞–±–ª–∏—Ü—É –¥–ª—è —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã—Ö credentials

### –°–≤—è–∑–∞–Ω–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
- payment_transactions - –æ—Å–Ω–æ–≤–Ω—ã–µ –ø–ª–∞—Ç–µ–∂–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏
- merchant_payouts - –≤—ã–ø–ª–∞—Ç—ã —á–µ—Ä–µ–∑ —à–ª—é–∑—ã
- AllSecure SDK - –≤–Ω–µ—à–Ω—è—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è

---
*–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è –ø–∞—Å–ø–æ—Ä—Ç–∞: 2025-06-29*  
*–í–µ—Ä—Å–∏—è —Å–∏—Å—Ç–µ–º—ã: v1.0*