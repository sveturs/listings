# üó®Ô∏è Chat Handler - –ü–∞—Å–ø–æ—Ä—Ç –º–æ–¥—É–ª—è

## üìã –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ
- **–ü—É—Ç—å**: `/backend/internal/handlers/chat.go`, `/backend/internal/proj/chat/`
- **–†–æ–ª—å**: –°–∏—Å—Ç–µ–º–∞ –æ–±–º–µ–Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- **–ö—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç—å**: üî¥ –í—ã—Å–æ–∫–∞—è

## üéØ –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ
–ú–æ–¥—É–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —á–∞—Ç–∞–º–∏ –∏ —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏ –º–µ–∂–¥—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π real-time –æ–±–º–µ–Ω–∞ —á–µ—Ä–µ–∑ WebSocket, —Ñ–∞–π–ª–æ–≤—ã—Ö –≤–ª–æ–∂–µ–Ω–∏–π –∏ –º–Ω–æ–≥–æ—è–∑—ã—á–Ω–æ—Å—Ç–∏.

## üîß –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

### üì° REST API Endpoints

#### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —á–∞—Ç–∞–º–∏
- **GET** `/api/v1/marketplace/chat` - –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ —á–∞—Ç–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
  - Query: `limit` (default: 100) - –ª–∏–º–∏—Ç —á–∞—Ç–æ–≤
  - Response: –°–ø–∏—Å–æ–∫ —á–∞—Ç–æ–≤ —Å –ø–æ—Å–ª–µ–¥–Ω–∏–º–∏ —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏ –∏ —Å—á–µ—Ç—á–∏–∫–∞–º–∏ –Ω–µ–ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã—Ö

#### –°–æ–æ–±—â–µ–Ω–∏—è
- **GET** `/api/v1/marketplace/chat/messages` - –ü–æ–ª—É—á–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è –∏–∑ —á–∞—Ç–∞
  - Query: `chat_id`, `limit` (default: 50), `offset`
  - Response: –ü–∞–≥–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Å–ø–∏—Å–æ–∫ —Å–æ–æ–±—â–µ–Ω–∏–π —Å –≤–ª–æ–∂–µ–Ω–∏—è–º–∏

- **POST** `/api/v1/marketplace/messages` - –û—Ç–ø—Ä–∞–≤–∏—Ç—å –Ω–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
  - Body: `receiver_id`, `listing_id` (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ), `content`
  - Response: –°–æ–∑–¥–∞–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ

- **PUT** `/api/v1/marketplace/messages/read` - –û—Ç–º–µ—Ç–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è –∫–∞–∫ –ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã–µ
  - Body: `chat_id`, `message_ids[]`
  - Response: –£—Å–ø–µ—Ö/–æ—à–∏–±–∫–∞

- **GET** `/api/v1/marketplace/messages/unread` - –ü–æ–ª—É—á–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω–µ–ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã—Ö
  - Response: `{unreadCount: number}`

#### –í–ª–æ–∂–µ–Ω–∏—è
- **POST** `/api/v1/marketplace/messages/{id}/attachments` - –ó–∞–≥—Ä—É–∑–∏—Ç—å —Ñ–∞–π–ª—ã –∫ —Å–æ–æ–±—â–µ–Ω–∏—é
  - Form-data: `files[]` (–¥–æ 10 —Ñ–∞–π–ª–æ–≤)
  - Response: –°–ø–∏—Å–æ–∫ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö –≤–ª–æ–∂–µ–Ω–∏–π

- **GET** `/api/v1/marketplace/attachments/{id}` - –ü–æ–ª—É—á–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –≤–ª–æ–∂–µ–Ω–∏–∏
  - Response: –î–µ—Ç–∞–ª–∏ –≤–ª–æ–∂–µ–Ω–∏—è —Å URL

- **DELETE** `/api/v1/marketplace/attachments/{id}` - –£–¥–∞–ª–∏—Ç—å –≤–ª–æ–∂–µ–Ω–∏–µ
  - Response: –£—Å–ø–µ—Ö/–æ—à–∏–±–∫–∞

#### –ê—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞–Ω–∏–µ
- **POST** `/api/v1/marketplace/chats/{chat_id}/archive` - –ê—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞—Ç—å —á–∞—Ç
  - Response: –£—Å–ø–µ—Ö/–æ—à–∏–±–∫–∞

### üîå WebSocket API

#### –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ
- **GET** `/ws/chat` - WebSocket endpoint –¥–ª—è real-time –æ–±–º–µ–Ω–∞
  - –¢—Ä–µ–±—É–µ—Ç JWT –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é
  - –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Å–∂–∞—Ç–∏–µ: –Ω–µ—Ç
  - –¢–∞–π–º–∞—É—Ç —Ä—É–∫–æ–ø–æ–∂–∞—Ç–∏—è: 10 —Å–µ–∫—É–Ω–¥

#### –¢–∏–ø—ã —Å–æ–æ–±—â–µ–Ω–∏–π

##### –í—Ö–æ–¥—è—â–∏–µ (–æ—Ç –∫–ª–∏–µ–Ω—Ç–∞):
```json
{
  "type": "new_message",
  "payload": {
    "receiver_id": 123,
    "listing_id": 456, // –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ
    "content": "–¢–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è"
  }
}
```

```json
{
  "type": "ping",
  "payload": {}
}
```

##### –ò—Å—Ö–æ–¥—è—â–∏–µ (–æ—Ç —Å–µ—Ä–≤–µ—Ä–∞):
```json
{
  "type": "new_message",
  "payload": {
    "id": 789,
    "chat_id": 321,
    "sender_id": 111,
    "receiver_id": 222,
    "content": "–¢–µ–∫—Å—Ç",
    "created_at": "2024-01-01T12:00:00Z",
    "is_read": false,
    "sender": {...},
    "receiver": {...},
    "listing": {...}
  }
}
```

```json
{
  "type": "user_online",
  "payload": {
    "user_id": 123
  }
}
```

```json
{
  "type": "user_offline", 
  "payload": {
    "user_id": 123
  }
}
```

```json
{
  "type": "online_users_list",
  "payload": {
    "users": [123, 456, 789]
  }
}
```

## üíæ –°—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö

### MarketplaceMessage
```go
type MarketplaceMessage struct {
    ID               int                              
    ChatID           int                              
    ListingID        int                              
    SenderID         int                              
    ReceiverID       int                              
    Content          string                           
    IsRead           bool                             
    CreatedAt        time.Time                        
    Sender           *User                            
    Receiver         *User                            
    Listing          *MarketplaceListing              
    OriginalLanguage string                           
    Translations     map[string]map[string]string     
    HasAttachments   bool                             
    AttachmentsCount int                              
    Attachments      []ChatAttachment                 
}
```

### ChatAttachment
```go
type ChatAttachment struct {
    ID          int       
    MessageID   int       
    FileName    string    
    FileType    string    // image/video/document
    FileSize    int64     
    ContentType string    
    FileURL     string    
    ThumbnailURL string   // –¥–ª—è –≤–∏–¥–µ–æ
    CreatedAt   time.Time 
}
```

## üóÑÔ∏è –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

### –ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —Ç–∞–±–ª–∏—Ü—ã
- `marketplace_chats` - –ö–æ–º–Ω–∞—Ç—ã —á–∞—Ç–æ–≤
- `marketplace_messages` - –°–æ–æ–±—â–µ–Ω–∏—è
- `chat_attachments` - –§–∞–π–ª–æ–≤—ã–µ –≤–ª–æ–∂–µ–Ω–∏—è
- `users` - –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è—Ö
- `marketplace_listings` - –û–±—ä—è–≤–ª–µ–Ω–∏—è

### –ö–ª—é—á–µ–≤—ã–µ –∑–∞–ø—Ä–æ—Å—ã
- –ü–æ–ª—É—á–µ–Ω–∏–µ —á–∞—Ç–æ–≤ —Å –∞–≥—Ä–µ–≥–∞—Ü–∏–µ–π –Ω–µ–ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã—Ö –∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –æ–±—ä—è–≤–ª–µ–Ω–∏–π
- –ü–∞–≥–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –≤—ã–±–æ—Ä–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π —Å JOIN –Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–æ–Ω–Ω–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ —á–∞—Ç–∞ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º —Å–æ–æ–±—â–µ–Ω–∏–∏

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
- JWT —Ç–æ–∫–µ–Ω—ã –¥–ª—è –≤—Å–µ—Ö endpoints
- –°–ø–µ—Ü–∏–∞–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ WebSocket upgrade
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞ –∫ —á–∞—Ç–∞–º/—Å–æ–æ–±—â–µ–Ω–∏—è–º

### Rate Limiting
- –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π: 30/–º–∏–Ω –Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–æ–≤: 10/–º–∏–Ω –Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è  
- WebSocket –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è: 5/–º–∏–Ω –Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- Fallback –Ω–∞ IP –¥–ª—è –Ω–µ–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö: 10/–º–∏–Ω

### –í–∞–ª–∏–¥–∞—Ü–∏—è
- –°–∞–Ω–∏—Ç–∏–∑–∞—Ü–∏—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞: `utils.SanitizeText()`
- –ü—Ä–æ–≤–µ—Ä–∫–∞ Origin –¥–ª—è WebSocket –≤ production
- –í–∞–ª–∏–¥–∞—Ü–∏—è —Ç–∏–ø–æ–≤ —Ñ–∞–π–ª–æ–≤:
  - –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è: JPEG, PNG, GIF, WebP
  - –í–∏–¥–µ–æ: MP4, WebM
  - –î–æ–∫—É–º–µ–Ω—Ç—ã: PDF, DOC, DOCX, TXT
- –õ–∏–º–∏—Ç—ã —Ä–∞–∑–º–µ—Ä–æ–≤ —Ñ–∞–π–ª–æ–≤ –ø–æ —Ç–∏–ø–∞–º

## üîÑ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

### –í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ —Å–µ—Ä–≤–∏—Å—ã
- **NotificationService**: –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –Ω–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏—è—Ö
- **UserService**: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ –ø–æ—Å–ª–µ–¥–Ω–µ–π –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
- **TranslationService**: –ú—É–ª—å—Ç–∏—è–∑—ã—á–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π

### –í–Ω–µ—à–Ω–∏–µ —Å–µ—Ä–≤–∏—Å—ã
- **MinIO**: –•—Ä–∞–Ω–∏–ª–∏—â–µ —Ñ–∞–π–ª–æ–≤—ã—Ö –≤–ª–æ–∂–µ–Ω–∏–π
  - Bucket: `chat-files`
  - –°—Ç—Ä—É–∫—Ç—É—Ä–∞: `/chat-files/{type}/YYYY/MM/DD/{messageID}_{timestamp}_{filename}`
- **OpenSearch**: –ò–Ω–¥–µ–∫—Å–∞—Ü–∏—è —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ —á–∞—Ç–æ–≤ (–µ—Å–ª–∏ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ)

## üöÄ –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
- –ë—É—Ñ–µ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –∫–∞–Ω–∞–ª—ã –¥–ª—è WebSocket (100 —Å–æ–æ–±—â–µ–Ω–∏–π)
- Batch-–∑–∞–ø—Ä–æ—Å—ã —Å JSON –∞–≥—Ä–µ–≥–∞—Ü–∏–µ–π PostgreSQL
- –ö–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω–æ-–±–µ–∑–æ–ø–∞—Å–Ω–∞—è –∑–∞–ø–∏—Å—å —á–µ—Ä–µ–∑ –º—å—é—Ç–µ–∫—Å—ã
- –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ URL –≤–ª–æ–∂–µ–Ω–∏–π

### –ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ
- –ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–µ —á–µ—Ä–µ–∑ Redis PubSub (—Ç—Ä–µ–±—É–µ—Ç —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏)
- –ê—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ç–∞—Ä—ã—Ö —á–∞—Ç–æ–≤
- –ü–∞—Ä—Ç–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü—ã —Å–æ–æ–±—â–µ–Ω–∏–π –ø–æ –¥–∞—Ç–µ

## ‚ö†Ô∏è –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

1. **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –æ—á–µ—Ä–µ–¥–∏ —Å–æ–æ–±—â–µ–Ω–∏–π** - –ø–æ—Ç–µ—Ä—è —Å–æ–æ–±—â–µ–Ω–∏–π –ø—Ä–∏ –æ—Ç–∫–ª—é—á–µ–Ω–∏–∏
2. **–ù–µ—Ç –ø–æ–¥–¥–µ—Ä–∂–∫–∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è/—É–¥–∞–ª–µ–Ω–∏—è** —Å–æ–æ–±—â–µ–Ω–∏–π
3. **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Ç–∏–ø–∏–∑–∞—Ü–∏–∏ —Å–æ–æ–±—â–µ–Ω–∏–π** (—Ç–µ–∫—Å—Ç, —Å–∏—Å—Ç–µ–º–Ω—ã–µ, –∏ —Ç.–¥.)
4. **–ù–µ—Ç –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π** –ø–æ –≤—Ä–µ–º–µ–Ω–∏ –æ—Ç–ø—Ä–∞–≤–∫–∏
5. **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –ø–æ–∏—Å–∫–∞** –ø–æ –∏—Å—Ç–æ—Ä–∏–∏ —Å–æ–æ–±—â–µ–Ω–∏–π

## üìä –ú–µ—Ç—Ä–∏–∫–∏ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### –ö–ª—é—á–µ–≤—ã–µ –º–µ—Ç—Ä–∏–∫–∏
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∞–∫—Ç–∏–≤–Ω—ã—Ö WebSocket —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π
- –°–∫–æ—Ä–æ—Å—Ç—å –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π (msg/sec)
- –í—Ä–µ–º—è –¥–æ—Å—Ç–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π
- –†–∞–∑–º–µ—Ä –æ—á–µ—Ä–µ–¥–∏ —Å–æ–æ–±—â–µ–Ω–∏–π
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∏ —Ä–∞–∑–º–µ—Ä –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤

### –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
- –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ª–æ–≥–∏ —Å –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º (user_id, chat_id)
- –û—Ç–¥–µ–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ WebSocket –æ—à–∏–±–æ–∫
- –ê—É–¥–∏—Ç –¥–æ—Å—Ç—É–ø–∞ –∫ —á—É–∂–∏–º —á–∞—Ç–∞–º

## üîß –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
```env
# WebSocket
WS_READ_BUFFER_SIZE=1024
WS_WRITE_BUFFER_SIZE=1024
WS_HANDSHAKE_TIMEOUT=10s

# –§–∞–π–ª—ã
MAX_FILE_SIZE_IMAGE=10485760    # 10MB
MAX_FILE_SIZE_VIDEO=104857600   # 100MB
MAX_FILE_SIZE_DOCUMENT=20971520 # 20MB
MAX_FILES_PER_MESSAGE=10

# Rate Limiting
RATE_LIMIT_MESSAGES=30
RATE_LIMIT_FILES=10
RATE_LIMIT_WS_CONNECTIONS=5
```

## üìö –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è —á–µ—Ä–µ–∑ WebSocket
```javascript
const ws = new WebSocket('wss://example.com/ws/chat');

ws.onopen = () => {
  ws.send(JSON.stringify({
    type: 'new_message',
    payload: {
      receiver_id: 123,
      listing_id: 456,
      content: '–ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ, —Ç–æ–≤–∞—Ä –µ—â–µ –≤ –Ω–∞–ª–∏—á–∏–∏?'
    }
  }));
};

ws.onmessage = (event) => {
  const message = JSON.parse(event.data);
  if (message.type === 'new_message') {
    console.log('–ù–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ:', message.payload);
  }
};
```

### –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–æ–≤
```javascript
const formData = new FormData();
formData.append('files', file1);
formData.append('files', file2);

fetch(`/api/v1/marketplace/messages/${messageId}/attachments`, {
  method: 'POST',
  headers: {
    'Authorization': `Bearer ${token}`
  },
  body: formData
});
```

## üéØ –õ—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏

1. **–í—Å–µ–≥–¥–∞ –ø—Ä–æ–≤–µ—Ä—è–π—Ç–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞** –ø–µ—Ä–µ–¥ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º —á–∞—Ç–∞
2. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–∞–≥–∏–Ω–∞—Ü–∏—é** –¥–ª—è –±–æ–ª—å—à–∏—Ö –∏—Å—Ç–æ—Ä–∏–π —Å–æ–æ–±—â–µ–Ω–∏–π
3. **–ö–µ—à–∏—Ä—É–π—Ç–µ —Å–ø–∏—Å–æ–∫ –æ–Ω–ª–∞–π–Ω-–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π** –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ
4. **–†–µ–∞–ª–∏–∑—É–π—Ç–µ reconnect –ª–æ–≥–∏–∫—É** –¥–ª—è WebSocket
5. **–ü–æ–∫–∞–∑—ã–≤–∞–π—Ç–µ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã –∑–∞–≥—Ä—É–∑–∫–∏** —Ñ–∞–π–ª–æ–≤
6. **–ì—Ä—É–ø–ø–∏—Ä—É–π—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏—è** –æ—Ç –æ–¥–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ –≤—Ä–µ–º–µ–Ω–∏
7. **–†–µ–∞–ª–∏–∑—É–π—Ç–µ "typing..."** –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã –¥–ª—è –ª—É—á—à–µ–≥–æ UX

## üîó –°–≤—è–∑–∞–Ω–Ω—ã–µ –º–æ–¥—É–ª–∏
- [Users Handler](./users-handler.md) - –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- [Notifications Handler](./notifications-handler.md) - –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ —Å–æ–æ–±—â–µ–Ω–∏—è—Ö
- [Marketplace Handler](./marketplace-handler.md) - –ö–æ–Ω—Ç–µ–∫—Å—Ç –æ–±—ä—è–≤–ª–µ–Ω–∏–π