# –ü–∞—Å–ø–æ—Ä—Ç: Marketplace Handler Module

**–§–∞–π–ª**: `/backend/internal/proj/marketplace/handler/`  
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: HTTP handlers –¥–ª—è –≤—Å–µ—Ö —Ñ—É–Ω–∫—Ü–∏–π –º–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å–∞  
**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è –ø–∞—Å–ø–æ—Ä—Ç–∞**: 2025-06-29

## üìã –û–±–∑–æ—Ä –º–æ–¥—É–ª—è

Marketplace Handler Module - —ç—Ç–æ —Ü–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –≤—Å–µ—Ö HTTP –∑–∞–ø—Ä–æ—Å–æ–≤ —Å–≤—è–∑–∞–Ω–Ω—ã—Ö —Å –º–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å–æ–º. –ú–æ–¥—É–ª—å –≤–∫–ª—é—á–∞–µ—Ç –≤ —Å–µ–±—è –º–Ω–æ–∂–µ—Å—Ç–≤–æ —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö handler'–æ–≤ –¥–ª—è —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –∞—Å–ø–µ–∫—Ç–æ–≤ –º–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å–∞.

## üèóÔ∏è –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –º–æ–¥—É–ª—è

```
backend/internal/proj/marketplace/handler/
‚îú‚îÄ‚îÄ handler.go                      # –ì–ª–∞–≤–Ω—ã–π handler —Å –∫–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏–µ–π
‚îú‚îÄ‚îÄ listings.go                     # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ–±—ä—è–≤–ª–µ–Ω–∏—è–º–∏
‚îú‚îÄ‚îÄ search.go                       # –ü–æ–∏—Å–∫ –∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è
‚îú‚îÄ‚îÄ categories.go                   # –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ —Ç–æ–≤–∞—Ä–æ–≤
‚îú‚îÄ‚îÄ images.go                       # –ó–∞–≥—Ä—É–∑–∫–∞ –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
‚îú‚îÄ‚îÄ favorites.go                    # –ò–∑–±—Ä–∞–Ω–Ω—ã–µ –æ–±—ä—è–≤–ª–µ–Ω–∏—è
‚îú‚îÄ‚îÄ chat.go                         # –ß–∞—Ç –º–µ–∂–¥—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏
‚îú‚îÄ‚îÄ translation.go                  # –ü–µ—Ä–µ–≤–æ–¥—ã –∏ –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è
‚îú‚îÄ‚îÄ indexing.go                     # –ò–Ω–¥–µ–∫—Å–∞—Ü–∏—è –≤ OpenSearch
‚îú‚îÄ‚îÄ map.go                          # –ì–µ–æ–ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–µ–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
‚îú‚îÄ‚îÄ admin_categories.go             # –ê–¥–º–∏–Ω-—É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º–∏
‚îú‚îÄ‚îÄ admin_attributes.go             # –ê–¥–º–∏–Ω-—É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∞—Ç—Ä–∏–±—É—Ç–∞–º–∏
‚îú‚îÄ‚îÄ admin_attribute_groups.go       # –ì—Ä—É–ø–ø—ã –∞—Ç—Ä–∏–±—É—Ç–æ–≤ (–∞–¥–º–∏–Ω)
‚îú‚îÄ‚îÄ custom_components.go            # –ö–∞—Å—Ç–æ–º–Ω—ã–µ UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
‚îú‚îÄ‚îÄ marketplace.go                  # –û–±—â–∏–µ –º–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å —Ñ—É–Ω–∫—Ü–∏–∏
‚îî‚îÄ‚îÄ responses.go                    # –°—Ç—Ä—É–∫—Ç—É—Ä—ã –æ—Ç–≤–µ—Ç–æ–≤ API
```

## üîß –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

### 1. Handler (handler.go)
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞, –æ–±—ä–µ–¥–∏–Ω—è—é—â–∞—è –≤—Å–µ sub-handlers –º–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å–∞

```go
type Handler struct {
    Listings           *ListingsHandler
    Images             *ImagesHandler
    Categories         *CategoriesHandler
    Search             *SearchHandler
    Translations       *TranslationsHandler
    Favorites          *FavoritesHandler
    Indexing           *IndexingHandler
    Chat               *ChatHandler
    AdminCategories    *AdminCategoriesHandler
    AdminAttributes    *AdminAttributesHandler
    CustomComponents   *CustomComponentHandler
    MarketplaceHandler *MarketplaceHandler
}
```

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏**:
- –ì–ª–æ–±–∞–ª—å–Ω–æ–µ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–µ—Ä–µ–≤–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏–π
- –ö–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏—è –≤—Å–µ—Ö sub-handlers
- –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –º–∞—Ä—à—Ä—É—Ç–æ–≤

### 2. ListingsHandler (listings.go)
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å –æ–±—ä—è–≤–ª–µ–Ω–∏—è–º–∏

**–û—Å–Ω–æ–≤–Ω—ã–µ –º–µ—Ç–æ–¥—ã**:
- `CreateListing()` - —Å–æ–∑–¥–∞–Ω–∏–µ –æ–±—ä—è–≤–ª–µ–Ω–∏—è
- `GetListing()` - –ø–æ–ª—É—á–µ–Ω–∏–µ –¥–µ—Ç–∞–ª–µ–π –æ–±—ä—è–≤–ª–µ–Ω–∏—è
- `UpdateListing()` - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –æ–±—ä—è–≤–ª–µ–Ω–∏—è
- `DeleteListing()` - —É–¥–∞–ª–µ–Ω–∏–µ –æ–±—ä—è–≤–ª–µ–Ω–∏—è
- `GetListings()` - —Å–ø–∏—Å–æ–∫ –æ–±—ä—è–≤–ª–µ–Ω–∏–π —Å —Ñ–∏–ª—å—Ç—Ä–∞–º–∏
- `GetPriceHistory()` - –∏—Å—Ç–æ—Ä–∏—è —Ü–µ–Ω –æ–±—ä—è–≤–ª–µ–Ω–∏—è
- `SynchronizeDiscounts()` - —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å–∫–∏–¥–æ–∫

### 3. SearchHandler (search.go)
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π –ø–æ–∏—Å–∫ –∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è

**–û—Å–Ω–æ–≤–Ω—ã–µ –º–µ—Ç–æ–¥—ã**:
- `SearchListingsAdvanced()` - –æ—Å–Ω–æ–≤–Ω–æ–π –ø–æ–∏—Å–∫ —Å —Ñ–∏–ª—å—Ç—Ä–∞–º–∏
- `GetSuggestions()` - –∞–≤—Ç–æ–¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ –ø–æ–∏—Å–∫–∞
- `GetCategorySuggestions()` - –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –∫–∞—Ç–µ–≥–æ—Ä–∏–π
- `GetSimilarListings()` - –ø–æ—Ö–æ–∂–∏–µ –æ–±—ä—è–≤–ª–µ–Ω–∏—è
- `GetEnhancedSuggestions()` - —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è

### 4. CategoriesHandler (categories.go)
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –†–∞–±–æ—Ç–∞ —Å –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º–∏ —Ç–æ–≤–∞—Ä–æ–≤

**–û—Å–Ω–æ–≤–Ω—ã–µ –º–µ—Ç–æ–¥—ã**:
- `GetCategories()` - —Å–ø–∏—Å–æ–∫ –∫–∞—Ç–µ–≥–æ—Ä–∏–π
- `GetCategoryTree()` - –¥–µ—Ä–µ–≤–æ –∫–∞—Ç–µ–≥–æ—Ä–∏–π
- `GetCategoryAttributes()` - –∞—Ç—Ä–∏–±—É—Ç—ã –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
- `GetAttributeRanges()` - –¥–∏–∞–ø–∞–∑–æ–Ω—ã –∑–Ω–∞—á–µ–Ω–∏–π –∞—Ç—Ä–∏–±—É—Ç–æ–≤

### 5. ImagesHandler (images.go)
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ó–∞–≥—Ä—É–∑–∫–∞ –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π

**–û—Å–Ω–æ–≤–Ω—ã–µ –º–µ—Ç–æ–¥—ã**:
- `UploadImages()` - –∑–∞–≥—Ä—É–∑–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –¥–ª—è –æ–±—ä—è–≤–ª–µ–Ω–∏—è
- `ModerateImage()` - –º–æ–¥–µ—Ä–∞—Ü–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
- `EnhancePreview()` - —É–ª—É—á—à–µ–Ω–∏–µ –ø—Ä–µ–≤—å—é
- `EnhanceImages()` - –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π

### 6. ChatHandler (chat.go)
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ß–∞—Ç –º–µ–∂–¥—É –ø–æ–∫—É–ø–∞—Ç–µ–ª—è–º–∏ –∏ –ø—Ä–æ–¥–∞–≤—Ü–∞–º–∏

**–û—Å–Ω–æ–≤–Ω—ã–µ –º–µ—Ç–æ–¥—ã**:
- `GetChats()` - —Å–ø–∏—Å–æ–∫ —á–∞—Ç–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `GetMessages()` - —Å–æ–æ–±—â–µ–Ω–∏—è –≤ —á–∞—Ç–µ
- `SendMessage()` - –æ—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è
- `MarkAsRead()` - –æ—Ç–º–µ—Ç–∫–∞ –∫–∞–∫ –ø—Ä–æ—á–∏—Ç–∞–Ω–Ω–æ–µ
- `UploadAttachments()` - –∑–∞–≥—Ä—É–∑–∫–∞ –≤–ª–æ–∂–µ–Ω–∏–π
- `ArchiveChat()` - –∞—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞–Ω–∏–µ —á–∞—Ç–∞

## üåê API Endpoints

### –ü—É–±–ª–∏—á–Ω—ã–µ (–±–µ–∑ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏)
```
GET    /api/v1/marketplace/listings           # –°–ø–∏—Å–æ–∫ –æ–±—ä—è–≤–ª–µ–Ω–∏–π
GET    /api/v1/marketplace/listings/:id       # –î–µ—Ç–∞–ª–∏ –æ–±—ä—è–≤–ª–µ–Ω–∏—è
GET    /api/v1/marketplace/categories         # –ö–∞—Ç–µ–≥–æ—Ä–∏–∏
GET    /api/v1/marketplace/category-tree      # –î–µ—Ä–µ–≤–æ –∫–∞—Ç–µ–≥–æ—Ä–∏–π
GET    /api/v1/marketplace/search             # –ü–æ–∏—Å–∫
GET    /api/v1/marketplace/suggestions        # –ê–≤—Ç–æ–¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ
GET    /api/v1/marketplace/category-suggestions  # –ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –∫–∞—Ç–µ–≥–æ—Ä–∏–π
GET    /api/v1/marketplace/listings/:id/price-history  # –ò—Å—Ç–æ—Ä–∏—è —Ü–µ–Ω
GET    /api/v1/marketplace/listings/:id/similar       # –ü–æ—Ö–æ–∂–∏–µ
GET    /api/v1/marketplace/categories/:id/attributes  # –ê—Ç—Ä–∏–±—É—Ç—ã –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
GET    /api/v1/marketplace/categories/:id/attribute-ranges  # –î–∏–∞–ø–∞–∑–æ–Ω—ã
GET    /api/v1/marketplace/enhanced-suggestions       # –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è
GET    /api/v1/marketplace/map/bounds          # –û–±—ä—è–≤–ª–µ–Ω–∏—è –Ω–∞ –∫–∞—Ä—Ç–µ
GET    /api/v1/marketplace/map/clusters        # –ö–ª–∞—Å—Ç–µ—Ä—ã –Ω–∞ –∫–∞—Ä—Ç–µ
```

### –ê–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏
```
POST   /api/v1/marketplace/listings           # –°–æ–∑–¥–∞—Ç—å –æ–±—ä—è–≤–ª–µ–Ω–∏–µ
PUT    /api/v1/marketplace/listings/:id       # –û–±–Ω–æ–≤–∏—Ç—å –æ–±—ä—è–≤–ª–µ–Ω–∏–µ
DELETE /api/v1/marketplace/listings/:id       # –£–¥–∞–ª–∏—Ç—å –æ–±—ä—è–≤–ª–µ–Ω–∏–µ
POST   /api/v1/marketplace/listings/:id/images      # –ó–∞–≥—Ä—É–∑–∏—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
POST   /api/v1/marketplace/listings/:id/favorite    # –î–æ–±–∞–≤–∏—Ç—å –≤ –∏–∑–±—Ä–∞–Ω–Ω–æ–µ
DELETE /api/v1/marketplace/listings/:id/favorite    # –£–¥–∞–ª–∏—Ç—å –∏–∑ –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ
GET    /api/v1/marketplace/favorites          # –ú–æ–∏ –∏–∑–±—Ä–∞–Ω–Ω—ã–µ
PUT    /api/v1/marketplace/translations/:id   # –û–±–Ω–æ–≤–∏—Ç—å –ø–µ—Ä–µ–≤–æ–¥—ã
POST   /api/v1/marketplace/translations/batch-translate  # –ü–∞–∫–µ—Ç–Ω—ã–π –ø–µ—Ä–µ–≤–æ–¥
POST   /api/v1/marketplace/translations/translate        # –ü–µ—Ä–µ–≤–µ—Å—Ç–∏ —Ç–µ–∫—Å—Ç
POST   /api/v1/marketplace/translations/detect-language  # –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å —è–∑—ã–∫
GET    /api/v1/marketplace/translations/:id   # –ü–æ–ª—É—á–∏—Ç—å –ø–µ—Ä–µ–≤–æ–¥—ã
POST   /api/v1/marketplace/moderate-image     # –ú–æ–¥–µ—Ä–∞—Ü–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
POST   /api/v1/marketplace/enhance-preview    # –£–ª—É—á—à–∏—Ç—å –ø—Ä–µ–≤—å—é
POST   /api/v1/marketplace/enhance-images     # –û–±—Ä–∞–±–æ—Ç–∞—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
```

### –ß–∞—Ç (–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–µ)
```
GET    /api/v1/marketplace/chat/              # –ú–æ–∏ —á–∞—Ç—ã
GET    /api/v1/marketplace/chat/messages      # –°–æ–æ–±—â–µ–Ω–∏—è
POST   /api/v1/marketplace/chat/messages      # –û—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ
PUT    /api/v1/marketplace/chat/messages/read # –û—Ç–º–µ—Ç–∏—Ç—å –ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã–º–∏
POST   /api/v1/marketplace/chat/:chat_id/archive     # –ê—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞—Ç—å —á–∞—Ç
POST   /api/v1/marketplace/chat/messages/:id/attachments  # –ó–∞–≥—Ä—É–∑–∏—Ç—å –≤–ª–æ–∂–µ–Ω–∏—è
GET    /api/v1/marketplace/chat/attachments/:id      # –ü–æ–ª—É—á–∏—Ç—å –≤–ª–æ–∂–µ–Ω–∏–µ
DELETE /api/v1/marketplace/chat/attachments/:id      # –£–¥–∞–ª–∏—Ç—å –≤–ª–æ–∂–µ–Ω–∏–µ
GET    /api/v1/marketplace/chat/unread-count         # –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω–µ–ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã—Ö
```

### –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ
```
# –ö–∞—Ç–µ–≥–æ—Ä–∏–∏
POST   /api/v1/admin/categories              # –°–æ–∑–¥–∞—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏—é
GET    /api/v1/admin/categories              # –°–ø–∏—Å–æ–∫ –∫–∞—Ç–µ–≥–æ—Ä–∏–π
GET    /api/v1/admin/categories/:id          # –ö–∞—Ç–µ–≥–æ—Ä–∏—è –ø–æ ID
PUT    /api/v1/admin/categories/:id          # –û–±–Ω–æ–≤–∏—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏—é
DELETE /api/v1/admin/categories/:id          # –£–¥–∞–ª–∏—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏—é
POST   /api/v1/admin/categories/:id/reorder  # –ü–µ—Ä–µ—É–ø–æ—Ä—è–¥–æ—á–∏—Ç—å
PUT    /api/v1/admin/categories/:id/move     # –ü–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏—é

# –ê—Ç—Ä–∏–±—É—Ç—ã
POST   /api/v1/admin/attributes              # –°–æ–∑–¥–∞—Ç—å –∞—Ç—Ä–∏–±—É—Ç
GET    /api/v1/admin/attributes              # –°–ø–∏—Å–æ–∫ –∞—Ç—Ä–∏–±—É—Ç–æ–≤
GET    /api/v1/admin/attributes/:id          # –ê—Ç—Ä–∏–±—É—Ç –ø–æ ID
PUT    /api/v1/admin/attributes/:id          # –û–±–Ω–æ–≤–∏—Ç—å –∞—Ç—Ä–∏–±—É—Ç
DELETE /api/v1/admin/attributes/:id          # –£–¥–∞–ª–∏—Ç—å –∞—Ç—Ä–∏–±—É—Ç
POST   /api/v1/admin/attributes/:id/translate # –ü–µ—Ä–µ–≤–µ—Å—Ç–∏ –∞—Ç—Ä–∏–±—É—Ç
POST   /api/v1/admin/attributes/bulk-update  # –ú–∞—Å—Å–æ–≤–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ

# –ì—Ä—É–ø–ø—ã –∞—Ç—Ä–∏–±—É—Ç–æ–≤
GET    /api/v1/admin/attribute-groups        # –°–ø–∏—Å–æ–∫ –≥—Ä—É–ø–ø
POST   /api/v1/admin/attribute-groups        # –°–æ–∑–¥–∞—Ç—å –≥—Ä—É–ø–ø—É
GET    /api/v1/admin/attribute-groups/:id    # –ì—Ä—É–ø–ø–∞ –ø–æ ID
PUT    /api/v1/admin/attribute-groups/:id    # –û–±–Ω–æ–≤–∏—Ç—å –≥—Ä—É–ø–ø—É
DELETE /api/v1/admin/attribute-groups/:id    # –£–¥–∞–ª–∏—Ç—å –≥—Ä—É–ø–ø—É

# –ö–∞—Å—Ç–æ–º–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
GET    /api/v1/admin/custom-components       # –°–ø–∏—Å–æ–∫ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
POST   /api/v1/admin/custom-components       # –°–æ–∑–¥–∞—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç
GET    /api/v1/admin/custom-components/:id   # –ö–æ–º–ø–æ–Ω–µ–Ω—Ç –ø–æ ID
PUT    /api/v1/admin/custom-components/:id   # –û–±–Ω–æ–≤–∏—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç
DELETE /api/v1/admin/custom-components/:id   # –£–¥–∞–ª–∏—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç

# –ò–Ω–¥–µ–∫—Å–∞—Ü–∏—è
POST   /api/v1/admin/reindex-listings        # –ü–µ—Ä–µ–∏–Ω–¥–µ–∫—Å–∏—Ä–æ–≤–∞—Ç—å –æ–±—ä—è–≤–ª–µ–Ω–∏—è
POST   /api/v1/admin/reindex-listings-with-translations  # –° –ø–µ—Ä–µ–≤–æ–¥–∞–º–∏
POST   /api/v1/admin/sync-discounts          # –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Å–∫–∏–¥–∫–∏
POST   /api/v1/admin/reindex-ratings         # –ü–µ—Ä–µ–∏–Ω–¥–µ–∫—Å–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–π—Ç–∏–Ω–≥–∏
```

### –ü–µ—Ä–µ–≤–æ–¥—ã
```
GET    /api/v1/translation/limits            # –õ–∏–º–∏—Ç—ã –ø–µ—Ä–µ–≤–æ–¥–æ–≤
POST   /api/v1/translation/provider          # –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø—Ä–æ–≤–∞–π–¥–µ—Ä
```

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### Middleware:
- **AuthRequiredJWT**: –ø—Ä–æ–≤–µ—Ä–∫–∞ JWT —Ç–æ–∫–µ–Ω–∞ –¥–ª—è –∑–∞—â–∏—â–µ–Ω–Ω—ã—Ö endpoints
- **AdminRequired**: –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
- **CSRFProtection**: –∑–∞—â–∏—Ç–∞ –æ—Ç CSRF –∞—Ç–∞–∫
- **RateLimitMessages**: –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —á–∞—Å—Ç–æ—Ç—ã —Å–æ–æ–±—â–µ–Ω–∏–π –≤ —á–∞—Ç–µ
- **RateLimitByIP**: –æ–±—â–∏–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –ø–æ IP

### –°–∞–Ω–∏—Ç–∏–∑–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö:
- XSS –∑–∞—â–∏—Ç–∞ —á–µ—Ä–µ–∑ `utils.SanitizeText()`
- –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞ –∫ –æ–±—ä—è–≤–ª–µ–Ω–∏—è–º

## üìä –°–≤—è–∑–∏ —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö

### –û—Å–Ω–æ–≤–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã:
- `marketplace_listings` - –æ—Å–Ω–æ–≤–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –æ–±—ä—è–≤–ª–µ–Ω–∏–π
- `marketplace_categories` - –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ —Ç–æ–≤–∞—Ä–æ–≤
- `category_attributes` - –∞—Ç—Ä–∏–±—É—Ç—ã –∫–∞—Ç–µ–≥–æ—Ä–∏–π
- `listing_attribute_values` - –∑–Ω–∞—á–µ–Ω–∏—è –∞—Ç—Ä–∏–±—É—Ç–æ–≤ –æ–±—ä—è–≤–ª–µ–Ω–∏–π
- `marketplace_images` - –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –æ–±—ä—è–≤–ª–µ–Ω–∏–π
- `marketplace_favorites` - –∏–∑–±—Ä–∞–Ω–Ω—ã–µ –æ–±—ä—è–≤–ª–µ–Ω–∏—è
- `marketplace_chats` - —á–∞—Ç—ã
- `marketplace_messages` - —Å–æ–æ–±—â–µ–Ω–∏—è –≤ —á–∞—Ç–∞—Ö
- `chat_attachments` - –≤–ª–æ–∂–µ–Ω–∏—è –≤ —á–∞—Ç–∞—Ö
- `translations` - –ø–µ—Ä–µ–≤–æ–¥—ã —Ç–µ–∫—Å—Ç–æ–≤
- `price_history` - –∏—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ü–µ–Ω
- `custom_ui_components` - –∫–∞—Å—Ç–æ–º–Ω—ã–µ UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
- `attribute_groups` - –≥—Ä—É–ø–ø—ã –∞—Ç—Ä–∏–±—É—Ç–æ–≤

### –í–Ω–µ—à–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã:
- **OpenSearch**: –ø–æ–ª–Ω–æ—Ç–µ–∫—Å—Ç–æ–≤—ã–π –ø–æ–∏—Å–∫ –∏ –∏–Ω–¥–µ–∫—Å–∞—Ü–∏—è
- **MinIO**: —Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
- **Google Translation API**: –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –ø–µ—Ä–µ–≤–æ–¥—ã
- **Cloudinary**: –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π

## üîÑ –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞

### –°–æ–∑–¥–∞–Ω–∏–µ –æ–±—ä—è–≤–ª–µ–Ω–∏—è:
1. –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
2. –°–∞–Ω–∏—Ç–∏–∑–∞—Ü–∏—è —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö –ø–æ–ª–µ–π
3. –û–±—Ä–∞–±–æ—Ç–∫–∞ –∞—Ç—Ä–∏–±—É—Ç–æ–≤ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
4. –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–ø–∏—Å–∏ –≤ –ë–î
5. –ò–Ω–¥–µ–∫—Å–∞—Ü–∏—è –≤ OpenSearch
6. –í–æ–∑–≤—Ä–∞—Ç ID —Å–æ–∑–¥–∞–Ω–Ω–æ–≥–æ –æ–±—ä—è–≤–ª–µ–Ω–∏—è

### –ü–æ–∏—Å–∫ –æ–±—ä—è–≤–ª–µ–Ω–∏–π:
1. –ü–∞—Ä—Å–∏–Ω–≥ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –ø–æ–∏—Å–∫–∞
2. –ü–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–∞ –∫ OpenSearch
3. –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ —Ñ–∏–ª—å—Ç—Ä–æ–≤ –∏ —Ñ–∞—Å–µ—Ç–æ–≤
4. –†–∞–Ω–∂–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
5. –§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç–≤–µ—Ç–∞ —Å –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–º–∏

### –†–∞–±–æ—Ç–∞ —Å —á–∞—Ç–∞–º–∏:
1. –°–æ–∑–¥–∞–Ω–∏–µ —á–∞—Ç–∞ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º —Å–æ–æ–±—â–µ–Ω–∏–∏
2. Rate limiting –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è —Å–ø–∞–º–∞
3. –û–±—Ä–∞–±–æ—Ç–∫–∞ –≤–ª–æ–∂–µ–Ω–∏–π —á–µ—Ä–µ–∑ MinIO
4. –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ –ø—Ä–æ—á–∏—Ç–∞–Ω–Ω–æ—Å—Ç–∏
5. –ê—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–µ–∞–∫—Ç–∏–≤–Ω—ã—Ö —á–∞—Ç–æ–≤

## üó∫Ô∏è –ì–µ–æ–ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–µ–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏

### –ö–∞—Ä—Ç–∞ –æ–±—ä—è–≤–ª–µ–Ω–∏–π:
- `GetListingsInBounds()` - –æ–±—ä—è–≤–ª–µ–Ω–∏—è –≤ –≥—Ä–∞–Ω–∏—Ü–∞—Ö –∫–∞—Ä—Ç—ã
- `GetMapClusters()` - –∫–ª–∞—Å—Ç–µ—Ä–∏–∑–∞—Ü–∏—è –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º –∏ —Ü–µ–Ω–µ
- –ê–¥–∞–ø—Ç–∏–≤–Ω–∞—è –ø–ª–æ—Ç–Ω–æ—Å—Ç—å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –ø–æ zoom —É—Ä–æ–≤–Ω—é

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

**–§–∞–π–ª—ã —Ç–µ—Å—Ç–æ–≤**: –ü—Ä–∏—Å—É—Ç—Å—Ç–≤—É—é—Ç –≤ –º–æ–¥—É–ª–µ (—Ç—Ä–µ–±—É–µ—Ç –¥–µ—Ç–∞–ª—å–Ω–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞)

**–û—Å–Ω–æ–≤–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏**:
- CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å –æ–±—ä—è–≤–ª–µ–Ω–∏—è–º–∏
- –ü–æ–∏—Å–∫ –∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è
- –ó–∞–≥—Ä—É–∑–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
- –ß–∞—Ç —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å
- –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏

## ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

**–ó–∞–≤–∏—Å–∏—Ç –æ—Ç –Ω–∞—Å—Ç—Ä–æ–µ–∫**:
- OpenSearch cluster –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
- MinIO bucket –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
- Google Translation API –∫–ª—é—á–∏
- Cloudinary credentials
- Rate limiting –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
- Image processing settings

## üîó –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

### –í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ:
- `internal/proj/global/service` - –≥–ª–æ–±–∞–ª—å–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã
- `internal/proj/marketplace/service` - –±–∏–∑–Ω–µ—Å –ª–æ–≥–∏–∫–∞ –º–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å–∞
- `internal/domain/models` - –º–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö
- `internal/domain/search` - —Ç–∏–ø—ã –ø–æ–∏—Å–∫–∞
- `internal/storage/postgres` - PostgreSQL —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏
- `internal/logger` - –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
- `pkg/utils` - –æ–±—â–∏–µ —É—Ç–∏–ª–∏—Ç—ã

### –í–Ω–µ—à–Ω–∏–µ:
- `github.com/gofiber/fiber/v2` - HTTP framework

## üö® –í–∞–∂–Ω—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

### –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ:
- –ì–ª–æ–±–∞–ª—å–Ω–æ–µ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–µ—Ä–µ–≤–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏–π
- Thread-safe –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å cache
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö

### –ú–Ω–æ–≥–æ—è–∑—ã—á–Ω–æ—Å—Ç—å:
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –ø–µ—Ä–µ–≤–æ–¥–æ–≤ —á–µ—Ä–µ–∑ Google Translate API
- –ò–Ω–¥–µ–∫—Å–∞—Ü–∏—è –º—É–ª—å—Ç–∏—è–∑—ã—á–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ –≤ OpenSearch
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —è–∑—ã–∫–∞

### –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:
- –ü–∞–≥–∏–Ω–∞—Ü–∏—è –¥–ª—è –±–æ–ª—å—à–∏—Ö –≤—ã–±–æ—Ä–æ–∫
- Lazy loading –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
- –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã –∫ –ë–î
- –ö–ª–∞—Å—Ç–µ—Ä–∏–∑–∞—Ü–∏—è –Ω–∞ –∫–∞—Ä—Ç–µ

### –ú–æ–¥–µ—Ä–∞—Ü–∏—è:
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –º–æ–¥–µ—Ä–∞—Ü–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
- –°–∞–Ω–∏—Ç–∏–∑–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ –∫–æ–Ω—Ç–µ–Ω—Ç–∞
- –°–∏—Å—Ç–µ–º–∞ –æ—Ç—á–µ—Ç–æ–≤ –∏ –∂–∞–ª–æ–±

## üìã TODO –∏ —É–ª—É—á—à–µ–Ω–∏—è

1. **–î–æ–±–∞–≤–∏—Ç—å –ø–æ–ª–Ω–æ—Ç–µ–∫—Å—Ç–æ–≤—ã–π –ø–æ–∏—Å–∫ –ø–æ —á–∞—Ç–∞–º**
2. **–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏**
3. **–î–æ–±–∞–≤–∏—Ç—å —Å–∏—Å—Ç–µ–º—É —Ä–µ–π—Ç–∏–Ω–≥–æ–≤ –∏ –æ—Ç–∑—ã–≤–æ–≤**
4. **–û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∫–∞—Ä—Ç—ã**
5. **–†–∞—Å—à–∏—Ä–∏—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –º–æ–¥–µ—Ä–∞—Ü–∏–∏**
6. **–î–æ–±–∞–≤–∏—Ç—å API –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π**
7. **–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Å–∏—Å—Ç–µ–º—É —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π**
8. **–î–æ–±–∞–≤–∏—Ç—å –∞–Ω–∞–ª–∏—Ç–∏–∫—É –∏ –º–µ—Ç—Ä–∏–∫–∏**