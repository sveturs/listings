# üè™ Storefronts Handler - –°–∏—Å—Ç–µ–º–∞ –£–ø—Ä–∞–≤–ª–µ–Ω–∏—è –í–∏—Ç—Ä–∏–Ω–∞–º–∏

## üìã –û–±–∑–æ—Ä –º–æ–¥—É–ª—è

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ö–æ–º–ø–ª–µ–∫—Å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤–∏—Ç—Ä–∏–Ω–∞–º–∏ –ø—Ä–æ–¥–∞–≤—Ü–æ–≤, –≤–∫–ª—é—á–∞—é—â–∞—è —Å–æ–∑–¥–∞–Ω–∏–µ, —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞–º–∏, –ø–µ—Ä—Å–æ–Ω–∞–ª–æ–º, –∏–º–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫—É.

**–ú–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ**: `/backend/internal/proj/storefronts/`

**–í–µ—Ä—Å–∏—è API**: v1

**–û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏**:
- –ü–æ–ª–Ω–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤–∏—Ç—Ä–∏–Ω–∞–º–∏
- –°–∏—Å—Ç–µ–º–∞ —Ç–æ–≤–∞—Ä–æ–≤ —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –º–∞—Å—Å–æ–≤—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–µ—Ä—Å–æ–Ω–∞–ª–æ–º —Å –≥–∏–±–∫–∏–º–∏ –ø—Ä–∞–≤–∞–º–∏ –¥–æ—Å—Ç—É–ø–∞
- –ò–º–ø–æ—Ä—Ç —Ç–æ–≤–∞—Ä–æ–≤ –∏–∑ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤ (XML, CSV, ZIP)
- –ì–µ–æ–ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π –ø–æ–∏—Å–∫ –∏ –∫–∞—Ä—Ç–∞
- –°–∏—Å—Ç–µ–º–∞ –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ –∏ –æ—Ç—á–µ—Ç–Ω–æ—Å—Ç–∏
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å OpenSearch –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –ø–æ–∏—Å–∫–∞

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤

```
storefronts/
‚îú‚îÄ‚îÄ handler/                     # HTTP –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏
‚îÇ   ‚îú‚îÄ‚îÄ storefront_handler.go    # –û—Å–Ω–æ–≤–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å –≤–∏—Ç—Ä–∏–Ω–∞–º–∏
‚îÇ   ‚îú‚îÄ‚îÄ product_handler.go       # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞–º–∏
‚îÇ   ‚îú‚îÄ‚îÄ import_handler.go        # –ò–º–ø–æ—Ä—Ç —Ç–æ–≤–∞—Ä–æ–≤
‚îÇ   ‚îî‚îÄ‚îÄ staff_handler.go         # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–µ—Ä—Å–æ–Ω–∞–ª–æ–º
‚îú‚îÄ‚îÄ service/                     # –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
‚îÇ   ‚îú‚îÄ‚îÄ storefront_service.go    # –°–µ—Ä–≤–∏—Å –≤–∏—Ç—Ä–∏–Ω
‚îÇ   ‚îú‚îÄ‚îÄ product_service.go       # –°–µ—Ä–≤–∏—Å —Ç–æ–≤–∞—Ä–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ import_service.go        # –°–µ—Ä–≤–∏—Å –∏–º–ø–æ—Ä—Ç–∞
‚îÇ   ‚îî‚îÄ‚îÄ geocoding_service.go     # –ì–µ–æ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ
‚îú‚îÄ‚îÄ storage/opensearch/          # OpenSearch —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏
‚îÇ   ‚îú‚îÄ‚îÄ repository.go            # –û—Å–Ω–æ–≤–Ω–æ–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
‚îÇ   ‚îú‚îÄ‚îÄ product_repository.go    # –ü–æ–∏—Å–∫ —Ç–æ–≤–∞—Ä–æ–≤
‚îÇ   ‚îî‚îÄ‚îÄ interface.go             # –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã
‚îú‚îÄ‚îÄ parsers/                     # –ü–∞—Ä—Å–µ—Ä—ã —Ñ–∞–π–ª–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ csv_parser.go            # CSV –ø–∞—Ä—Å–µ—Ä
‚îÇ   ‚îî‚îÄ‚îÄ xml_parser.go            # XML –ø–∞—Ä—Å–µ—Ä
‚îú‚îÄ‚îÄ jobs/                        # –§–æ–Ω–æ–≤—ã–µ –∑–∞–¥–∞—á–∏
‚îÇ   ‚îî‚îÄ‚îÄ analytics_aggregator.go  # –ê–≥—Ä–µ–≥–∞—Ü–∏—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∏
‚îî‚îÄ‚îÄ module.go                    # –ú–æ–¥—É–ª—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
```

## üõ†Ô∏è API Endpoints

### üîì –ü—É–±–ª–∏—á–Ω—ã–µ –º–∞—Ä—à—Ä—É—Ç—ã

#### –û—Å–Ω–æ–≤–Ω—ã–µ —Å–ø–∏—Å–∫–∏ –∏ –ø–æ–∏—Å–∫
- `GET /api/v1/storefronts` - –°–ø–∏—Å–æ–∫ –≤–∏—Ç—Ä–∏–Ω —Å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π
- `GET /api/v1/storefronts/search` - –ü–æ–∏—Å–∫ —á–µ—Ä–µ–∑ OpenSearch
- `GET /api/v1/storefronts/nearby` - –ë–ª–∏–∂–∞–π—à–∏–µ –≤–∏—Ç—Ä–∏–Ω—ã

#### –ü–æ–ª—É—á–µ–Ω–∏–µ –≤–∏—Ç—Ä–∏–Ω
- `GET /api/v1/storefronts/slug/{slug}` - –í–∏—Ç—Ä–∏–Ω–∞ –ø–æ slug
- `GET /api/v1/storefronts/{id}` - –í–∏—Ç—Ä–∏–Ω–∞ –ø–æ ID

#### –ö–∞—Ä—Ç–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ
- `GET /api/v1/storefronts/map` - –î–∞–Ω–Ω—ã–µ –¥–ª—è –∫–∞—Ä—Ç—ã
- `GET /api/v1/storefronts/building` - –ë–∏–∑–Ω–µ—Å—ã –≤ –∑–¥–∞–Ω–∏–∏

#### –¢–æ–≤–∞—Ä—ã (–ø—É–±–ª–∏—á–Ω—ã–π –ø—Ä–æ—Å–º–æ—Ç—Ä)
- `GET /api/v1/storefronts/slug/{slug}/products` - –¢–æ–≤–∞—Ä—ã –≤–∏—Ç—Ä–∏–Ω—ã
- `GET /api/v1/storefronts/slug/{slug}/products/{id}` - –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —Ç–æ–≤–∞—Ä

#### –ü–µ—Ä—Å–æ–Ω–∞–ª (–ø—Ä–æ—Å–º–æ—Ç—Ä)
- `GET /api/v1/storefronts/{id}/staff` - –°–ø–∏—Å–æ–∫ –ø–µ—Ä—Å–æ–Ω–∞–ª–∞

#### –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ (–∑–∞–ø–∏—Å—å)
- `POST /api/v1/storefronts/{id}/view` - –ó–∞–ø–∏—Å—å –ø—Ä–æ—Å–º–æ—Ç—Ä–∞

#### –ò–º–ø–æ—Ä—Ç (–æ–±—â–µ–¥–æ—Å—Ç—É–ø–Ω—ã–µ)
- `GET /api/v1/storefronts/import/csv-template` - –®–∞–±–ª–æ–Ω CSV
- `GET /api/v1/storefronts/import/formats` - –§–æ—Ä–º–∞—Ç—ã –∏–º–ø–æ—Ä—Ç–∞

### üîê –ó–∞—â–∏—â–µ–Ω–Ω—ã–µ –º–∞—Ä—à—Ä—É—Ç—ã (JWT)

#### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤–∏—Ç—Ä–∏–Ω–∞–º–∏
- `GET /api/v1/storefronts/my` - –ú–æ–∏ –≤–∏—Ç—Ä–∏–Ω—ã
- `POST /api/v1/storefronts` - –°–æ–∑–¥–∞—Ç—å –≤–∏—Ç—Ä–∏–Ω—É
- `PUT /api/v1/storefronts/{id}` - –û–±–Ω–æ–≤–∏—Ç—å –≤–∏—Ç—Ä–∏–Ω—É
- `DELETE /api/v1/storefronts/{id}` - –£–¥–∞–ª–∏—Ç—å –≤–∏—Ç—Ä–∏–Ω—É

#### –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –≤–∏—Ç—Ä–∏–Ω—ã
- `PUT /api/v1/storefronts/{id}/hours` - –ß–∞—Å—ã —Ä–∞–±–æ—Ç—ã
- `PUT /api/v1/storefronts/{id}/payment-methods` - –ú–µ—Ç–æ–¥—ã –æ–ø–ª–∞—Ç—ã
- `PUT /api/v1/storefronts/{id}/delivery-options` - –û–ø—Ü–∏–∏ –¥–æ—Å—Ç–∞–≤–∫–∏

#### –ó–∞–≥—Ä—É–∑–∫–∞ –∫–æ–Ω—Ç–µ–Ω—Ç–∞
- `POST /api/v1/storefronts/{id}/logo` - –õ–æ–≥–æ—Ç–∏–ø
- `POST /api/v1/storefronts/{id}/banner` - –ë–∞–Ω–Ω–µ—Ä

#### –¢–æ–≤–∞—Ä—ã (—É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ)
- `POST /api/v1/storefronts/slug/{slug}/products` - –°–æ–∑–¥–∞—Ç—å —Ç–æ–≤–∞—Ä
- `PUT /api/v1/storefronts/slug/{slug}/products/{id}` - –û–±–Ω–æ–≤–∏—Ç—å —Ç–æ–≤–∞—Ä
- `DELETE /api/v1/storefronts/slug/{slug}/products/{id}` - –£–¥–∞–ª–∏—Ç—å —Ç–æ–≤–∞—Ä
- `POST /api/v1/storefronts/slug/{slug}/products/{id}/inventory` - –û–±–Ω–æ–≤–∏—Ç—å –æ—Å—Ç–∞—Ç–∫–∏
- `GET /api/v1/storefronts/slug/{slug}/products/stats` - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ç–æ–≤–∞—Ä–æ–≤

#### –ú–∞—Å—Å–æ–≤—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏
- `POST /api/v1/storefronts/slug/{slug}/products/bulk/create` - –ú–∞—Å—Å–æ–≤–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ
- `PUT /api/v1/storefronts/slug/{slug}/products/bulk/update` - –ú–∞—Å—Å–æ–≤–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
- `DELETE /api/v1/storefronts/slug/{slug}/products/bulk/delete` - –ú–∞—Å—Å–æ–≤–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ
- `PUT /api/v1/storefronts/slug/{slug}/products/bulk/status` - –ú–∞—Å—Å–æ–≤–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞

#### –ü–µ—Ä—Å–æ–Ω–∞–ª (—É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ)
- `POST /api/v1/storefronts/{id}/staff` - –î–æ–±–∞–≤–∏—Ç—å —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞
- `PUT /api/v1/storefronts/{id}/staff/{staffId}/permissions` - –ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞
- `DELETE /api/v1/storefronts/{id}/staff/{userId}` - –£–¥–∞–ª–∏—Ç—å —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞

#### –ò–º–ø–æ—Ä—Ç —Ç–æ–≤–∞—Ä–æ–≤
- `POST /api/v1/storefronts/{id}/import/url` - –ò–º–ø–æ—Ä—Ç –∏–∑ URL
- `POST /api/v1/storefronts/{id}/import/file` - –ò–º–ø–æ—Ä—Ç —Ñ–∞–π–ª–∞
- `POST /api/v1/storefronts/{id}/import/validate` - –í–∞–ª–∏–¥–∞—Ü–∏—è —Ñ–∞–π–ª–∞
- `GET /api/v1/storefronts/{id}/import/jobs` - –°–ø–∏—Å–æ–∫ –∑–∞–¥–∞—á –∏–º–ø–æ—Ä—Ç–∞
- `GET /api/v1/storefronts/{id}/import/jobs/{jobId}` - –î–µ—Ç–∞–ª–∏ –∑–∞–¥–∞—á–∏
- `GET /api/v1/storefronts/{id}/import/jobs/{jobId}/status` - –°—Ç–∞—Ç—É—Å –∑–∞–¥–∞—á–∏
- `POST /api/v1/storefronts/{id}/import/jobs/{jobId}/cancel` - –û—Ç–º–µ–Ω–∏—Ç—å –∑–∞–¥–∞—á—É
- `POST /api/v1/storefronts/{id}/import/jobs/{jobId}/retry` - –ü–æ–≤—Ç–æ—Ä–∏—Ç—å –∑–∞–¥–∞—á—É

#### –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ (–ø—Ä–æ—Å–º–æ—Ç—Ä)
- `GET /api/v1/storefronts/{id}/analytics` - –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –≤–∏—Ç—Ä–∏–Ω—ã

## üóÑÔ∏è –ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã

### –û—Å–Ω–æ–≤–Ω—ã–µ –º–æ–¥–µ–ª–∏

#### Storefront (–í–∏—Ç—Ä–∏–Ω–∞)
```go
type Storefront struct {
    ID              int                 `json:"id"`
    UserID          int                 `json:"user_id"`
    Name            string              `json:"name"`
    Slug            string              `json:"slug"`
    Description     *string             `json:"description"`
    Address         *string             `json:"address"`
    Latitude        *float64            `json:"latitude"`
    Longitude       *float64            `json:"longitude"`
    Phone           *string             `json:"phone"`
    Email           *string             `json:"email"`
    Website         *string             `json:"website"`
    LogoURL         *string             `json:"logo_url"`
    BannerURL       *string             `json:"banner_url"`
    IsActive        bool                `json:"is_active"`
    IsVerified      bool                `json:"is_verified"`
    Rating          float64             `json:"rating"`
    ReviewsCount    int                 `json:"reviews_count"`
    ProductsCount   int                 `json:"products_count"`
    CreatedAt       time.Time           `json:"created_at"`
    UpdatedAt       time.Time           `json:"updated_at"`
}
```

#### StorefrontProduct (–¢–æ–≤–∞—Ä –≤–∏—Ç—Ä–∏–Ω—ã)
```go
type StorefrontProduct struct {
    ID              int         `json:"id"`
    StorefrontID    int         `json:"storefront_id"`
    Name            string      `json:"name"`
    Description     *string     `json:"description"`
    SKU             *string     `json:"sku"`
    Barcode         *string     `json:"barcode"`
    Price           float64     `json:"price"`
    Currency        string      `json:"currency"`
    WholesalePrice  *float64    `json:"wholesale_price"`
    SalePrice       *float64    `json:"sale_price"`
    StockQuantity   int         `json:"stock_quantity"`
    CategoryID      *int        `json:"category_id"`
    Brand           *string     `json:"brand"`
    Model           *string     `json:"model"`
    CountryOfOrigin *string     `json:"country_of_origin"`
    IsActive        bool        `json:"is_active"`
    OnSale          bool        `json:"on_sale"`
    CreatedAt       time.Time   `json:"created_at"`
    UpdatedAt       time.Time   `json:"updated_at"`
}
```

#### StorefrontStaff (–ü–µ—Ä—Å–æ–Ω–∞–ª)
```go
type StorefrontStaff struct {
    ID            int       `json:"id"`
    StorefrontID  int       `json:"storefront_id"`
    UserID        int       `json:"user_id"`
    Role          StaffRole `json:"role"`
    Permissions   JSONB     `json:"permissions"`
    CreatedAt     time.Time `json:"created_at"`
}
```

### DTO –º–æ–¥–µ–ª–∏

#### StorefrontCreateDTO
```go
type StorefrontCreateDTO struct {
    Name        string   `json:"name" validate:"required,min=2,max=100"`
    Description *string  `json:"description" validate:"omitempty,max=1000"`
    Address     *string  `json:"address" validate:"omitempty,max=255"`
    Latitude    *float64 `json:"latitude" validate:"omitempty,latitude"`
    Longitude   *float64 `json:"longitude" validate:"omitempty,longitude"`
    Phone       *string  `json:"phone" validate:"omitempty,e164"`
    Email       *string  `json:"email" validate:"omitempty,email"`
    Website     *string  `json:"website" validate:"omitempty,url"`
}
```

#### ProductFilter
```go
type ProductFilter struct {
    StorefrontID int      `json:"storefront_id"`
    CategoryID   *int     `json:"category_id"`
    Search       *string  `json:"search"`
    MinPrice     *float64 `json:"min_price"`
    MaxPrice     *float64 `json:"max_price"`
    StockStatus  *string  `json:"stock_status"`
    IsActive     *bool    `json:"is_active"`
    SKU          *string  `json:"sku"`
    Barcode      *string  `json:"barcode"`
    SortBy       string   `json:"sort_by"`
    SortOrder    string   `json:"sort_order"`
    Limit        int      `json:"limit"`
    Offset       int      `json:"offset"`
}
```

## üîÑ –ë–∏–∑–Ω–µ—Å-–ø—Ä–æ—Ü–µ—Å—Å—ã –∏ –ª–æ–≥–∏–∫–∞

### 1. –°–æ–∑–¥–∞–Ω–∏–µ –≤–∏—Ç—Ä–∏–Ω—ã
```
1. –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
2. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–∏–º–∏—Ç–æ–≤ —Ç–∞—Ä–∏—Ñ–Ω–æ–≥–æ –ø–ª–∞–Ω–∞
3. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —É–Ω–∏–∫–∞–ª—å–Ω–æ–≥–æ slug
4. –ì–µ–æ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ –∞–¥—Ä–µ—Å–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
5. –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–ø–∏—Å–∏ –≤ –ë–î
6. –û—Ç–ø—Ä–∞–≤–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
```

### 2. –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞–º–∏
```
1. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞ (–≤–ª–∞–¥–µ–ª–µ—Ü/–ø–µ—Ä—Å–æ–Ω–∞–ª)
2. –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö —Ç–æ–≤–∞—Ä–∞
3. –û–±—Ä–∞–±–æ—Ç–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
4. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –æ—Å—Ç–∞—Ç–∫–æ–≤
5. –ò–Ω–¥–µ–∫—Å–∞—Ü–∏—è –≤ OpenSearch
6. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –≤–∏—Ç—Ä–∏–Ω—ã
```

### 3. –ò–º–ø–æ—Ä—Ç —Ç–æ–≤–∞—Ä–æ–≤
```
1. –í–∞–ª–∏–¥–∞—Ü–∏—è —Ñ–∞–π–ª–∞ –∏ —Ñ–æ—Ä–º–∞—Ç–∞
2. –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏ –∏–º–ø–æ—Ä—Ç–∞
3. –ü–∞—Ä—Å–∏–Ω–≥ –¥–∞–Ω–Ω—ã—Ö (–∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ)
4. –í–∞–ª–∏–¥–∞—Ü–∏—è –∏ —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏—è
5. –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏–π
6. –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–æ–≤
7. –û—Ç—á–µ—Ç –æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞—Ö
```

### 4. –°–∏—Å—Ç–µ–º–∞ –ø–µ—Ä—Å–æ–Ω–∞–ª–∞
```
1. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
2. –í–∞–ª–∏–¥–∞—Ü–∏—è —Ä–æ–ª–∏ –∏ –ø—Ä–∞–≤
3. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–∏–º–∏—Ç–æ–≤ –ø–ª–∞–Ω–∞
4. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ/–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–∞–ø–∏—Å–∏
5. –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞
```

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ –≤–∞–ª–∏–¥–∞—Ü–∏—è

### –£—Ä–æ–≤–Ω–∏ –¥–æ—Å—Ç—É–ø–∞
- **–í–ª–∞–¥–µ–ª–µ—Ü –≤–∏—Ç—Ä–∏–Ω—ã**: –ü–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫–æ –≤—Å–µ–º —Ñ—É–Ω–∫—Ü–∏—è–º
- **Manager**: –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞–º–∏, –ø—Ä–æ—Å–º–æ—Ç—Ä –∞–Ω–∞–ª–∏—Ç–∏–∫–∏
- **Support**: –û–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–∫–∞–∑–æ–≤, —Ä–∞–±–æ—Ç–∞ —Å –∫–ª–∏–µ–Ω—Ç–∞–º–∏
- **Moderator**: –ú–æ–¥–µ—Ä–∞—Ü–∏—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞

### –ü—Ä–æ–≤–µ—Ä–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
- JWT —Ç–æ–∫–µ–Ω –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–ª–∞–¥–µ–Ω–∏—è –≤–∏—Ç—Ä–∏–Ω–æ–π
- –í–∞–ª–∏–¥–∞—Ü–∏—è –ø—Ä–∞–≤ –ø–µ—Ä—Å–æ–Ω–∞–ª–∞
- –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –ø–æ —Ç–∞—Ä–∏—Ñ–Ω–æ–º—É –ø–ª–∞–Ω—É
- Rate limiting –Ω–∞ API
- –í–∞–ª–∏–¥–∞—Ü–∏—è —Ñ–∞–π–ª–æ–≤ –∏–º–ø–æ—Ä—Ç–∞

### –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
- –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è –≤–∏—Ç—Ä–∏–Ω—ã
- –§–æ—Ä–º–∞—Ç—ã —Ç–µ–ª–µ—Ñ–æ–Ω–æ–≤ –∏ email
- –ì–µ–æ–∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã
- –†–∞–∑–º–µ—Ä—ã –∏ —Ç–∏–ø—ã –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
- –õ–∏–º–∏—Ç—ã –Ω–∞ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–æ–≤–∞—Ä–æ–≤

## üóÉÔ∏è –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –∏ —Å–≤—è–∑–∏

### –û—Å–Ω–æ–≤–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã
- `storefronts` - –í–∏—Ç—Ä–∏–Ω—ã (—Å–≤—è–∑—å —Å `users`)
- `storefront_products` - –¢–æ–≤–∞—Ä—ã –≤–∏—Ç—Ä–∏–Ω
- `storefront_staff` - –ü–µ—Ä—Å–æ–Ω–∞–ª –≤–∏—Ç—Ä–∏–Ω
- `storefront_analytics` - –ê–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ
- `import_history` - –ò—Å—Ç–æ—Ä–∏—è –∏–º–ø–æ—Ä—Ç–∞
- `import_sources` - –ò—Å—Ç–æ—á–Ω–∏–∫–∏ –∏–º–ø–æ—Ä—Ç–∞

### –°–≤—è–∑–∏
- Storefront ‚Üí User (many-to-one)
- StorefrontProduct ‚Üí Storefront (many-to-one)
- StorefrontStaff ‚Üí Storefront (many-to-one)
- StorefrontStaff ‚Üí User (many-to-one)
- ImportHistory ‚Üí Storefront (many-to-one)

### –ò–Ω–¥–µ–∫—Å—ã
- `idx_storefronts_user_id` - –ü–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
- `idx_storefronts_location` - GiST –¥–ª—è –≥–µ–æ–ø–æ–∏—Å–∫–∞
- `idx_storefronts_slug` - –£–Ω–∏–∫–∞–ª—å–Ω—ã–π slug
- `idx_products_storefront_id` - –ü–æ –≤–∏—Ç—Ä–∏–Ω–µ
- `idx_products_category_sku` - –°–æ—Å—Ç–∞–≤–Ω–æ–π –¥–ª—è –ø–æ–∏—Å–∫–∞

## üîó –í–Ω–µ—à–Ω–∏–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

### OpenSearch
- –ü–æ–ª–Ω–æ—Ç–µ–∫—Å—Ç–æ–≤—ã–π –ø–æ–∏—Å–∫ –≤–∏—Ç—Ä–∏–Ω
- –ì–µ–æ–ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π –ø–æ–∏—Å–∫
- –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –∏ –∞–≥—Ä–µ–≥–∞—Ü–∏—è
- –ê–≤—Ç–æ–¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ –ø–æ–∏—Å–∫–∞

### MinIO/S3
- –•—Ä–∞–Ω–µ–Ω–∏–µ –ª–æ–≥–æ—Ç–∏–ø–æ–≤ –≤–∏—Ç—Ä–∏–Ω
- –ë–∞–Ω–Ω–µ—Ä—ã –∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è —Ç–æ–≤–∞—Ä–æ–≤
- –§–∞–π–ª—ã –∏–º–ø–æ—Ä—Ç–∞
- –†–µ–∑–µ—Ä–≤–Ω—ã–µ –∫–æ–ø–∏–∏

### Geocoding Service
- –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –∞–¥—Ä–µ—Å–æ–≤ –≤ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã
- –í–∞–ª–∏–¥–∞—Ü–∏—è –≥–µ–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö
- –ü–æ–∏—Å–∫ –±–ª–∏–∂–∞–π—à–∏—Ö –≤–∏—Ç—Ä–∏–Ω

### Notification Service
- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –Ω–æ–≤—ã—Ö –≤–∏—Ç—Ä–∏–Ω–∞—Ö
- –°—Ç–∞—Ç—É—Å –∏–º–ø–æ—Ä—Ç–∞ —Ç–æ–≤–∞—Ä–æ–≤
- –°–∏—Å—Ç–µ–º–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è

## üè≠ –§–∞–±—Ä–∏—á–Ω—ã–µ –º–µ—Ç–æ–¥—ã

### StorefrontHandler Factory
```go
func NewStorefrontHandler(service StorefrontService) *StorefrontHandler
```

### ProductHandler Factory
```go
func NewProductHandler(productService *ProductService) *ProductHandler
```

### ImportHandler Factory
```go
func NewImportHandler(importService *ImportService) *ImportHandler
```

### Service Factories
```go
func NewStorefrontService(repo StorefrontRepository, ...) StorefrontService
func NewProductService(storage Storage, searchRepo ProductSearchRepository) *ProductService
func NewImportService(productService *ProductService) *ImportService
```

## ‚ö†Ô∏è –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### 1. –°–∏—Å—Ç–µ–º–∞ —Ç–∞—Ä–∏—Ñ–Ω—ã—Ö –ø–ª–∞–Ω–æ–≤
- –í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ –ª–∏–º–∏—Ç—ã –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –ø–ª–∞–Ω–∞
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∏ –æ–ø–µ—Ä–∞—Ü–∏—è—Ö
- –ì–∏–±–∫–æ–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π

### 2. Slug-based –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è
- –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –º–∞—Ä—à—Ä—É—Ç–æ–≤ —Å ID –∏ slug
- Middleware –¥–ª—è –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è slug ‚Üí ID
- SEO-–æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ URL

### 3. –ú–∞—Å—Å–æ–≤—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏
- Batch –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Ç–æ–≤–∞—Ä–æ–≤
- –î–µ—Ç–∞–ª—å–Ω–∞—è –æ—Ç—á–µ—Ç–Ω–æ—Å—Ç—å –æ–± –æ—à–∏–±–∫–∞—Ö
- –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–æ–Ω–Ω–∞—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### 4. –°–∏—Å—Ç–µ–º–∞ –∏–º–ø–æ—Ä—Ç–∞
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤
- –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞
- –í–∞–ª–∏–¥–∞—Ü–∏—è –∏ —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
- –î–µ—Ç–∞–ª—å–Ω—ã–µ –ª–æ–≥–∏ –∏ –æ—Ç—á–µ—Ç—ã

### 5. –ì–µ–æ–ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–µ–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
- PostGIS –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç
- –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã–π –ø–æ–∏—Å–∫ –ø–æ —Ä–∞–¥–∏—É—Å—É
- –ö–ª–∞—Å—Ç–µ—Ä–∏–∑–∞—Ü–∏—è –Ω–∞ –∫–∞—Ä—Ç–∞—Ö

### 6. –°–∏—Å—Ç–µ–º–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞
- –ì–∏–±–∫–∏–µ —Ä–æ–ª–∏ –ø–µ—Ä—Å–æ–Ω–∞–ª–∞
- JSON-based –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ —É—Ä–æ–≤–Ω–µ handler –∏ service

## üöÄ TODO –∏ —É–ª—É—á—à–µ–Ω–∏—è

### –ö—Ä–∞—Ç–∫–æ—Å—Ä–æ—á–Ω—ã–µ (1-2 –º–µ—Å—è—Ü–∞)
- [ ] –°–∏—Å—Ç–µ–º–∞ —à–∞–±–ª–æ–Ω–æ–≤ –≤–∏—Ç—Ä–∏–Ω
- [ ] –≠–∫—Å–ø–æ—Ä—Ç —Ç–æ–≤–∞—Ä–æ–≤ –≤ —Ä–∞–∑–ª–∏—á–Ω—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã
- [ ] –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –≥–µ–æ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ –∞–¥—Ä–µ—Å–æ–≤
- [ ] –°–∏—Å—Ç–µ–º–∞ —Å–∫–∏–¥–æ–∫ –∏ –ø—Ä–æ–º–æ–∫–æ–¥–æ–≤

### –°—Ä–µ–¥–Ω–µ—Å—Ä–æ—á–Ω—ã–µ (3-6 –º–µ—Å—è—Ü–µ–≤)
- [ ] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –≤–Ω–µ—à–Ω–∏–º–∏ –∫–∞—Ç–∞–ª–æ–≥–∞–º–∏
- [ ] –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∫–∞—Ç–µ–≥–æ—Ä–∏–∑–∞—Ü–∏—è —Ç–æ–≤–∞—Ä–æ–≤
- [ ] –°–∏—Å—Ç–µ–º–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –¥–ª—è –ø–µ—Ä—Å–æ–Ω–∞–ª–∞
- [ ] –ú–æ–±–∏–ª—å–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### –î–æ–ª–≥–æ—Å—Ä–æ—á–Ω—ã–µ (6+ –º–µ—Å—è—Ü–µ–≤)
- [ ] AI-—Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ —Ç–æ–≤–∞—Ä–æ–≤
- [ ] –°–∏—Å—Ç–µ–º–∞ –ª–æ—è–ª—å–Ω–æ—Å—Ç–∏ –∫–ª–∏–µ–Ω—Ç–æ–≤
- [ ] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å CRM —Å–∏—Å—Ç–µ–º–∞–º–∏
- [ ] –ú–Ω–æ–≥–æ—è–∑—ã—á–Ω–æ—Å—Ç—å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞

## üìä –ú–µ—Ç—Ä–∏–∫–∏ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### –ö–ª—é—á–µ–≤—ã–µ –º–µ—Ç—Ä–∏–∫–∏
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∞–∫—Ç–∏–≤–Ω—ã—Ö –≤–∏—Ç—Ä–∏–Ω
- –°—Ä–µ–¥–Ω—è—è –∑–∞–≥—Ä—É–∑–∫–∞ —Ç–æ–≤–∞—Ä–æ–≤ –Ω–∞ –≤–∏—Ç—Ä–∏–Ω—É
- –ö–æ–Ω–≤–µ—Ä—Å–∏—è –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤ –≤ –∫–æ–Ω—Ç–∞–∫—Ç—ã
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–π –∏–º–ø–æ—Ä—Ç–∞
- –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –ø–æ–∏—Å–∫–∞

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
- –í—Ä–µ–º—è –æ—Ç–∫–ª–∏–∫–∞ API endpoints
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤ OpenSearch
- –û–±—ä–µ–º —Ñ–∞–π–ª–æ–≤–æ–≥–æ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ñ–æ–Ω–æ–≤—ã—Ö –∑–∞–¥–∞—á
- –û—à–∏–±–∫–∏ –∏–º–ø–æ—Ä—Ç–∞ –∏ –≤–∞–ª–∏–¥–∞—Ü–∏–∏

### –ê–ª–µ—Ä—Ç—ã
- –ü—Ä–µ–≤—ã—à–µ–Ω–∏–µ –ª–∏–º–∏—Ç–æ–≤ –ø–ª–∞–Ω–æ–≤
- –û—à–∏–±–∫–∏ –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ –∏–º–ø–æ—Ä—Ç–∞
- –ù–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –≤–Ω–µ—à–Ω–∏—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
- –ê–Ω–æ–º–∞–ª—å–Ω–∞—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å API

---

**–°—Ç–∞—Ç—É—Å**: ‚úÖ –ê–∫—Ç–∏–≤–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞  
**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ**: 2024-06-29  
**–í–µ—Ä—Å–∏—è –ø–∞—Å–ø–æ—Ä—Ç–∞**: 1.0