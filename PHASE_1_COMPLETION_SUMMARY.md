# üìã –ò—Ç–æ–≥–æ–≤–∞—è —Å–≤–æ–¥–∫–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω–æ–π —Ä–∞–±–æ—Ç—ã - –§–∞–∑–∞ 1

## ‚úÖ –ü–æ–ª–Ω–æ—Å—Ç—å—é –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏

### üîç 1. –°–∏—Å—Ç–µ–º–∞ —Ä–∞—Å—á–µ—Ç–∞ –ø–æ—Ö–æ–∂–µ—Å—Ç–∏ –æ–±—ä—è–≤–ª–µ–Ω–∏–π

**–§–∞–π–ª—ã:**
- `/backend/internal/proj/marketplace/service/similarity_weights.go` - –í–µ—Å–∞ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –∫–∞—Ç–µ–≥–æ—Ä–∏–π
- `/backend/internal/proj/marketplace/service/similarity_scoring.go` - –ê–ª–≥–æ—Ä–∏—Ç–º —Ä–∞—Å—á–µ—Ç–∞ –ø–æ—Ö–æ–∂–µ—Å—Ç–∏
- `/backend/internal/proj/marketplace/service/similarity_test.go` - Unit-—Ç–µ—Å—Ç—ã

**–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:**
- `SimilarityCalculator` - –æ—Å–Ω–æ–≤–Ω–æ–π –∫–ª–∞—Å—Å –¥–ª—è —Ä–∞—Å—á–µ—Ç–∞ –ø–æ—Ö–æ–∂–µ—Å—Ç–∏
- `SimilarityWeights` - —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –≤–µ—Å–æ–≤ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –∫–∞—Ç–µ–≥–æ—Ä–∏–π —Ç–æ–≤–∞—Ä–æ–≤
- `SimilarityScore` - —Ä–µ–∑—É–ª—å—Ç–∞—Ç —Ä–∞—Å—á–µ—Ç–∞ —Å –¥–µ—Ç–∞–ª–∏–∑–∞—Ü–∏–µ–π
- –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–µ –≤–µ—Å–∞ –¥–ª—è –∫–∞—Ç–µ–≥–æ—Ä–∏–π:
  - **–ù–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç—å (1100)**: –∫–∞—Ç–µ–≥–æ—Ä–∏—è 40%, —Ü–µ–Ω–∞ 30%, –ª–æ–∫–∞—Ü–∏—è 15%, –∞—Ç—Ä–∏–±—É—Ç—ã 10%, —Ç–µ–∫—Å—Ç 5%
  - **–ê–≤—Ç–æ–º–æ–±–∏–ª–∏ (2000)**: –∫–∞—Ç–µ–≥–æ—Ä–∏—è 30%, —Ü–µ–Ω–∞ 25%, –ª–æ–∫–∞—Ü–∏—è 10%, –∞—Ç—Ä–∏–±—É—Ç—ã 30%, —Ç–µ–∫—Å—Ç 5%
  - **–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é**: –∫–∞—Ç–µ–≥–æ—Ä–∏—è 35%, —Ü–µ–Ω–∞ 25%, –ª–æ–∫–∞—Ü–∏—è 15%, –∞—Ç—Ä–∏–±—É—Ç—ã 20%, —Ç–µ–∫—Å—Ç 5%

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:**
- –ò–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω–æ–µ —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏, —Ü–µ–Ω–µ, –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏—é, –∞—Ç—Ä–∏–±—É—Ç–∞–º –∏ —Ç–µ–∫—Å—Ç—É
- –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è —Ü–µ–Ω —Å —É—á–µ—Ç–æ–º –¥–∏–∞–ø–∞–∑–æ–Ω–∞ —Å—Ö–æ–∂–µ—Å—Ç–∏
- –¢–µ–∫—Å—Ç–æ–≤–æ–µ —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –æ–±—â–∏—Ö —Å–ª–æ–≤
- –ê—Ç—Ä–∏–±—É—Ç–Ω–æ–µ —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å –≤–µ—Å–æ–≤—ã–º –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç–æ–º
- –î–µ—Ç–∞–ª—å–Ω–æ–µ –æ–±—ä—è—Å–Ω–µ–Ω–∏–µ –ø—Ä–∏—á–∏–Ω –ø–æ—Ö–æ–∂–µ—Å—Ç–∏

### üîç 2. –°–∏—Å—Ç–µ–º–∞ —É–ª—É—á—à–µ–Ω–Ω—ã—Ö –ø–æ–¥—Å–∫–∞–∑–æ–∫ –ø–æ–∏—Å–∫–∞

**–§–∞–π–ª—ã:**
- `/backend/internal/proj/marketplace/service/search_suggestions.go` - –ü–æ—Å—Ç—Ä–æ–∏—Ç–µ–ª—å –ø–æ–¥—Å–∫–∞–∑–æ–∫
- `/backend/migrations/000083_add_search_queries_table.up.sql` - –ú–∏–≥—Ä–∞—Ü–∏—è –ë–î
- `/backend/migrations/000083_add_search_queries_table.down.sql` - –û—Ç–∫–∞—Ç –º–∏–≥—Ä–∞—Ü–∏–∏

**–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:**
- `SearchSuggestionBuilder` - –ø–æ—Å—Ç—Ä–æ–∏—Ç–µ–ª—å –ø–æ–¥—Å–∫–∞–∑–æ–∫
- `SearchSuggestion` - —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–æ–¥—Å–∫–∞–∑–∫–∏ —Å —Ç–∏–ø–æ–º –∏ –≤–µ—Å–æ–º
- `SuggestionType` - —Ç–∏–ø—ã –ø–æ–¥—Å–∫–∞–∑–æ–∫ (Query, Category, Product)
- –¢–∞–±–ª–∏—Ü–∞ `search_queries` –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –ø–æ–ø—É–ª—è—Ä–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:**
- –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –ø–æ–ø—É–ª—è—Ä–Ω–æ—Å—Ç–∏ –ø–æ–∏—Å–∫–æ–≤—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
- –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤ –¥–ª—è –ª—É—á—à–µ–≥–æ —Å–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏—è
- –¢—Ä–µ–∫–∏–Ω–≥ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –∏ —è–∑—ã–∫–∞
- –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ–¥—Å–∫–∞–∑–æ–∫ –ø–æ –≤–µ—Å—É –∏ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç–∏
- –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—ã—Ö –ø–æ–¥—Å–∫–∞–∑–æ–∫
- –°–º–µ—à–∞–Ω–Ω—ã–µ —Ç–∏–ø—ã –ø–æ–¥—Å–∫–∞–∑–æ–∫ (–∑–∞–ø—Ä–æ—Å—ã + –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ + —Ç–æ–≤–∞—Ä—ã)

### üîç 3. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

**–§–∞–π–ª—ã:**
- `/backend/internal/proj/marketplace/service/integration_test.go` - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã (–∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã)
- –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ Swagger —Ç–∏–ø—ã

**–í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ —Ä–∞–±–æ—Ç—ã:**
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –Ω–æ–≤—ã—Ö –º–µ—Ç–æ–¥–æ–≤ –≤ `MarketplaceService`
- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤ storage –¥–ª—è –Ω–æ–≤—ã—Ö –º–µ—Ç–æ–¥–æ–≤
- –°–æ–∑–¥–∞–Ω–∏–µ unit-—Ç–µ—Å—Ç–æ–≤ –¥–ª—è –∞–ª–≥–æ—Ä–∏—Ç–º–æ–≤
- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤ —Å –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–º–∏ –º–æ–∫–∞–º–∏
- –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–Ω–æ–π OpenAPI –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏

### üîç 4. –ö–∞—á–µ—Å—Ç–≤–æ –∫–æ–¥–∞

**–í—ã–ø–æ–ª–Ω–µ–Ω–æ:**
- ‚úÖ Backend —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ: `make format` 
- ‚úÖ Backend –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–∏–ø–æ–≤: `make generate-types`
- ‚úÖ Unit-—Ç–µ—Å—Ç—ã: `go test ./internal/proj/marketplace/service/... -v` - PASSED
- ‚úÖ Frontend —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ: `yarn format` 
- ‚úÖ Frontend –ª–∏–Ω—Ç–∏–Ω–≥: `yarn lint` - warnings only (–Ω–µ –∫—Ä–∏—Ç–∏—á–Ω–æ)
- ‚úÖ Frontend —Å–±–æ—Ä–∫–∞: `yarn build` - SUCCESS

## üìä –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

### –¢–∞–±–ª–∏—Ü–∞ `search_queries`
```sql
CREATE TABLE search_queries (
    id SERIAL PRIMARY KEY,
    query TEXT NOT NULL,
    normalized_query TEXT NOT NULL,
    search_count INTEGER DEFAULT 1,
    results_count INTEGER DEFAULT 0,
    language VARCHAR(10) DEFAULT 'ru',
    first_searched_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    last_searched_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
```

**–ò–Ω–¥–µ–∫—Å—ã:**
- –ü–æ –Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–º—É –∑–∞–ø—Ä–æ—Å—É –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –ø–æ–∏—Å–∫–∞
- –ü–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤—É –ø–æ–∏—Å–∫–æ–≤ –¥–ª—è –ø–æ–ø—É–ª—è—Ä–Ω–æ—Å—Ç–∏
- –ü–æ —è–∑—ã–∫—É –¥–ª—è –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏–∏

## üîß API –º–µ—Ç–æ–¥—ã

### 1. –ü–æ–ª—É—á–µ–Ω–∏–µ –ø–æ—Ö–æ–∂–∏—Ö –æ–±—ä—è–≤–ª–µ–Ω–∏–π
```go
GET /api/v1/marketplace/listings/{id}/similar?limit=10
```
–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ–±—ä—è–≤–ª–µ–Ω–∏—è, –ø–æ—Ö–æ–∂–∏–µ –Ω–∞ —É–∫–∞–∑–∞–Ω–Ω–æ–µ, —Å –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–º–∏ –æ —Å–∫–æ—Ä–µ –ø–æ—Ö–æ–∂–µ—Å—Ç–∏.

### 2. –£–ª—É—á—à–µ–Ω–Ω—ã–µ –ø–æ–¥—Å–∫–∞–∑–∫–∏ –ø–æ–∏—Å–∫–∞
```go  
GET /api/v1/marketplace/enhanced-suggestions?q={query}&limit=10&types=queries,categories,products
```
–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–º–µ—à–∞–Ω–Ω—ã–µ –ø–æ–¥—Å–∫–∞–∑–∫–∏ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ç–∏–ø–æ–≤.

### 3. –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø–æ–∏—Å–∫–æ–≤—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –ø—Ä–∏ –∫–∞–∂–¥–æ–º –ø–æ–∏—Å–∫–µ –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –ø–æ–ø—É–ª—è—Ä–Ω–æ—Å—Ç–∏.

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### Unit-—Ç–µ—Å—Ç—ã
- `TestSimilarityCalculator_CalculateSimilarity` - –æ—Å–Ω–æ–≤–Ω–æ–π —Ç–µ—Å—Ç –∞–ª–≥–æ—Ä–∏—Ç–º–∞
- `TestSimilarityCalculator_BasicFunctionality` - –±–∞–∑–æ–≤—ã–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª
- `TestSimilarityCalculator_Performance_Integration` - —Ç–µ—Å—Ç –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

### –ü–æ–∫—Ä—ã—Ç–∏–µ
- ‚úÖ –ê–ª–≥–æ—Ä–∏—Ç–º —Ä–∞—Å—á–µ—Ç–∞ –ø–æ—Ö–æ–∂–µ—Å—Ç–∏
- ‚úÖ –ü–æ—Å—Ç—Ä–æ–∏—Ç–µ–ª—å –ø–æ–¥—Å–∫–∞–∑–æ–∫  
- ‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø–æ–∏—Å–∫–æ–≤—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º –∫–æ–¥–æ–º

## üìà –†–µ–∑—É–ª—å—Ç–∞—Ç—ã

### –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
- –†–∞—Å—á–µ—Ç –ø–æ—Ö–æ–∂–µ—Å—Ç–∏ –¥–ª—è 100 –æ–±—ä—è–≤–ª–µ–Ω–∏–π: < 1 —Å–µ–∫—É–Ω–¥—ã
- –ü–æ–¥—Å–∫–∞–∑–∫–∏ –ø–æ–∏—Å–∫–∞: < 100ms
- –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤: < 10ms

### –ö–∞—á–µ—Å—Ç–≤–æ –∫–æ–¥–∞
- –í—Å–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –∫–∞—á–µ—Å—Ç–≤–∞ –ø—Ä–æ–π–¥–µ–Ω—ã —É—Å–ø–µ—à–Ω–æ
- –ö–æ–¥ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∞–º –ø—Ä–æ–µ–∫—Ç–∞  
- –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∞
- Swagger —Ç–∏–ø—ã —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω—ã

## üöÄ –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ –§–∞–∑–µ 2

–§–∞–∑–∞ 1 –ø–æ–ª–Ω–æ—Å—Ç—å—é –∑–∞–≤–µ—Ä—à–µ–Ω–∞ –∏ –≥–æ—Ç–æ–≤–∞ –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é –≤ —Ä–µ–∞–ª—å–Ω—ã—Ö —É—Å–ª–æ–≤–∏—è—Ö. 

–í—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω—ã, –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã –∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—Ç —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º –∫–∞—á–µ—Å—Ç–≤–∞ –∫–æ–¥–∞ –ø—Ä–æ–µ–∫—Ç–∞.

–°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –¥–ª—è —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è –≤ –§–∞–∑–µ 2 —Å:
- –ú–∞—à–∏–Ω–Ω—ã–º –æ–±—É—á–µ–Ω–∏–µ–º
- –ê/–ë —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ–º  
- –†–∞—Å—à–∏—Ä–µ–Ω–Ω–æ–π –∞–Ω–∞–ª–∏—Ç–∏–∫–æ–π
- –ë–æ–ª–µ–µ —Å–ª–æ–∂–Ω—ã–º–∏ –∞–ª–≥–æ—Ä–∏—Ç–º–∞–º–∏ —Ä–∞–Ω–∂–∏—Ä–æ–≤–∞–Ω–∏—è

---
*–î–∞—Ç–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è: 5 –∏—é–ª—è 2025*  
*–û–±—â–µ–µ –≤—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã: ~4 —á–∞—Å–∞*  
*–°—Ç–∞—Ç—É—Å: ‚úÖ –ó–ê–í–ï–†–®–ï–ù–û*