# Стратегия обновления фронтенд-проекта после перехода на Node.js 20

## Текущее состояние

- Успешно обновлен Node.js с версии 18 до версии 20
- Обновлен `react-scripts` с версии 3.0.1 до 5.0.1
- Проект успешно собирается с флагом `TSC_COMPILE_ON_ERROR=true`
- Есть предупреждения TypeScript, но они не блокируют сборку

## Стратегия долгосрочного обновления

### 1. Исправление предупреждений TypeScript

Предупреждения TypeScript в текущей сборке указывают на несоответствия типов в компонентах. 
Рекомендуемый подход:

1. Создать отдельную ветку `fix-typescript-errors`
2. Использовать команду `npm run typecheck` для проверки типов без сборки
3. Постепенно исправлять ошибки типизации, начиная с более простых:
   - Несоответствие типов пропсов в компонентах
   - Дублирующиеся типы (`Two different types with this name exist`)
   - Проблемы с параметрами функций (например, `string` vs `number`)
4. Создать Pull Request после исправления ошибок

### 2. Обновление зависимостей

В логах сборки видны предупреждения об устаревших зависимостях. Рекомендуется:

1. Создать ветку `update-dependencies`
2. Использовать `npm-check-updates` для анализа устаревших зависимостей:
   ```bash
   npx npm-check-updates
   ```
3. Обновлять зависимости группами по категориям (UI, routing, testing и т.д.)
4. После каждой группы обновлений проверять сборку и функциональность
5. Уделить особое внимание обновлению ESLint и TypeScript

### 3. Модернизация структуры проекта

После стабилизации базового проекта рекомендуется:

1. Рассмотреть возможность миграции на новые API:
   - React Query v4 (TanStack Query)
   - React Router v6 с применением Data Loaders
   - Material UI v5 с использованием новой системы стилей
   
2. Улучшение сборки:
   - Внедрение code splitting для уменьшения размера бандла
   - Настройка прогрессивной загрузки изображений
   - Оптимизация производительности с использованием React.memo и useCallback

### 4. Улучшение процесса разработки

1. Внедрить Prettier для форматирования кода
2. Настроить строгий режим TypeScript (постепенно)
3. Добавить pre-commit хуки для проверки кода
4. Настроить тестирование с использованием современных инструментов (React Testing Library, Vitest)

## Roadmap обновлений

1. **Краткосрочный план (1-2 недели)**:
   - Стабилизация TypeScript-ошибок
   - Обновление критических зависимостей

2. **Среднесрочный план (1-2 месяца)**:
   - Обновление всех основных зависимостей
   - Внедрение code splitting
   - Оптимизация производительности

3. **Долгосрочный план (3-6 месяцев)**:
   - Миграция на более современную архитектуру
   - Внедрение строгого TypeScript
   - Улучшение тестирования
   - Возможное обновление до Vite вместо Create React App

## Рекомендации для повседневной разработки

1. Продолжать использовать флаг `TSC_COMPILE_ON_ERROR=true` до полного исправления ошибок типизации
2. Постепенно исправлять ошибки типизации параллельно с основной разработкой
3. Создать отдельные задачи в системе трекинга для каждого компонента, требующего исправления типов
4. Применять современные практики при написании нового кода