# Generate Admin JWT Token

–£—Ç–∏–ª–∏—Ç–∞ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è JWT —Ç–æ–∫–µ–Ω–∞ —á–µ—Ä–µ–∑ Auth Service.

## üéØ –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ

–°–∫—Ä–∏–ø—Ç –≤—ã–ø–æ–ª–Ω—è–µ—Ç –ª–æ–≥–∏–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —á–µ—Ä–µ–∑ Auth Service –∏ –ø–æ–ª—É—á–∞–µ—Ç –≤–∞–ª–∏–¥–Ω—ã–µ access/refresh —Ç–æ–∫–µ–Ω—ã –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è API.

## üîß –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ß–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

```bash
export ADMIN_EMAIL="admin@example.com"
export ADMIN_PASSWORD="your_password"
go run ./cmd/utils/generate_admin_jwt/main.go
```

### –í–∞—Ä–∏–∞–Ω—Ç 2: –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π –≤–≤–æ–¥

```bash
go run ./cmd/utils/generate_admin_jwt/main.go
# –°–∫—Ä–∏–ø—Ç –∑–∞–ø—Ä–æ—Å–∏—Ç email –∏ –ø–∞—Ä–æ–ª—å
```

### –í–∞—Ä–∏–∞–Ω—Ç 3: –°–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞—Ç—å –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

```bash
go build -o generate_token ./cmd/utils/generate_admin_jwt/main.go
./generate_token
```

## üìã –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

1. **Auth Service –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∑–∞–ø—É—â–µ–Ω**
   - –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é: `http://localhost:28080`
   - –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ `AUTH_SERVICE_URL` –≤ `.env`

2. **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –¥–æ–ª–∂–µ–Ω —Å—É—â–µ—Å—Ç–≤–æ–≤–∞—Ç—å –≤ Auth Service**
   - –í—ã –¥–æ–ª–∂–Ω—ã –∑–Ω–∞—Ç—å email –∏ –ø–∞—Ä–æ–ª—å
   - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –¥–æ–ª–∂–µ–Ω –∏–º–µ—Ç—å –ø—Ä–∞–≤–∞ admin (–¥–ª—è –∞–¥–º–∏–Ω—Å–∫–∏—Ö —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤)

## üîê –ß—Ç–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç

- ‚úÖ Access Token (JWT) - –¥–ª—è API –∑–∞–ø—Ä–æ—Å–æ–≤
- ‚úÖ Refresh Token - –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è access token
- ‚úÖ –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ (email, –∏–º—è, admin –ø—Ä–∞–≤–∞)
- ‚úÖ –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Ç–æ–∫–µ–Ω–∞

## üìù –ü—Ä–∏–º–µ—Ä—ã –≤—ã–≤–æ–¥–∞

```
üîê –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–æ–∫–µ–Ω–∞ —á–µ—Ä–µ–∑ Auth Service

‚ö†Ô∏è  –í–ê–ñ–ù–û: –≠—Ç–æ—Ç —Å–∫—Ä–∏–ø—Ç —Ç—Ä–µ–±—É–µ—Ç email –∏ –ø–∞—Ä–æ–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.
    –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –≤ Auth Service.

üìß –í–≤–µ–¥–∏—Ç–µ email –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è: admin@example.com
üîë –í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å:

üîÑ –í—ã–ø–æ–ª–Ω—è–µ–º –ª–æ–≥–∏–Ω —á–µ—Ä–µ–∑ Auth Service (http://localhost:28080)...

================================================================================
üéâ –¢–û–ö–ï–ù–´ –£–°–ü–ï–®–ù–û –ü–û–õ–£–ß–ï–ù–´!
================================================================================

üë§ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: admin@example.com
üìß –ò–º—è: Admin User
üîë Admin –ø—Ä–∞–≤–∞: true

üîë ACCESS TOKEN (JWT):
--------------------------------------------------------------------------------
eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9...

üìù –°–ü–û–°–û–ë–´ –ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–Ø:
--------------------------------------------------------------------------------

1Ô∏è‚É£  –¢–µ—Å—Ç API —Å–∏–Ω–æ–Ω–∏–º–æ–≤:
   curl -H "Authorization: Bearer eyJhbGc..." \
        'http://localhost:3000/api/v1/admin/search/synonyms?page=1&limit=20&language=ru'

2Ô∏è‚É£  –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Å–∏–Ω–æ–Ω–∏–º–∞:
   curl -X POST -H "Authorization: Bearer eyJhbGc..." \
        -H "Content-Type: application/json" \
        -d '{"word": "—Ç–µ–ª–µ—Ñ–æ–Ω", "synonyms": ["—Å–º–∞—Ä—Ç—Ñ–æ–Ω", "–º–æ–±–∏–ª—å–Ω—ã–π"], "language": "ru"}' \
        'http://localhost:3000/api/v1/admin/search/synonyms'

3Ô∏è‚É£  –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–æ—Ñ–∏–ª—è:
   curl -H "Authorization: Bearer eyJhbGc..." \
        'http://localhost:3000/api/v1/auth/me'

4Ô∏è‚É£  –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –¥–ª—è –ø–æ—Å–ª–µ–¥—É—é—â–µ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:
   export TOKEN='eyJhbGc...'
   curl -H "Authorization: Bearer $TOKEN" http://localhost:3000/api/v1/users/me

================================================================================
‚è∞ Access —Ç–æ–∫–µ–Ω –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª–µ–Ω: –æ–±—ã—á–Ω–æ 15 –º–∏–Ω—É—Ç
üîÑ Refresh —Ç–æ–∫–µ–Ω –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª–µ–Ω: –æ–±—ã—á–Ω–æ 30 –¥–Ω–µ–π
üîí –ê–ª–≥–æ—Ä–∏—Ç–º: RS256 (Auth Service)
================================================================================
```

## ‚ö†Ô∏è –í–∞–∂–Ω–æ

- –¢–æ–∫–µ–Ω—ã –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è Auth Service —Å –∞–ª–≥–æ—Ä–∏—Ç–º–æ–º RS256
- –õ–æ–∫–∞–ª—å–Ω–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–æ–∫–µ–Ω–æ–≤ –±–æ–ª—å—à–µ –ù–ï –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è
- Backend –≤–∞–ª–∏–¥–∏—Ä—É–µ—Ç —Ç–æ–∫–µ–Ω—ã —á–µ—Ä–µ–∑ –±–∏–±–ª–∏–æ—Ç–µ–∫—É `github.com/sveturs/auth`
- –î–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Ç–æ–∫–µ–Ω–∞ –Ω—É–∂–Ω—ã –≤–∞–ª–∏–¥–Ω—ã–µ credentials –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

## üîß Troubleshooting

### –û—à–∏–±–∫–∞: "Failed to load config"
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∑–∞–ø—É—Å–∫–∞–µ—Ç–µ –∏–∑ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ `backend/`
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞–ª–∏—á–∏–µ `.env` —Ñ–∞–π–ª–∞

### –û—à–∏–±–∫–∞: "–ù–µ —É–¥–∞–ª–æ—Å—å —Å–æ–∑–¥–∞—Ç—å Auth Service –∫–ª–∏–µ–Ω—Ç"
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ Auth Service –¥–æ—Å—Ç—É–ø–µ–Ω
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `AUTH_SERVICE_URL` –≤ –∫–æ–Ω—Ñ–∏–≥–µ

### –û—à–∏–±–∫–∞: "–û—à–∏–±–∫–∞ –ª–æ–≥–∏–Ω–∞: —Å—Ç–∞—Ç—É—Å 401"
- –ù–µ–≤–µ—Ä–Ω—ã–π email –∏–ª–∏ –ø–∞—Ä–æ–ª—å
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –≤ Auth Service

## üìö –°–º. —Ç–∞–∫–∂–µ

- [JWT Token Testing Guide](../../../docs/JWT_TOKEN_TESTING_GUIDE.md)
- [Auth Service Integration](ssh://svetu@svetu.rs/opt/svetu-authpreprod/MARKETPLACE_INTEGRATION_SPEC.md)
