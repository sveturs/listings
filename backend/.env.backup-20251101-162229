# Backend environment variables - Development
DATABASE_URL=postgres://postgres:mX3g1XGhMRUZEX3l@localhost:5433/svetubd?sslmode=disable

# Migrations Configuration
MIGRATIONS_ON_API=off
#MIGRATIONS_ON_API=full
MIGRATIONS_PATH=migrations
MIGRATION_DIRECTION=up
MIGRATION_TARGET=
MIGRATIONS_FIXTURES_PATH=fixtures
MIGRATIONS_FIXTURES_TABLE=schema_fixtures
GOOGLE_CLIENT_ID=917315728307-au9ga5fl7o3bbid9nv7e4l92gut194pq.apps.googleusercontent.com
# GOOGLE_CLIENT_SECRET=REPLACE_WITH_NEW_SECRET # Старый ключ скомпрометирован!
# URL для OAuth callback, должен быть зарегистрирован в Google Console
# Фактический redirect определяется динамически на основе origin запроса
# OAuth callback будет обрабатывать Auth Service
GOOGLE_OAUTH_REDIRECT_URL=https://authpreprod.svetu.rs/auth/google/callback
FRONTEND_URL=http://localhost:3001
# Поддерживает как localhost так и VPN доступ
ENV=development
PORT=3000


# Auth Service Configuration - используем удаленный сервис
# Временно отключаем Infobip для тестирования
USE_INFOBIP_VIBER=false
USE_AUTH_SERVICE=true
AUTH_SERVICE_URL=https://authpreprod.svetu.rs
AUTH_SERVICE_PUBLIC_KEY_PATH=/p/github.com/sveturs/svetu/backend/keys/auth_service_public.pem
RATE_LIMIT_ENABLED=false
JWT_ACCESS_TOKEN_DURATION=60m

# CarAPI Integration
CARAPI_TOKEN=1a0bef70-bdd4-4b43-afea-5836c36d32b1
CARAPI_SECRET=707db90e9d68a5a86a00ead3a5ae0663
CARAPI_BASE_URL=https://carapi.app/api
SERVER_HOST=http://localhost:3000
GOOGLE_APPLICATION_CREDENTIALS=/app/credentials/neat-environs-140712-40c581381093.json
GOOGLE_TRANSLATE_API_KEY=AIzaSyCBFx7eUrqoUjFzsVIDrGXgqxmtymWhlpE
GOOGLE_CLIENT_SECRET=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
# OPENAI_API_KEY=REPLACE_WITH_NEW_KEY # Старый ключ скомпрометирован!
OPENAI_API_KEY=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

# Claude AI (Anthropic) API key
# Get your key from https://console.anthropic.com/
CLAUDE_API_KEY=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
ANTHROPIC_API_KEY=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


# DeepL API key
# Get your key from https://www.deepl.com/pro-api
DEEPL_API_KEY=
DEEPL_USE_FREE_API=true

TELEGRAM_BOT_TOKEN=8091644299:AAFj8p8M-dvpJR5XfURqq1SJx8wfRQeV-b0

# STRIPE_API_KEY=REPLACE_WITH_NEW_TEST_KEY # Старый ключ скомпрометирован!
STRIPE_PUBLISHABLE_KEY=pk_test_51Qw4kpEFv5ruKgVJ1cLiCo0M4ztd1PmCFPi6ZG8JROm9TncM8tVffrrkxc5mM96egSxSsErFhjIqYMNrS4iePhY7005VezvaYe
STRIPE_WEBHOOK_SECRET=whsec_25fd811f9022a61563d4acf52e4dd2ced797a4e029828502b585bcb612b9bd81

# MinIO/S3 configuration для dimalocal
FILE_STORAGE_PROVIDER=minio
MINIO_ENDPOINT=s3.svetu.rs
MINIO_ACCESS_KEY=dev_backend
MINIO_SECRET_KEY=pL4kJ8nM2qR6tY9wX5zC3vB7
MINIO_USE_SSL=true
MINIO_BUCKET_NAME=dimalocal-listings
MINIO_CHAT_BUCKET=dimalocal-chat-files
MINIO_STOREFRONT_BUCKET=dimalocal-storefront-products
MINIO_REVIEW_PHOTOS_BUCKET=dimalocal-review-photos
MINIO_LOCATION=us-east-1
FILE_STORAGE_PUBLIC_URL=https://s3.svetu.rs

# OpenSearch
OPENSEARCH_URL=http://localhost:9200

# Feature Flags
USE_UNIFIED_ATTRIBUTES=true
UNIFIED_ATTRIBUTES_FALLBACK=true
UNIFIED_ATTRIBUTES_PERCENT=100
DUAL_WRITE_ATTRIBUTES=true
OPENSEARCH_USERNAME=admin
OPENSEARCH_PASSWORD=admin
OPENSEARCH_MARKETPLACE_INDEX=marketplace_listings

EMAIL_PASSWORD=Pass4ma!l
JWT_SECRET=TQjXfTUrIR1wp38Qog6D3oy4ScCODS1V5TbKGkr7m4o=
JWT_EXPIRATION_HOURS=24

DOCS_ROOT_PATH=/data/hostel-booking-system

# Logging
LOG_LEVEL=debug

# MapBox API Configuration for GIS Phase 2
MAPBOX_ACCESS_TOKEN=pk.eyJ1Ijoidm9yb3NoaWxvdmRvIiwiYSI6ImNtMDh2dWZsaTBkbXIycXNic3dnNHc1d24ifQ.Hi_TADnAexi4KMHkHxOZFA
MAPBOX_SECRET_TOKEN=sk.eyJ1Ijoidm9yb3NoaWxvdmRvIiwiYSI6ImNtZDBzdDBrOTFjaDcyanNhc2h3MHZwdW4ifQ.OveUvHpKpAvTrchvDzEAzw

# Viber Bot Configuration
# URL для отображения в Viber сообщениях (может отличаться от FRONTEND_URL для локальной разработки)
VIBER_PUBLIC_URL=https://dev.svetu.rs

# Geocoding Configuration
GEOCODING_CACHE_TTL_HOURS=720  # 30 дней
GEOCODING_MAX_SUGGESTIONS=10
GEOCODING_DEBOUNCE_MS=300
GEOCODING_FALLBACK_PROVIDER=nominatim

# Redis Configuration
REDIS_URL=localhost:6379
REDIS_PASSWORD=LxudpSk9HBHRiCmnnj
REDIS_DB=0
REDIS_POOL_SIZE=10
REDIS_CATEGORIES_TTL=6h
REDIS_ATTRIBUTES_TTL=4h
REDIS_ATTRIBUTE_GROUP_TTL=4h

DEEPL_API_KEY=ac164dfd-4a2f-4459-9868-57a9ac14e722:fx

# ========================================
# BEX EXPRESS MODULE (отдельный от delivery микросервиса)
# ========================================
# BEX Express - это независимый модуль для прямой интеграции с провайдером BEX
# НЕ является частью universal delivery system (микросервис на порту 30051)
# Используется для специфичных операций BEX, которые не входят в delivery микросервис
BEX_API_URL=https://bexexpress.rs/api
BEX_AUTH_TOKEN=d50261-18wo-8539-ee5a-67uu3tu79
BEX_CLIENT_ID=326166

# ========================================
# POST EXPRESS MODULE (отдельный от delivery микросервиса)
# ========================================
# Post Express - это независимый модуль для прямой интеграции с провайдером Post Express
# НЕ является частью universal delivery system (микросервис на порту 30051)
# Используется для legacy операций и специфичных функций Post Express
POST_EXPRESS_WSP_ENDPOINT=http://212.62.32.201/WspWebApi/transakcija
POST_EXPRESS_WSP_USERNAME=b2b@svetu.rs
POST_EXPRESS_WSP_PASSWORD=Sv5et@U!
POST_EXPRESS_WSP_LANGUAGE=LAT
POST_EXPRESS_TEST_MODE=true
POST_EXPRESS_WSP_DEVICE_TYPE=2
POST_EXPRESS_WSP_APPLICATION_NAME=SveTu
POST_EXPRESS_WSP_VERSION=1.0.0
POST_EXPRESS_WSP_BRAND=SVETU
POST_EXPRESS_WSP_STORE=SVETU
POST_EXPRESS_ENABLED=true

# Post Express COD (Otkupnina) Configuration
POST_EXPRESS_BANK_ACCOUNT=200-3609900101001-88
POST_EXPRESS_PAYMENT_CODE=189
POST_EXPRESS_PAYMENT_MODEL=97

# Viber Bot Configuration via Infobip
# ВАЖНО: Включаем Infobip для продакшена
INFOBIP_API_KEY=d225d6436a020569e4dee8468919de13-5d9211b6-0f93-4829-bd40-59855773e867
INFOBIP_BASE_URL=https://d9vgp1.api.infobip.com
# Sender ID - это твой Viber Service ID (узнай у Lara если нужен другой)
INFOBIP_SENDER_ID=5563e63c1400300a-8dc2a9ffa207e63b-b6bdc0569de2dd76
VIBER_BOT_NAME=SveTu Marketplace Bot
VIBER_BOT_AVATAR=https://svetu.rs/logo-720.png
VIBER_WEBHOOK_URL=https://svetu.rs/api/viber/infobip-webhook
# Fallback direct Viber token (не используется когда есть Infobip)
VIBER_AUTH_TOKEN=dev
MINIO_PUBLIC_URL=https://s3.svetu.rs


# Post Express config (для главного config.go)
POSTEXPRESS_BASE_URL=http://212.62.32.201/WspWebApi/transakcija
POSTEXPRESS_USERNAME=b2b@svetu.rs
POSTEXPRESS_PASSWORD=Sv5et@U!
POSTEXPRESS_TEST_MODE=true
POSTEXPRESS_SENDER_NAME=Sve Tu d.o.o.
POSTEXPRESS_SENDER_ADDRESS=Bulevar kralja Aleksandra 73, Beograd 11000

# Admin Testing Module Configuration
TEST_ADMIN_EMAIL=admin@admin.rs
TEST_ADMIN_PASSWORD="P@\$S4@dmi№"

# ========================================
# DELIVERY MICROSERVICE (gRPC integration)
# ========================================
# Universal Delivery System - централизованный микросервис для всех провайдеров доставки
# Это основная интеграция для delivery функциональности (отправки, трекинг, расчет стоимости)
# Все новые операции доставки должны идти через этот микросервис
# Монолит содержит только thin client (gRPC client + cache storage)
DELIVERY_GRPC_URL=localhost:50052

# ========================================
# MARKETPLACE LISTINGS MICROSERVICE (Sprint 6.4 - Canary 1%)
# ========================================
# Marketplace Listings Microservice - централизованный сервис для управления объявлениями
# CURRENT PHASE: Sprint 6.4 - Canary 1% deployment
# ROLLOUT: 1% traffic to microservice, 99% fallback to monolith

# Feature flags
MARKETPLACE_MICROSERVICE_ENABLED=true
MARKETPLACE_USE_MICROSERVICE=true
MARKETPLACE_ROLLOUT_PERCENT=1
MARKETPLACE_FALLBACK_TO_MONOLITH=true

# gRPC connection
MARKETPLACE_GRPC_HOST=localhost
MARKETPLACE_GRPC_PORT=50053
MARKETPLACE_GRPC_TIMEOUT=500ms

# Circuit Breaker Configuration (Sprint 6.2)
CIRCUIT_BREAKER_ENABLED=true
CIRCUIT_BREAKER_THRESHOLD=5
CIRCUIT_BREAKER_TIMEOUT=30s
CIRCUIT_BREAKER_MAX_REQUESTS=1

# Monitoring & Observability
MARKETPLACE_METRICS_ENABLED=true
MARKETPLACE_TRACING_ENABLED=false
