basePath: /api/v1
definitions:
  ErrorResponse:
    properties:
      code:
        example: 400
        type: integer
      error:
        example: Invalid request
        type: string
      message:
        example: Validation failed
        type: string
    type: object
  backend_internal_domain_models.AdminUser:
    properties:
      created_at:
        type: string
      created_by:
        type: integer
      email:
        type: string
      id:
        type: integer
      notes:
        type: string
    type: object
  backend_internal_domain_models.CreateComponentUsageRequest:
    properties:
      category_id:
        type: integer
      component_id:
        type: integer
      conditions_logic:
        items:
          type: integer
        type: array
      configuration:
        items:
          type: integer
        type: array
      is_active:
        type: boolean
      placement:
        type: string
      priority:
        type: integer
      usage_context:
        type: string
    required:
    - component_id
    - usage_context
    type: object
  backend_internal_domain_models.CreateCustomComponentRequest:
    properties:
      component_type:
        enum:
        - category
        - attribute
        - filter
        type: string
      description:
        type: string
      is_active:
        type: boolean
      name:
        maxLength: 255
        minLength: 1
        type: string
      props_schema:
        items:
          type: integer
        type: array
      styles:
        type: string
      template_code:
        type: string
    required:
    - component_type
    - name
    - template_code
    type: object
  backend_internal_domain_models.CreateReviewRequest:
    properties:
      comment:
        type: string
      cons:
        type: string
      entity_id:
        type: integer
      entity_type:
        enum:
        - listing
        - room
        - car
        type: string
      original_language:
        type: string
      photos:
        items:
          type: string
        type: array
      pros:
        type: string
      rating:
        maximum: 5
        minimum: 1
        type: integer
      storefront_id:
        type: integer
    required:
    - entity_id
    - entity_type
    - original_language
    - rating
    type: object
  backend_internal_domain_models.CreateTemplateRequest:
    properties:
      component_id:
        type: integer
      description:
        type: string
      name:
        type: string
      variables:
        items:
          type: integer
        type: array
    required:
    - component_id
    - name
    type: object
  backend_internal_domain_models.CustomUIComponent:
    properties:
      component_type:
        example: category
        type: string
      created_at:
        type: string
      created_by:
        type: integer
      description:
        example: Компонент для отображения автомобильных категорий
        type: string
      id:
        example: 1
        type: integer
      is_active:
        example: true
        type: boolean
      name:
        example: Auto Category Component
        type: string
      props_schema:
        items:
          type: integer
        type: array
      styles:
        type: string
      template_code:
        type: string
      updated_at:
        type: string
      updated_by:
        type: integer
    type: object
  backend_internal_domain_models.CustomUIComponentUsage:
    properties:
      category_id:
        type: integer
      category_name:
        type: string
      component:
        $ref: '#/definitions/backend_internal_domain_models.CustomUIComponent'
      component_id:
        type: integer
      component_name:
        type: string
      conditions_logic:
        items:
          type: integer
        type: array
      configuration:
        items:
          type: integer
        type: array
      created_at:
        type: string
      created_by:
        type: integer
      id:
        type: integer
      is_active:
        type: boolean
      placement:
        type: string
      priority:
        type: integer
      updated_at:
        type: string
      updated_by:
        type: integer
      usage_context:
        type: string
    type: object
  backend_internal_domain_models.CustomUITemplate:
    properties:
      created_at:
        type: string
      created_by:
        type: integer
      description:
        type: string
      display_name:
        type: string
      id:
        type: integer
      is_shared:
        type: boolean
      name:
        type: string
      template_code:
        type: string
      updated_at:
        type: string
      updated_by:
        type: integer
      variables:
        items:
          type: integer
        type: array
    type: object
  backend_internal_domain_models.Review:
    properties:
      comment:
        type: string
      cons:
        type: string
      created_at:
        type: string
      current_user_vote:
        type: string
      entity_id:
        type: integer
      entity_origin_id:
        description: ID оригинального объекта
        type: integer
      entity_origin_type:
        description: тип оригинального объекта (user, storefront)
        type: string
      entity_type:
        type: string
      helpful_votes:
        type: integer
      id:
        type: integer
      is_verified_purchase:
        type: boolean
      likes_count:
        type: integer
      not_helpful_votes:
        type: integer
      original_language:
        description: поля для мультиязычности
        type: string
      photos:
        items:
          type: string
        type: array
      pros:
        type: string
      rating:
        type: integer
      responses:
        items:
          $ref: '#/definitions/backend_internal_domain_models.ReviewResponse'
        type: array
      status:
        type: string
      translations:
        additionalProperties:
          additionalProperties:
            type: string
          type: object
        type: object
      updated_at:
        type: string
      user:
        allOf:
        - $ref: '#/definitions/backend_internal_domain_models.User'
        description: Дополнительные поля для отображения
      user_id:
        type: integer
      votes_count:
        properties:
          helpful:
            type: integer
          not_helpful:
            type: integer
        type: object
    type: object
  backend_internal_domain_models.ReviewResponse:
    properties:
      created_at:
        type: string
      id:
        type: integer
      response:
        type: string
      review_id:
        type: integer
      updated_at:
        type: string
      user:
        $ref: '#/definitions/backend_internal_domain_models.User'
      user_id:
        type: integer
    type: object
  backend_internal_domain_models.ReviewStats:
    properties:
      average_rating:
        type: number
      photo_reviews:
        description: Количество отзывов с фото
        type: integer
      rating_distribution:
        additionalProperties:
          type: integer
        description: 'Распределение оценок: {1: 10, 2: 20, ...}'
        type: object
      total_reviews:
        type: integer
      verified_reviews:
        type: integer
    type: object
  backend_internal_domain_models.StorefrontRatingSummary:
    properties:
      average_rating:
        type: number
      name:
        type: string
      rating_1:
        type: integer
      rating_2:
        type: integer
      rating_3:
        type: integer
      rating_4:
        type: integer
      rating_5:
        type: integer
      storefront_id:
        type: integer
      total_reviews:
        type: integer
    type: object
  backend_internal_domain_models.UpdateCustomComponentRequest:
    properties:
      component_type:
        type: string
      description:
        type: string
      is_active:
        type: boolean
      name:
        type: string
      props_schema:
        items:
          type: integer
        type: array
      styles:
        type: string
      template_code:
        type: string
    type: object
  backend_internal_domain_models.User:
    properties:
      created_at:
        type: string
      email:
        type: string
      google_id:
        type: string
      id:
        type: integer
      name:
        type: string
      phone:
        type: string
      picture_url:
        type: string
      provider:
        type: string
    type: object
  backend_internal_domain_models.UserProfile:
    properties:
      account_status:
        type: string
      bio:
        type: string
      city:
        description: Теперь используем обычные строки, а не указатели
        type: string
      country:
        type: string
      created_at:
        type: string
      email:
        type: string
      google_id:
        type: string
      id:
        type: integer
      is_admin:
        description: Флаг администратора
        type: boolean
      last_seen:
        type: string
      name:
        type: string
      notification_email:
        type: boolean
      phone:
        type: string
      picture_url:
        type: string
      provider:
        type: string
      settings:
        items:
          type: integer
        type: array
      timezone:
        type: string
    type: object
  backend_internal_domain_models.UserProfileUpdate:
    properties:
      bio:
        type: string
      city:
        description: Указатель правильный для обновлений
        type: string
      country:
        type: string
      notification_email:
        type: boolean
      phone:
        type: string
      settings:
        items:
          type: integer
        type: array
      timezone:
        type: string
    type: object
  backend_internal_domain_models.UserRatingSummary:
    properties:
      average_rating:
        type: number
      name:
        type: string
      rating_1:
        type: integer
      rating_2:
        type: integer
      rating_3:
        type: integer
      rating_4:
        type: integer
      rating_5:
        type: integer
      total_reviews:
        type: integer
      user_id:
        type: integer
    type: object
  backend_pkg_utils.ErrorResponseSwag:
    properties:
      error:
        example: Описание ошибки
        type: string
    type: object
  internal_proj_reviews_handler.PhotosResponse:
    properties:
      message:
        example: Photos uploaded successfully
        type: string
      photos:
        items:
          type: string
        type: array
      success:
        example: true
        type: boolean
    type: object
  internal_proj_reviews_handler.RatingResponse:
    properties:
      rating:
        example: 4.5
        type: number
      success:
        example: true
        type: boolean
    type: object
  internal_proj_reviews_handler.ResponseRequest:
    properties:
      response:
        example: Спасибо за ваш отзыв!
        type: string
    type: object
  internal_proj_reviews_handler.ReviewMessageResponse:
    properties:
      message:
        example: Операция выполнена успешно
        type: string
      success:
        example: true
        type: boolean
    type: object
  internal_proj_reviews_handler.ReviewResponse:
    properties:
      data:
        $ref: '#/definitions/backend_internal_domain_models.Review'
      success:
        example: true
        type: boolean
    type: object
  internal_proj_reviews_handler.ReviewsListResponse:
    properties:
      data:
        items:
          $ref: '#/definitions/backend_internal_domain_models.Review'
        type: array
      meta:
        $ref: '#/definitions/internal_proj_reviews_handler.ReviewsMeta'
      success:
        example: true
        type: boolean
    type: object
  internal_proj_reviews_handler.ReviewsMeta:
    properties:
      limit:
        example: 20
        type: integer
      page:
        example: 1
        type: integer
      total:
        example: 100
        type: integer
    type: object
  internal_proj_reviews_handler.VoteRequest:
    properties:
      vote_type:
        example: helpful
        type: string
    type: object
  internal_proj_users_handler.AdminAdminsResponse:
    properties:
      email:
        example: admin@example.com
        type: string
      is_admin:
        example: true
        type: boolean
    type: object
  internal_proj_users_handler.AdminBalanceResponse:
    properties:
      data: {}
    type: object
  internal_proj_users_handler.AdminCheckResponse:
    properties:
      is_admin:
        example: false
        type: boolean
      success:
        example: true
        type: boolean
    type: object
  internal_proj_users_handler.AdminCheckResponseWrapper:
    properties:
      data:
        $ref: '#/definitions/internal_proj_users_handler.AdminCheckResponse'
      success:
        example: true
        type: boolean
    type: object
  internal_proj_users_handler.AdminMessageResponse:
    properties:
      message:
        example: admin.users.success.profile_updated
        type: string
    type: object
  internal_proj_users_handler.AdminStatusUpdateRequest:
    properties:
      status:
        enum:
        - active
        - blocked
        - pending
        example: active
        type: string
    required:
    - status
    type: object
  internal_proj_users_handler.AdminUserListResponse:
    properties:
      data:
        items:
          $ref: '#/definitions/backend_internal_domain_models.UserProfile'
        type: array
      limit:
        example: 10
        type: integer
      page:
        example: 1
        type: integer
      pages:
        example: 10
        type: integer
      total:
        example: 100
        type: integer
    type: object
  internal_proj_users_handler.AuthResponse:
    properties:
      access_token:
        example: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
        type: string
      expires_in:
        example: 3600
        type: integer
      token_type:
        example: Bearer
        type: string
      user:
        $ref: '#/definitions/internal_proj_users_handler.UserResponse'
    type: object
  internal_proj_users_handler.LoginRequest:
    properties:
      email:
        example: user@example.com
        type: string
      password:
        example: password123
        minLength: 6
        type: string
    required:
    - email
    - password
    type: object
  internal_proj_users_handler.LoginResponse:
    properties:
      message:
        example: users.login.success.authenticated
        type: string
      success:
        example: true
        type: boolean
      user:
        $ref: '#/definitions/backend_internal_domain_models.User'
    type: object
  internal_proj_users_handler.MessageResponse:
    properties:
      message:
        example: Операция выполнена успешно
        type: string
      success:
        example: true
        type: boolean
    type: object
  internal_proj_users_handler.PublicUserResponse:
    properties:
      created_at:
        example: "2023-01-01T12:00:00Z"
        type: string
      email:
        example: user@example.com
        type: string
      id:
        example: 1
        type: integer
      name:
        example: Иван Иванов
        type: string
      picture_url:
        example: https://example.com/avatar.jpg
        type: string
    type: object
  internal_proj_users_handler.PublicUserResponseWrapper:
    properties:
      data:
        $ref: '#/definitions/internal_proj_users_handler.PublicUserResponse'
      success:
        example: true
        type: boolean
    type: object
  internal_proj_users_handler.RegisterRequest:
    properties:
      email:
        example: user@example.com
        type: string
      name:
        example: John Doe
        minLength: 2
        type: string
      password:
        example: password123
        minLength: 6
        type: string
      phone:
        example: "+1234567890"
        type: string
    required:
    - email
    - name
    - password
    type: object
  internal_proj_users_handler.RegisterResponse:
    properties:
      message:
        example: Пользователь успешно зарегистрирован
        type: string
      success:
        example: true
        type: boolean
      user:
        $ref: '#/definitions/backend_internal_domain_models.User'
    type: object
  internal_proj_users_handler.SessionResponse:
    properties:
      authenticated:
        example: true
        type: boolean
      user:
        $ref: '#/definitions/internal_proj_users_handler.SessionUserResponse'
    type: object
  internal_proj_users_handler.SessionUserResponse:
    properties:
      city:
        example: Moscow
        type: string
      country:
        example: Russia
        type: string
      email:
        example: user@example.com
        type: string
      id:
        example: 1
        type: integer
      is_admin:
        example: false
        type: boolean
      name:
        example: John Doe
        type: string
      phone:
        example: "+1234567890"
        type: string
      picture_url:
        example: https://example.com/avatar.jpg
        type: string
      provider:
        example: password
        type: string
    type: object
  internal_proj_users_handler.TokenResponse:
    properties:
      access_token:
        example: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
        type: string
      expires_in:
        example: 3600
        type: integer
      token_type:
        example: Bearer
        type: string
    type: object
  internal_proj_users_handler.UserProfileResponse:
    properties:
      data:
        $ref: '#/definitions/backend_internal_domain_models.UserProfile'
      success:
        example: true
        type: boolean
    type: object
  internal_proj_users_handler.UserResponse:
    properties:
      email:
        example: user@example.com
        type: string
      id:
        example: 1
        type: integer
      name:
        example: John Doe
        type: string
      picture_url:
        example: https://example.com/avatar.jpg
        type: string
    type: object
host: localhost:3000
info:
  contact:
    email: support@svetu.rs
    name: API Support
    url: https://svetu.rs/support
  description: API для платформы Sve Tu - маркетплейс объявлений
  license:
    name: MIT
    url: https://opensource.org/licenses/MIT
  termsOfService: https://svetu.rs/terms
  title: Sve Tu Marketplace API
  version: "1.0"
paths:
  /api/admin/categories/{category_id}/components:
    get:
      description: Возвращает кастомные компоненты для конкретной категории
      parameters:
      - description: ID категории
        in: path
        name: category_id
        required: true
        type: integer
      - description: Контекст использования
        in: query
        name: context
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            items:
              $ref: '#/definitions/backend_internal_domain_models.CustomUIComponentUsage'
            type: array
      security:
      - BearerAuth: []
      summary: Компоненты категории
      tags:
      - CustomComponents
  /api/admin/custom-components:
    get:
      description: Возвращает список всех кастомных UI компонентов
      parameters:
      - description: Фильтр по типу компонента
        in: query
        name: component_type
        type: string
      - description: Фильтр по активности
        in: query
        name: active
        type: boolean
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            items:
              $ref: '#/definitions/backend_internal_domain_models.CustomUIComponent'
            type: array
      security:
      - BearerAuth: []
      summary: Список компонентов
      tags:
      - CustomComponents
    post:
      consumes:
      - application/json
      description: Создает новый кастомный UI компонент
      parameters:
      - description: Данные компонента
        in: body
        name: component
        required: true
        schema:
          $ref: '#/definitions/backend_internal_domain_models.CreateCustomComponentRequest'
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            $ref: '#/definitions/backend_internal_domain_models.CustomUIComponent'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/backend_pkg_utils.ErrorResponseSwag'
      security:
      - BearerAuth: []
      summary: Создание кастомного компонента
      tags:
      - CustomComponents
  /api/admin/custom-components/{id}:
    delete:
      description: Удаляет кастомный UI компонент
      parameters:
      - description: ID компонента
        in: path
        name: id
        required: true
        type: integer
      responses:
        "204":
          description: Компонент удален
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/backend_pkg_utils.ErrorResponseSwag'
      security:
      - BearerAuth: []
      summary: Удаление компонента
      tags:
      - CustomComponents
    get:
      description: Получает кастомный UI компонент по ID
      parameters:
      - description: ID компонента
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/backend_internal_domain_models.CustomUIComponent'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/backend_pkg_utils.ErrorResponseSwag'
      security:
      - BearerAuth: []
      summary: Получение компонента
      tags:
      - CustomComponents
    put:
      consumes:
      - application/json
      description: Обновляет кастомный UI компонент
      parameters:
      - description: ID компонента
        in: path
        name: id
        required: true
        type: integer
      - description: Данные компонента
        in: body
        name: component
        required: true
        schema:
          $ref: '#/definitions/backend_internal_domain_models.UpdateCustomComponentRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/backend_internal_domain_models.CustomUIComponent'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/backend_pkg_utils.ErrorResponseSwag'
      security:
      - BearerAuth: []
      summary: Обновление компонента
      tags:
      - CustomComponents
  /api/admin/custom-components/templates:
    get:
      description: Возвращает список всех шаблонов компонентов
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            items:
              $ref: '#/definitions/backend_internal_domain_models.CustomUITemplate'
            type: array
      security:
      - BearerAuth: []
      summary: Список шаблонов
      tags:
      - CustomComponents
    post:
      consumes:
      - application/json
      description: Создает шаблон для кастомного компонента
      parameters:
      - description: Данные шаблона
        in: body
        name: template
        required: true
        schema:
          $ref: '#/definitions/backend_internal_domain_models.CreateTemplateRequest'
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            $ref: '#/definitions/backend_internal_domain_models.CustomUITemplate'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/backend_pkg_utils.ErrorResponseSwag'
      security:
      - BearerAuth: []
      summary: Создание шаблона
      tags:
      - CustomComponents
  /api/admin/custom-components/usage:
    get:
      description: Возвращает список всех использований компонентов с фильтрацией
      parameters:
      - description: ID компонента
        in: query
        name: component_id
        type: integer
      - description: ID категории
        in: query
        name: category_id
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            items:
              $ref: '#/definitions/backend_internal_domain_models.CustomUIComponentUsage'
            type: array
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/backend_pkg_utils.ErrorResponseSwag'
      security:
      - BearerAuth: []
      summary: Получение всех использований компонентов
      tags:
      - CustomComponents
    post:
      consumes:
      - application/json
      description: Добавляет использование компонента для конкретной категории
      parameters:
      - description: Данные использования
        in: body
        name: usage
        required: true
        schema:
          $ref: '#/definitions/backend_internal_domain_models.CreateComponentUsageRequest'
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            $ref: '#/definitions/backend_internal_domain_models.CustomUIComponentUsage'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/backend_pkg_utils.ErrorResponseSwag'
      security:
      - BearerAuth: []
      summary: Добавление использования компонента
      tags:
      - CustomComponents
  /api/admin/custom-components/usage/{id}:
    delete:
      description: Удаляет использование компонента для категории
      parameters:
      - description: ID использования
        in: path
        name: id
        required: true
        type: integer
      responses:
        "204":
          description: Использование удалено
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/backend_pkg_utils.ErrorResponseSwag'
      security:
      - BearerAuth: []
      summary: Удаление использования компонента
      tags:
      - CustomComponents
  /api/v1/admin-check/{email}:
    get:
      consumes:
      - application/json
      description: Checks if user with specified email is an administrator (no authorization
        required)
      parameters:
      - description: User email
        in: path
        name: email
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Admin status
          schema:
            $ref: '#/definitions/internal_proj_users_handler.AdminAdminsResponse'
        "400":
          description: Invalid request
          schema:
            $ref: '#/definitions/ErrorResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/ErrorResponse'
      summary: Public administrator check
      tags:
      - public
  /api/v1/admin/admins:
    get:
      consumes:
      - application/json
      description: Returns list of all system administrators
      produces:
      - application/json
      responses:
        "200":
          description: List of administrators
          schema:
            items:
              $ref: '#/definitions/backend_internal_domain_models.AdminUser'
            type: array
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/ErrorResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/ErrorResponse'
      security:
      - BearerAuth: []
      summary: Get all administrators
      tags:
      - admin-management
    post:
      consumes:
      - application/json
      description: Adds a new administrator by email
      parameters:
      - description: Administrator data
        in: body
        name: admin
        required: true
        schema:
          $ref: '#/definitions/backend_internal_domain_models.AdminUser'
      produces:
      - application/json
      responses:
        "200":
          description: Created administrator
          schema:
            $ref: '#/definitions/backend_internal_domain_models.AdminUser'
        "400":
          description: Invalid request
          schema:
            $ref: '#/definitions/ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/ErrorResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/ErrorResponse'
      security:
      - BearerAuth: []
      summary: Add new administrator
      tags:
      - admin-management
  /api/v1/admin/admins/{email}:
    delete:
      consumes:
      - application/json
      description: Removes administrator privileges from user by email
      parameters:
      - description: Administrator email
        in: path
        name: email
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Administrator removed
          schema:
            $ref: '#/definitions/internal_proj_users_handler.AdminMessageResponse'
        "400":
          description: Invalid request
          schema:
            $ref: '#/definitions/ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/ErrorResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/ErrorResponse'
      security:
      - BearerAuth: []
      summary: Remove administrator
      tags:
      - admin-management
  /api/v1/admin/admins/check/{email}:
    get:
      consumes:
      - application/json
      description: Checks if user with specified email is an administrator
      parameters:
      - description: User email
        in: path
        name: email
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Admin status
          schema:
            $ref: '#/definitions/internal_proj_users_handler.AdminAdminsResponse'
        "400":
          description: Invalid request
          schema:
            $ref: '#/definitions/ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/ErrorResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/ErrorResponse'
      security:
      - BearerAuth: []
      summary: Check administrator status
      tags:
      - admin-management
  /api/v1/admin/users:
    get:
      consumes:
      - application/json
      description: Returns paginated list of all users in the system
      parameters:
      - default: 1
        description: Page number
        in: query
        name: page
        type: integer
      - default: 10
        description: Items per page
        in: query
        maximum: 100
        minimum: 1
        name: limit
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: List of users
          schema:
            $ref: '#/definitions/internal_proj_users_handler.AdminUserListResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/ErrorResponse'
      security:
      - BearerAuth: []
      summary: Get all users (Admin)
      tags:
      - admin-users
  /api/v1/admin/users/{id}:
    delete:
      consumes:
      - application/json
      description: Permanently deletes a user from the system
      parameters:
      - description: User ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: User deleted
          schema:
            $ref: '#/definitions/internal_proj_users_handler.AdminMessageResponse'
        "400":
          description: Invalid user ID
          schema:
            $ref: '#/definitions/ErrorResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/ErrorResponse'
      security:
      - BearerAuth: []
      summary: Delete user (Admin)
      tags:
      - admin-users
    get:
      consumes:
      - application/json
      description: Returns detailed user information by user ID
      parameters:
      - description: User ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: User profile
          schema:
            $ref: '#/definitions/backend_internal_domain_models.UserProfile'
        "400":
          description: Invalid user ID
          schema:
            $ref: '#/definitions/ErrorResponse'
        "404":
          description: User not found
          schema:
            $ref: '#/definitions/ErrorResponse'
      security:
      - BearerAuth: []
      summary: Get user by ID (Admin)
      tags:
      - admin-users
    put:
      consumes:
      - application/json
      description: Updates user profile information by administrator
      parameters:
      - description: User ID
        in: path
        name: id
        required: true
        type: integer
      - description: User update data
        in: body
        name: body
        required: true
        schema:
          $ref: '#/definitions/backend_internal_domain_models.UserProfileUpdate'
      produces:
      - application/json
      responses:
        "200":
          description: Update successful
          schema:
            $ref: '#/definitions/internal_proj_users_handler.AdminMessageResponse'
        "400":
          description: Invalid request
          schema:
            $ref: '#/definitions/ErrorResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/ErrorResponse'
      security:
      - BearerAuth: []
      summary: Update user (Admin)
      tags:
      - admin-users
  /api/v1/admin/users/{id}/balance:
    get:
      consumes:
      - application/json
      description: Returns balance information for a specific user
      parameters:
      - description: User ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: User balance
          schema:
            $ref: '#/definitions/internal_proj_users_handler.AdminBalanceResponse'
        "400":
          description: Invalid user ID
          schema:
            $ref: '#/definitions/ErrorResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/ErrorResponse'
      security:
      - BearerAuth: []
      summary: Get user balance (Admin)
      tags:
      - admin-users
  /api/v1/admin/users/{id}/status:
    put:
      consumes:
      - application/json
      description: Updates user status (active, blocked, pending)
      parameters:
      - description: User ID
        in: path
        name: id
        required: true
        type: integer
      - description: Status update (active, blocked, pending)
        in: body
        name: body
        required: true
        schema:
          $ref: '#/definitions/internal_proj_users_handler.AdminStatusUpdateRequest'
      produces:
      - application/json
      responses:
        "200":
          description: Status updated
          schema:
            $ref: '#/definitions/internal_proj_users_handler.AdminMessageResponse'
        "400":
          description: Invalid status
          schema:
            $ref: '#/definitions/ErrorResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/ErrorResponse'
      security:
      - BearerAuth: []
      summary: Update user status (Admin)
      tags:
      - admin-users
  /api/v1/admin/users/{id}/transactions:
    get:
      consumes:
      - application/json
      description: Returns paginated transaction history for a specific user
      parameters:
      - description: User ID
        in: path
        name: id
        required: true
        type: integer
      - default: 20
        description: Number of items per page
        in: query
        name: limit
        type: integer
      - default: 0
        description: Number of items to skip
        in: query
        name: offset
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: List of transactions
          schema:
            $ref: '#/definitions/internal_proj_users_handler.AdminBalanceResponse'
        "400":
          description: Invalid user ID
          schema:
            $ref: '#/definitions/ErrorResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/ErrorResponse'
      security:
      - BearerAuth: []
      summary: Get user transactions (Admin)
      tags:
      - admin-users
  /api/v1/auth/login:
    post:
      consumes:
      - application/json
      description: Authenticates user and returns JWT access token
      parameters:
      - description: Login credentials
        in: body
        name: body
        required: true
        schema:
          $ref: '#/definitions/internal_proj_users_handler.LoginRequest'
      produces:
      - application/json
      responses:
        "200":
          description: Authentication successful
          schema:
            $ref: '#/definitions/internal_proj_users_handler.AuthResponse'
        "400":
          description: Invalid request
          schema:
            $ref: '#/definitions/ErrorResponse'
        "401":
          description: Invalid credentials
          schema:
            $ref: '#/definitions/ErrorResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/ErrorResponse'
      summary: Login with email and password
      tags:
      - auth
  /api/v1/auth/logout:
    post:
      consumes:
      - application/json
      description: Logs out the user by revoking all refresh tokens and clearing cookies
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            type: string
      security:
      - BearerAuth: []
      summary: Logout user
      tags:
      - auth
  /api/v1/auth/refresh:
    post:
      consumes:
      - application/json
      description: Refreshes expired access token using valid refresh token from cookie
      produces:
      - application/json
      responses:
        "200":
          description: New access token
          schema:
            $ref: '#/definitions/internal_proj_users_handler.TokenResponse'
        "401":
          description: Invalid or missing refresh token
          schema:
            $ref: '#/definitions/ErrorResponse'
      summary: Refresh access token
      tags:
      - auth
  /api/v1/auth/register:
    post:
      consumes:
      - application/json
      description: Creates a new user account and returns JWT access token
      parameters:
      - description: Registration data
        in: body
        name: body
        required: true
        schema:
          $ref: '#/definitions/internal_proj_users_handler.RegisterRequest'
      produces:
      - application/json
      responses:
        "200":
          description: Registration successful
          schema:
            $ref: '#/definitions/internal_proj_users_handler.AuthResponse'
        "400":
          description: Invalid request
          schema:
            $ref: '#/definitions/ErrorResponse'
        "409":
          description: User already exists
          schema:
            $ref: '#/definitions/ErrorResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/ErrorResponse'
      summary: Register new user
      tags:
      - auth
  /api/v1/reviews:
    get:
      consumes:
      - application/json
      description: Returns paginated list of reviews with filters
      parameters:
      - description: Entity type filter
        in: query
        name: entity_type
        type: string
      - description: Entity ID filter
        in: query
        name: entity_id
        type: integer
      - description: User ID filter
        in: query
        name: user_id
        type: integer
      - description: Minimum rating filter
        in: query
        name: min_rating
        type: integer
      - description: Maximum rating filter
        in: query
        name: max_rating
        type: integer
      - default: published
        description: Status filter
        in: query
        name: status
        type: string
      - default: date
        description: Sort by field
        in: query
        name: sort_by
        type: string
      - default: desc
        description: Sort order
        in: query
        name: sort_order
        type: string
      - default: 1
        description: Page number
        in: query
        name: page
        type: integer
      - default: 20
        description: Items per page
        in: query
        name: limit
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: List of reviews
          schema:
            $ref: '#/definitions/internal_proj_reviews_handler.ReviewsListResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/ErrorResponse'
      summary: Get reviews list
      tags:
      - reviews
    post:
      consumes:
      - application/json
      description: Creates a new review for a listing
      parameters:
      - description: Review data
        in: body
        name: review
        required: true
        schema:
          $ref: '#/definitions/backend_internal_domain_models.CreateReviewRequest'
      produces:
      - application/json
      responses:
        "200":
          description: Created review
          schema:
            $ref: '#/definitions/internal_proj_reviews_handler.ReviewResponse'
        "400":
          description: Invalid input
          schema:
            $ref: '#/definitions/ErrorResponse'
        "404":
          description: Listing not found
          schema:
            $ref: '#/definitions/ErrorResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/ErrorResponse'
      security:
      - BearerAuth: []
      summary: Create a new review
      tags:
      - reviews
  /api/v1/reviews/{id}:
    delete:
      consumes:
      - application/json
      description: Deletes a review by its author
      parameters:
      - description: Review ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: Review deleted successfully
          schema:
            $ref: '#/definitions/internal_proj_reviews_handler.ReviewMessageResponse'
        "400":
          description: Invalid review ID
          schema:
            $ref: '#/definitions/ErrorResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/ErrorResponse'
      security:
      - BearerAuth: []
      summary: Delete review
      tags:
      - reviews
    get:
      consumes:
      - application/json
      description: Returns a single review by its ID
      parameters:
      - description: Review ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: Review details
          schema:
            $ref: '#/definitions/internal_proj_reviews_handler.ReviewResponse'
        "400":
          description: Invalid review ID
          schema:
            $ref: '#/definitions/ErrorResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/ErrorResponse'
      summary: Get review by ID
      tags:
      - reviews
    put:
      consumes:
      - application/json
      description: Updates an existing review by its author
      parameters:
      - description: Review ID
        in: path
        name: id
        required: true
        type: integer
      - description: Updated review data
        in: body
        name: review
        required: true
        schema:
          $ref: '#/definitions/backend_internal_domain_models.Review'
      produces:
      - application/json
      responses:
        "200":
          description: Review updated successfully
          schema:
            $ref: '#/definitions/internal_proj_reviews_handler.ReviewMessageResponse'
        "400":
          description: Invalid request
          schema:
            $ref: '#/definitions/ErrorResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/ErrorResponse'
      security:
      - BearerAuth: []
      summary: Update review
      tags:
      - reviews
  /api/v1/reviews/{id}/photos:
    post:
      consumes:
      - multipart/form-data
      description: Uploads photos for an existing review
      parameters:
      - description: Review ID
        in: path
        name: id
        required: true
        type: integer
      - description: Photos to upload (max 10)
        in: formData
        name: photos
        required: true
        type: file
      produces:
      - application/json
      responses:
        "200":
          description: Photos uploaded successfully
          schema:
            $ref: '#/definitions/internal_proj_reviews_handler.PhotosResponse'
        "400":
          description: Invalid request
          schema:
            $ref: '#/definitions/ErrorResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/ErrorResponse'
      security:
      - BearerAuth: []
      summary: Upload review photos
      tags:
      - reviews
  /api/v1/reviews/{id}/response:
    post:
      consumes:
      - application/json
      description: Adds a response from the listing owner to a review
      parameters:
      - description: Review ID
        in: path
        name: id
        required: true
        type: integer
      - description: Response data
        in: body
        name: response
        required: true
        schema:
          $ref: '#/definitions/internal_proj_reviews_handler.ResponseRequest'
      produces:
      - application/json
      responses:
        "200":
          description: Response added successfully
          schema:
            $ref: '#/definitions/internal_proj_reviews_handler.ReviewMessageResponse'
        "400":
          description: Invalid request
          schema:
            $ref: '#/definitions/ErrorResponse'
        "404":
          description: Review not found
          schema:
            $ref: '#/definitions/ErrorResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/ErrorResponse'
      security:
      - BearerAuth: []
      summary: Add response to review
      tags:
      - reviews
  /api/v1/reviews/{id}/vote:
    post:
      consumes:
      - application/json
      description: Adds a helpful or unhelpful vote to a review
      parameters:
      - description: Review ID
        in: path
        name: id
        required: true
        type: integer
      - description: Vote data
        in: body
        name: vote
        required: true
        schema:
          $ref: '#/definitions/internal_proj_reviews_handler.VoteRequest'
      produces:
      - application/json
      responses:
        "200":
          description: Vote recorded successfully
          schema:
            $ref: '#/definitions/internal_proj_reviews_handler.ReviewMessageResponse'
        "400":
          description: Invalid request
          schema:
            $ref: '#/definitions/ErrorResponse'
        "404":
          description: Review not found
          schema:
            $ref: '#/definitions/ErrorResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/ErrorResponse'
      security:
      - BearerAuth: []
      summary: Vote for a review
      tags:
      - reviews
  /api/v1/reviews/rating/{type}/{id}:
    get:
      consumes:
      - application/json
      description: Returns average rating for a specific entity
      parameters:
      - description: Entity type
        in: path
        name: type
        required: true
        type: string
      - description: Entity ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: Entity rating
          schema:
            $ref: '#/definitions/internal_proj_reviews_handler.RatingResponse'
        "400":
          description: Invalid entity ID
          schema:
            $ref: '#/definitions/ErrorResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/ErrorResponse'
      summary: Get entity rating
      tags:
      - reviews
  /api/v1/reviews/stats:
    get:
      consumes:
      - application/json
      description: Returns review statistics for a specific entity
      parameters:
      - description: Entity type
        in: query
        name: entity_type
        type: string
      - description: Entity ID
        in: query
        name: entity_id
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: Review statistics
          schema:
            $ref: '#/definitions/backend_internal_domain_models.ReviewStats'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/ErrorResponse'
      summary: Get review statistics
      tags:
      - reviews
  /api/v1/reviews/stats/{type}/{id}:
    get:
      consumes:
      - application/json
      description: Returns detailed review statistics for a specific entity
      parameters:
      - description: Entity type
        in: path
        name: type
        required: true
        type: string
      - description: Entity ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: Entity review statistics
          schema:
            $ref: '#/definitions/backend_internal_domain_models.ReviewStats'
        "400":
          description: Invalid entity ID
          schema:
            $ref: '#/definitions/ErrorResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/ErrorResponse'
      summary: Get entity review statistics
      tags:
      - reviews
  /api/v1/reviews/storefront/{id}:
    get:
      consumes:
      - application/json
      description: Returns all reviews for a specific storefront
      parameters:
      - description: Storefront ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: Storefront reviews
          schema:
            $ref: '#/definitions/internal_proj_reviews_handler.ReviewsListResponse'
        "400":
          description: Invalid storefront ID
          schema:
            $ref: '#/definitions/ErrorResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/ErrorResponse'
      summary: Get storefront reviews
      tags:
      - reviews
  /api/v1/reviews/storefront/{id}/rating:
    get:
      consumes:
      - application/json
      description: Returns rating summary for a specific storefront
      parameters:
      - description: Storefront ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: Storefront rating summary
          schema:
            $ref: '#/definitions/backend_internal_domain_models.StorefrontRatingSummary'
        "400":
          description: Invalid storefront ID
          schema:
            $ref: '#/definitions/ErrorResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/ErrorResponse'
      summary: Get storefront rating summary
      tags:
      - reviews
  /api/v1/reviews/user/{id}:
    get:
      consumes:
      - application/json
      description: Returns all reviews received by a specific user
      parameters:
      - description: User ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: User reviews
          schema:
            $ref: '#/definitions/internal_proj_reviews_handler.ReviewsListResponse'
        "400":
          description: Invalid user ID
          schema:
            $ref: '#/definitions/ErrorResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/ErrorResponse'
      summary: Get user reviews
      tags:
      - reviews
  /api/v1/reviews/user/{id}/rating:
    get:
      consumes:
      - application/json
      description: Returns rating summary for a specific user
      parameters:
      - description: User ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: User rating summary
          schema:
            $ref: '#/definitions/backend_internal_domain_models.UserRatingSummary'
        "400":
          description: Invalid user ID
          schema:
            $ref: '#/definitions/ErrorResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/ErrorResponse'
      summary: Get user rating summary
      tags:
      - reviews
  /api/v1/users/{id}/profile:
    get:
      consumes:
      - application/json
      description: Returns public information about user by ID
      parameters:
      - description: User ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: Public user profile
          schema:
            $ref: '#/definitions/internal_proj_users_handler.PublicUserResponseWrapper'
        "400":
          description: Invalid user ID
          schema:
            $ref: '#/definitions/ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/ErrorResponse'
        "404":
          description: User not found
          schema:
            $ref: '#/definitions/ErrorResponse'
      security:
      - BearerAuth: []
      summary: Get public user profile
      tags:
      - users
  /api/v1/users/admin-check/{email}:
    get:
      consumes:
      - application/json
      description: Checks if user with specified email is administrator (simplified
        check by ID)
      parameters:
      - description: User email
        in: path
        name: email
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Admin status
          schema:
            $ref: '#/definitions/internal_proj_users_handler.AdminCheckResponseWrapper'
        "400":
          description: Email required
          schema:
            $ref: '#/definitions/ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/ErrorResponse'
        "404":
          description: User not found
          schema:
            $ref: '#/definitions/ErrorResponse'
      security:
      - BearerAuth: []
      summary: Check admin status (simple)
      tags:
      - users
  /api/v1/users/login:
    post:
      consumes:
      - application/json
      description: Авторизует пользователя по email и паролю, создает сессию и устанавливает
        session cookie
      parameters:
      - description: Данные для авторизации (email и password обязательны)
        in: body
        name: user
        required: true
        schema:
          $ref: '#/definitions/internal_proj_users_handler.LoginRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/internal_proj_users_handler.LoginResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/ErrorResponse'
      summary: Авторизация пользователя
      tags:
      - Users
  /api/v1/users/me:
    get:
      consumes:
      - application/json
      description: Returns full profile of the authenticated user
      produces:
      - application/json
      responses:
        "200":
          description: User profile
          schema:
            $ref: '#/definitions/internal_proj_users_handler.UserProfileResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/ErrorResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/ErrorResponse'
      security:
      - BearerAuth: []
      summary: Get current user profile
      tags:
      - users
    put:
      consumes:
      - application/json
      description: Updates profile of the authenticated user
      parameters:
      - description: Profile update data
        in: body
        name: profile
        required: true
        schema:
          $ref: '#/definitions/backend_internal_domain_models.UserProfileUpdate'
      produces:
      - application/json
      responses:
        "200":
          description: Profile updated successfully
          schema:
            $ref: '#/definitions/internal_proj_users_handler.MessageResponse'
        "400":
          description: Invalid request
          schema:
            $ref: '#/definitions/ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/ErrorResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/ErrorResponse'
      security:
      - BearerAuth: []
      summary: Update user profile
      tags:
      - users
  /api/v1/users/register:
    post:
      consumes:
      - application/json
      description: Создает нового пользователя в системе
      parameters:
      - description: Данные для регистрации (name, email, password обязательны, phone
          опционален)
        in: body
        name: user
        required: true
        schema:
          $ref: '#/definitions/internal_proj_users_handler.RegisterRequest'
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            $ref: '#/definitions/internal_proj_users_handler.RegisterResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/ErrorResponse'
      summary: Регистрация пользователя
      tags:
      - Users
  /auth/google:
    get:
      consumes:
      - application/json
      description: Redirects user to Google OAuth2 authorization page
      parameters:
      - description: URL to return after authentication
        in: query
        name: returnTo
        type: string
      produces:
      - application/json
      responses:
        "302":
          description: Redirect to Google OAuth
          schema:
            type: string
      summary: Initiate Google OAuth authentication
      tags:
      - auth
  /auth/google/callback:
    get:
      consumes:
      - application/json
      description: Processes the OAuth2 callback from Google and creates user session
      parameters:
      - description: Authorization code from Google
        in: query
        name: code
        required: true
        type: string
      produces:
      - application/json
      responses:
        "302":
          description: Redirect to frontend with session
          schema:
            type: string
        "500":
          description: Authentication failed
          schema:
            $ref: '#/definitions/ErrorResponse'
      summary: Handle Google OAuth callback
      tags:
      - auth
  /auth/session:
    get:
      consumes:
      - application/json
      description: Returns information about the currently authenticated user
      produces:
      - application/json
      responses:
        "200":
          description: Session information
          schema:
            $ref: '#/definitions/internal_proj_users_handler.SessionResponse'
      security:
      - BearerAuth: []
      summary: Get current session
      tags:
      - auth
securityDefinitions:
  Bearer:
    description: Bearer token для авторизации
    in: header
    name: Authorization
    type: apiKey
swagger: "2.0"
