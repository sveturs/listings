# Air Hot Reload для Backend

## Использование

```bash
# Запустить Air с hot-reload
make watch

# Или напрямую (из директории backend)
air

# С указанием конфига
air -c .air.toml
```

## Конфигурация

Файл `.air.toml` настроен для работы с проектом:

- **Автоматическая перезагрузка** при изменении `.go`, `.html`, `.tpl`, `.tmpl` файлов
- **Загрузка переменных** из `.env` файла
- **Логирование** в `tmp/app.log`
- **Исключение ненужных директорий** из наблюдения для производительности
- **Graceful shutdown** через SIGINT

## Структура

```
backend/
├── .air.toml          # Конфигурация Air
├── tmp/               # Временная директория Air
│   ├── main           # Скомпилированный бинарник
│   ├── app.log        # Логи приложения
│   └── build-errors.log # Ошибки сборки
└── scripts/
    └── air-run.sh     # Скрипт для загрузки .env (опционально)
```

## Проблемы и решения

### Проблема с переменными окружения
Если переменные из `.env` не загружаются, проверьте:
1. Файл `.env` существует в корне backend
2. Права доступа к файлу корректны
3. Формат переменных: `KEY=value` (без пробелов вокруг =)

### Высокое использование CPU на macOS
Добавьте больше исключений в `exclude_dir` для уменьшения количества отслеживаемых файлов.

### Порт занят
Если порт 3000 занят, остановите старый процесс:
```bash
lsof -ti:3000 | xargs kill -9
```

## Отладка

Посмотреть логи Air:
```bash
tail -f tmp/app.log
```

Посмотреть ошибки сборки:
```bash
cat tmp/build-errors.log
```
