<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <link rel="icon" href="%PUBLIC_URL%/favicon.ico" sizes="32x32">
  <link rel="icon" href="%PUBLIC_URL%/favicon.svg" type="image/svg+xml" sizes="any">
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="theme-color" content="#000000" />
  <meta
          name="description"
          content="Sve Tu - platforma za kupovinu i prodaju. Lako i brzo postavite oglas i pronađite ono što vam treba."
  />
  <link rel="apple-touch-icon" href="%PUBLIC_URL%/logo192.png" />
  <link rel="manifest" href="%PUBLIC_URL%/manifest.json" />

  <!-- Загрузим env.js перед React с автоопределением окружения -->
  <script>
    // Определяем режим (development или production) на основе URL
    const isLocalhost = window.location.hostname === 'localhost' || 
                        window.location.hostname === '127.0.0.1' ||
                        window.location.hostname.includes('192.168.');
    
    // Определяем какой env файл загружать
    const envFile = isLocalhost ? 'env.development.js' : 'env.production.js';
    
    // Создаем и загружаем скрипт
    const script = document.createElement('script');
    script.src = '%PUBLIC_URL%/' + envFile;
    script.onerror = function() {
      // Резервное решение если файл не найден
      window.ENV = {
        REACT_APP_BACKEND_URL: isLocalhost ? 'http://localhost:3000' : 'https://svetu.rs',
        REACT_APP_API_PREFIX: '/api',
        REACT_APP_AUTH_PREFIX: '/auth',
        REACT_APP_WEBSOCKET_URL: isLocalhost ? 'ws://localhost:3000/ws' : 'wss://svetu.rs/ws',
        REACT_APP_WS_URL: isLocalhost ? 'ws://localhost:3000/ws/chat' : 'wss://svetu.rs/ws/chat',
        REACT_APP_MINIO_URL: isLocalhost ? 'http://localhost:9000' : 'https://svetu.rs',
        REACT_APP_HOST: isLocalhost ? 'http://localhost:3001' : 'https://svetu.rs'
      };
      console.log('Using fallback ENV configuration for ' + (isLocalhost ? 'development' : 'production'));
    };
    script.onload = function() {
      console.log('ENV loaded from ' + envFile);
    };
    document.head.appendChild(script);
  </script>

  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-HZFSHZ22Y5"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
              new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
            j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.defer=true;j.src=
            'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-PPRMHNVK');
  </script>
  <!-- End Google Tag Manager -->

  <title>SveTu</title>
</head>
<body>
<!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-PPRMHNVK"
                  height="0" width="800" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->

<noscript>You need to enable JavaScript to run this app.</noscript>
<div id="root"></div>
</body>
</html>