<!DOCTYPE html>
<html>
<head>
    <title>Clear Auth</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 600px;
            margin: 50px auto;
            padding: 20px;
            background: #f5f5f5;
        }
        .container {
            background: white;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        button {
            background: #4CAF50;
            color: white;
            border: none;
            padding: 10px 20px;
            font-size: 16px;
            border-radius: 4px;
            cursor: pointer;
            margin: 5px;
        }
        button:hover {
            background: #45a049;
        }
        .log {
            margin-top: 20px;
            padding: 15px;
            background: #f0f0f0;
            border-radius: 4px;
            font-family: monospace;
            font-size: 14px;
            white-space: pre-wrap;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>–û—á–∏—Å—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏</h1>
        <p>–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —ç—Ç—É —Å—Ç—Ä–∞–Ω–∏—Ü—É –¥–ª—è —Ä–µ—à–µ–Ω–∏—è –ø—Ä–æ–±–ª–µ–º —Å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–µ–π</p>
        
        <button onclick="clearAll()">–û—á–∏—Å—Ç–∏—Ç—å –≤—Å–µ –¥–∞–Ω–Ω—ã–µ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏</button>
        <button onclick="clearTokens()">–û—á–∏—Å—Ç–∏—Ç—å —Ç–æ–ª—å–∫–æ —Ç–æ–∫–µ–Ω—ã</button>
        <button onclick="showCurrentData()">–ü–æ–∫–∞–∑–∞—Ç—å —Ç–µ–∫—É—â–∏–µ –¥–∞–Ω–Ω—ã–µ</button>
        
        <div id="log" class="log"></div>
    </div>

    <script>
        const log = document.getElementById('log');
        
        function addLog(message) {
            log.textContent += message + '\n';
        }
        
        function clearAll() {
            log.textContent = '';
            addLog('–ù–∞—á–∏–Ω–∞–µ–º –ø–æ–ª–Ω—É—é –æ—á–∏—Å—Ç–∫—É...');
            
            // –û—á–∏—â–∞–µ–º localStorage
            const localStorageKeys = ['svetu_user', 'svetu_access_token'];
            localStorageKeys.forEach(key => {
                if (localStorage.getItem(key)) {
                    localStorage.removeItem(key);
                    addLog(`‚úì –£–¥–∞–ª–µ–Ω localStorage: ${key}`);
                }
            });
            
            // –û—á–∏—â–∞–µ–º sessionStorage
            const sessionStorageKeys = ['svetu_access_token', 'svetu_user'];
            sessionStorageKeys.forEach(key => {
                if (sessionStorage.getItem(key)) {
                    sessionStorage.removeItem(key);
                    addLog(`‚úì –£–¥–∞–ª–µ–Ω sessionStorage: ${key}`);
                }
            });
            
            // –û—á–∏—â–∞–µ–º cookies
            document.cookie.split(";").forEach(c => {
                const eqPos = c.indexOf("=");
                const name = eqPos > -1 ? c.substr(0, eqPos).trim() : c.trim();
                if (name.includes('token') || name.includes('session')) {
                    document.cookie = `${name}=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/`;
                    document.cookie = `${name}=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/; domain=${window.location.hostname}`;
                    addLog(`‚úì –£–¥–∞–ª–µ–Ω cookie: ${name}`);
                }
            });
            
            addLog('\n‚úÖ –û—á–∏—Å—Ç–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞!');
            addLog('–¢–µ–ø–µ—Ä—å –≤—ã –º–æ–∂–µ—Ç–µ –ø–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å –≤–æ–π—Ç–∏ —Å–Ω–æ–≤–∞.');
            addLog('\n–ù–û–¢–ê: –ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞ —Å rate limit, –ø–æ–¥–æ–∂–¥–∏—Ç–µ 15 –º–∏–Ω—É—Ç –ø–µ—Ä–µ–¥ –Ω–æ–≤–æ–π –ø–æ–ø—ã—Ç–∫–æ–π.');
        }
        
        function clearTokens() {
            log.textContent = '';
            addLog('–û—á–∏—â–∞–µ–º —Ç–æ–ª—å–∫–æ —Ç–æ–∫–µ–Ω—ã...');
            
            // –£–¥–∞–ª—è–µ–º —Ç–æ–∫–µ–Ω—ã –∏–∑ sessionStorage
            if (sessionStorage.getItem('svetu_access_token')) {
                sessionStorage.removeItem('svetu_access_token');
                addLog('‚úì –£–¥–∞–ª–µ–Ω access token –∏–∑ sessionStorage');
            }
            
            // –£–¥–∞–ª—è–µ–º —Ç–æ–∫–µ–Ω –∏–∑ localStorage –µ—Å–ª–∏ –µ—Å—Ç—å
            const userData = localStorage.getItem('svetu_user');
            if (userData) {
                try {
                    const user = JSON.parse(userData);
                    delete user.accessToken;
                    localStorage.setItem('svetu_user', JSON.stringify(user));
                    addLog('‚úì –£–¥–∞–ª–µ–Ω access token –∏–∑ –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è');
                } catch (e) {
                    addLog('‚ö†Ô∏è –û—à–∏–±–∫–∞ –ø—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è');
                }
            }
            
            addLog('\n‚úÖ –¢–æ–∫–µ–Ω—ã –æ—á–∏—â–µ–Ω—ã!');
        }
        
        function showCurrentData() {
            log.textContent = '';
            addLog('=== –¢–µ–∫—É—â–∏–µ –¥–∞–Ω–Ω—ã–µ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ ===\n');
            
            // localStorage
            addLog('üì¶ localStorage:');
            ['svetu_user', 'svetu_access_token'].forEach(key => {
                const value = localStorage.getItem(key);
                if (value) {
                    addLog(`  ${key}: ${value.substring(0, 50)}...`);
                } else {
                    addLog(`  ${key}: (–ø—É—Å—Ç–æ)`);
                }
            });
            
            // sessionStorage
            addLog('\nüì¶ sessionStorage:');
            ['svetu_access_token', 'svetu_user'].forEach(key => {
                const value = sessionStorage.getItem(key);
                if (value) {
                    addLog(`  ${key}: ${value.substring(0, 50)}...`);
                } else {
                    addLog(`  ${key}: (–ø—É—Å—Ç–æ)`);
                }
            });
            
            // Cookies
            addLog('\nüç™ Cookies:');
            const cookies = document.cookie.split(';');
            cookies.forEach(cookie => {
                const [name, value] = cookie.split('=');
                if (name && (name.includes('token') || name.includes('session'))) {
                    addLog(`  ${name.trim()}: ${value ? value.substring(0, 30) + '...' : '(–ø—É—Å—Ç–æ)'}`);
                }
            });
            
            if (cookies.length === 0 || cookies[0] === '') {
                addLog('  (–Ω–µ—Ç cookies)');
            }
        }
        
        // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Ç–µ–∫—É—â–∏–µ –¥–∞–Ω–Ω—ã–µ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        showCurrentData();
    </script>
</body>
</html>